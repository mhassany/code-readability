{
    "url": "https://api.github.com/repos/pallets/flask/issues/3095",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/3095/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/3095/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/3095/events",
    "html_url": "https://github.com/pallets/flask/issues/3095",
    "id": 408558543,
    "node_id": "MDU6SXNzdWU0MDg1NTg1NDM=",
    "number": 3095,
    "title": "\"flask run\" should accept a command line option for FLASK_APP",
    "user": {
        "login": "jab",
        "id": 64992,
        "node_id": "MDQ6VXNlcjY0OTky",
        "avatar_url": "https://avatars1.githubusercontent.com/u/64992?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jab",
        "html_url": "https://github.com/jab",
        "followers_url": "https://api.github.com/users/jab/followers",
        "following_url": "https://api.github.com/users/jab/following{/other_user}",
        "gists_url": "https://api.github.com/users/jab/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jab/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jab/subscriptions",
        "organizations_url": "https://api.github.com/users/jab/orgs",
        "repos_url": "https://api.github.com/users/jab/repos",
        "events_url": "https://api.github.com/users/jab/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jab/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 7,
    "created_at": "2019-02-10T17:38:34Z",
    "updated_at": "2019-03-01T00:01:09Z",
    "closed_at": "2019-02-28T16:00:26Z",
    "author_association": "MEMBER",
    "body": "Currently, `flask run` can be controlled via one set of environment variables and a *different* set of command line options. In some cases there is overlap (e.g. `FLASK_RUN_PORT` and `--port`), but in other cases there is not.\r\n\r\nThe most problematic example is the flask app object. The [*only* way to specify this explicitly](http://flask.pocoo.org/docs/1.0/cli/#application-discovery) is via the `FLASK_APP` environment variable; there is no command line option you can pass `flask run` to specify this instead.\r\n\r\n(This is especially asymmetrical when using Flask with e.g. gunicorn, where the wsgi app [*must* be passed](https://docs.gunicorn.org/en/stable/run.html#gunicorn) via required positional command line argument.)\r\n\r\nWould you accept a patch to allow passing a command line option for FLASK_APP? Being forced to use an environment variable to set this value is less than ideal, as it forces writing this important value out-of-band into a shared mutable global namespace (the environment), rather than being able to pass it directly in-band to `flask run`.",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/462155142",
            "html_url": "https://github.com/pallets/flask/issues/3095#issuecomment-462155142",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/3095",
            "id": 462155142,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MjE1NTE0Mg==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-02-10T17:47:34Z",
            "updated_at": "2019-02-10T17:48:23Z",
            "author_association": "MEMBER",
            "body": "Not possible due to how click works. the app must be accessible at an earlier stage (since it can also add other `flask` subdommands). IIRC in an early version it was possible to use `flask [--debug] [--app NAME] <subcommand>` and @mitsuhiko then removed it because of issues with click."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/462155206",
            "html_url": "https://github.com/pallets/flask/issues/3095#issuecomment-462155206",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/3095",
            "id": 462155206,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MjE1NTIwNg==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-02-10T17:48:18Z",
            "updated_at": "2019-02-10T17:50:07Z",
            "author_association": "MEMBER",
            "body": "We had `--app` and `--debug` options initially, but they turned out to cause issues in the interaction between the app, the CLI, and the dev server. See #2292 for the last time I decided to check if it was possible.\r\n\r\nYou're welcome to work on this, but be prepared for the implementation to be *much* harder than you expect. It probably needs to be addressed in Click first."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/462551401",
            "html_url": "https://github.com/pallets/flask/issues/3095#issuecomment-462551401",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/3095",
            "id": 462551401,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MjU1MTQwMQ==",
            "user": {
                "login": "jab",
                "id": 64992,
                "node_id": "MDQ6VXNlcjY0OTky",
                "avatar_url": "https://avatars1.githubusercontent.com/u/64992?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/jab",
                "html_url": "https://github.com/jab",
                "followers_url": "https://api.github.com/users/jab/followers",
                "following_url": "https://api.github.com/users/jab/following{/other_user}",
                "gists_url": "https://api.github.com/users/jab/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/jab/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jab/subscriptions",
                "organizations_url": "https://api.github.com/users/jab/orgs",
                "repos_url": "https://api.github.com/users/jab/repos",
                "events_url": "https://api.github.com/users/jab/events{/privacy}",
                "received_events_url": "https://api.github.com/users/jab/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-02-12T00:19:54Z",
            "updated_at": "2019-02-12T00:19:54Z",
            "author_association": "MEMBER",
            "body": "Thanks for the background info @davidism!\r\n\r\n@mitsuhiko, do you feel this is still blocked on pallets/click#590 (as you originally mentioned a couple years ago in #1820)?"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/468374980",
            "html_url": "https://github.com/pallets/flask/issues/3095#issuecomment-468374980",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/3095",
            "id": 468374980,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2ODM3NDk4MA==",
            "user": {
                "login": "jab",
                "id": 64992,
                "node_id": "MDQ6VXNlcjY0OTky",
                "avatar_url": "https://avatars1.githubusercontent.com/u/64992?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/jab",
                "html_url": "https://github.com/jab",
                "followers_url": "https://api.github.com/users/jab/followers",
                "following_url": "https://api.github.com/users/jab/following{/other_user}",
                "gists_url": "https://api.github.com/users/jab/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/jab/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jab/subscriptions",
                "organizations_url": "https://api.github.com/users/jab/orgs",
                "repos_url": "https://api.github.com/users/jab/repos",
                "events_url": "https://api.github.com/users/jab/events{/privacy}",
                "received_events_url": "https://api.github.com/users/jab/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-02-28T18:04:09Z",
            "updated_at": "2019-02-28T18:04:53Z",
            "author_association": "MEMBER",
            "body": "Closing pending reply from @mitsuhiko (in which case it may be reopened) or more like WONTFIX?\r\n\r\nWhile we\u2019re at it, is supporting an --env option (as an alternative to the FLASK_ENV environment variable) worth considering? The fewer options that can *only* be configured via env vars (which are global, shared mutable state that is invisibly inherited by child processes) the better."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/468382205",
            "html_url": "https://github.com/pallets/flask/issues/3095#issuecomment-468382205",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/3095",
            "id": 468382205,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2ODM4MjIwNQ==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-02-28T18:25:08Z",
            "updated_at": "2019-02-28T18:25:08Z",
            "author_association": "MEMBER",
            "body": "`FLASK_ENV` is deliberately not an option on the command line or `app.run`.\r\n\r\nI closed this because it's been discussed before with no change in outcome, and I don't find it particularly useful to keep a tracking issue for it. The behavior has been this way for at least a couple years now, I don't think it matters one way or another at this point.\r\n\r\nAgain, you're welcome to work on it, if you manage to solve it I will gladly review a PR. Yes, it's still blocked on behavior in Click, so figuring out what to fix there is the first step."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/468484762",
            "html_url": "https://github.com/pallets/flask/issues/3095#issuecomment-468484762",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/3095",
            "id": 468484762,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2ODQ4NDc2Mg==",
            "user": {
                "login": "jab",
                "id": 64992,
                "node_id": "MDQ6VXNlcjY0OTky",
                "avatar_url": "https://avatars1.githubusercontent.com/u/64992?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/jab",
                "html_url": "https://github.com/jab",
                "followers_url": "https://api.github.com/users/jab/followers",
                "following_url": "https://api.github.com/users/jab/following{/other_user}",
                "gists_url": "https://api.github.com/users/jab/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/jab/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jab/subscriptions",
                "organizations_url": "https://api.github.com/users/jab/orgs",
                "repos_url": "https://api.github.com/users/jab/repos",
                "events_url": "https://api.github.com/users/jab/events{/privacy}",
                "received_events_url": "https://api.github.com/users/jab/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-02-28T23:43:52Z",
            "updated_at": "2019-02-28T23:43:52Z",
            "author_association": "MEMBER",
            "body": "> you're welcome to work on it, if you manage to solve it I will gladly review a PR. Yes, it's still blocked on behavior in Click, so figuring out what to fix there is the first step.\r\n\r\nThanks! Hope to get more time to look into this soon. \ud83e\udd1e"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/468488677",
            "html_url": "https://github.com/pallets/flask/issues/3095#issuecomment-468488677",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/3095",
            "id": 468488677,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2ODQ4ODY3Nw==",
            "user": {
                "login": "jab",
                "id": 64992,
                "node_id": "MDQ6VXNlcjY0OTky",
                "avatar_url": "https://avatars1.githubusercontent.com/u/64992?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/jab",
                "html_url": "https://github.com/jab",
                "followers_url": "https://api.github.com/users/jab/followers",
                "following_url": "https://api.github.com/users/jab/following{/other_user}",
                "gists_url": "https://api.github.com/users/jab/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/jab/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jab/subscriptions",
                "organizations_url": "https://api.github.com/users/jab/orgs",
                "repos_url": "https://api.github.com/users/jab/repos",
                "events_url": "https://api.github.com/users/jab/events{/privacy}",
                "received_events_url": "https://api.github.com/users/jab/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-03-01T00:01:09Z",
            "updated_at": "2019-03-01T00:01:09Z",
            "author_association": "MEMBER",
            "body": "> `FLASK_ENV` is deliberately not an option on the command line or `app.run`.\r\n\r\n(Interesting! Just spent some time trying to find if this is written down somewhere and only found https://github.com/pallets/flask/issues/2264#issuecomment-303640162, which is outdated and no longer true. Curious to understand this more. Thanks again for your consideration.)"
        }
    ]
}