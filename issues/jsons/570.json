{
    "url": "https://api.github.com/repos/pallets/flask/issues/570",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/570/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/570/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/570/events",
    "html_url": "https://github.com/pallets/flask/issues/570",
    "id": 5902167,
    "node_id": "MDU6SXNzdWU1OTAyMTY3",
    "number": 570,
    "title": "Warn or raise when overriding an endpoint",
    "user": {
        "login": "SimonSapin",
        "id": 291359,
        "node_id": "MDQ6VXNlcjI5MTM1OQ==",
        "avatar_url": "https://avatars0.githubusercontent.com/u/291359?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/SimonSapin",
        "html_url": "https://github.com/SimonSapin",
        "followers_url": "https://api.github.com/users/SimonSapin/followers",
        "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
        "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
        "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
        "repos_url": "https://api.github.com/users/SimonSapin/repos",
        "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
        "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2012-07-29T08:41:40Z",
    "updated_at": "2013-07-09T22:58:53Z",
    "closed_at": "2012-10-07T15:12:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "It is apparently a common mistake to make multiple/distinct view functions sharing the same endpoint, the last overriding the earlier ones in the `app.view_functions` dict.\n\nWith a decorator: http://stackoverflow.com/questions/11064263/flask-custom-decorator-breaks-the-routing\nWith class-based views: http://stackoverflow.com/questions/11700698/flask-route-query-parameter\n\nIs there an use case to using `app.route()` or `app.add_url_rule()` with an existing endpoint and overriding it? I think it is more often a mistake than not. I suggest that such cases issue a warning or even raise an exception, in order to catch the mistake early. In uncommon scenarios where overriding is actually desired, the user can always use `del app.view_functions[endpoint]` before registering the new function.\n\n(I can provide a patch, but I\u2019d like to discuss the idea first.)\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/8635005",
            "html_url": "https://github.com/pallets/flask/issues/570#issuecomment-8635005",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/570",
            "id": 8635005,
            "node_id": "MDEyOklzc3VlQ29tbWVudDg2MzUwMDU=",
            "user": {
                "login": "YoavShapira",
                "id": 29384,
                "node_id": "MDQ6VXNlcjI5Mzg0",
                "avatar_url": "https://avatars3.githubusercontent.com/u/29384?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/YoavShapira",
                "html_url": "https://github.com/YoavShapira",
                "followers_url": "https://api.github.com/users/YoavShapira/followers",
                "following_url": "https://api.github.com/users/YoavShapira/following{/other_user}",
                "gists_url": "https://api.github.com/users/YoavShapira/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/YoavShapira/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/YoavShapira/subscriptions",
                "organizations_url": "https://api.github.com/users/YoavShapira/orgs",
                "repos_url": "https://api.github.com/users/YoavShapira/repos",
                "events_url": "https://api.github.com/users/YoavShapira/events{/privacy}",
                "received_events_url": "https://api.github.com/users/YoavShapira/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-09-17T23:45:14Z",
            "updated_at": "2012-09-17T23:45:14Z",
            "author_association": "NONE",
            "body": "+1, seems like a good idea to me. I'd appreciate it as a user. Happy to write a patch or work with you on one, Simon.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/8642379",
            "html_url": "https://github.com/pallets/flask/issues/570#issuecomment-8642379",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/570",
            "id": 8642379,
            "node_id": "MDEyOklzc3VlQ29tbWVudDg2NDIzNzk=",
            "user": {
                "login": "SimonSapin",
                "id": 291359,
                "node_id": "MDQ6VXNlcjI5MTM1OQ==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/291359?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/SimonSapin",
                "html_url": "https://github.com/SimonSapin",
                "followers_url": "https://api.github.com/users/SimonSapin/followers",
                "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}",
                "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions",
                "organizations_url": "https://api.github.com/users/SimonSapin/orgs",
                "repos_url": "https://api.github.com/users/SimonSapin/repos",
                "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}",
                "received_events_url": "https://api.github.com/users/SimonSapin/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-09-18T06:04:20Z",
            "updated_at": "2012-09-18T06:04:20Z",
            "author_association": "CONTRIBUTOR",
            "body": "Wow, I had forgotten about this. @YoavShapira , go ahead and write the patch if you like, and mention this issue\u2019s number in the pull request. I can review it then, but unfortunately I can\u2019t help more than that in getting it merged :)\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/8660811",
            "html_url": "https://github.com/pallets/flask/issues/570#issuecomment-8660811",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/570",
            "id": 8660811,
            "node_id": "MDEyOklzc3VlQ29tbWVudDg2NjA4MTE=",
            "user": {
                "login": "YoavShapira",
                "id": 29384,
                "node_id": "MDQ6VXNlcjI5Mzg0",
                "avatar_url": "https://avatars3.githubusercontent.com/u/29384?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/YoavShapira",
                "html_url": "https://github.com/YoavShapira",
                "followers_url": "https://api.github.com/users/YoavShapira/followers",
                "following_url": "https://api.github.com/users/YoavShapira/following{/other_user}",
                "gists_url": "https://api.github.com/users/YoavShapira/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/YoavShapira/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/YoavShapira/subscriptions",
                "organizations_url": "https://api.github.com/users/YoavShapira/orgs",
                "repos_url": "https://api.github.com/users/YoavShapira/repos",
                "events_url": "https://api.github.com/users/YoavShapira/events{/privacy}",
                "received_events_url": "https://api.github.com/users/YoavShapira/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-09-18T16:27:29Z",
            "updated_at": "2012-09-18T16:27:29Z",
            "author_association": "NONE",
            "body": "No problem, will do.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/8667200",
            "html_url": "https://github.com/pallets/flask/issues/570#issuecomment-8667200",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/570",
            "id": 8667200,
            "node_id": "MDEyOklzc3VlQ29tbWVudDg2NjcyMDA=",
            "user": {
                "login": "YoavShapira",
                "id": 29384,
                "node_id": "MDQ6VXNlcjI5Mzg0",
                "avatar_url": "https://avatars3.githubusercontent.com/u/29384?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/YoavShapira",
                "html_url": "https://github.com/YoavShapira",
                "followers_url": "https://api.github.com/users/YoavShapira/followers",
                "following_url": "https://api.github.com/users/YoavShapira/following{/other_user}",
                "gists_url": "https://api.github.com/users/YoavShapira/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/YoavShapira/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/YoavShapira/subscriptions",
                "organizations_url": "https://api.github.com/users/YoavShapira/orgs",
                "repos_url": "https://api.github.com/users/YoavShapira/repos",
                "events_url": "https://api.github.com/users/YoavShapira/events{/privacy}",
                "received_events_url": "https://api.github.com/users/YoavShapira/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-09-18T19:31:41Z",
            "updated_at": "2012-09-18T19:32:52Z",
            "author_association": "NONE",
            "body": "Do people have a preference regarding raising an exception, logging a warning, or returning False (or another value maybe) from the add_url_rule method? Whichever you prefer, I'll do and send in a pull request.\n\nHere's the \"log a warning\" approach, with a matching unit test: https://github.com/YoavShapira/flask/commit/859f091d187f8491529ce39a3deb7c6cc0ab4df6\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/19433216",
            "html_url": "https://github.com/pallets/flask/issues/570#issuecomment-19433216",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/570",
            "id": 19433216,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE5NDMzMjE2",
            "user": {
                "login": "mrjoes",
                "id": 179880,
                "node_id": "MDQ6VXNlcjE3OTg4MA==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179880?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mrjoes",
                "html_url": "https://github.com/mrjoes",
                "followers_url": "https://api.github.com/users/mrjoes/followers",
                "following_url": "https://api.github.com/users/mrjoes/following{/other_user}",
                "gists_url": "https://api.github.com/users/mrjoes/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mrjoes/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mrjoes/subscriptions",
                "organizations_url": "https://api.github.com/users/mrjoes/orgs",
                "repos_url": "https://api.github.com/users/mrjoes/repos",
                "events_url": "https://api.github.com/users/mrjoes/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mrjoes/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2013-06-14T00:25:04Z",
            "updated_at": "2013-06-14T00:32:17Z",
            "author_association": "CONTRIBUTOR",
            "body": "This fix broke compatibility with class-based views/bound methods.\n\nSimplified flask-admin case:\n\n``` python\nfrom flask import Flask, Blueprint\n\napp = Flask(__name__)\n\nclass Dummy(object):\n    def __init__(self, app, name):\n        self.name = name\n\n        bp = Blueprint(name, __name__)\n        bp.add_url_rule('/', 'view', self.view)\n        bp.add_url_rule('/<test>/', 'view', self.view)\n\n        app.register_blueprint(bp)\n\n    def view(self, test=None):\n        return 'hi'\n\nobj1 = Dummy(app, 'test')\napp.run(port=8002)\n```\n\nIn Flask 0.9 it works as expected, but in Flask 0.10 it does not.\n\nCased by `is` check:\n\n``` python\n> obj.view is obj.view\nFalse\n```\n"
        }
    ]
}