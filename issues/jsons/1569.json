{
    "url": "https://api.github.com/repos/pallets/flask/issues/1569",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1569/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1569/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1569/events",
    "html_url": "https://github.com/pallets/flask/issues/1569",
    "id": 106311490,
    "node_id": "MDU6SXNzdWUxMDYzMTE0OTA=",
    "number": 1569,
    "title": "Flask Streaming Jsonify",
    "user": {
        "login": "BrendanBall",
        "id": 6750434,
        "node_id": "MDQ6VXNlcjY3NTA0MzQ=",
        "avatar_url": "https://avatars3.githubusercontent.com/u/6750434?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BrendanBall",
        "html_url": "https://github.com/BrendanBall",
        "followers_url": "https://api.github.com/users/BrendanBall/followers",
        "following_url": "https://api.github.com/users/BrendanBall/following{/other_user}",
        "gists_url": "https://api.github.com/users/BrendanBall/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/BrendanBall/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/BrendanBall/subscriptions",
        "organizations_url": "https://api.github.com/users/BrendanBall/orgs",
        "repos_url": "https://api.github.com/users/BrendanBall/repos",
        "events_url": "https://api.github.com/users/BrendanBall/events{/privacy}",
        "received_events_url": "https://api.github.com/users/BrendanBall/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2015-09-14T10:12:00Z",
    "updated_at": "2018-03-21T19:44:15Z",
    "closed_at": "2015-10-13T15:23:22Z",
    "author_association": "NONE",
    "body": "Jsonify doesn't work with streaming in flask.\nIf I have a generator in a method that calls `yield jsonify({'test':'test'})`\n\nand I call the generator with \n`return Response(stream_with_context(generator()), mimetype='application/json')`\n\nthen flask throws an error saying `application must write bytes`. \nFor now I have resorted to using plain python `json.dumps(dict)`\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/140120813",
            "html_url": "https://github.com/pallets/flask/issues/1569#issuecomment-140120813",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1569",
            "id": 140120813,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE0MDEyMDgxMw==",
            "user": {
                "login": "mitchfriedman",
                "id": 3804864,
                "node_id": "MDQ6VXNlcjM4MDQ4NjQ=",
                "avatar_url": "https://avatars2.githubusercontent.com/u/3804864?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mitchfriedman",
                "html_url": "https://github.com/mitchfriedman",
                "followers_url": "https://api.github.com/users/mitchfriedman/followers",
                "following_url": "https://api.github.com/users/mitchfriedman/following{/other_user}",
                "gists_url": "https://api.github.com/users/mitchfriedman/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mitchfriedman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mitchfriedman/subscriptions",
                "organizations_url": "https://api.github.com/users/mitchfriedman/orgs",
                "repos_url": "https://api.github.com/users/mitchfriedman/repos",
                "events_url": "https://api.github.com/users/mitchfriedman/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mitchfriedman/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-09-14T15:45:18Z",
            "updated_at": "2015-09-14T15:45:18Z",
            "author_association": "NONE",
            "body": "I may be mistaken, but I think jsonify returns a Response object, so trying to create another Response with a Response as the first argument will fail, as expected.  On the other hand, json.dumps(dict) returns a string, as expected, so creating a Response with a string works correctly\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/140149613",
            "html_url": "https://github.com/pallets/flask/issues/1569#issuecomment-140149613",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1569",
            "id": 140149613,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE0MDE0OTYxMw==",
            "user": {
                "login": "aftalavera",
                "id": 1153435,
                "node_id": "MDQ6VXNlcjExNTM0MzU=",
                "avatar_url": "https://avatars0.githubusercontent.com/u/1153435?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/aftalavera",
                "html_url": "https://github.com/aftalavera",
                "followers_url": "https://api.github.com/users/aftalavera/followers",
                "following_url": "https://api.github.com/users/aftalavera/following{/other_user}",
                "gists_url": "https://api.github.com/users/aftalavera/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/aftalavera/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/aftalavera/subscriptions",
                "organizations_url": "https://api.github.com/users/aftalavera/orgs",
                "repos_url": "https://api.github.com/users/aftalavera/repos",
                "events_url": "https://api.github.com/users/aftalavera/events{/privacy}",
                "received_events_url": "https://api.github.com/users/aftalavera/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-09-14T17:21:17Z",
            "updated_at": "2015-09-14T17:45:17Z",
            "author_association": "NONE",
            "body": "It will be a matter of pulling the data out of the response object returned by jsonify like:\n\nyield jsonify({'test':'test'}).data\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/147703456",
            "html_url": "https://github.com/pallets/flask/issues/1569#issuecomment-147703456",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1569",
            "id": 147703456,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE0NzcwMzQ1Ng==",
            "user": {
                "login": "nrvnrvn",
                "id": 2492836,
                "node_id": "MDQ6VXNlcjI0OTI4MzY=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/2492836?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/nrvnrvn",
                "html_url": "https://github.com/nrvnrvn",
                "followers_url": "https://api.github.com/users/nrvnrvn/followers",
                "following_url": "https://api.github.com/users/nrvnrvn/following{/other_user}",
                "gists_url": "https://api.github.com/users/nrvnrvn/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/nrvnrvn/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/nrvnrvn/subscriptions",
                "organizations_url": "https://api.github.com/users/nrvnrvn/orgs",
                "repos_url": "https://api.github.com/users/nrvnrvn/repos",
                "events_url": "https://api.github.com/users/nrvnrvn/events{/privacy}",
                "received_events_url": "https://api.github.com/users/nrvnrvn/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-10-13T12:39:19Z",
            "updated_at": "2015-10-13T12:39:19Z",
            "author_association": "CONTRIBUTOR",
            "body": "This is not Flask's issue - https://bugs.python.org/issue14573\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/147749021",
            "html_url": "https://github.com/pallets/flask/issues/1569#issuecomment-147749021",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1569",
            "id": 147749021,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE0Nzc0OTAyMQ==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-10-13T15:23:22Z",
            "updated_at": "2015-10-13T15:23:22Z",
            "author_association": "MEMBER",
            "body": "`jsonify` is for producing a response with JSON data, use `flask.json.dumps` to just produce the JSON data.  Your use case doesn't make sense though, as you're not streaming anything: the JSON is generated and returned in a single yield.  It would be equivalent to just return `jsonify` directly.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/375071833",
            "html_url": "https://github.com/pallets/flask/issues/1569#issuecomment-375071833",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1569",
            "id": 375071833,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTA3MTgzMw==",
            "user": {
                "login": "SumNeuron",
                "id": 22868585,
                "node_id": "MDQ6VXNlcjIyODY4NTg1",
                "avatar_url": "https://avatars3.githubusercontent.com/u/22868585?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/SumNeuron",
                "html_url": "https://github.com/SumNeuron",
                "followers_url": "https://api.github.com/users/SumNeuron/followers",
                "following_url": "https://api.github.com/users/SumNeuron/following{/other_user}",
                "gists_url": "https://api.github.com/users/SumNeuron/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/SumNeuron/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/SumNeuron/subscriptions",
                "organizations_url": "https://api.github.com/users/SumNeuron/orgs",
                "repos_url": "https://api.github.com/users/SumNeuron/repos",
                "events_url": "https://api.github.com/users/SumNeuron/events{/privacy}",
                "received_events_url": "https://api.github.com/users/SumNeuron/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-03-21T19:44:15Z",
            "updated_at": "2018-03-21T19:44:15Z",
            "author_association": "NONE",
            "body": "I would like to reopen this issue, but under another premise. I am using event stream and yield with flask. All of it is great. I have parse my dictionary into single line json and it works fine. Then, I use python's json.dumps to convert my dictionary into json and the event stream breaks. I know that this sounds like a python issue. However, I have tested hand made json vs python's json.dumps on simple objects e.g. {\"foo\":\"bar\"} and this still fails only for python dumps. I have checked for weird quoting and can not spot it. So I would appreciate it if you might look into it. Hand made '{\"foo\":\"bar\"}' works, json.dumps({\"foo\":\"bar\"}) which gives the same result does not...\r\n"
        }
    ]
}