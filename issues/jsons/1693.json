{
    "url": "https://api.github.com/repos/pallets/flask/issues/1693",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1693/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1693/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1693/events",
    "html_url": "https://github.com/pallets/flask/issues/1693",
    "id": 126396665,
    "node_id": "MDU6SXNzdWUxMjYzOTY2NjU=",
    "number": 1693,
    "title": "Flask resumes upload on restart",
    "user": {
        "login": "johnathanz",
        "id": 1593039,
        "node_id": "MDQ6VXNlcjE1OTMwMzk=",
        "avatar_url": "https://avatars0.githubusercontent.com/u/1593039?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/johnathanz",
        "html_url": "https://github.com/johnathanz",
        "followers_url": "https://api.github.com/users/johnathanz/followers",
        "following_url": "https://api.github.com/users/johnathanz/following{/other_user}",
        "gists_url": "https://api.github.com/users/johnathanz/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/johnathanz/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/johnathanz/subscriptions",
        "organizations_url": "https://api.github.com/users/johnathanz/orgs",
        "repos_url": "https://api.github.com/users/johnathanz/repos",
        "events_url": "https://api.github.com/users/johnathanz/events{/privacy}",
        "received_events_url": "https://api.github.com/users/johnathanz/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2016-01-13T11:19:14Z",
    "updated_at": "2018-03-10T05:22:52Z",
    "closed_at": "2016-01-24T17:26:38Z",
    "author_association": "NONE",
    "body": "This may not be an Issue / Bug. But may be due to my newness to Flask & lack of understanding.\n\nI'm running Flask on a Raspberry Pi (Raspbarian OS). There's PUT path set up to upload files to a certain directory.\n\nDuring one of my test runs, I killed Flask using Ctrl-C.\n\nThereafter:\n1) Start python program, which starts Flask - no issues\n2) Calls the PUT Path to upload 3 files - no issues\n3) After the 3 files are uploaded (from (2)), Flask attempts to resume on a file that was perhaps in progress when I first Ctrl-C the program. The file `TEST_0059.MP4` in this case\n\nThis is the immediate error message - occurs **everytime** after files are uploaded\n\n```\n<path>/lib/python5.4/site-packages/werkzeug/filesystem.py:63: BrokenFilesystemWarning: Detected a misconfigured UNIX filesystem: Will use UTF-8 as filesystem encoding instead of 'ascii'\n  BrokenFilesystemWarning)\n192.168.1.8 - - [13/Jan/2016 22:03:50] \"PUT /uploadMedia/TEST_0059.MP4 HTTP/1.1\" 500 -\nTraceback (most recent call last):\n  File \"<path>/lib/python3.4/site-packages/flask/app.py\", line 1836, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"<path>/lib/python3.4/site-packages/flask/app.py\", line 1820, in wsgi_app\n    response = self.make_response(self.handle_exception(e))\n  File \"<path>/lib/python3.4/site-packages/flask/app.py\", line 1403, in handle_exception\n    reraise(exc_type, exc_value, tb)\n  File \"<path>/lib/python3.4/site-packages/flask/_compat.py\", line 33, in reraise\n    raise value\n  File \"<path>/lib/python3.4/site-packages/flask/app.py\", line 1817, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"<path>/lib/python3.4/site-packages/flask/app.py\", line 1477, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n  File \"<path>/lib/python3.4/site-packages/flask/app.py\", line 1381, in handle_user_exception\n    reraise(exc_type, exc_value, tb)\n  File \"<path>/lib/python3.4/site-packages/flask/_compat.py\", line 33, in reraise\n    raise value\n  File \"<path>/lib/python3.4/site-packages/flask/app.py\", line 1475, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"<path>/lib/python3.4/site-packages/flask/app.py\", line 1461, in dispatch_request\n    return self.view_functions[rule.endpoint](**req.view_args)\n  File \"<path>/cps_media_services.py\", line 59, in to_hub_via_wifi\n    f.write(request.data)\n  File \"<path>/lib/python3.4/site-packages/werkzeug/local.py\", line 342, in __getattr__\n    return getattr(self._get_current_object(), name)\n  File \"<path>/lib/python3.4/site-packages/werkzeug/utils.py\", line 73, in __get__\n    value = self.func(obj)\n  File \"<path>/lib/python3.4/site-packages/werkzeug/wrappers.py\", line 446, in data\n    return self.get_data(parse_form_data=True)\n  File \"<path>/lib/python3.4/site-packages/werkzeug/wrappers.py\", line 477, in get_data\n    rv = self.stream.read()\n  File \"<path>/lib/python3.4/site-packages/werkzeug/wsgi.py\", line 1003, in read\n    read = self._read(to_read)\nMemoryError\n```\n\n**Questions:**\n- What's telling Flask to resume the PUT operation that I killed earlier?\n- Doesn't restarting Flask clear any previous states it had?\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/173212544",
            "html_url": "https://github.com/pallets/flask/issues/1693#issuecomment-173212544",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1693",
            "id": 173212544,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE3MzIxMjU0NA==",
            "user": {
                "login": "tkanov",
                "id": 1116572,
                "node_id": "MDQ6VXNlcjExMTY1NzI=",
                "avatar_url": "https://avatars2.githubusercontent.com/u/1116572?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/tkanov",
                "html_url": "https://github.com/tkanov",
                "followers_url": "https://api.github.com/users/tkanov/followers",
                "following_url": "https://api.github.com/users/tkanov/following{/other_user}",
                "gists_url": "https://api.github.com/users/tkanov/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/tkanov/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/tkanov/subscriptions",
                "organizations_url": "https://api.github.com/users/tkanov/orgs",
                "repos_url": "https://api.github.com/users/tkanov/repos",
                "events_url": "https://api.github.com/users/tkanov/events{/privacy}",
                "received_events_url": "https://api.github.com/users/tkanov/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-01-20T14:01:52Z",
            "updated_at": "2016-01-20T14:01:52Z",
            "author_association": "NONE",
            "body": "An interesting issue. Could you please upload the full log starting from the first file upload right before the Ctrl+C?\nRegarding what's telling Flask to resume - what do you use to actually make PUTs? \n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/174321232",
            "html_url": "https://github.com/pallets/flask/issues/1693#issuecomment-174321232",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1693",
            "id": 174321232,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE3NDMyMTIzMg==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-01-24T17:26:38Z",
            "updated_at": "2016-01-24T17:26:38Z",
            "author_association": "MEMBER",
            "body": "This doesn't sound like an error with Flask or Werkzeug.  Either the client sending the data, or the server receiving it is trying to resume the upload after a disconnection.  The error is just saying that it couldn't be completed, it doesn't prevent the app from running.  Closing, this needs more information about the issue, such as code to reproduce it, to consider reopening.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/372004249",
            "html_url": "https://github.com/pallets/flask/issues/1693#issuecomment-372004249",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1693",
            "id": 372004249,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjAwNDI0OQ==",
            "user": {
                "login": "vhosakot",
                "id": 8882663,
                "node_id": "MDQ6VXNlcjg4ODI2NjM=",
                "avatar_url": "https://avatars0.githubusercontent.com/u/8882663?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/vhosakot",
                "html_url": "https://github.com/vhosakot",
                "followers_url": "https://api.github.com/users/vhosakot/followers",
                "following_url": "https://api.github.com/users/vhosakot/following{/other_user}",
                "gists_url": "https://api.github.com/users/vhosakot/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/vhosakot/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/vhosakot/subscriptions",
                "organizations_url": "https://api.github.com/users/vhosakot/orgs",
                "repos_url": "https://api.github.com/users/vhosakot/repos",
                "events_url": "https://api.github.com/users/vhosakot/events{/privacy}",
                "received_events_url": "https://api.github.com/users/vhosakot/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-03-10T05:22:52Z",
            "updated_at": "2018-03-10T05:22:52Z",
            "author_association": "NONE",
            "body": "\r\n\r\nI saw the `BrokenFilesystemWarning: Detected a misconfigured UNIX filesystem` error too. After digging the code, I saw that this error is harmless and just a warning in `/usr/local/lib/python2.7/dist-packages/werkzeug/filesystem.py`:\r\n\r\n            warnings.warn(\r\n                'Detected a misconfigured UNIX filesystem: Will use UTF-8 as '\r\n                'filesystem encoding instead of {0!r}'.format(rv),\r\n                BrokenFilesystemWarning)\r\n\r\nSo, I would not worry about the `BrokenFilesystemWarning: Detected a misconfigured UNIX filesystem` warning."
        }
    ]
}