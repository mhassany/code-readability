{
    "url": "https://api.github.com/repos/pallets/flask/issues/1417",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1417/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1417/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1417/events",
    "html_url": "https://github.com/pallets/flask/issues/1417",
    "id": 65902688,
    "node_id": "MDU6SXNzdWU2NTkwMjY4OA==",
    "number": 1417,
    "title": "OperationalError: no such table: entries",
    "user": {
        "login": "dayiguizhen",
        "id": 9543865,
        "node_id": "MDQ6VXNlcjk1NDM4NjU=",
        "avatar_url": "https://avatars3.githubusercontent.com/u/9543865?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dayiguizhen",
        "html_url": "https://github.com/dayiguizhen",
        "followers_url": "https://api.github.com/users/dayiguizhen/followers",
        "following_url": "https://api.github.com/users/dayiguizhen/following{/other_user}",
        "gists_url": "https://api.github.com/users/dayiguizhen/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/dayiguizhen/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/dayiguizhen/subscriptions",
        "organizations_url": "https://api.github.com/users/dayiguizhen/orgs",
        "repos_url": "https://api.github.com/users/dayiguizhen/repos",
        "events_url": "https://api.github.com/users/dayiguizhen/events{/privacy}",
        "received_events_url": "https://api.github.com/users/dayiguizhen/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 7,
    "created_at": "2015-04-02T10:51:42Z",
    "updated_at": "2015-04-08T10:33:47Z",
    "closed_at": "2015-04-08T10:33:47Z",
    "author_association": "NONE",
    "body": "I am learning flask framework and want to set up flaskr by following the flask tutorial. In the end I am getting the error:OperationalError: no such table: entries.\n\nthe code of flaskr.py is here below\n\n```\nimport os\nfrom sqlite3 import dbapi2 as sqlite3\nfrom flask import Flask, request, session, g, redirect, url_for, abort, render_template, flash\n\napp = Flask(__name__);\n\napp.config.update(dict(\n    DATABASE=os.path.join(app.root_path,'flaskr.db'),\n    DEBUG=True,\n    SECRET_KEY='development key',\n    USERNAME='admin',\n    PASSWORD='default'\n    ))\n\napp.config.from_envvar('FLASK_SETTINGS',silent=True);\n\ndef connect_db():\n    \"\"\"Connects to the specific database.\"\"\"\n    rv = sqlite3.connect(app.config['DATABASE']);\n    rv.row_factory = sqlite3.Row;\n    return rv;\n\ndef init_db():\n    db = get_db();\n    with app.open_resource('schema.sql',mode='r') as f:\n        db.cursor().executescript(f.read());\n    db.commit();\n\n@app.cli.command('initdb')\ndef initdb_command():\n    init_db();\n    print('Initialized the database.');\n\ndef get_db():\n    if not hasattr(g,'sqlite_db'):\n        g.sqlite_db = connect_db();\n    return g.sqlite_db;\n\n@app.teardown_appcontext\ndef close_db(error):\n    if hasattr(g,'sqlite_db'):\n        g.sqlite_db.close();\n\n@app.route('/')\ndef show_entries():\n    db = get_db();\n    cur = db.execute('select title, text from entries order by id desc');\n    entries = cur.fetchall();\n    return render_template('show_entries.html', entries=entries);\n\n@app.route('/add',methods=['POST'])\ndef add_entry():\n    if not session.get('logged_in'):\n        abort(401);\n    db = get_db();\n    db.execute('insert into entries (title, text) value (?, ?)',[request.form['title'],request.form['text']]);\n    db.commit();\n    flash('New entry was succeedfully posted');\n    return redirect(url_for('show_entries'));\n\n@app.route('/login',methods=['GET','POST'])\ndef login():\n    error = None;\n    if request.methods == 'POST':\n        if request.form['username'] != app.config['USERNAME']:\n            error = 'Invalid username';\n        elif request.form['password'] != app.config['PASSWORD']:\n            error = 'Invalid password';\n        else:\n            session['logged_in'] = True;\n            flash('You were logged in');\n            return redirect(url_for('show_entries'));\n    return render_template('login.html',error=error);\n\n@app.route('/logout')\ndef logout():\n    session.pop('logged_in',None);\n    flash('You were logged out');\n    return redirect(url_for('show_entries'));\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0',debug=True);\n```\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/88876564",
            "html_url": "https://github.com/pallets/flask/issues/1417#issuecomment-88876564",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1417",
            "id": 88876564,
            "node_id": "MDEyOklzc3VlQ29tbWVudDg4ODc2NTY0",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-04-02T11:53:46Z",
            "updated_at": "2015-04-02T11:53:46Z",
            "author_association": "MEMBER",
            "body": "You need to run the `initdb` command.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/89135347",
            "html_url": "https://github.com/pallets/flask/issues/1417#issuecomment-89135347",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1417",
            "id": 89135347,
            "node_id": "MDEyOklzc3VlQ29tbWVudDg5MTM1MzQ3",
            "user": {
                "login": "dayiguizhen",
                "id": 9543865,
                "node_id": "MDQ6VXNlcjk1NDM4NjU=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/9543865?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/dayiguizhen",
                "html_url": "https://github.com/dayiguizhen",
                "followers_url": "https://api.github.com/users/dayiguizhen/followers",
                "following_url": "https://api.github.com/users/dayiguizhen/following{/other_user}",
                "gists_url": "https://api.github.com/users/dayiguizhen/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/dayiguizhen/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dayiguizhen/subscriptions",
                "organizations_url": "https://api.github.com/users/dayiguizhen/orgs",
                "repos_url": "https://api.github.com/users/dayiguizhen/repos",
                "events_url": "https://api.github.com/users/dayiguizhen/events{/privacy}",
                "received_events_url": "https://api.github.com/users/dayiguizhen/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-04-03T02:48:08Z",
            "updated_at": "2015-04-03T02:48:08Z",
            "author_association": "NONE",
            "body": "I try to run init_db() but there is getting another error:RuntimeError: Working outside of application context.\n\nit also show me some message:\nThis typically means that you attempted to use functionality that needed\nto interface with the current application object in a way.  To solve\nthis set up an application context with app.app_context().\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/89148420",
            "html_url": "https://github.com/pallets/flask/issues/1417#issuecomment-89148420",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1417",
            "id": 89148420,
            "node_id": "MDEyOklzc3VlQ29tbWVudDg5MTQ4NDIw",
            "user": {
                "login": "dayiguizhen",
                "id": 9543865,
                "node_id": "MDQ6VXNlcjk1NDM4NjU=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/9543865?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/dayiguizhen",
                "html_url": "https://github.com/dayiguizhen",
                "followers_url": "https://api.github.com/users/dayiguizhen/followers",
                "following_url": "https://api.github.com/users/dayiguizhen/following{/other_user}",
                "gists_url": "https://api.github.com/users/dayiguizhen/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/dayiguizhen/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dayiguizhen/subscriptions",
                "organizations_url": "https://api.github.com/users/dayiguizhen/orgs",
                "repos_url": "https://api.github.com/users/dayiguizhen/repos",
                "events_url": "https://api.github.com/users/dayiguizhen/events{/privacy}",
                "received_events_url": "https://api.github.com/users/dayiguizhen/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-04-03T03:33:11Z",
            "updated_at": "2015-04-03T03:33:11Z",
            "author_association": "NONE",
            "body": "I add the app.app_context() in the code\n\ndef init_db():\n    with app.app_context():\n        db = get_db();\n    with app.open_resource('schema.sql',mode='r') as f:\n        db.cursor().executescript(f.read());\n        db.commit();\n\nand now the error is sqlite3.ProgrammingError: Cannot operate on a closed database\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/89322660",
            "html_url": "https://github.com/pallets/flask/issues/1417#issuecomment-89322660",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1417",
            "id": 89322660,
            "node_id": "MDEyOklzc3VlQ29tbWVudDg5MzIyNjYw",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-04-03T15:26:28Z",
            "updated_at": "2015-04-03T15:26:28Z",
            "author_association": "MEMBER",
            "body": "Did you try the `sqlite` command at http://flask.pocoo.org/docs/0.10/tutorial/dbinit/#step-3-creating-the-database ?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/90817263",
            "html_url": "https://github.com/pallets/flask/issues/1417#issuecomment-90817263",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1417",
            "id": 90817263,
            "node_id": "MDEyOklzc3VlQ29tbWVudDkwODE3MjYz",
            "user": {
                "login": "dayiguizhen",
                "id": 9543865,
                "node_id": "MDQ6VXNlcjk1NDM4NjU=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/9543865?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/dayiguizhen",
                "html_url": "https://github.com/dayiguizhen",
                "followers_url": "https://api.github.com/users/dayiguizhen/followers",
                "following_url": "https://api.github.com/users/dayiguizhen/following{/other_user}",
                "gists_url": "https://api.github.com/users/dayiguizhen/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/dayiguizhen/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dayiguizhen/subscriptions",
                "organizations_url": "https://api.github.com/users/dayiguizhen/orgs",
                "repos_url": "https://api.github.com/users/dayiguizhen/repos",
                "events_url": "https://api.github.com/users/dayiguizhen/events{/privacy}",
                "received_events_url": "https://api.github.com/users/dayiguizhen/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-04-08T06:11:52Z",
            "updated_at": "2015-04-08T10:32:20Z",
            "author_association": "NONE",
            "body": "Now I can succeed build flaskr and visit it on browser.\nBecause I have commented the line below:\n\n```\ndef close_db(error):\n    print(\"CLOSED\");\n    if hasattr(g,'sqlite_db'):\n        print(\"NO!\")\n                //comment this line:\n        #g.sqlite_db.close();\n```\n\nBut I can't understand why this function be used.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/90873108",
            "html_url": "https://github.com/pallets/flask/issues/1417#issuecomment-90873108",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1417",
            "id": 90873108,
            "node_id": "MDEyOklzc3VlQ29tbWVudDkwODczMTA4",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-04-08T10:26:11Z",
            "updated_at": "2015-04-08T10:26:11Z",
            "author_association": "MEMBER",
            "body": "Please use four spaces to mark code as such. Will take a look.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/90874969",
            "html_url": "https://github.com/pallets/flask/issues/1417#issuecomment-90874969",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1417",
            "id": 90874969,
            "node_id": "MDEyOklzc3VlQ29tbWVudDkwODc0OTY5",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-04-08T10:33:47Z",
            "updated_at": "2015-04-08T10:33:47Z",
            "author_association": "MEMBER",
            "body": "You shouldn't call `db.close()` in the endpoint function, this is done in the teardown handler.\n\nPlease don't use the issuetracker for support requests.\n"
        }
    ]
}