{
    "url": "https://api.github.com/repos/pallets/flask/issues/2952",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2952/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2952/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2952/events",
    "html_url": "https://github.com/pallets/flask/issues/2952",
    "id": 371933691,
    "node_id": "MDU6SXNzdWUzNzE5MzM2OTE=",
    "number": 2952,
    "title": "New itsdangerous version invalidates cookie based sessions",
    "user": {
        "login": "benvand",
        "id": 3469840,
        "node_id": "MDQ6VXNlcjM0Njk4NDA=",
        "avatar_url": "https://avatars0.githubusercontent.com/u/3469840?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benvand",
        "html_url": "https://github.com/benvand",
        "followers_url": "https://api.github.com/users/benvand/followers",
        "following_url": "https://api.github.com/users/benvand/following{/other_user}",
        "gists_url": "https://api.github.com/users/benvand/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/benvand/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/benvand/subscriptions",
        "organizations_url": "https://api.github.com/users/benvand/orgs",
        "repos_url": "https://api.github.com/users/benvand/repos",
        "events_url": "https://api.github.com/users/benvand/events{/privacy}",
        "received_events_url": "https://api.github.com/users/benvand/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2018-10-19T12:19:05Z",
    "updated_at": "2018-10-27T00:29:05Z",
    "closed_at": "2018-10-19T12:34:09Z",
    "author_association": "NONE",
    "body": "### Expected Behaviour\r\nUser sessions should remain valid across versions.\r\n\r\n### Actual Behaviour\r\n\r\nitsdangerous v1.0 was release about 16 hours ago.\r\nUsers are signed out when an build of flask that has depended on the new itsdangerous v1.0 is released. This is because the new version has a breaking change that changes the session hashing algorithm.\r\n\r\nhttps://github.com/pallets/itsdangerous/blob/master/CHANGES.rst\r\nhttps://github.com/pallets/flask/blob/master/flask/sessions.py#L6 \r\nhttps://github.com/pallets/flask/blob/master/setup.py#L39\r\nhttps://pypi.org/project/itsdangerous/#history\r\n\r\n### Environment\r\n\r\n* Python version: 3.6\r\n* Flask version: 1+\r\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/431347824",
            "html_url": "https://github.com/pallets/flask/issues/2952#issuecomment-431347824",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2952",
            "id": 431347824,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTM0NzgyNA==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-10-19T12:34:09Z",
            "updated_at": "2018-10-19T13:00:23Z",
            "author_association": "MEMBER",
            "body": "That's an unfortunate case, I'm sorry it happened to you. Be sure to pin dependencies and check changelogs before upgrading libraries for projects you deploy to production. In this case, a major version bump is allowed to break things, and we're not going to prevent its use for everyone who's installing Flask going forward.\r\n\r\nIf you want to provide a smoother transition, you can implement a `SessionInterface` that tries loading with the previous defaults first, then with the current defaults, upgrading as necessary when writing the session back."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/431354399",
            "html_url": "https://github.com/pallets/flask/issues/2952#issuecomment-431354399",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2952",
            "id": 431354399,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTM1NDM5OQ==",
            "user": {
                "login": "benvand",
                "id": 3469840,
                "node_id": "MDQ6VXNlcjM0Njk4NDA=",
                "avatar_url": "https://avatars0.githubusercontent.com/u/3469840?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/benvand",
                "html_url": "https://github.com/benvand",
                "followers_url": "https://api.github.com/users/benvand/followers",
                "following_url": "https://api.github.com/users/benvand/following{/other_user}",
                "gists_url": "https://api.github.com/users/benvand/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/benvand/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/benvand/subscriptions",
                "organizations_url": "https://api.github.com/users/benvand/orgs",
                "repos_url": "https://api.github.com/users/benvand/repos",
                "events_url": "https://api.github.com/users/benvand/events{/privacy}",
                "received_events_url": "https://api.github.com/users/benvand/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-10-19T12:58:13Z",
            "updated_at": "2018-10-19T12:58:13Z",
            "author_association": "NONE",
            "body": "Thanks. We're fine. We found this on our preview/dev environment after releasing an app with deps pinned to what the libraries (ie Flask) suggested.\r\nBut the flask app that we released could no longer share sessions with our other apps.\r\n\r\nAt the moment any of Flasks dependencies could release a completely incompatible version and break new installs of Flask.\r\n\r\nPinning to sub major versions would help mitigate against this."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/431354791",
            "html_url": "https://github.com/pallets/flask/issues/2952#issuecomment-431354791",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2952",
            "id": 431354791,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTM1NDc5MQ==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-10-19T12:59:26Z",
            "updated_at": "2018-10-19T12:59:26Z",
            "author_association": "MEMBER",
            "body": "All Flask dependencies are Pallets projects, so the risk is pretty low."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/433411126",
            "html_url": "https://github.com/pallets/flask/issues/2952#issuecomment-433411126",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2952",
            "id": 433411126,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQzMzQxMTEyNg==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-10-26T13:40:28Z",
            "updated_at": "2018-10-26T13:40:28Z",
            "author_association": "MEMBER",
            "body": "We're figuring out how to roll back the digest method change: pallets/itsdangerous#111, pallets/itsdangerous#112"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/433575707",
            "html_url": "https://github.com/pallets/flask/issues/2952#issuecomment-433575707",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2952",
            "id": 433575707,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQzMzU3NTcwNw==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-10-27T00:29:05Z",
            "updated_at": "2018-10-27T00:29:05Z",
            "author_association": "MEMBER",
            "body": "itsdangerous 1.1.0 has been released. It reverts to SHA-1, and adds a fallback mechanism to safely upgrade signing parameters in the future. It also reverts the package name to all lowercase \"itsdangerous\".\r\n\r\nYou can read a longer explanation here: https://palletsprojects.com/blog/itsdangerous-1-1-0-released/"
        }
    ]
}