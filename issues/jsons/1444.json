{
    "url": "https://api.github.com/repos/pallets/flask/issues/1444",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1444/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1444/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1444/events",
    "html_url": "https://github.com/pallets/flask/issues/1444",
    "id": 70219475,
    "node_id": "MDU6SXNzdWU3MDIxOTQ3NQ==",
    "number": 1444,
    "title": "url_for with multiple query parameters escape '&'",
    "user": {
        "login": "grubberr",
        "id": 195743,
        "node_id": "MDQ6VXNlcjE5NTc0Mw==",
        "avatar_url": "https://avatars2.githubusercontent.com/u/195743?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/grubberr",
        "html_url": "https://github.com/grubberr",
        "followers_url": "https://api.github.com/users/grubberr/followers",
        "following_url": "https://api.github.com/users/grubberr/following{/other_user}",
        "gists_url": "https://api.github.com/users/grubberr/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/grubberr/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/grubberr/subscriptions",
        "organizations_url": "https://api.github.com/users/grubberr/orgs",
        "repos_url": "https://api.github.com/users/grubberr/repos",
        "events_url": "https://api.github.com/users/grubberr/events{/privacy}",
        "received_events_url": "https://api.github.com/users/grubberr/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2015-04-22T19:53:59Z",
    "updated_at": "2015-04-22T21:10:37Z",
    "closed_at": "2015-04-22T21:10:37Z",
    "author_association": "NONE",
    "body": "```\n# cat templates/t.html \n{{ url_for('url', key1='val1', key2='val2') }}\n```\n\n```\nfrom flask import Flask, render_template\napp = Flask(__name__)\n\n@app.route('/url')\ndef url(): pass\n\nwith app.test_request_context():\n    print render_template('t.html')\n```\n\nThis script produce such output:\n\n```\n/url?key2=val2&amp;key1=val1\n```\n\nI see that query string params separator '&' escaped -> '&amp;'\nis it bug ?\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/95322307",
            "html_url": "https://github.com/pallets/flask/issues/1444#issuecomment-95322307",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1444",
            "id": 95322307,
            "node_id": "MDEyOklzc3VlQ29tbWVudDk1MzIyMzA3",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-04-22T20:09:17Z",
            "updated_at": "2015-04-22T20:09:17Z",
            "author_association": "MEMBER",
            "body": "No. Is that behavior a problem to you?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/95326324",
            "html_url": "https://github.com/pallets/flask/issues/1444#issuecomment-95326324",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1444",
            "id": 95326324,
            "node_id": "MDEyOklzc3VlQ29tbWVudDk1MzI2MzI0",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-04-22T20:30:25Z",
            "updated_at": "2015-04-22T20:30:25Z",
            "author_association": "MEMBER",
            "body": "http://stackoverflow.com/questions/3493405/do-i-really-need-to-encode-as-amp\n\ntl;dr: it's best to always  escape `&` in HTML documents.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/95329862",
            "html_url": "https://github.com/pallets/flask/issues/1444#issuecomment-95329862",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1444",
            "id": 95329862,
            "node_id": "MDEyOklzc3VlQ29tbWVudDk1MzI5ODYy",
            "user": {
                "login": "grubberr",
                "id": 195743,
                "node_id": "MDQ6VXNlcjE5NTc0Mw==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/195743?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/grubberr",
                "html_url": "https://github.com/grubberr",
                "followers_url": "https://api.github.com/users/grubberr/followers",
                "following_url": "https://api.github.com/users/grubberr/following{/other_user}",
                "gists_url": "https://api.github.com/users/grubberr/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/grubberr/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/grubberr/subscriptions",
                "organizations_url": "https://api.github.com/users/grubberr/orgs",
                "repos_url": "https://api.github.com/users/grubberr/repos",
                "events_url": "https://api.github.com/users/grubberr/events{/privacy}",
                "received_events_url": "https://api.github.com/users/grubberr/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-04-22T20:47:53Z",
            "updated_at": "2015-04-22T20:47:53Z",
            "author_association": "NONE",
            "body": "hm it seems I slightly mess URL-escaping and HTML-escaping\nI just thought that url_for build url (with URL-escaping all individual parameters) and NOT HTML-escape final result\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/95330924",
            "html_url": "https://github.com/pallets/flask/issues/1444#issuecomment-95330924",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1444",
            "id": 95330924,
            "node_id": "MDEyOklzc3VlQ29tbWVudDk1MzMwOTI0",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-04-22T20:50:35Z",
            "updated_at": "2015-04-22T20:51:23Z",
            "author_association": "MEMBER",
            "body": "You shouldn't have to escape anything manually when using flask+jinja except in some very rare cases (such as putting `|tojson` results outside script tags). `url_for` just builds an URL. The escaping of `&` is handled by jinja's autoescape extension (otherwise `url_for` would be unsuitable e.g. for text emails or redirects)\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/95335242",
            "html_url": "https://github.com/pallets/flask/issues/1444#issuecomment-95335242",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1444",
            "id": 95335242,
            "node_id": "MDEyOklzc3VlQ29tbWVudDk1MzM1MjQy",
            "user": {
                "login": "grubberr",
                "id": 195743,
                "node_id": "MDQ6VXNlcjE5NTc0Mw==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/195743?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/grubberr",
                "html_url": "https://github.com/grubberr",
                "followers_url": "https://api.github.com/users/grubberr/followers",
                "following_url": "https://api.github.com/users/grubberr/following{/other_user}",
                "gists_url": "https://api.github.com/users/grubberr/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/grubberr/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/grubberr/subscriptions",
                "organizations_url": "https://api.github.com/users/grubberr/orgs",
                "repos_url": "https://api.github.com/users/grubberr/repos",
                "events_url": "https://api.github.com/users/grubberr/events{/privacy}",
                "received_events_url": "https://api.github.com/users/grubberr/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-04-22T21:01:33Z",
            "updated_at": "2015-04-22T21:01:33Z",
            "author_association": "NONE",
            "body": "for some reason I thought that jinja2 not autoescape result of url_for function\nbut yes I was wrong\n\nI just stuck with this escaping problem when pass result of url_for to javascript http.open function\nIt started to work only when I turned off auto HTML-escaping:\nhttp.open('GET', {{ url_for()|safe }}\n"
        }
    ]
}