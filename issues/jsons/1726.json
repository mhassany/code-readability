{
    "url": "https://api.github.com/repos/pallets/flask/issues/1726",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1726/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1726/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1726/events",
    "html_url": "https://github.com/pallets/flask/issues/1726",
    "id": 133402289,
    "node_id": "MDU6SXNzdWUxMzM0MDIyODk=",
    "number": 1726,
    "title": "Duplicate key in jsonify",
    "user": {
        "login": "vietvudanh",
        "id": 4011756,
        "node_id": "MDQ6VXNlcjQwMTE3NTY=",
        "avatar_url": "https://avatars1.githubusercontent.com/u/4011756?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vietvudanh",
        "html_url": "https://github.com/vietvudanh",
        "followers_url": "https://api.github.com/users/vietvudanh/followers",
        "following_url": "https://api.github.com/users/vietvudanh/following{/other_user}",
        "gists_url": "https://api.github.com/users/vietvudanh/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/vietvudanh/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/vietvudanh/subscriptions",
        "organizations_url": "https://api.github.com/users/vietvudanh/orgs",
        "repos_url": "https://api.github.com/users/vietvudanh/repos",
        "events_url": "https://api.github.com/users/vietvudanh/events{/privacy}",
        "received_events_url": "https://api.github.com/users/vietvudanh/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2016-02-13T05:42:58Z",
    "updated_at": "2016-02-13T14:05:40Z",
    "closed_at": "2016-02-13T14:05:21Z",
    "author_association": "NONE",
    "body": "Hi, I was following the tutorial on Flask at [this](http://flask.pocoo.org/docs/0.10/tutorial/).\nAnd I tried to return json data so I use `jsonify`\n\nI found out that jsonify use `dict()` to convert params into a dict. But this will remove items with duplicate key.\n\nIn my case, I querried the data using this query\n\n`cur = g.db.execute('SELECT title, text from entries order by id desc')`\n\nThe data was:\n\n`[(u'Nope', u'hi, this is anoooother things'), (u'Nope', u'This is another'), (u'Hi', u'This is a sample entry')]`\n\nSo the jsonify just return:\n\n`{\n  \"Hi\": \"This is a sample entry\", \n  \"Nope\": \"This is another\"\n}`\n\nThe code work correctly, but I don't know if this is intended or not?\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/183665535",
            "html_url": "https://github.com/pallets/flask/issues/1726#issuecomment-183665535",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1726",
            "id": 183665535,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE4MzY2NTUzNQ==",
            "user": {
                "login": "jaapz",
                "id": 513050,
                "node_id": "MDQ6VXNlcjUxMzA1MA==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/513050?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/jaapz",
                "html_url": "https://github.com/jaapz",
                "followers_url": "https://api.github.com/users/jaapz/followers",
                "following_url": "https://api.github.com/users/jaapz/following{/other_user}",
                "gists_url": "https://api.github.com/users/jaapz/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/jaapz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jaapz/subscriptions",
                "organizations_url": "https://api.github.com/users/jaapz/orgs",
                "repos_url": "https://api.github.com/users/jaapz/repos",
                "events_url": "https://api.github.com/users/jaapz/events{/privacy}",
                "received_events_url": "https://api.github.com/users/jaapz/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-02-13T13:35:27Z",
            "updated_at": "2016-02-13T13:35:27Z",
            "author_association": "CONTRIBUTOR",
            "body": "Apart from the fact that I think it's a really bad idea to have duplicate keys in a json object, according to [this](http://stackoverflow.com/a/19927061) stackoverflow answer, it technically is not invalid to have duplicate keys in json. However it's not specified how an encoder/decoder should handle duplicate keys. However, generally the implementations don't allow for duplicate keys. This is the case in most browsers as far as I know. So I think `jsonify`'s implementation is correct here.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/183673321",
            "html_url": "https://github.com/pallets/flask/issues/1726#issuecomment-183673321",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1726",
            "id": 183673321,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE4MzY3MzMyMQ==",
            "user": {
                "login": "vietvudanh",
                "id": 4011756,
                "node_id": "MDQ6VXNlcjQwMTE3NTY=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/4011756?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/vietvudanh",
                "html_url": "https://github.com/vietvudanh",
                "followers_url": "https://api.github.com/users/vietvudanh/followers",
                "following_url": "https://api.github.com/users/vietvudanh/following{/other_user}",
                "gists_url": "https://api.github.com/users/vietvudanh/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/vietvudanh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/vietvudanh/subscriptions",
                "organizations_url": "https://api.github.com/users/vietvudanh/orgs",
                "repos_url": "https://api.github.com/users/vietvudanh/repos",
                "events_url": "https://api.github.com/users/vietvudanh/events{/privacy}",
                "received_events_url": "https://api.github.com/users/vietvudanh/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-02-13T14:05:21Z",
            "updated_at": "2016-02-13T14:05:40Z",
            "author_association": "NONE",
            "body": "Yes, I know that having duplicate keys is not valid.\nI just think that like in this case: there might be situation that the returned data might have duplicate keys, but actually they are different items.\n\nAnd btw, I have misunderstood the usage of `jsonify`. The data needs to be a dict, not list. I just have read the security note about `jsonify`. \n\n`For security reasons only objects are supported toplevel.  For more\n    information about this, have a look at :ref:'json-security'.`\n\nThe implementation is correct.\n"
        }
    ]
}