{
    "url": "https://api.github.com/repos/pallets/flask/issues/1304",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1304/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1304/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1304/events",
    "html_url": "https://github.com/pallets/flask/issues/1304",
    "id": 53240508,
    "node_id": "MDU6SXNzdWU1MzI0MDUwOA==",
    "number": 1304,
    "title": "Dev server fails to terminate, becomes orphan",
    "user": {
        "login": "fvgs",
        "id": 9427813,
        "node_id": "MDQ6VXNlcjk0Mjc4MTM=",
        "avatar_url": "https://avatars1.githubusercontent.com/u/9427813?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fvgs",
        "html_url": "https://github.com/fvgs",
        "followers_url": "https://api.github.com/users/fvgs/followers",
        "following_url": "https://api.github.com/users/fvgs/following{/other_user}",
        "gists_url": "https://api.github.com/users/fvgs/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/fvgs/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/fvgs/subscriptions",
        "organizations_url": "https://api.github.com/users/fvgs/orgs",
        "repos_url": "https://api.github.com/users/fvgs/repos",
        "events_url": "https://api.github.com/users/fvgs/events{/privacy}",
        "received_events_url": "https://api.github.com/users/fvgs/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 8,
    "created_at": "2015-01-02T07:10:42Z",
    "updated_at": "2018-05-31T16:56:54Z",
    "closed_at": "2017-06-14T15:29:10Z",
    "author_association": "NONE",
    "body": "Running OS X Yosemite.\nI had the dev server running and was toggling the debug option. i.e. app.debug={True, False} in my entry-point file. I started running without debug and was surprised that the server was loading changes I made to my templates without having to restart the server. This is the reason I was toggling the option. Though, this is not the issue, since I later learned that that was the correct behavior.\n\nIn any case, I proceeded to then set debug to True and save the entry-point file. I may have restarted the server at this point, but either way things were still running regularly. However, trouble ensued when I then commented the line setting debug to True (thus leaving it set to the default False value) and saved. After this, I restarted the server, but was met with a traceback ending in:\n\n```\n...\nFile \"/usr/local/Cellar/python/2.7.9/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py\", line 224, in meth\n    return getattr(self._sock,name)(*args)\nsocket.error: [Errno 48] Address already in use\n```\n\nI restarted the server multiple times, before and after relaunching the Terminal app, and was met with this traceback each time. From this I suspected the server process was still running and had been orphaned. Using Activity Monitor, I found a python process running and terminated it. After that, when I tried running the dev server, I received a smaller (though similarly-ending) traceback. (not sure what to conclude from receiving a different traceback)\n\nI didn't get to do much more testing after that. I came to GitHub to begin documenting the bug when my MacBook suddenly restarted. I can't say the restart is related to this issue. However, the restart was due to an OS X panic relating to OSXFuse. I've never had an OS X panic since updating to Yosemite, so I find a correlation to the dev server issue possible.\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/69755821",
            "html_url": "https://github.com/pallets/flask/issues/1304#issuecomment-69755821",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1304",
            "id": 69755821,
            "node_id": "MDEyOklzc3VlQ29tbWVudDY5NzU1ODIx",
            "user": {
                "login": "coyo8",
                "id": 3780511,
                "node_id": "MDQ6VXNlcjM3ODA1MTE=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/3780511?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/coyo8",
                "html_url": "https://github.com/coyo8",
                "followers_url": "https://api.github.com/users/coyo8/followers",
                "following_url": "https://api.github.com/users/coyo8/following{/other_user}",
                "gists_url": "https://api.github.com/users/coyo8/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/coyo8/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/coyo8/subscriptions",
                "organizations_url": "https://api.github.com/users/coyo8/orgs",
                "repos_url": "https://api.github.com/users/coyo8/repos",
                "events_url": "https://api.github.com/users/coyo8/events{/privacy}",
                "received_events_url": "https://api.github.com/users/coyo8/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-01-13T14:56:01Z",
            "updated_at": "2015-01-13T14:56:01Z",
            "author_association": "NONE",
            "body": "You are getting this because because the socket on which the flask app was running is still running in daemon mode. It generally happens when you uses <code> control + Z </code> to stop the flask server instead try using <code> control + C </code>.\n\nTo see the process id and kill it, type these commands in your Mac terminal\n\n``` bash\n$ losf -i:PORT         #flask app PORT correspond to 5000\n$ kill -9 pid\n```\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/69769061",
            "html_url": "https://github.com/pallets/flask/issues/1304#issuecomment-69769061",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1304",
            "id": 69769061,
            "node_id": "MDEyOklzc3VlQ29tbWVudDY5NzY5MDYx",
            "user": {
                "login": "DasIch",
                "id": 182316,
                "node_id": "MDQ6VXNlcjE4MjMxNg==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/182316?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/DasIch",
                "html_url": "https://github.com/DasIch",
                "followers_url": "https://api.github.com/users/DasIch/followers",
                "following_url": "https://api.github.com/users/DasIch/following{/other_user}",
                "gists_url": "https://api.github.com/users/DasIch/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/DasIch/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/DasIch/subscriptions",
                "organizations_url": "https://api.github.com/users/DasIch/orgs",
                "repos_url": "https://api.github.com/users/DasIch/repos",
                "events_url": "https://api.github.com/users/DasIch/events{/privacy}",
                "received_events_url": "https://api.github.com/users/DasIch/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-01-13T16:09:23Z",
            "updated_at": "2015-01-13T16:09:23Z",
            "author_association": "CONTRIBUTOR",
            "body": "There are two processes in debug mode. The actual server runs in the child. What happened is that you killed the parent, which leaves the child alive. The child continues to run and gets \"adopted\" by the init process (it doesn't turn into a zombie, that's something completely different). \n\nThis is completely normal and expected behavior. =\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/70659149",
            "html_url": "https://github.com/pallets/flask/issues/1304#issuecomment-70659149",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1304",
            "id": 70659149,
            "node_id": "MDEyOklzc3VlQ29tbWVudDcwNjU5MTQ5",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-01-20T14:16:36Z",
            "updated_at": "2015-01-20T14:16:36Z",
            "author_association": "MEMBER",
            "body": "I strongly doubt that Flask is responsible for crashing your Mac, and am not entirely sure how you killed the server for a floating (!= zombie) process to occur. If you want to kill both of them, I've found that killing their process group works quite well.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/72316037",
            "html_url": "https://github.com/pallets/flask/issues/1304#issuecomment-72316037",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1304",
            "id": 72316037,
            "node_id": "MDEyOklzc3VlQ29tbWVudDcyMzE2MDM3",
            "user": {
                "login": "fvgs",
                "id": 9427813,
                "node_id": "MDQ6VXNlcjk0Mjc4MTM=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/9427813?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/fvgs",
                "html_url": "https://github.com/fvgs",
                "followers_url": "https://api.github.com/users/fvgs/followers",
                "following_url": "https://api.github.com/users/fvgs/following{/other_user}",
                "gists_url": "https://api.github.com/users/fvgs/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/fvgs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fvgs/subscriptions",
                "organizations_url": "https://api.github.com/users/fvgs/orgs",
                "repos_url": "https://api.github.com/users/fvgs/repos",
                "events_url": "https://api.github.com/users/fvgs/events{/privacy}",
                "received_events_url": "https://api.github.com/users/fvgs/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-01-31T12:33:33Z",
            "updated_at": "2015-01-31T12:34:25Z",
            "author_association": "NONE",
            "body": "Thank you for the responses to this issue. As has been pointed out, I absolutely misspoke when I said 'zombie'. I really meant to state that it became an orphan process.\n\nI can accept that it is the expected behavior. However, it seems rather peculiar that this would be anything other than a design flaw. Based on @DasIch's response, it sounds like Flask made the mistake of terminating only the parent and allowing the child to become orphaned. At the very least, this causes an inconvenience to the user by having to switch to a different port or otherwise kill the orphaned process manually.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/72324595",
            "html_url": "https://github.com/pallets/flask/issues/1304#issuecomment-72324595",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1304",
            "id": 72324595,
            "node_id": "MDEyOklzc3VlQ29tbWVudDcyMzI0NTk1",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-01-31T16:30:26Z",
            "updated_at": "2015-01-31T16:30:26Z",
            "author_association": "MEMBER",
            "body": "Reopening this because I tend to agree from a usability perspective, however, I am not sure if this is even fixable.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/229451994",
            "html_url": "https://github.com/pallets/flask/issues/1304#issuecomment-229451994",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1304",
            "id": 229451994,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyOTQ1MTk5NA==",
            "user": {
                "login": "trekkadmin",
                "id": 7806921,
                "node_id": "MDQ6VXNlcjc4MDY5MjE=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/7806921?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/trekkadmin",
                "html_url": "https://github.com/trekkadmin",
                "followers_url": "https://api.github.com/users/trekkadmin/followers",
                "following_url": "https://api.github.com/users/trekkadmin/following{/other_user}",
                "gists_url": "https://api.github.com/users/trekkadmin/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/trekkadmin/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/trekkadmin/subscriptions",
                "organizations_url": "https://api.github.com/users/trekkadmin/orgs",
                "repos_url": "https://api.github.com/users/trekkadmin/repos",
                "events_url": "https://api.github.com/users/trekkadmin/events{/privacy}",
                "received_events_url": "https://api.github.com/users/trekkadmin/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-06-29T18:50:04Z",
            "updated_at": "2016-06-29T19:03:02Z",
            "author_association": "NONE",
            "body": "@DasIch  Thank you for explaining this issue!  I was pulling my hair out trying to kill the process and could never resolve the issue.\n\nBTW, I rebooted and orphan child process was no longer an issue.  I was able to start the dev server and process requests then.  Not ideal I know, but that worked for me.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/308468163",
            "html_url": "https://github.com/pallets/flask/issues/1304#issuecomment-308468163",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1304",
            "id": 308468163,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwODQ2ODE2Mw==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-06-14T15:29:10Z",
            "updated_at": "2017-06-14T15:29:50Z",
            "author_association": "MEMBER",
            "body": "Unfortunately, I can't follow your steps to reproduce this, there's too much narration and guessing. The first and last paragraphs don't even seem relevant?\r\n\r\nToggle `app.debug` from `True` to `False` doesn't cause a zombie process on my machine.\r\n\r\nIf anyone is still having this problem, please open a new issue with exact steps to reproduce."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/393600587",
            "html_url": "https://github.com/pallets/flask/issues/1304#issuecomment-393600587",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1304",
            "id": 393600587,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5MzYwMDU4Nw==",
            "user": {
                "login": "dyspop",
                "id": 5090931,
                "node_id": "MDQ6VXNlcjUwOTA5MzE=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/5090931?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/dyspop",
                "html_url": "https://github.com/dyspop",
                "followers_url": "https://api.github.com/users/dyspop/followers",
                "following_url": "https://api.github.com/users/dyspop/following{/other_user}",
                "gists_url": "https://api.github.com/users/dyspop/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/dyspop/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dyspop/subscriptions",
                "organizations_url": "https://api.github.com/users/dyspop/orgs",
                "repos_url": "https://api.github.com/users/dyspop/repos",
                "events_url": "https://api.github.com/users/dyspop/events{/privacy}",
                "received_events_url": "https://api.github.com/users/dyspop/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-31T16:56:54Z",
            "updated_at": "2018-05-31T16:56:54Z",
            "author_association": "NONE",
            "body": "I ran into this after a reboot on macOS Sierra. The steps above worked fine, though there was a typo in the original instructions, here it is corrected:\r\n\r\n```\r\nlsof -i:PORT\r\nkill -9 PID\r\n```\r\n\r\nreplace PORT and PID with their corresponding values."
        }
    ]
}