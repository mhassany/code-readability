{
    "url": "https://api.github.com/repos/pallets/flask/issues/3134",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/3134/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/3134/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/3134/events",
    "html_url": "https://github.com/pallets/flask/issues/3134",
    "id": 427024615,
    "node_id": "MDU6SXNzdWU0MjcwMjQ2MTU=",
    "number": 3134,
    "title": "static_url_path doesn't work if it ends with a slash",
    "user": {
        "login": "qwdm",
        "id": 5593737,
        "node_id": "MDQ6VXNlcjU1OTM3Mzc=",
        "avatar_url": "https://avatars1.githubusercontent.com/u/5593737?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/qwdm",
        "html_url": "https://github.com/qwdm",
        "followers_url": "https://api.github.com/users/qwdm/followers",
        "following_url": "https://api.github.com/users/qwdm/following{/other_user}",
        "gists_url": "https://api.github.com/users/qwdm/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/qwdm/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/qwdm/subscriptions",
        "organizations_url": "https://api.github.com/users/qwdm/orgs",
        "repos_url": "https://api.github.com/users/qwdm/repos",
        "events_url": "https://api.github.com/users/qwdm/events{/privacy}",
        "received_events_url": "https://api.github.com/users/qwdm/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": {
        "url": "https://api.github.com/repos/pallets/flask/milestones/3",
        "html_url": "https://github.com/pallets/flask/milestone/3",
        "labels_url": "https://api.github.com/repos/pallets/flask/milestones/3/labels",
        "id": 3093266,
        "node_id": "MDk6TWlsZXN0b25lMzA5MzI2Ng==",
        "number": 3,
        "title": "1.1.0",
        "description": "",
        "creator": {
            "login": "davidism",
            "id": 1242887,
            "node_id": "MDQ6VXNlcjEyNDI4ODc=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/davidism",
            "html_url": "https://github.com/davidism",
            "followers_url": "https://api.github.com/users/davidism/followers",
            "following_url": "https://api.github.com/users/davidism/following{/other_user}",
            "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
            "organizations_url": "https://api.github.com/users/davidism/orgs",
            "repos_url": "https://api.github.com/users/davidism/repos",
            "events_url": "https://api.github.com/users/davidism/events{/privacy}",
            "received_events_url": "https://api.github.com/users/davidism/received_events",
            "type": "User",
            "site_admin": false
        },
        "open_issues": 0,
        "closed_issues": 48,
        "state": "closed",
        "created_at": "2018-02-06T16:14:43Z",
        "updated_at": "2019-07-06T22:03:23Z",
        "due_on": null,
        "closed_at": "2019-07-06T22:03:23Z"
    },
    "comments": 9,
    "created_at": "2019-03-29T14:50:07Z",
    "updated_at": "2019-05-22T04:20:25Z",
    "closed_at": "2019-05-19T04:27:32Z",
    "author_association": "NONE",
    "body": "https://github.com/pallets/flask/blob/a74864ec229141784374f1998324d2cbac837295/flask/app.py#L560\r\n\r\nUrljoin seems like more robust way to join urls. I just tried to set static_url_path = '/' and it failed, but static_url_path = '' succeed. IMHO, this is bad and unexpected behaviour.",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/478026552",
            "html_url": "https://github.com/pallets/flask/issues/3134#issuecomment-478026552",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/3134",
            "id": 478026552,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ3ODAyNjU1Mg==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-03-29T14:51:51Z",
            "updated_at": "2019-03-29T14:51:51Z",
            "author_association": "MEMBER",
            "body": "I'm pretty sure urljoin always throws away existing path segments on the first arg. `.rstrip('/')` is probably better here"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/478030639",
            "html_url": "https://github.com/pallets/flask/issues/3134#issuecomment-478030639",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/3134",
            "id": 478030639,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ3ODAzMDYzOQ==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-03-29T15:02:21Z",
            "updated_at": "2019-03-29T15:03:49Z",
            "author_association": "MEMBER",
            "body": "Aside, making the static url path the root is probably going to give you unexpected behavior."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/489721837",
            "html_url": "https://github.com/pallets/flask/issues/3134#issuecomment-489721837",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/3134",
            "id": 489721837,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ4OTcyMTgzNw==",
            "user": {
                "login": "qil026",
                "id": 5828742,
                "node_id": "MDQ6VXNlcjU4Mjg3NDI=",
                "avatar_url": "https://avatars2.githubusercontent.com/u/5828742?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/qil026",
                "html_url": "https://github.com/qil026",
                "followers_url": "https://api.github.com/users/qil026/followers",
                "following_url": "https://api.github.com/users/qil026/following{/other_user}",
                "gists_url": "https://api.github.com/users/qil026/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/qil026/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/qil026/subscriptions",
                "organizations_url": "https://api.github.com/users/qil026/orgs",
                "repos_url": "https://api.github.com/users/qil026/repos",
                "events_url": "https://api.github.com/users/qil026/events{/privacy}",
                "received_events_url": "https://api.github.com/users/qil026/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-05-06T18:19:04Z",
            "updated_at": "2019-05-06T18:19:04Z",
            "author_association": "CONTRIBUTOR",
            "body": "i will be taking a look at this issue"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/493754279",
            "html_url": "https://github.com/pallets/flask/issues/3134#issuecomment-493754279",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/3134",
            "id": 493754279,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ5Mzc1NDI3OQ==",
            "user": {
                "login": "jab",
                "id": 64992,
                "node_id": "MDQ6VXNlcjY0OTky",
                "avatar_url": "https://avatars1.githubusercontent.com/u/64992?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/jab",
                "html_url": "https://github.com/jab",
                "followers_url": "https://api.github.com/users/jab/followers",
                "following_url": "https://api.github.com/users/jab/following{/other_user}",
                "gists_url": "https://api.github.com/users/jab/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/jab/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jab/subscriptions",
                "organizations_url": "https://api.github.com/users/jab/orgs",
                "repos_url": "https://api.github.com/users/jab/repos",
                "events_url": "https://api.github.com/users/jab/events{/privacy}",
                "received_events_url": "https://api.github.com/users/jab/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-05-19T12:50:28Z",
            "updated_at": "2019-05-19T12:50:28Z",
            "author_association": "MEMBER",
            "body": "@davidism wrote:\r\n> Aside, making the static url path the root is probably going to give you unexpected behavior.\r\n\r\nCould you say more (and should that be documented)? I\u2019ve seen a number of Flask users do this (to serve a SPA that assumes it\u2019s mounted under /) who haven\u2019t yet seen unexpected behavior. "
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/493756924",
            "html_url": "https://github.com/pallets/flask/issues/3134#issuecomment-493756924",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/3134",
            "id": 493756924,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ5Mzc1NjkyNA==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-05-19T13:20:58Z",
            "updated_at": "2019-05-19T13:21:30Z",
            "author_association": "MEMBER",
            "body": "The URL rule is `/{static_url_path}/<path:filename>`. When `static_url_path` is empty, it becomes `/<path:filename>`, which is a catch-all route. Some route sorting that Werkzeug does may alleviate this, but you're just asking for trouble.\r\n\r\nThere are better ways of serving SPAs than passing it through Flask. In development, SPAs have their own dev server that should be used, and either they or the WSGI app would set up a proxy to keep everything under one domain (Werkzeug has proxy middleware now). In production, Nginx would be configured to serve the static files and leave Flask to do backend things."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/494624378",
            "html_url": "https://github.com/pallets/flask/issues/3134#issuecomment-494624378",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/3134",
            "id": 494624378,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NDYyNDM3OA==",
            "user": {
                "login": "jab",
                "id": 64992,
                "node_id": "MDQ6VXNlcjY0OTky",
                "avatar_url": "https://avatars1.githubusercontent.com/u/64992?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/jab",
                "html_url": "https://github.com/jab",
                "followers_url": "https://api.github.com/users/jab/followers",
                "following_url": "https://api.github.com/users/jab/following{/other_user}",
                "gists_url": "https://api.github.com/users/jab/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/jab/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jab/subscriptions",
                "organizations_url": "https://api.github.com/users/jab/orgs",
                "repos_url": "https://api.github.com/users/jab/repos",
                "events_url": "https://api.github.com/users/jab/events{/privacy}",
                "received_events_url": "https://api.github.com/users/jab/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-05-22T02:09:06Z",
            "updated_at": "2019-05-22T02:09:06Z",
            "author_association": "MEMBER",
            "body": "Yes, we have it set up so SPA dev servers work in development. And in production we use gunicorn with [Whitenoise](http://whitenoise.evans.io) to serve static files, running behind [Waiter](https://github.com/twosigma/waiter).\r\n\r\nSince the `/<path:filename>` static route has been working well for us (perhaps thanks to Werkzeug's route sorting), I'm wondering if there's a concrete example of where this wouldn't work well.\r\n\r\nFor example, we know that any route `/foo` we define precludes serving a static file named `foo` from the static folder, and haven't had any problems with that. (~All the API routes we define end up under a prefix like `/api/` thanks to [Flask-Rebar](https://flask-rebar.readthedocs.io), which helps reduce potential for conflict.)\r\n\r\nBut eager to know if there are any compelling examples of nasty cases I'm missing!"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/494625630",
            "html_url": "https://github.com/pallets/flask/issues/3134#issuecomment-494625630",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/3134",
            "id": 494625630,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NDYyNTYzMA==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-05-22T02:16:13Z",
            "updated_at": "2019-05-22T02:16:13Z",
            "author_association": "MEMBER",
            "body": "It sounds like you've only been generating the urls, not using Flask to actually serve the files. If you're using a proxy in dev and whitenoise in prod, routes that would be problematic aren't reaching Flask, so you won't see the issue."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/494626244",
            "html_url": "https://github.com/pallets/flask/issues/3134#issuecomment-494626244",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/3134",
            "id": 494626244,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NDYyNjI0NA==",
            "user": {
                "login": "jab",
                "id": 64992,
                "node_id": "MDQ6VXNlcjY0OTky",
                "avatar_url": "https://avatars1.githubusercontent.com/u/64992?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/jab",
                "html_url": "https://github.com/jab",
                "followers_url": "https://api.github.com/users/jab/followers",
                "following_url": "https://api.github.com/users/jab/following{/other_user}",
                "gists_url": "https://api.github.com/users/jab/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/jab/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jab/subscriptions",
                "organizations_url": "https://api.github.com/users/jab/orgs",
                "repos_url": "https://api.github.com/users/jab/repos",
                "events_url": "https://api.github.com/users/jab/events{/privacy}",
                "received_events_url": "https://api.github.com/users/jab/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-05-22T02:19:09Z",
            "updated_at": "2019-05-22T02:25:37Z",
            "author_association": "MEMBER",
            "body": "Meant to add, [this accepted StackOverflow answer](https://stackoverflow.com/a/17073583) and [this post](https://vilimpoc.org/blog/2012/11/21/serving-static-files-from-root-and-not-static-using-flask/) (which was referenced in https://github.com/pallets/flask/issues/348#issuecomment-178443482) recommend this, so if this recommendation actually comes with caveats it'd be good to have some docs about it \u2013 should I open a new issue?"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/494646330",
            "html_url": "https://github.com/pallets/flask/issues/3134#issuecomment-494646330",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/3134",
            "id": 494646330,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NDY0NjMzMA==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-05-22T04:20:25Z",
            "updated_at": "2019-05-22T04:20:25Z",
            "author_association": "MEMBER",
            "body": "I don't actually have a reproducible example, just a general remembering of old issues and questions. I think there were some changes to Werkzeug that may have addressed it too, but it's been too long for me to remember. If people don't seem to be running into the issue, I wouldn't worry about it for now."
        }
    ]
}