{
    "url": "https://api.github.com/repos/pallets/flask/issues/1835",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1835/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1835/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1835/events",
    "html_url": "https://github.com/pallets/flask/issues/1835",
    "id": 157539143,
    "node_id": "MDU6SXNzdWUxNTc1MzkxNDM=",
    "number": 1835,
    "title": "Failing test: test_egg_installed_paths",
    "user": {
        "login": "djc",
        "id": 158471,
        "node_id": "MDQ6VXNlcjE1ODQ3MQ==",
        "avatar_url": "https://avatars0.githubusercontent.com/u/158471?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/djc",
        "html_url": "https://github.com/djc",
        "followers_url": "https://api.github.com/users/djc/followers",
        "following_url": "https://api.github.com/users/djc/following{/other_user}",
        "gists_url": "https://api.github.com/users/djc/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/djc/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/djc/subscriptions",
        "organizations_url": "https://api.github.com/users/djc/orgs",
        "repos_url": "https://api.github.com/users/djc/repos",
        "events_url": "https://api.github.com/users/djc/events{/privacy}",
        "received_events_url": "https://api.github.com/users/djc/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 384871623,
            "node_id": "MDU6TGFiZWwzODQ4NzE2MjM=",
            "url": "https://api.github.com/repos/pallets/flask/labels/packaging",
            "name": "packaging",
            "color": "006b75",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 10,
    "created_at": "2016-05-30T17:51:31Z",
    "updated_at": "2017-05-28T03:54:19Z",
    "closed_at": "2017-05-28T03:54:19Z",
    "author_association": "NONE",
    "body": "While trying to package 0.11 on Gentoo Linux, I've run into the following test failure:\n\n```\n============================================= FAILURES =============================================\n_____________________________________ test_egg_installed_paths _____________________________________\n\ninstall_egg = <function inner at 0x7f5eebfa9668>\nmodules_tmpdir = local('/var/tmp/portage/dev-python/flask-0.11/temp/pytest-of-portage/pytest-0/test_egg_installed_paths0/modules_tmpdir')\nmodules_tmpdir_prefix = local('/var/tmp/portage/dev-python/flask-0.11/temp/pytest-of-portage/pytest-0/test_egg_installed_paths0/modules_tmpdir')\n\n    def test_egg_installed_paths(install_egg, modules_tmpdir,\n                                 modules_tmpdir_prefix):\n        modules_tmpdir.mkdir('site_egg').join('__init__.py').write(\n            'import flask\\n\\napp = flask.Flask(__name__)'\n        )\n>       install_egg('site_egg')\n\ntests/test_instance_config.py:111: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ntests/conftest.py:116: in inner\n    egg_path, = modules_tmpdir.join('dist/').listdir()\n/usr/lib64/python2.7/site-packages/py/_path/local.py:379: in listdir\n    names = py.error.checked_call(os.listdir, self.strpath)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <py._error.ErrorMaker object at 0x7f5eee4382d0>, func = <built-in function listdir>\nargs = ('/var/tmp/portage/dev-python/flask-0.11/temp/pytest-of-portage/pytest-0/test_egg_installed_paths0/modules_tmpdir/dist',)\nkwargs = {}, __tracebackhide__ = False, cls = <class 'py.error.ENOENT'>\nvalue = OSError(2, 'No such file or directory'), tb = <traceback object at 0x7f5eebfa6c68>\nerrno = 2\n\n    def checked_call(self, func, *args, **kwargs):\n        \"\"\" call a function and raise an errno-exception if applicable. \"\"\"\n        __tracebackhide__ = True\n        try:\n            return func(*args, **kwargs)\n        except self.Error:\n            raise\n        except (OSError, EnvironmentError):\n            cls, value, tb = sys.exc_info()\n            if not hasattr(value, 'errno'):\n                raise\n            __tracebackhide__ = False\n            errno = value.errno\n            try:\n                if not isinstance(value, WindowsError):\n                    raise NameError\n            except NameError:\n                # we are not on Windows, or we got a proper OSError\n                cls = self._geterrnoclass(errno)\n            else:\n                try:\n                    cls = self._geterrnoclass(_winerrnomap[errno])\n                except KeyError:\n                    raise value\n>           raise cls(\"%s%r\" % (func.__name__, args))\nE           ENOENT: [No such file or directory]: listdir('/var/tmp/portage/dev-python/flask-0.11/temp/pytest-of-portage/pytest-0/test_egg_installed_paths0/modules_tmpdir/dist',)\n\n/usr/lib64/python2.7/site-packages/py/_error.py:84: ENOENT\n```\n\nAlso note that it's pretty unclear that you now require py.test for test running, might want to add that as an explicit dependency somehow.\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/222535079",
            "html_url": "https://github.com/pallets/flask/issues/1835#issuecomment-222535079",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1835",
            "id": 222535079,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyMjUzNTA3OQ==",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-05-30T18:00:33Z",
            "updated_at": "2016-05-30T18:00:33Z",
            "author_association": "MEMBER",
            "body": "This test runs `python setup.py bdist_egg` before asserting that the `dist` directory exists ([see code](https://github.com/pallets/flask/blob/ba07f5b/tests/conftest.py#L112) My suspicion is that this call fails silently, although we do check the exit code.\n\nCould you `cd` into `modules_tmpdir` for the failing testrun and run `python setup.py bdist_egg` manually?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/222535459",
            "html_url": "https://github.com/pallets/flask/issues/1835#issuecomment-222535459",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1835",
            "id": 222535459,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyMjUzNTQ1OQ==",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-05-30T18:03:57Z",
            "updated_at": "2016-05-30T18:04:26Z",
            "author_association": "MEMBER",
            "body": "Regarding the bad documentation, see https://github.com/pallets/meta/issues/17\n\nEDIT: For now your best bet on documentation is the `CONTRIBUTING` file, which does say that `pytest` is required.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/222535697",
            "html_url": "https://github.com/pallets/flask/issues/1835#issuecomment-222535697",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1835",
            "id": 222535697,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyMjUzNTY5Nw==",
            "user": {
                "login": "djc",
                "id": 158471,
                "node_id": "MDQ6VXNlcjE1ODQ3MQ==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/158471?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/djc",
                "html_url": "https://github.com/djc",
                "followers_url": "https://api.github.com/users/djc/followers",
                "following_url": "https://api.github.com/users/djc/following{/other_user}",
                "gists_url": "https://api.github.com/users/djc/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/djc/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/djc/subscriptions",
                "organizations_url": "https://api.github.com/users/djc/orgs",
                "repos_url": "https://api.github.com/users/djc/repos",
                "events_url": "https://api.github.com/users/djc/events{/privacy}",
                "received_events_url": "https://api.github.com/users/djc/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-05-30T18:06:09Z",
            "updated_at": "2016-05-30T18:06:09Z",
            "author_association": "NONE",
            "body": "That seems to work.\n\nThe problem might be that the packager runs the test suite in a sandbox, maybe this somehow affects what happens?\n\nAs for your documentation; it's great that there's a Makefile and stuff. Still, I'd argue your project should do a little more work to align with the ecosystem standards. Even if I use the Makefile, there should be like a `test_requires` in `setup.py` to tell me that `py.test` is needed.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/222535890",
            "html_url": "https://github.com/pallets/flask/issues/1835#issuecomment-222535890",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1835",
            "id": 222535890,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyMjUzNTg5MA==",
            "user": {
                "login": "djc",
                "id": 158471,
                "node_id": "MDQ6VXNlcjE1ODQ3MQ==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/158471?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/djc",
                "html_url": "https://github.com/djc",
                "followers_url": "https://api.github.com/users/djc/followers",
                "following_url": "https://api.github.com/users/djc/following{/other_user}",
                "gists_url": "https://api.github.com/users/djc/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/djc/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/djc/subscriptions",
                "organizations_url": "https://api.github.com/users/djc/orgs",
                "repos_url": "https://api.github.com/users/djc/repos",
                "events_url": "https://api.github.com/users/djc/events{/privacy}",
                "received_events_url": "https://api.github.com/users/djc/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-05-30T18:07:29Z",
            "updated_at": "2016-05-30T18:07:29Z",
            "author_association": "NONE",
            "body": "(`make test` fails the same way as invoking `py.test`.)\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/222535968",
            "html_url": "https://github.com/pallets/flask/issues/1835#issuecomment-222535968",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1835",
            "id": 222535968,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyMjUzNTk2OA==",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-05-30T18:08:07Z",
            "updated_at": "2016-05-30T18:08:07Z",
            "author_association": "MEMBER",
            "body": "To clarify, does the command work within the sandbox as well?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/223159146",
            "html_url": "https://github.com/pallets/flask/issues/1835#issuecomment-223159146",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1835",
            "id": 223159146,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyMzE1OTE0Ng==",
            "user": {
                "login": "mitsuhiko",
                "id": 7396,
                "node_id": "MDQ6VXNlcjczOTY=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/7396?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mitsuhiko",
                "html_url": "https://github.com/mitsuhiko",
                "followers_url": "https://api.github.com/users/mitsuhiko/followers",
                "following_url": "https://api.github.com/users/mitsuhiko/following{/other_user}",
                "gists_url": "https://api.github.com/users/mitsuhiko/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mitsuhiko/subscriptions",
                "organizations_url": "https://api.github.com/users/mitsuhiko/orgs",
                "repos_url": "https://api.github.com/users/mitsuhiko/repos",
                "events_url": "https://api.github.com/users/mitsuhiko/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mitsuhiko/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-06-01T23:54:12Z",
            "updated_at": "2016-06-01T23:54:12Z",
            "author_association": "MEMBER",
            "body": "@djc test_requires is stupid because it installs eggs into the working directory. Is there an alternative we could use that would be equally acceptable but does not do that?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/223218667",
            "html_url": "https://github.com/pallets/flask/issues/1835#issuecomment-223218667",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1835",
            "id": 223218667,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyMzIxODY2Nw==",
            "user": {
                "login": "djc",
                "id": 158471,
                "node_id": "MDQ6VXNlcjE1ODQ3MQ==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/158471?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/djc",
                "html_url": "https://github.com/djc",
                "followers_url": "https://api.github.com/users/djc/followers",
                "following_url": "https://api.github.com/users/djc/following{/other_user}",
                "gists_url": "https://api.github.com/users/djc/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/djc/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/djc/subscriptions",
                "organizations_url": "https://api.github.com/users/djc/orgs",
                "repos_url": "https://api.github.com/users/djc/repos",
                "events_url": "https://api.github.com/users/djc/events{/privacy}",
                "received_events_url": "https://api.github.com/users/djc/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-06-02T07:41:41Z",
            "updated_at": "2016-06-02T07:41:41Z",
            "author_association": "NONE",
            "body": "It's all about it being in a standard place where we'll look for it. So either `setup.py` (but a comment is fine, too -- maybe still include `require` somehow?) or some `*-requirements.txt`. IMO dependency changes should also feature prominently in the changelog (IIRC in this case there is mention of it, somewhere deep at the bottom).\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/223502712",
            "html_url": "https://github.com/pallets/flask/issues/1835#issuecomment-223502712",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1835",
            "id": 223502712,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyMzUwMjcxMg==",
            "user": {
                "login": "jeffwidman",
                "id": 483314,
                "node_id": "MDQ6VXNlcjQ4MzMxNA==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/483314?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/jeffwidman",
                "html_url": "https://github.com/jeffwidman",
                "followers_url": "https://api.github.com/users/jeffwidman/followers",
                "following_url": "https://api.github.com/users/jeffwidman/following{/other_user}",
                "gists_url": "https://api.github.com/users/jeffwidman/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/jeffwidman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jeffwidman/subscriptions",
                "organizations_url": "https://api.github.com/users/jeffwidman/orgs",
                "repos_url": "https://api.github.com/users/jeffwidman/repos",
                "events_url": "https://api.github.com/users/jeffwidman/events{/privacy}",
                "received_events_url": "https://api.github.com/users/jeffwidman/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-06-03T06:39:55Z",
            "updated_at": "2016-06-03T06:40:21Z",
            "author_association": "MEMBER",
            "body": "@djc does @mitsuhiko's addition of `test-requirements.txt` in fd1a355899691215bda059f410256e6fff470955 suffice so that we can close this issue?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/223506463",
            "html_url": "https://github.com/pallets/flask/issues/1835#issuecomment-223506463",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1835",
            "id": 223506463,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyMzUwNjQ2Mw==",
            "user": {
                "login": "djc",
                "id": 158471,
                "node_id": "MDQ6VXNlcjE1ODQ3MQ==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/158471?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/djc",
                "html_url": "https://github.com/djc",
                "followers_url": "https://api.github.com/users/djc/followers",
                "following_url": "https://api.github.com/users/djc/following{/other_user}",
                "gists_url": "https://api.github.com/users/djc/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/djc/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/djc/subscriptions",
                "organizations_url": "https://api.github.com/users/djc/orgs",
                "repos_url": "https://api.github.com/users/djc/repos",
                "events_url": "https://api.github.com/users/djc/events{/privacy}",
                "received_events_url": "https://api.github.com/users/djc/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-06-03T07:06:17Z",
            "updated_at": "2016-06-03T07:06:17Z",
            "author_association": "NONE",
            "body": "I think it suffices for documentation of the test requirements; however, I don't think it solves the test failure?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/223641397",
            "html_url": "https://github.com/pallets/flask/issues/1835#issuecomment-223641397",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1835",
            "id": 223641397,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyMzY0MTM5Nw==",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-06-03T17:28:02Z",
            "updated_at": "2016-06-03T17:28:02Z",
            "author_association": "MEMBER",
            "body": "I have no idea why the tests fail for you -- we can leave this open, but we don't know how to help.\n"
        }
    ]
}