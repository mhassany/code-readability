{
    "url": "https://api.github.com/repos/pallets/flask/issues/2519",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2519/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2519/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2519/events",
    "html_url": "https://github.com/pallets/flask/pull/2519",
    "id": 273389243,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTUyMjA4MjU4",
    "number": 2519,
    "title": "docs: testing: expose init_db function on module",
    "user": {
        "login": "bernardpaulus",
        "id": 1094636,
        "node_id": "MDQ6VXNlcjEwOTQ2MzY=",
        "avatar_url": "https://avatars2.githubusercontent.com/u/1094636?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bernardpaulus",
        "html_url": "https://github.com/bernardpaulus",
        "followers_url": "https://api.github.com/users/bernardpaulus/followers",
        "following_url": "https://api.github.com/users/bernardpaulus/following{/other_user}",
        "gists_url": "https://api.github.com/users/bernardpaulus/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/bernardpaulus/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/bernardpaulus/subscriptions",
        "organizations_url": "https://api.github.com/users/bernardpaulus/orgs",
        "repos_url": "https://api.github.com/users/bernardpaulus/repos",
        "events_url": "https://api.github.com/users/bernardpaulus/events{/privacy}",
        "received_events_url": "https://api.github.com/users/bernardpaulus/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": true,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 6,
    "created_at": "2017-11-13T11:00:52Z",
    "updated_at": "2018-04-18T01:58:35Z",
    "closed_at": "2017-11-13T13:20:54Z",
    "author_association": "NONE",
    "pull_request": {
        "url": "https://api.github.com/repos/pallets/flask/pulls/2519",
        "html_url": "https://github.com/pallets/flask/pull/2519",
        "diff_url": "https://github.com/pallets/flask/pull/2519.diff",
        "patch_url": "https://github.com/pallets/flask/pull/2519.patch"
    },
    "body": "Hello!\r\n\r\nI might've missed it, but when you follow the tutorial, it seems to forget to mention that you need to expose `init_db\u00b4 on the module.\r\n\r\nHere is a proposal to add it :)\r\n\r\nCheers,\r\n\r\nBernard",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/343916714",
            "html_url": "https://github.com/pallets/flask/pull/2519#issuecomment-343916714",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2519",
            "id": 343916714,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0MzkxNjcxNA==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-11-13T13:20:54Z",
            "updated_at": "2017-11-13T13:20:54Z",
            "author_association": "MEMBER",
            "body": "There's no reason to do that, you can import from where it is. `from flaskr.flaskr import init_db`"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/343927736",
            "html_url": "https://github.com/pallets/flask/pull/2519#issuecomment-343927736",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2519",
            "id": 343927736,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0MzkyNzczNg==",
            "user": {
                "login": "bernardpaulus",
                "id": 1094636,
                "node_id": "MDQ6VXNlcjEwOTQ2MzY=",
                "avatar_url": "https://avatars2.githubusercontent.com/u/1094636?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/bernardpaulus",
                "html_url": "https://github.com/bernardpaulus",
                "followers_url": "https://api.github.com/users/bernardpaulus/followers",
                "following_url": "https://api.github.com/users/bernardpaulus/following{/other_user}",
                "gists_url": "https://api.github.com/users/bernardpaulus/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/bernardpaulus/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bernardpaulus/subscriptions",
                "organizations_url": "https://api.github.com/users/bernardpaulus/orgs",
                "repos_url": "https://api.github.com/users/bernardpaulus/repos",
                "events_url": "https://api.github.com/users/bernardpaulus/events{/privacy}",
                "received_events_url": "https://api.github.com/users/bernardpaulus/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-11-13T14:03:03Z",
            "updated_at": "2017-11-13T14:03:03Z",
            "author_association": "NONE",
            "body": "It's not correct: you'd do:\r\n\r\n    init_db()\r\n\r\ninstead of the current\r\n\r\n    flask.init_db()\r\n\r\nhere: http://flask.pocoo.org/docs/0.12/testing/#testing"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/343931734",
            "html_url": "https://github.com/pallets/flask/pull/2519#issuecomment-343931734",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2519",
            "id": 343931734,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0MzkzMTczNA==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-11-13T14:17:29Z",
            "updated_at": "2017-11-13T14:17:29Z",
            "author_association": "MEMBER",
            "body": "I'm not sure what you mean. There are no restrictions on where you can import things from in Python."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/343965257",
            "html_url": "https://github.com/pallets/flask/pull/2519#issuecomment-343965257",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2519",
            "id": 343965257,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0Mzk2NTI1Nw==",
            "user": {
                "login": "bernardpaulus",
                "id": 1094636,
                "node_id": "MDQ6VXNlcjEwOTQ2MzY=",
                "avatar_url": "https://avatars2.githubusercontent.com/u/1094636?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/bernardpaulus",
                "html_url": "https://github.com/bernardpaulus",
                "followers_url": "https://api.github.com/users/bernardpaulus/followers",
                "following_url": "https://api.github.com/users/bernardpaulus/following{/other_user}",
                "gists_url": "https://api.github.com/users/bernardpaulus/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/bernardpaulus/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bernardpaulus/subscriptions",
                "organizations_url": "https://api.github.com/users/bernardpaulus/orgs",
                "repos_url": "https://api.github.com/users/bernardpaulus/repos",
                "events_url": "https://api.github.com/users/bernardpaulus/events{/privacy}",
                "received_events_url": "https://api.github.com/users/bernardpaulus/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-11-13T16:01:07Z",
            "updated_at": "2017-11-13T16:02:20Z",
            "author_association": "NONE",
            "body": "Sure, I understand where I was not clear: I meant the [docs page over testing](http://flask.pocoo.org/docs/0.12/testing/#testing) is not correct, because following it as-is leads to this error:\r\n\r\n    $ python setup.py test\r\n    running pytest\r\n    running egg_info\r\n    writing flaskr.egg-info\\PKG-INFO\r\n    writing dependency_links to flaskr.egg-info\\dependency_links.txt\r\n    writing requirements to flaskr.egg-info\\requires.txt\r\n    writing top-level names to flaskr.egg-info\\top_level.txt\r\n    reading manifest file 'flaskr.egg-info\\SOURCES.txt'\r\n    reading manifest template 'MANIFEST.in'\r\n    writing manifest file 'flaskr.egg-info\\SOURCES.txt'\r\n    running build_ext\r\n    ============================= test session starts =============================\r\n    platform win32 -- Python 3.6.0, pytest-3.2.3, py-1.4.34, pluggy-0.4.0\r\n    rootdir: C:\\Users\\bernard\\junk\\python\\flask\\tutorial\\flaskr, inifile:\r\n    collected 3 items\r\n    \r\n    tests\\test_flaskr.py FFF\r\n    \r\n    ================================== FAILURES ===================================\r\n    ________________________ FlaskrTestCase.test_empty_db _________________________\r\n    \r\n    self = <test_flaskr.FlaskrTestCase testMethod=test_empty_db>\r\n    \r\n        def setUp(self):\r\n            self.db_fd, flaskr.app.config['DATABASE'] = tempfile.mkstemp()\r\n            flaskr.app.testing = True\r\n            self.app = flaskr.app.test_client()\r\n            with flaskr.app.app_context():\r\n    >           flaskr.init_db()\r\n    E           AttributeError: module 'flaskr' has no attribute 'init_db'\r\n    \r\n    tests\\test_flaskr.py:14: AttributeError\r\n    ______________________ FlaskrTestCase.test_login_logout _______________________\r\n    \r\n    self = <test_flaskr.FlaskrTestCase testMethod=test_login_logout>\r\n    \r\n        def setUp(self):\r\n            self.db_fd, flaskr.app.config['DATABASE'] = tempfile.mkstemp()\r\n            flaskr.app.testing = True\r\n            self.app = flaskr.app.test_client()\r\n            with flaskr.app.app_context():\r\n    >           flaskr.init_db()\r\n    E           AttributeError: module 'flaskr' has no attribute 'init_db'\r\n    \r\n    tests\\test_flaskr.py:14: AttributeError\r\n    ________________________ FlaskrTestCase.test_messages _________________________\r\n    \r\n    self = <test_flaskr.FlaskrTestCase testMethod=test_messages>\r\n    \r\n        def setUp(self):\r\n            self.db_fd, flaskr.app.config['DATABASE'] = tempfile.mkstemp()\r\n            flaskr.app.testing = True\r\n            self.app = flaskr.app.test_client()\r\n            with flaskr.app.app_context():\r\n    >           flaskr.init_db()\r\n    E           AttributeError: module 'flaskr' has no attribute 'init_db'\r\n    \r\n    tests\\test_flaskr.py:14: AttributeError\r\n    ========================== 3 failed in 0.64 seconds ===========================\r\n\r\nFor your convenience, [here](https://github.com/bernardpaulus/flaskr-follow-tutorial/tree/redo-doc-problem) is the code i got by following the tutorial.\r\n\r\nI would like to change the tutorial so that other users have a tutorial that just works.\r\n\r\nSince the existing code in `test_flask.py` goes like:\r\n\r\n    import flaskr\r\n    [...]\r\n                flaskr.init_db()\r\n\r\nadding `init_db` to the imports in `__init__.py` fixes the problem.\r\n\r\nOn the other side, if we follow what you said, in `test_flaskr.py`\r\n\r\n    from flaskr.flaskr import init_db\r\n\r\nwill work only if you change `flaskr.init_db()` to `init_db()`.\r\n\r\nBoth alternatives (change the `__init__.py` or the import & method call) are fine: my point is that when you follow the tutorial up to the three tests of the interface you get the above error. \r\n\r\nIn the end, the idea was just to give you a hand by improving the docs :)\r\n\r\nKind regards,\r\n\r\nBernard"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/343970921",
            "html_url": "https://github.com/pallets/flask/pull/2519#issuecomment-343970921",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2519",
            "id": 343970921,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0Mzk3MDkyMQ==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-11-13T16:17:48Z",
            "updated_at": "2017-11-13T16:17:48Z",
            "author_association": "MEMBER",
            "body": "#2513 "
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/343974867",
            "html_url": "https://github.com/pallets/flask/pull/2519#issuecomment-343974867",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2519",
            "id": 343974867,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0Mzk3NDg2Nw==",
            "user": {
                "login": "bernardpaulus",
                "id": 1094636,
                "node_id": "MDQ6VXNlcjEwOTQ2MzY=",
                "avatar_url": "https://avatars2.githubusercontent.com/u/1094636?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/bernardpaulus",
                "html_url": "https://github.com/bernardpaulus",
                "followers_url": "https://api.github.com/users/bernardpaulus/followers",
                "following_url": "https://api.github.com/users/bernardpaulus/following{/other_user}",
                "gists_url": "https://api.github.com/users/bernardpaulus/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/bernardpaulus/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bernardpaulus/subscriptions",
                "organizations_url": "https://api.github.com/users/bernardpaulus/orgs",
                "repos_url": "https://api.github.com/users/bernardpaulus/repos",
                "events_url": "https://api.github.com/users/bernardpaulus/events{/privacy}",
                "received_events_url": "https://api.github.com/users/bernardpaulus/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-11-13T16:29:02Z",
            "updated_at": "2017-11-13T16:29:02Z",
            "author_association": "NONE",
            "body": "Ok! Good luck for the doc rewrite :)"
        }
    ]
}