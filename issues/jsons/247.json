{
    "url": "https://api.github.com/repos/pallets/flask/issues/247",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/247/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/247/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/247/events",
    "html_url": "https://github.com/pallets/flask/issues/247",
    "id": 1081464,
    "node_id": "MDU6SXNzdWUxMDgxNDY0",
    "number": 247,
    "title": "don't spread JSON FUD",
    "user": {
        "login": "michaelficarra",
        "id": 218840,
        "node_id": "MDQ6VXNlcjIxODg0MA==",
        "avatar_url": "https://avatars1.githubusercontent.com/u/218840?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/michaelficarra",
        "html_url": "https://github.com/michaelficarra",
        "followers_url": "https://api.github.com/users/michaelficarra/followers",
        "following_url": "https://api.github.com/users/michaelficarra/following{/other_user}",
        "gists_url": "https://api.github.com/users/michaelficarra/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/michaelficarra/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/michaelficarra/subscriptions",
        "organizations_url": "https://api.github.com/users/michaelficarra/orgs",
        "repos_url": "https://api.github.com/users/michaelficarra/repos",
        "events_url": "https://api.github.com/users/michaelficarra/events{/privacy}",
        "received_events_url": "https://api.github.com/users/michaelficarra/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2011-06-19T18:54:09Z",
    "updated_at": "2011-06-20T06:57:04Z",
    "closed_at": "2011-06-20T06:01:24Z",
    "author_association": "NONE",
    "body": "@rstacruz recently pointed me to the [JSON security](http://flask.pocoo.org/docs/security/#json-security) section of your documentation. It is irresponsible to pass off some sort of buggy browser behaviour (which probably doesn't even exist) as an inherent issue with using an array as the top-level object in a JSON document. The ecmascript 5 specification [very clearly states](http://es5.github.com/#x11.1.4):\n\n> Let _array_ be the result of creating a new object as if by the expression `new Array()` where `Array` is the **standard built-in constructor** with that name.\n\nAny browsers that behave as you say they _should_ in your documentation are not following the spec. I tested for this behaviour in Chrome, Opera, and Firefox, and none of them behaved as was described. Because of that, I ask that you remove that section of the documentation and put in its place a disclaimer that what was there previously (for over a year now!) was not factual. If anyone _does_ find this behaviour in any browser, report it instead in the proper place.\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/1400779",
            "html_url": "https://github.com/pallets/flask/issues/247#issuecomment-1400779",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/247",
            "id": 1400779,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE0MDA3Nzk=",
            "user": {
                "login": "mitsuhiko",
                "id": 7396,
                "node_id": "MDQ6VXNlcjczOTY=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/7396?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mitsuhiko",
                "html_url": "https://github.com/mitsuhiko",
                "followers_url": "https://api.github.com/users/mitsuhiko/followers",
                "following_url": "https://api.github.com/users/mitsuhiko/following{/other_user}",
                "gists_url": "https://api.github.com/users/mitsuhiko/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mitsuhiko/subscriptions",
                "organizations_url": "https://api.github.com/users/mitsuhiko/orgs",
                "repos_url": "https://api.github.com/users/mitsuhiko/repos",
                "events_url": "https://api.github.com/users/mitsuhiko/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mitsuhiko/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2011-06-20T06:01:24Z",
            "updated_at": "2011-06-20T06:01:24Z",
            "author_association": "MEMBER",
            "body": "You can verify that this works with older browsers. I might add a notice at one point that it's no longer necessary. This is exactly how gmail was hacked a while ago.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/1400789",
            "html_url": "https://github.com/pallets/flask/issues/247#issuecomment-1400789",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/247",
            "id": 1400789,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE0MDA3ODk=",
            "user": {
                "login": "mitsuhiko",
                "id": 7396,
                "node_id": "MDQ6VXNlcjczOTY=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/7396?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mitsuhiko",
                "html_url": "https://github.com/mitsuhiko",
                "followers_url": "https://api.github.com/users/mitsuhiko/followers",
                "following_url": "https://api.github.com/users/mitsuhiko/following{/other_user}",
                "gists_url": "https://api.github.com/users/mitsuhiko/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mitsuhiko/subscriptions",
                "organizations_url": "https://api.github.com/users/mitsuhiko/orgs",
                "repos_url": "https://api.github.com/users/mitsuhiko/repos",
                "events_url": "https://api.github.com/users/mitsuhiko/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mitsuhiko/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2011-06-20T06:05:54Z",
            "updated_at": "2011-06-20T06:16:58Z",
            "author_association": "MEMBER",
            "body": "Also nice that you quote ecmascript 5 which is a very recent version. If you check ecmascript edition 3 which until very recently was what browsers implemented, the specification reads this:\n\n> The production ArrayLiteral : [ Elisionopt ] is evaluated as follows:\n> - Create a new array as if by the expression new Array().\n\nThere is a difference between outdated information and FUD. Just because Firefox 4 implemented ecmascript 5 does not mean that suddenly that attack vector vanished for users. Older browsers (which are still widespread) are still affected by this.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/1400912",
            "html_url": "https://github.com/pallets/flask/issues/247#issuecomment-1400912",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/247",
            "id": 1400912,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE0MDA5MTI=",
            "user": {
                "login": "michaelficarra",
                "id": 218840,
                "node_id": "MDQ6VXNlcjIxODg0MA==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/218840?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/michaelficarra",
                "html_url": "https://github.com/michaelficarra",
                "followers_url": "https://api.github.com/users/michaelficarra/followers",
                "following_url": "https://api.github.com/users/michaelficarra/following{/other_user}",
                "gists_url": "https://api.github.com/users/michaelficarra/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/michaelficarra/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/michaelficarra/subscriptions",
                "organizations_url": "https://api.github.com/users/michaelficarra/orgs",
                "repos_url": "https://api.github.com/users/michaelficarra/repos",
                "events_url": "https://api.github.com/users/michaelficarra/events{/privacy}",
                "received_events_url": "https://api.github.com/users/michaelficarra/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2011-06-20T06:47:39Z",
            "updated_at": "2011-06-20T06:47:39Z",
            "author_association": "NONE",
            "body": "And it was for this reason that google stopped supporting IE6 immediately after that attack. You put the responsibility for the attack vector on the web app developer, when it is not their problem. If my bank grants only me permission to access my account, but I perform transactions against my account on behalf of others, do I blame my bank for its \"poor security\" or myself? So while you would say \"gmail was hacked\", I would say that some browsers (just IE6 and below, I'm assuming) improperly sandboxed content from websites under separate domains, one of whom was gmail.\n\nI do admit that I should have quoted the 3rd edition of the ecmascript spec (which is ambiguous, so you can't really blame Microsoft), but I also didn't think we were going to be talking about 10 year old browsers. This outdated information about _browser bugs_ is, at the same time, FUD about _JSON_. I still hold in my belief that you should not discourage the use of top-level array literals. This is not an inherent JSON problem, there are no clashing specs; 10 years ago, there was a bug in a shitty browser.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/1400949",
            "html_url": "https://github.com/pallets/flask/issues/247#issuecomment-1400949",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/247",
            "id": 1400949,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE0MDA5NDk=",
            "user": {
                "login": "mitsuhiko",
                "id": 7396,
                "node_id": "MDQ6VXNlcjczOTY=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/7396?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mitsuhiko",
                "html_url": "https://github.com/mitsuhiko",
                "followers_url": "https://api.github.com/users/mitsuhiko/followers",
                "following_url": "https://api.github.com/users/mitsuhiko/following{/other_user}",
                "gists_url": "https://api.github.com/users/mitsuhiko/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mitsuhiko/subscriptions",
                "organizations_url": "https://api.github.com/users/mitsuhiko/orgs",
                "repos_url": "https://api.github.com/users/mitsuhiko/repos",
                "events_url": "https://api.github.com/users/mitsuhiko/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mitsuhiko/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2011-06-20T06:56:08Z",
            "updated_at": "2011-06-20T06:56:08Z",
            "author_association": "MEMBER",
            "body": "Fact is that when I wrote that section for the documentation the attack was possible with the then recent Firefox version (I think it was 3.5 or something). At least I verified it back then. Security _is_ the responsibility of the application developer and not only the browser vendor.\n\n> This outdated information about browser bugs is, at the same time, FUD about JSON\n\nFeel free to call it FUD as much as you want. The documentation is very careful in terms of security and will continue to be that. There were many ways to intercept JSON by evaluating it as JavaScript and the Array constructor was only one possibility. Attaching setters on the object prototype or array prototype was also a common way. Firefox still prefixes the JSON responses from the API with 'for(;;)' and i am pretty damn sure they know what they are doing.\n\nI will continue to monitor changes in that regard, but right now I don't see a reason to change the documentation as a) you can't be too careful and the current practice of disallowing toplevel array objects does not do any harm and b) there are still browsers out there where ecmascript 5 is not implemented.\n\n> there was a bug in a shitty browser\n\nIt was required behavior by ecmascript at one point and it was implemented in every single javascript engine, not just IE6.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/1400952",
            "html_url": "https://github.com/pallets/flask/issues/247#issuecomment-1400952",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/247",
            "id": 1400952,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE0MDA5NTI=",
            "user": {
                "login": "mitsuhiko",
                "id": 7396,
                "node_id": "MDQ6VXNlcjczOTY=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/7396?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mitsuhiko",
                "html_url": "https://github.com/mitsuhiko",
                "followers_url": "https://api.github.com/users/mitsuhiko/followers",
                "following_url": "https://api.github.com/users/mitsuhiko/following{/other_user}",
                "gists_url": "https://api.github.com/users/mitsuhiko/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mitsuhiko/subscriptions",
                "organizations_url": "https://api.github.com/users/mitsuhiko/orgs",
                "repos_url": "https://api.github.com/users/mitsuhiko/repos",
                "events_url": "https://api.github.com/users/mitsuhiko/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mitsuhiko/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2011-06-20T06:57:04Z",
            "updated_at": "2011-06-20T06:57:04Z",
            "author_association": "MEMBER",
            "body": "The more important question here is why I suddenly get tons of mails and a ticket about this particular documentation page. It's not exactly new...\n"
        }
    ]
}