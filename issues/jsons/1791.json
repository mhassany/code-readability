{
    "url": "https://api.github.com/repos/pallets/flask/issues/1791",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1791/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1791/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1791/events",
    "html_url": "https://github.com/pallets/flask/issues/1791",
    "id": 151018373,
    "node_id": "MDU6SXNzdWUxNTEwMTgzNzM=",
    "number": 1791,
    "title": "test_monkeypached_sleep fails on CentOS 6.7.",
    "user": {
        "login": "dmtucker",
        "id": 1817814,
        "node_id": "MDQ6VXNlcjE4MTc4MTQ=",
        "avatar_url": "https://avatars3.githubusercontent.com/u/1817814?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dmtucker",
        "html_url": "https://github.com/dmtucker",
        "followers_url": "https://api.github.com/users/dmtucker/followers",
        "following_url": "https://api.github.com/users/dmtucker/following{/other_user}",
        "gists_url": "https://api.github.com/users/dmtucker/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/dmtucker/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/dmtucker/subscriptions",
        "organizations_url": "https://api.github.com/users/dmtucker/orgs",
        "repos_url": "https://api.github.com/users/dmtucker/repos",
        "events_url": "https://api.github.com/users/dmtucker/events{/privacy}",
        "received_events_url": "https://api.github.com/users/dmtucker/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2016-04-26T01:21:58Z",
    "updated_at": "2016-04-26T15:57:17Z",
    "closed_at": "2016-04-26T15:57:17Z",
    "author_association": "NONE",
    "body": "This issue is related to PR #912.\n\n```\n============================= test session starts ==============================\nplatform linux2 -- Python 2.6.6, pytest-2.9.1, py-1.4.31, pluggy-0.3.1\nrootdir: /src, inifile: setup.cfg\ncollected 459 items\n\ntests/test_compat.py ..\ntests/test_datastructures.py .............................................s..\ntests/test_debug.py .................ss\ntests/test_exceptions.py ......................\ntests/test_formparser.py ...................\ntests/test_http.py .................................\ntests/test_internal.py ...\ntests/test_local.py .........\ntests/test_routing.py ..................................................\ntests/test_security.py ....\ntests/test_serving.py sssssssssFs\ntests/test_test.py ...................................\ntests/test_urls.py .........................................\ntests/test_utils.py ...................\ntests/test_wrappers.py ...................................................\ntests/test_wsgi.py .......................\ntests/contrib/test_atom.py .\ntests/contrib/test_cache.py ...............................ssssssssssssss\ntests/contrib/test_fixers.py .......\ntests/contrib/test_iterio.py ....ss\ntests/contrib/test_securecookie.py ..\ntests/contrib/test_sessions.py .....\ntests/contrib/test_wrappers.py ...\ntests/res/test.txt s\n\n=================================== FAILURES ===================================\n___________________________ test_monkeypached_sleep ____________________________\n\ntmpdir = local('/tmp/pytest-of-root/pytest-0/test_monkeypached_sleep0')\n\n    def test_monkeypached_sleep(tmpdir):\n        # removing the staticmethod wrapper in the definition of\n        # ReloaderLoop._sleep works most of the time, since `sleep` is a c\n        # function, and unlike python functions which are descriptors, doesn't\n        # become a method when attached to a class. however, if the user has called\n        # `eventlet.monkey_patch` before importing `_reloader`, `time.sleep` is a\n        # python function, and subsequently calling `ReloaderLoop._sleep` fails\n        # with a TypeError. This test checks that _sleep is attached correctly.\n        script = tmpdir.mkdir('app').join('test.py')\n        script.write(textwrap.dedent('''\n        import time\n\n        def sleep(secs):\n            pass\n\n        # simulate eventlet.monkey_patch by replacing the builtin sleep\n        # with a regular function before _reloader is imported\n        time.sleep = sleep\n\n        from werkzeug._reloader import ReloaderLoop\n        ReloaderLoop()._sleep(0)\n        '''))\n>       subprocess.check_call(['python', str(script)])\n\ntests/test_serving.py:233: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\npopenargs = (['python', '/tmp/pytest-of-root/pytest-0/test_monkeypached_sleep0/app/test.py'],)\nkwargs = {}, retcode = 1\ncmd = ['python', '/tmp/pytest-of-root/pytest-0/test_monkeypached_sleep0/app/test.py']\n\n    def check_call(*popenargs, **kwargs):\n        \"\"\"Run command with arguments.  Wait for command to complete.  If\n        the exit code was zero then return, otherwise raise\n        CalledProcessError.  The CalledProcessError object will have the\n        return code in the returncode attribute.\n\n        The arguments are the same as for the Popen constructor.  Example:\n\n        check_call([\"ls\", \"-l\"])\n        \"\"\"\n        retcode = call(*popenargs, **kwargs)\n        cmd = kwargs.get(\"args\")\n        if cmd is None:\n            cmd = popenargs[0]\n        if retcode:\n>           raise CalledProcessError(retcode, cmd)\nE           CalledProcessError: Command '['python', '/tmp/pytest-of-root/pytest-0/test_monkeypached_sleep0/app/test.py']' returned non-zero exit status 1\n\n/usr/lib64/python2.6/subprocess.py:505: CalledProcessError\n----------------------------- Captured stderr call -----------------------------\nTraceback (most recent call last):\n  File \"/tmp/pytest-of-root/pytest-0/test_monkeypached_sleep0/app/test.py\", line 11, in <module>\n    from werkzeug._reloader import ReloaderLoop\nImportError: No module named werkzeug._reloader\n=============== 1 failed, 428 passed, 30 skipped in 3.57 seconds ===============\n```\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/214792825",
            "html_url": "https://github.com/pallets/flask/issues/1791#issuecomment-214792825",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1791",
            "id": 214792825,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxNDc5MjgyNQ==",
            "user": {
                "login": "dmtucker",
                "id": 1817814,
                "node_id": "MDQ6VXNlcjE4MTc4MTQ=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/1817814?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/dmtucker",
                "html_url": "https://github.com/dmtucker",
                "followers_url": "https://api.github.com/users/dmtucker/followers",
                "following_url": "https://api.github.com/users/dmtucker/following{/other_user}",
                "gists_url": "https://api.github.com/users/dmtucker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/dmtucker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dmtucker/subscriptions",
                "organizations_url": "https://api.github.com/users/dmtucker/orgs",
                "repos_url": "https://api.github.com/users/dmtucker/repos",
                "events_url": "https://api.github.com/users/dmtucker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/dmtucker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-26T15:57:17Z",
            "updated_at": "2016-04-26T15:57:17Z",
            "author_association": "NONE",
            "body": "Oops, I meant to file this in werkzeug.\nhttps://github.com/pallets/werkzeug/issues/914\n"
        }
    ]
}