{
    "url": "https://api.github.com/repos/pallets/flask/issues/212",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/212/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/212/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/212/events",
    "html_url": "https://github.com/pallets/flask/issues/212",
    "id": 719838,
    "node_id": "MDU6SXNzdWU3MTk4Mzg=",
    "number": 212,
    "title": "Module.after_app_request causes exception (0.6.1)",
    "user": {
        "login": "remyroy",
        "id": 303593,
        "node_id": "MDQ6VXNlcjMwMzU5Mw==",
        "avatar_url": "https://avatars0.githubusercontent.com/u/303593?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/remyroy",
        "html_url": "https://github.com/remyroy",
        "followers_url": "https://api.github.com/users/remyroy/followers",
        "following_url": "https://api.github.com/users/remyroy/following{/other_user}",
        "gists_url": "https://api.github.com/users/remyroy/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/remyroy/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/remyroy/subscriptions",
        "organizations_url": "https://api.github.com/users/remyroy/orgs",
        "repos_url": "https://api.github.com/users/remyroy/repos",
        "events_url": "https://api.github.com/users/remyroy/events{/privacy}",
        "received_events_url": "https://api.github.com/users/remyroy/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2011-03-31T02:23:08Z",
    "updated_at": "2011-04-18T14:39:52Z",
    "closed_at": "2011-03-31T02:40:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "When trying to use Module.after_app_request, it causes the following exception:\n\n<pre>\nTraceback (most recent call last):\n  File \"/Users/remyroy/VirtualEnvs/issueproject/lib/python2.6/site-packages/flask/app.py\", line 889, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"/Users/remyroy/VirtualEnvs/issueproject/lib/python2.6/site-packages/flask/app.py\", line 883, in wsgi_app\n    response = self.make_response(self.handle_exception(e))\n  File \"/Users/remyroy/VirtualEnvs/issueproject/lib/python2.6/site-packages/flask/app.py\", line 881, in wsgi_app\n    response = self.process_response(response)\n  File \"/Users/remyroy/VirtualEnvs/issueproject/lib/python2.6/site-packages/flask/app.py\", line 796, in process_response\n    response = handler(response)\nTypeError: after_request() takes no arguments (1 given)\n</pre>\n\n\nSteps to reproduce:\n1.  Create a new folder issueproject.\n2.  Create a file called issueproject.py in that folder with the following content:\n   <pre>\n   # -_\\- coding: utf-8 -_-\n   from flask import Flask\n   from issueproject.views import views\n\napp = Flask(**name**)\n\napp.config.from_object('issueproject.config.Config')\napp.register_module(views)\n\nif **name** == \"**main**\":\n    app.run()\n</pre>\n3.  Create a sub folder issueproject.\n4.  Add a file called views.py in that sub folder with the following content:\n\n<pre>\n# -*- coding: utf-8 -*-\nfrom flask import Module\nviews = Module(__name__)\n\n@views.after_app_request\ndef after_request():\n    pass\n\n@views.route('/')\ndef index():\n    return 'hello world'\n</pre>\n1.  Add a file called config.py in that sub folder with the following content:\n   <pre>\n   # -_\\- coding: utf-8 -_-\n\nclass Config(object):\n    DEBUG = True\n    TESTING = False\n</pre>\n6.  Run the main issueproject.py with the following command line:\n\n<pre>\npython issueproject.py\n</pre>\n1.  Navigate to http://localhost:5000/ .\n2.  See the exception.\n\nHere is the pip freeze from my environment:\n\n<pre>\nFlask==0.6.1\nJinja2==2.5.5\nPyRSS2Gen==1.0.0\nTwisted==8.2.0\nWerkzeug==0.6.2\naltgraph==0.6.8.dev\nbdist-mpkg==0.4.3.dev\nbonjour-py==0.3\ndecorator==3.2.1\njsonrpc==0.01\nmacholib==1.2.1.dev\nmercurial==1.8\nmodulegraph==0.7.2.dev\nnumpy==1.2.1\npy==1.4.2\npy2app==0.4.2\npyOpenSSL==0.7\npyobjc-core==2.2b3\npyobjc-framework-AddressBook==2.2b3\npyobjc-framework-AppleScriptKit==2.2b3\npyobjc-framework-Automator==2.2b3\npyobjc-framework-CFNetwork==2.2b3\npyobjc-framework-CalendarStore==2.2b3\npyobjc-framework-Cocoa==2.2b3\npyobjc-framework-Collaboration==2.2b3\npyobjc-framework-CoreData==2.2b3\npyobjc-framework-CoreText==2.2b3\npyobjc-framework-DictionaryServices==2.2b3\npyobjc-framework-ExceptionHandling==2.2b3\npyobjc-framework-FSEvents==2.2b3\npyobjc-framework-InputMethodKit==2.2b3\npyobjc-framework-InstallerPlugins==2.2b3\npyobjc-framework-InstantMessage==2.2b3\npyobjc-framework-InterfaceBuilderKit==2.2b3\npyobjc-framework-LatentSemanticMapping==2.2b3\npyobjc-framework-LaunchServices==2.2b3\npyobjc-framework-Message==2.2b3\npyobjc-framework-PreferencePanes==2.2b3\npyobjc-framework-PubSub==2.2b3\npyobjc-framework-QTKit==2.2b3\npyobjc-framework-Quartz==2.2b3\npyobjc-framework-ScreenSaver==2.2b3\npyobjc-framework-ScriptingBridge==2.2b3\npyobjc-framework-SearchKit==2.2b3\npyobjc-framework-SyncServices==2.2b3\npyobjc-framework-SystemConfiguration==2.2b3\npyobjc-framework-WebKit==2.2b3\npyobjc-framework-XgridFoundation==2.2b3\npyopencl==0.92\npytest==2.0.2\npython-dateutil==1.2\npytools==11\nvirtualenv==1.5.1\nwsgiref==0.1.2\nwxPython==2.8.8.1\nwxPython-common==2.8.8.1\nwxaddons==2.8.8.1\nxattr==0.5\nzope.interface==3.5.1\n</pre>\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/939358",
            "html_url": "https://github.com/pallets/flask/issues/212#issuecomment-939358",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/212",
            "id": 939358,
            "node_id": "MDEyOklzc3VlQ29tbWVudDkzOTM1OA==",
            "user": {
                "login": "remyroy",
                "id": 303593,
                "node_id": "MDQ6VXNlcjMwMzU5Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/303593?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/remyroy",
                "html_url": "https://github.com/remyroy",
                "followers_url": "https://api.github.com/users/remyroy/followers",
                "following_url": "https://api.github.com/users/remyroy/following{/other_user}",
                "gists_url": "https://api.github.com/users/remyroy/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/remyroy/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/remyroy/subscriptions",
                "organizations_url": "https://api.github.com/users/remyroy/orgs",
                "repos_url": "https://api.github.com/users/remyroy/repos",
                "events_url": "https://api.github.com/users/remyroy/events{/privacy}",
                "received_events_url": "https://api.github.com/users/remyroy/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2011-03-31T02:40:48Z",
            "updated_at": "2011-03-31T02:40:48Z",
            "author_association": "CONTRIBUTOR",
            "body": "Ha, I just found it. The decorated after_request function needs one param to receive the response. That wasn't documented. I'll have a look to update the doc.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/941301",
            "html_url": "https://github.com/pallets/flask/issues/212#issuecomment-941301",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/212",
            "id": 941301,
            "node_id": "MDEyOklzc3VlQ29tbWVudDk0MTMwMQ==",
            "user": {
                "login": "rduplain",
                "id": 36428,
                "node_id": "MDQ6VXNlcjM2NDI4",
                "avatar_url": "https://avatars1.githubusercontent.com/u/36428?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/rduplain",
                "html_url": "https://github.com/rduplain",
                "followers_url": "https://api.github.com/users/rduplain/followers",
                "following_url": "https://api.github.com/users/rduplain/following{/other_user}",
                "gists_url": "https://api.github.com/users/rduplain/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/rduplain/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rduplain/subscriptions",
                "organizations_url": "https://api.github.com/users/rduplain/orgs",
                "repos_url": "https://api.github.com/users/rduplain/repos",
                "events_url": "https://api.github.com/users/rduplain/events{/privacy}",
                "received_events_url": "https://api.github.com/users/rduplain/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2011-03-31T14:42:59Z",
            "updated_at": "2011-03-31T14:42:59Z",
            "author_association": "CONTRIBUTOR",
            "body": "Checked the docs, and indeed after_request docs could be improved.  Searching after_request doesn't indicate that the registered function should accept an argument.  This is the case for both Flask and Module.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/949777",
            "html_url": "https://github.com/pallets/flask/issues/212#issuecomment-949777",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/212",
            "id": 949777,
            "node_id": "MDEyOklzc3VlQ29tbWVudDk0OTc3Nw==",
            "user": {
                "login": "remyroy",
                "id": 303593,
                "node_id": "MDQ6VXNlcjMwMzU5Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/303593?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/remyroy",
                "html_url": "https://github.com/remyroy",
                "followers_url": "https://api.github.com/users/remyroy/followers",
                "following_url": "https://api.github.com/users/remyroy/following{/other_user}",
                "gists_url": "https://api.github.com/users/remyroy/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/remyroy/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/remyroy/subscriptions",
                "organizations_url": "https://api.github.com/users/remyroy/orgs",
                "repos_url": "https://api.github.com/users/remyroy/repos",
                "events_url": "https://api.github.com/users/remyroy/events{/privacy}",
                "received_events_url": "https://api.github.com/users/remyroy/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2011-04-02T21:30:57Z",
            "updated_at": "2011-04-02T21:30:57Z",
            "author_association": "CONTRIBUTOR",
            "body": "I created a pull request for this: https://github.com/mitsuhiko/flask/pull/213 .\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/1021332",
            "html_url": "https://github.com/pallets/flask/issues/212#issuecomment-1021332",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/212",
            "id": 1021332,
            "node_id": "MDEyOklzc3VlQ29tbWVudDEwMjEzMzI=",
            "user": {
                "login": "mitsuhiko",
                "id": 7396,
                "node_id": "MDQ6VXNlcjczOTY=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/7396?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mitsuhiko",
                "html_url": "https://github.com/mitsuhiko",
                "followers_url": "https://api.github.com/users/mitsuhiko/followers",
                "following_url": "https://api.github.com/users/mitsuhiko/following{/other_user}",
                "gists_url": "https://api.github.com/users/mitsuhiko/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mitsuhiko/subscriptions",
                "organizations_url": "https://api.github.com/users/mitsuhiko/orgs",
                "repos_url": "https://api.github.com/users/mitsuhiko/repos",
                "events_url": "https://api.github.com/users/mitsuhiko/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mitsuhiko/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2011-04-18T14:39:52Z",
            "updated_at": "2011-04-18T14:39:52Z",
            "author_association": "MEMBER",
            "body": "I pulled that pull request.\n"
        }
    ]
}