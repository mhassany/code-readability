{
    "url": "https://api.github.com/repos/pallets/flask/issues/1336",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1336/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1336/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1336/events",
    "html_url": "https://github.com/pallets/flask/issues/1336",
    "id": 56202314,
    "node_id": "MDU6SXNzdWU1NjIwMjMxNA==",
    "number": 1336,
    "title": "request.url returns decoded version. How to get encoded one?",
    "user": {
        "login": "chuanconggao",
        "id": 6963729,
        "node_id": "MDQ6VXNlcjY5NjM3Mjk=",
        "avatar_url": "https://avatars3.githubusercontent.com/u/6963729?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/chuanconggao",
        "html_url": "https://github.com/chuanconggao",
        "followers_url": "https://api.github.com/users/chuanconggao/followers",
        "following_url": "https://api.github.com/users/chuanconggao/following{/other_user}",
        "gists_url": "https://api.github.com/users/chuanconggao/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/chuanconggao/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/chuanconggao/subscriptions",
        "organizations_url": "https://api.github.com/users/chuanconggao/orgs",
        "repos_url": "https://api.github.com/users/chuanconggao/repos",
        "events_url": "https://api.github.com/users/chuanconggao/events{/privacy}",
        "received_events_url": "https://api.github.com/users/chuanconggao/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2015-02-02T06:52:58Z",
    "updated_at": "2018-02-01T16:49:51Z",
    "closed_at": "2015-02-02T20:10:37Z",
    "author_association": "NONE",
    "body": "If I have an URL 'http://localhost/test?p=%23iphone&q=http%3A%2F%2Fwww.google.com', when I use request.url it returns a decoded version:\n\n```\nIn [9]: 'http://localhost/test?p=#iphone&q=http://www.google.com'\n```\n\nThe problem is I cannot use urllib.parse on the decoded version, as it will return wrong result:\n\n```\nIn [9]: urlparse('http://localhost/test?p=#iphone&q=http://www.google.com')\nOut[9]: ParseResult(scheme='http', netloc='localhost', path='/test', params='', query='p=', fragment='iphone&q=http://www.google.com')\n```\n\nI cannot encode it back to correct version too:\n\n```\nIn [11]: quote_plus('http://localhost/test?p=#iphone&q=http://www.google.com')\nOut[11]: 'http%3A%2F%2Flocalhost%2Ftest%3Fp%3D%23iphone%26q%3Dhttp%3A%2F%2Fwww.google.com'\nIn [13]: quote('http://localhost/test?p=#iphone&q=http://www.google.com')\nOut[13]: 'http%3A//localhost/test%3Fp%3D%23iphone%26q%3Dhttp%3A//www.google.com'\n```\n\nHow can I get the correct encoded URL? I think I can use request.args, but it there a better way? I also want to include possible params and fragment, are there any information from request?\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/72425737",
            "html_url": "https://github.com/pallets/flask/issues/1336#issuecomment-72425737",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1336",
            "id": 72425737,
            "node_id": "MDEyOklzc3VlQ29tbWVudDcyNDI1NzM3",
            "user": {
                "login": "DasIch",
                "id": 182316,
                "node_id": "MDQ6VXNlcjE4MjMxNg==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/182316?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/DasIch",
                "html_url": "https://github.com/DasIch",
                "followers_url": "https://api.github.com/users/DasIch/followers",
                "following_url": "https://api.github.com/users/DasIch/following{/other_user}",
                "gists_url": "https://api.github.com/users/DasIch/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/DasIch/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/DasIch/subscriptions",
                "organizations_url": "https://api.github.com/users/DasIch/orgs",
                "repos_url": "https://api.github.com/users/DasIch/repos",
                "events_url": "https://api.github.com/users/DasIch/events{/privacy}",
                "received_events_url": "https://api.github.com/users/DasIch/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-02-02T09:15:12Z",
            "updated_at": "2015-02-02T09:15:12Z",
            "author_association": "CONTRIBUTOR",
            "body": "It's impossible to get the original URL due to WSGI limitations.\n\nQuery arguments are available via `request.args`. Fragments aren't send to the server. \n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/72456352",
            "html_url": "https://github.com/pallets/flask/issues/1336#issuecomment-72456352",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1336",
            "id": 72456352,
            "node_id": "MDEyOklzc3VlQ29tbWVudDcyNDU2MzUy",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-02-02T13:18:39Z",
            "updated_at": "2015-02-02T13:18:39Z",
            "author_association": "MEMBER",
            "body": "Why do you _need_ the URL?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/127704184",
            "html_url": "https://github.com/pallets/flask/issues/1336#issuecomment-127704184",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1336",
            "id": 127704184,
            "node_id": "MDEyOklzc3VlQ29tbWVudDEyNzcwNDE4NA==",
            "user": {
                "login": "eramirem",
                "id": 1304851,
                "node_id": "MDQ6VXNlcjEzMDQ4NTE=",
                "avatar_url": "https://avatars2.githubusercontent.com/u/1304851?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/eramirem",
                "html_url": "https://github.com/eramirem",
                "followers_url": "https://api.github.com/users/eramirem/followers",
                "following_url": "https://api.github.com/users/eramirem/following{/other_user}",
                "gists_url": "https://api.github.com/users/eramirem/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/eramirem/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/eramirem/subscriptions",
                "organizations_url": "https://api.github.com/users/eramirem/orgs",
                "repos_url": "https://api.github.com/users/eramirem/repos",
                "events_url": "https://api.github.com/users/eramirem/events{/privacy}",
                "received_events_url": "https://api.github.com/users/eramirem/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-08-04T18:32:13Z",
            "updated_at": "2015-08-04T18:32:13Z",
            "author_association": "NONE",
            "body": "Same problem here. If one of my url parameters contains a quoted plus sign (%2B), is being decoded by flask as \"+\" and later when I use unquote_plus is being interpreted as a blank space. So, if my parameter contains both \"%2B\" and \"+\" they all end up being blank spaces and that's incorrect.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/362327999",
            "html_url": "https://github.com/pallets/flask/issues/1336#issuecomment-362327999",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1336",
            "id": 362327999,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjMyNzk5OQ==",
            "user": {
                "login": "michaelsbg",
                "id": 23451978,
                "node_id": "MDQ6VXNlcjIzNDUxOTc4",
                "avatar_url": "https://avatars3.githubusercontent.com/u/23451978?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/michaelsbg",
                "html_url": "https://github.com/michaelsbg",
                "followers_url": "https://api.github.com/users/michaelsbg/followers",
                "following_url": "https://api.github.com/users/michaelsbg/following{/other_user}",
                "gists_url": "https://api.github.com/users/michaelsbg/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/michaelsbg/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/michaelsbg/subscriptions",
                "organizations_url": "https://api.github.com/users/michaelsbg/orgs",
                "repos_url": "https://api.github.com/users/michaelsbg/repos",
                "events_url": "https://api.github.com/users/michaelsbg/events{/privacy}",
                "received_events_url": "https://api.github.com/users/michaelsbg/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-02-01T16:49:51Z",
            "updated_at": "2018-02-01T16:49:51Z",
            "author_association": "NONE",
            "body": "I've got the same issue as eramirem, plusses get converted to spaces!"
        }
    ]
}