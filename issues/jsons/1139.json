{
    "url": "https://api.github.com/repos/pallets/flask/issues/1139",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1139/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1139/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1139/events",
    "html_url": "https://github.com/pallets/flask/issues/1139",
    "id": 39365140,
    "node_id": "MDU6SXNzdWUzOTM2NTE0MA==",
    "number": 1139,
    "title": "Wrong Flask.instance_path inside virtualenv",
    "user": {
        "login": "sahutd",
        "id": 5676959,
        "node_id": "MDQ6VXNlcjU2NzY5NTk=",
        "avatar_url": "https://avatars1.githubusercontent.com/u/5676959?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sahutd",
        "html_url": "https://github.com/sahutd",
        "followers_url": "https://api.github.com/users/sahutd/followers",
        "following_url": "https://api.github.com/users/sahutd/following{/other_user}",
        "gists_url": "https://api.github.com/users/sahutd/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/sahutd/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/sahutd/subscriptions",
        "organizations_url": "https://api.github.com/users/sahutd/orgs",
        "repos_url": "https://api.github.com/users/sahutd/repos",
        "events_url": "https://api.github.com/users/sahutd/events{/privacy}",
        "received_events_url": "https://api.github.com/users/sahutd/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2014-08-03T07:14:59Z",
    "updated_at": "2014-08-08T16:22:40Z",
    "closed_at": "2014-08-08T16:22:40Z",
    "author_association": "NONE",
    "body": "There is a bug in detection of Flask.instance_path when run inside a virtualenv. I have experienced this issue on both python2.7 and python3.4. My machines are debian wheezy and debian jessie.\nThis issue is not present when run from system Python. I have described below the simplest code to reproduce the error. \nI am willing to submit a patch provided this issue is real, and not something wrong on my end.\n\nSome sample code to reproduce the error:\nDirectory tree:\n\n```\n|-- app.py\n|-- run.py\n|-- views.py\n```\n\n**Contents of files**\n\n```\n#app.py\nfrom flask import Flask\napp = Flask(__name__)\nimport views\n\n#run.py\nfrom app import app\napp.run()\n\n#views.py\nfrom app import app\n@app.route('/')\ndef index():\n    return app.instance_path\n```\n\n**Virtualenv python**\n\n```\npython run.py\n--\ncurl http://127.0.0.1:5000\n/home/saimadhav/development/demo/var/app-instance\n```\n\n**System python**\n\n```\npython3.4 run.py\n--\ncurl http://127.0.0.1:5000\n/home/saimadhav/development/demo/instance\n```\n\nEDIT1: The above 3 files in my instance are placed in a folder demo\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/51550198",
            "html_url": "https://github.com/pallets/flask/issues/1139#issuecomment-51550198",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1139",
            "id": 51550198,
            "node_id": "MDEyOklzc3VlQ29tbWVudDUxNTUwMTk4",
            "user": {
                "login": "drincruz",
                "id": 1136024,
                "node_id": "MDQ6VXNlcjExMzYwMjQ=",
                "avatar_url": "https://avatars0.githubusercontent.com/u/1136024?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/drincruz",
                "html_url": "https://github.com/drincruz",
                "followers_url": "https://api.github.com/users/drincruz/followers",
                "following_url": "https://api.github.com/users/drincruz/following{/other_user}",
                "gists_url": "https://api.github.com/users/drincruz/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/drincruz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/drincruz/subscriptions",
                "organizations_url": "https://api.github.com/users/drincruz/orgs",
                "repos_url": "https://api.github.com/users/drincruz/repos",
                "events_url": "https://api.github.com/users/drincruz/events{/privacy}",
                "received_events_url": "https://api.github.com/users/drincruz/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-08-08T00:25:45Z",
            "updated_at": "2014-08-08T00:25:45Z",
            "author_association": "NONE",
            "body": "Hi @sahutd , I cannot reproduce this error. Not sure if I'm reproducing the issue properly.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/51551545",
            "html_url": "https://github.com/pallets/flask/issues/1139#issuecomment-51551545",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1139",
            "id": 51551545,
            "node_id": "MDEyOklzc3VlQ29tbWVudDUxNTUxNTQ1",
            "user": {
                "login": "sahutd",
                "id": 5676959,
                "node_id": "MDQ6VXNlcjU2NzY5NTk=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/5676959?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/sahutd",
                "html_url": "https://github.com/sahutd",
                "followers_url": "https://api.github.com/users/sahutd/followers",
                "following_url": "https://api.github.com/users/sahutd/following{/other_user}",
                "gists_url": "https://api.github.com/users/sahutd/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/sahutd/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sahutd/subscriptions",
                "organizations_url": "https://api.github.com/users/sahutd/orgs",
                "repos_url": "https://api.github.com/users/sahutd/repos",
                "events_url": "https://api.github.com/users/sahutd/events{/privacy}",
                "received_events_url": "https://api.github.com/users/sahutd/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-08-08T00:48:57Z",
            "updated_at": "2014-08-08T00:48:57Z",
            "author_association": "NONE",
            "body": "@drincruz : With the contents of the 3 files as shown, and starting the server(flask) with run.py, outside a virtualenv, with system python(2.7 or 3.4), the Flask.instance_path variable is correctly set.(`demo/instance` in my case)\nNow, if I run the SAME run.py file from a virtualenv python(2.7 or 3.4), the instance_path variable is wrongly set to `/demo/var/app-instance`. This is the bug that I am trying to explain.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/51621266",
            "html_url": "https://github.com/pallets/flask/issues/1139#issuecomment-51621266",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1139",
            "id": 51621266,
            "node_id": "MDEyOklzc3VlQ29tbWVudDUxNjIxMjY2",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-08-08T16:01:12Z",
            "updated_at": "2014-08-08T16:01:12Z",
            "author_association": "MEMBER",
            "body": "Are you sure you aren't confusing the difference between the uninstalled instance path and the installed one?  [The docs clearly describe](http://flask.pocoo.org/docs/config/#instance-folders) different behavior depending on how you install and run the package.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/51624488",
            "html_url": "https://github.com/pallets/flask/issues/1139#issuecomment-51624488",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1139",
            "id": 51624488,
            "node_id": "MDEyOklzc3VlQ29tbWVudDUxNjI0NDg4",
            "user": {
                "login": "sahutd",
                "id": 5676959,
                "node_id": "MDQ6VXNlcjU2NzY5NTk=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/5676959?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/sahutd",
                "html_url": "https://github.com/sahutd",
                "followers_url": "https://api.github.com/users/sahutd/followers",
                "following_url": "https://api.github.com/users/sahutd/following{/other_user}",
                "gists_url": "https://api.github.com/users/sahutd/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/sahutd/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sahutd/subscriptions",
                "organizations_url": "https://api.github.com/users/sahutd/orgs",
                "repos_url": "https://api.github.com/users/sahutd/repos",
                "events_url": "https://api.github.com/users/sahutd/events{/privacy}",
                "received_events_url": "https://api.github.com/users/sahutd/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-08-08T16:22:40Z",
            "updated_at": "2014-08-08T16:22:40Z",
            "author_association": "NONE",
            "body": "@davidism :  Thank you. That document explains it. In the past, I hadn't clearly understood what installed/uninstalled module/package meant. On a second read, its quite clear. Sorry for the noise.\n"
        }
    ]
}