{
    "url": "https://api.github.com/repos/pallets/flask/issues/460",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/460/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/460/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/460/events",
    "html_url": "https://github.com/pallets/flask/issues/460",
    "id": 3797504,
    "node_id": "MDU6SXNzdWUzNzk3NTA0",
    "number": 460,
    "title": "Problem with file uploading",
    "user": {
        "login": "akolesnikov93",
        "id": 1572921,
        "node_id": "MDQ6VXNlcjE1NzI5MjE=",
        "avatar_url": "https://avatars3.githubusercontent.com/u/1572921?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/akolesnikov93",
        "html_url": "https://github.com/akolesnikov93",
        "followers_url": "https://api.github.com/users/akolesnikov93/followers",
        "following_url": "https://api.github.com/users/akolesnikov93/following{/other_user}",
        "gists_url": "https://api.github.com/users/akolesnikov93/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/akolesnikov93/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/akolesnikov93/subscriptions",
        "organizations_url": "https://api.github.com/users/akolesnikov93/orgs",
        "repos_url": "https://api.github.com/users/akolesnikov93/repos",
        "events_url": "https://api.github.com/users/akolesnikov93/events{/privacy}",
        "received_events_url": "https://api.github.com/users/akolesnikov93/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2012-03-25T10:09:19Z",
    "updated_at": "2015-03-12T08:38:21Z",
    "closed_at": "2015-03-12T08:38:21Z",
    "author_association": "NONE",
    "body": "Strange error happened to 100% working code (I mean this code has been working brilliantly for a while, but now gives strange errors).\nUsing flask (0.7.2), flask-wtf, flask-uploads.\n\nMain code:\n\n``` python\n@app.route('/task/new', methods=['GET', 'POST'])\ndef task():\n    form = TaskForm(request.form)\n    if request.method == 'POST' and form.validate():\n        print type(form.image) # <class 'flaskext.wtf.file.FileField'>\n        print type(form.image.file) # <type 'unicode'>\n        print type(form.image.data) # <type 'unicode'>\n        print form.image.file.filename # gives AttributeError: 'unicode' object has no attribute 'filename'\n```\n\nSome part from forms.py:\n\n``` python\nfrom flaskext.wtf import ....... FileField,  file_allowed\nfrom flaskext.uploads import UploadSet, IMAGES\n\nimages = UploadSet(\"images\", IMAGES)\n\nclass TaskForm(Form):\n    url = TextField(u'URL', [validators.Length(min=4, max=400), validators.Required()])\n    title = TextField(u'TITLE', [validators.Length(min=4, max=4000), validators.Required()])\n    description = TextAreaField(u'Desc', [validators.Length(min=4, max=4000), validators.Required()])\n    image = FileField(u'Image', [file_allowed(images, \"Images only!\")])\n```\n\nJinja 2 template:\n\n``` jinja2\n<form action=\"{{ url_for('task', task_id=task.id) }}\" method=\"POST\" enctype=\"multipart/form-data\">\n    {{ form.hidden_tag() }}\n    {{ help.render_field(form.url) }} # using rendering form macro, no problem there\n    {{ help.render_field(form.title) }}\n        {{ help.render_field(form.description) }}\n        {{ help.render_field(form.image) }}\n        <button class=\"positive\" type=\"submit\">Save</button>\n</form>\n```\n\n1) In Firefox submitting this form makes required fields (url, title, description) giving error \"This field is required. \" (Surely they are filled correctly).\n2) In Chrome it's OK, but (from the main code): \n\n``` python\n    print type(form.image) # <class 'flaskext.wtf.file.FileField'>\n    print type(form.image.file) # <type 'unicode'>\n    print type(form.image.data) # <type 'unicode'>\n    print form.image.file.filename # gives AttributeError: 'unicode' object has no attribute 'filename'\n```\n\nEnctype is correct (it was working well, no changes were made).\nSo what can I do with this errors? It was working great, but now crashes. If needed, hosting is ep.io\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/4880047",
            "html_url": "https://github.com/pallets/flask/issues/460#issuecomment-4880047",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/460",
            "id": 4880047,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ4ODAwNDc=",
            "user": {
                "login": "justjkk",
                "id": 192893,
                "node_id": "MDQ6VXNlcjE5Mjg5Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/192893?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/justjkk",
                "html_url": "https://github.com/justjkk",
                "followers_url": "https://api.github.com/users/justjkk/followers",
                "following_url": "https://api.github.com/users/justjkk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justjkk/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/justjkk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justjkk/subscriptions",
                "organizations_url": "https://api.github.com/users/justjkk/orgs",
                "repos_url": "https://api.github.com/users/justjkk/repos",
                "events_url": "https://api.github.com/users/justjkk/events{/privacy}",
                "received_events_url": "https://api.github.com/users/justjkk/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-04-02T14:55:45Z",
            "updated_at": "2012-04-02T14:55:45Z",
            "author_association": "NONE",
            "body": "I'm having the same issue with Flask==0.8, Flask-Uploads==0.1.3 and Flask-WTF==0.6\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/5935309",
            "html_url": "https://github.com/pallets/flask/issues/460#issuecomment-5935309",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/460",
            "id": 5935309,
            "node_id": "MDEyOklzc3VlQ29tbWVudDU5MzUzMDk=",
            "user": {
                "login": "redouane",
                "id": 212081,
                "node_id": "MDQ6VXNlcjIxMjA4MQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/212081?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/redouane",
                "html_url": "https://github.com/redouane",
                "followers_url": "https://api.github.com/users/redouane/followers",
                "following_url": "https://api.github.com/users/redouane/following{/other_user}",
                "gists_url": "https://api.github.com/users/redouane/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/redouane/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/redouane/subscriptions",
                "organizations_url": "https://api.github.com/users/redouane/orgs",
                "repos_url": "https://api.github.com/users/redouane/repos",
                "events_url": "https://api.github.com/users/redouane/events{/privacy}",
                "received_events_url": "https://api.github.com/users/redouane/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-05-25T17:01:02Z",
            "updated_at": "2012-05-25T17:01:02Z",
            "author_association": "NONE",
            "body": "change \n    form = TaskForm(request.form)\nto\n    form = TaskForm()\n\nflask-wtf fills the form with data from request.form and request.files automatically, if you pass request.form, it will only process that and wont fill the form with request.files, \nhere's the code bit that does that:\nhttps://bitbucket.org/danjac/flask-wtf/src/5eac9fb9ff93/flaskext/wtf/__init__.py#cl-140\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/78183471",
            "html_url": "https://github.com/pallets/flask/issues/460#issuecomment-78183471",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/460",
            "id": 78183471,
            "node_id": "MDEyOklzc3VlQ29tbWVudDc4MTgzNDcx",
            "user": {
                "login": "keyan",
                "id": 6401746,
                "node_id": "MDQ6VXNlcjY0MDE3NDY=",
                "avatar_url": "https://avatars0.githubusercontent.com/u/6401746?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/keyan",
                "html_url": "https://github.com/keyan",
                "followers_url": "https://api.github.com/users/keyan/followers",
                "following_url": "https://api.github.com/users/keyan/following{/other_user}",
                "gists_url": "https://api.github.com/users/keyan/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/keyan/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/keyan/subscriptions",
                "organizations_url": "https://api.github.com/users/keyan/orgs",
                "repos_url": "https://api.github.com/users/keyan/repos",
                "events_url": "https://api.github.com/users/keyan/events{/privacy}",
                "received_events_url": "https://api.github.com/users/keyan/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-03-11T01:24:01Z",
            "updated_at": "2015-03-11T01:24:01Z",
            "author_association": "MEMBER",
            "body": "@untitaker I'm suggesting this be closed, it looks like @akolesnikov93 simply had a bug in their code.\n"
        }
    ]
}