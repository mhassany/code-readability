{
    "url": "https://api.github.com/repos/pallets/flask/issues/2772",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2772/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2772/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2772/events",
    "html_url": "https://github.com/pallets/flask/issues/2772",
    "id": 322419794,
    "node_id": "MDU6SXNzdWUzMjI0MTk3OTQ=",
    "number": 2772,
    "title": "\"flask init-db\" isn't working",
    "user": {
        "login": "naveenmalla046",
        "id": 30531283,
        "node_id": "MDQ6VXNlcjMwNTMxMjgz",
        "avatar_url": "https://avatars3.githubusercontent.com/u/30531283?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naveenmalla046",
        "html_url": "https://github.com/naveenmalla046",
        "followers_url": "https://api.github.com/users/naveenmalla046/followers",
        "following_url": "https://api.github.com/users/naveenmalla046/following{/other_user}",
        "gists_url": "https://api.github.com/users/naveenmalla046/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/naveenmalla046/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/naveenmalla046/subscriptions",
        "organizations_url": "https://api.github.com/users/naveenmalla046/orgs",
        "repos_url": "https://api.github.com/users/naveenmalla046/repos",
        "events_url": "https://api.github.com/users/naveenmalla046/events{/privacy}",
        "received_events_url": "https://api.github.com/users/naveenmalla046/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": true,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 7,
    "created_at": "2018-05-11T20:10:59Z",
    "updated_at": "2018-08-13T13:24:26Z",
    "closed_at": "2018-05-12T15:20:31Z",
    "author_association": "NONE",
    "body": "This code must be placed in the __init__.py as per the documentation: http://flask.pocoo.org/docs/1.0/tutorial/database/    (Section: Register with the Application)\r\n\r\n    flaskr/__init__.py\r\n    def create_app():\r\n      app = ...\r\n      # existing code omitted\r\n\r\n    from . import db\r\n    db.init_app(app)\r\n\r\n    return app\r\n\r\n----------------------------------------------\r\n\r\nThis is the __init__.py code after copying that code\r\n\r\n    import os\r\n\r\n    from flask import Flask\r\n\r\n    def create_app(test_config=None):\r\n    # create and configure the app\r\n    app = Flask(__name__, instance_relative_config=True)\r\n    app.config.from_mapping(\r\n        SECRET_KEY='dev',\r\n        DATABASE=os.path.join(app.instance_path, 'flaskr.sqlite'),\r\n    )\r\n\r\n    if test_config is None:\r\n        # load the instance config, if it exists, when not testing\r\n        app.config.from_pyfile('config.py', silent=True)\r\n    else:\r\n        # load the test config if passed in\r\n        app.config.from_mapping(test_config)\r\n\r\n    # ensure the instance folder exists\r\n    try:\r\n        os.makedirs(app.instance_path)\r\n    except OSError:\r\n        pass\r\n\r\n    # a simple page that says hello\r\n    @app.route('/hello')\r\n    def hello():\r\n        return 'Hello, World!'\r\n   \r\n    #database \r\n    from . import db\r\n    db.init_app(app)\r\n\r\n    return app\r\n\r\n\r\nExpected output:\r\n\r\nRun the init-db command:\r\n\r\nflask init-db\r\nInitialized the database.\r\nThere will now be a flaskr.sqlite file in the instance folder in your project.\r\n\r\nI'm getting an error while executing the above command:\r\nflask init-db\r\nUsage: flask [OPTIONS] COMMAND [ARGS]...\r\n\r\nError: No such command \"init-db\".\r\n\r\nI even tried copying the exact code from the repo https://github.com/pallets/flask/blob/746b91dfced525651c9b71a3bd075a78d2b9262f/examples/tutorial/flaskr/__init__.py\r\nit is not working even though, same error.\r\n\r\nPls help me with this I'm new to flask and i'm stuck here. cannot proceed further in the documentation unless this code executes\r\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/388559738",
            "html_url": "https://github.com/pallets/flask/issues/2772#issuecomment-388559738",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2772",
            "id": 388559738,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4ODU1OTczOA==",
            "user": {
                "login": "whippiii",
                "id": 3620719,
                "node_id": "MDQ6VXNlcjM2MjA3MTk=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/3620719?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/whippiii",
                "html_url": "https://github.com/whippiii",
                "followers_url": "https://api.github.com/users/whippiii/followers",
                "following_url": "https://api.github.com/users/whippiii/following{/other_user}",
                "gists_url": "https://api.github.com/users/whippiii/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/whippiii/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/whippiii/subscriptions",
                "organizations_url": "https://api.github.com/users/whippiii/orgs",
                "repos_url": "https://api.github.com/users/whippiii/repos",
                "events_url": "https://api.github.com/users/whippiii/events{/privacy}",
                "received_events_url": "https://api.github.com/users/whippiii/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-12T14:42:10Z",
            "updated_at": "2018-05-12T14:42:10Z",
            "author_association": "NONE",
            "body": "It seems like the command `init-db` wasn't loaded, check if [the snippet for the command creation](http://flask.pocoo.org/docs/1.0/tutorial/database/#id3) exists in your `db.py`."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/388562186",
            "html_url": "https://github.com/pallets/flask/issues/2772#issuecomment-388562186",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2772",
            "id": 388562186,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4ODU2MjE4Ng==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-12T15:20:31Z",
            "updated_at": "2018-05-12T15:20:31Z",
            "author_association": "MEMBER",
            "body": "And also check that you set the `FLASK_APP`environment variable.\r\n\r\nI know the tutorial works as written, so please carefully review that you followed all the steps.\r\n\r\nPlease use Stack Overflow for questions about your own code. This tracker is for issues related to the project itself. Be sure to include a [minimal, complete, and verifiable example](https://stackoverflow.com/help/mcve)."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/388568981",
            "html_url": "https://github.com/pallets/flask/issues/2772#issuecomment-388568981",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2772",
            "id": 388568981,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4ODU2ODk4MQ==",
            "user": {
                "login": "naveenmalla046",
                "id": 30531283,
                "node_id": "MDQ6VXNlcjMwNTMxMjgz",
                "avatar_url": "https://avatars3.githubusercontent.com/u/30531283?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/naveenmalla046",
                "html_url": "https://github.com/naveenmalla046",
                "followers_url": "https://api.github.com/users/naveenmalla046/followers",
                "following_url": "https://api.github.com/users/naveenmalla046/following{/other_user}",
                "gists_url": "https://api.github.com/users/naveenmalla046/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/naveenmalla046/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/naveenmalla046/subscriptions",
                "organizations_url": "https://api.github.com/users/naveenmalla046/orgs",
                "repos_url": "https://api.github.com/users/naveenmalla046/repos",
                "events_url": "https://api.github.com/users/naveenmalla046/events{/privacy}",
                "received_events_url": "https://api.github.com/users/naveenmalla046/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-12T17:04:50Z",
            "updated_at": "2018-05-12T17:04:50Z",
            "author_association": "NONE",
            "body": "@whippiii \r\nyes it does, here's my code   'db.py'\r\n-----------------------------------------------\r\n   import sqlite3\r\n   import click\r\n   from flask import current_app, g\r\n   from flask.cli import with_appcontext\r\n\r\n\r\n def inti_app(app):\r\n    app.teardown_appcontext(close_db)\r\n    app.cli.add_command(init_db_command)\r\n\r\n\r\n def init_db():\r\n    db = get_db()\r\n    with current_app.open_resource('schema.sql') as f:\r\n        db.executescript(f.read().decode('utf8'))\r\n\r\n\r\n @click.command('init-db')\r\n @with_appcontext\r\n def init_db_command():\r\n    init_db()\r\n    click.echo('Initialized the database.')\r\n\r\n\r\n def get_db():\r\n    if 'db' not in g:\r\n        g.db = sqlite3.connect(\r\n                current_app.congig['DATABASE'],\r\n                detect_types=sqlite3.PARSE_DECLTYPES\r\n        )\r\n        g.db.row_factory = sqlite3.Row\r\n\r\n    return g.db\r\n\r\n\r\n  def close_db(e=None):\r\n    db = g.pip('db', None)\r\n\r\n    if db is not None:\r\n        db.close()\r\n\r\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/390358291",
            "html_url": "https://github.com/pallets/flask/issues/2772#issuecomment-390358291",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2772",
            "id": 390358291,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDM1ODI5MQ==",
            "user": {
                "login": "dtamez",
                "id": 58890,
                "node_id": "MDQ6VXNlcjU4ODkw",
                "avatar_url": "https://avatars3.githubusercontent.com/u/58890?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/dtamez",
                "html_url": "https://github.com/dtamez",
                "followers_url": "https://api.github.com/users/dtamez/followers",
                "following_url": "https://api.github.com/users/dtamez/following{/other_user}",
                "gists_url": "https://api.github.com/users/dtamez/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/dtamez/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dtamez/subscriptions",
                "organizations_url": "https://api.github.com/users/dtamez/orgs",
                "repos_url": "https://api.github.com/users/dtamez/repos",
                "events_url": "https://api.github.com/users/dtamez/events{/privacy}",
                "received_events_url": "https://api.github.com/users/dtamez/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-18T23:35:46Z",
            "updated_at": "2018-05-18T23:35:46Z",
            "author_association": "NONE",
            "body": "looks like the problem might be a typo:\r\ndef inti_app(app):\r\n\r\ninstead of \"init_app\".\r\nDoes that fix the issue?"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/390360958",
            "html_url": "https://github.com/pallets/flask/issues/2772#issuecomment-390360958",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2772",
            "id": 390360958,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDM2MDk1OA==",
            "user": {
                "login": "dtamez",
                "id": 58890,
                "node_id": "MDQ6VXNlcjU4ODkw",
                "avatar_url": "https://avatars3.githubusercontent.com/u/58890?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/dtamez",
                "html_url": "https://github.com/dtamez",
                "followers_url": "https://api.github.com/users/dtamez/followers",
                "following_url": "https://api.github.com/users/dtamez/following{/other_user}",
                "gists_url": "https://api.github.com/users/dtamez/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/dtamez/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dtamez/subscriptions",
                "organizations_url": "https://api.github.com/users/dtamez/orgs",
                "repos_url": "https://api.github.com/users/dtamez/repos",
                "events_url": "https://api.github.com/users/dtamez/events{/privacy}",
                "received_events_url": "https://api.github.com/users/dtamez/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-18T23:58:40Z",
            "updated_at": "2018-05-18T23:58:40Z",
            "author_association": "NONE",
            "body": "make sure you run it from the project directory and not the flaskr directory - so one directory up from flaskr."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/411547974",
            "html_url": "https://github.com/pallets/flask/issues/2772#issuecomment-411547974",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2772",
            "id": 411547974,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQxMTU0Nzk3NA==",
            "user": {
                "login": "marklapasa",
                "id": 4932453,
                "node_id": "MDQ6VXNlcjQ5MzI0NTM=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/4932453?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/marklapasa",
                "html_url": "https://github.com/marklapasa",
                "followers_url": "https://api.github.com/users/marklapasa/followers",
                "following_url": "https://api.github.com/users/marklapasa/following{/other_user}",
                "gists_url": "https://api.github.com/users/marklapasa/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/marklapasa/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/marklapasa/subscriptions",
                "organizations_url": "https://api.github.com/users/marklapasa/orgs",
                "repos_url": "https://api.github.com/users/marklapasa/repos",
                "events_url": "https://api.github.com/users/marklapasa/events{/privacy}",
                "received_events_url": "https://api.github.com/users/marklapasa/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-08-08T20:51:25Z",
            "updated_at": "2018-08-08T20:51:25Z",
            "author_association": "NONE",
            "body": "@davidism It would be nice if the tutorial was updated to reflect @dtamez comment. Because this was exactly my experience today. I followed the tutorial and it didn't work. I found myself here and I got unblocked. Tested in Windows."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/411550356",
            "html_url": "https://github.com/pallets/flask/issues/2772#issuecomment-411550356",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2772",
            "id": 411550356,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQxMTU1MDM1Ng==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-08-08T20:59:17Z",
            "updated_at": "2018-08-08T20:59:17Z",
            "author_association": "MEMBER",
            "body": "Assuming you're following the tutorial exactly, at no point does it tell you to cd into the package, only to create the directory and remain in the project directory. If you have a better suggestion for the tutorial, I'm open to reviewing a PR."
        }
    ]
}