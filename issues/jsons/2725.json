{
    "url": "https://api.github.com/repos/pallets/flask/issues/2725",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2725/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2725/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2725/events",
    "html_url": "https://github.com/pallets/flask/issues/2725",
    "id": 318255598,
    "node_id": "MDU6SXNzdWUzMTgyNTU1OTg=",
    "number": 2725,
    "title": "[help] flask 1.0 app run in click ",
    "user": {
        "login": "ngxlua",
        "id": 31426367,
        "node_id": "MDQ6VXNlcjMxNDI2MzY3",
        "avatar_url": "https://avatars3.githubusercontent.com/u/31426367?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ngxlua",
        "html_url": "https://github.com/ngxlua",
        "followers_url": "https://api.github.com/users/ngxlua/followers",
        "following_url": "https://api.github.com/users/ngxlua/following{/other_user}",
        "gists_url": "https://api.github.com/users/ngxlua/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/ngxlua/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ngxlua/subscriptions",
        "organizations_url": "https://api.github.com/users/ngxlua/orgs",
        "repos_url": "https://api.github.com/users/ngxlua/repos",
        "events_url": "https://api.github.com/users/ngxlua/events{/privacy}",
        "received_events_url": "https://api.github.com/users/ngxlua/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2018-04-27T02:18:56Z",
    "updated_at": "2018-04-27T15:52:36Z",
    "closed_at": "2018-04-27T15:52:36Z",
    "author_association": "NONE",
    "body": "### Expected Behavior\r\n\r\nWhen I try to upgrade to 1.0, my code is not compatible with 1.0 flask, how should I solve it?\r\n\r\n```python\r\n@cli.command(\"run\", help=\"run server\")\r\n@click.option('--mode', help=\"Application running mode\", default=\"dev\")\r\ndef runserver(mode, daemon, reload, preload, spew):\r\n    if mode == 'prod':\r\n        \"\"\"\r\n        do something\r\n        \"\"\"\r\n\r\n    app.run(host=app.config[\"HOST\"], port=app.config[\"PORT\"], use_reloader=True)\r\n\r\nif __name__ == '__main__':\r\n    sys.exit(cli.main())\r\n```\r\n\r\n### Actual Behavior\r\n\r\n```pytb\r\nmanage.py:110: Warning: Silently ignoring app.run() because the application is run from the flask command line executable.  Consider putting app.run() behind an if __name__ == \"__main__\" guard to silence this warning.\r\n  app.run(host=app.config[\"HOST\"], port=app.config[\"PORT\"], use_reloader=True)\r\n```\r\n\r\n### Environment\r\n\r\n* Python version: 3.6.4\r\n* Flask version: 1.0\r\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/384844748",
            "html_url": "https://github.com/pallets/flask/issues/2725#issuecomment-384844748",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2725",
            "id": 384844748,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4NDg0NDc0OA==",
            "user": {
                "login": "lepture",
                "id": 290496,
                "node_id": "MDQ6VXNlcjI5MDQ5Ng==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/290496?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/lepture",
                "html_url": "https://github.com/lepture",
                "followers_url": "https://api.github.com/users/lepture/followers",
                "following_url": "https://api.github.com/users/lepture/following{/other_user}",
                "gists_url": "https://api.github.com/users/lepture/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/lepture/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lepture/subscriptions",
                "organizations_url": "https://api.github.com/users/lepture/orgs",
                "repos_url": "https://api.github.com/users/lepture/repos",
                "events_url": "https://api.github.com/users/lepture/events{/privacy}",
                "received_events_url": "https://api.github.com/users/lepture/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-04-27T02:25:42Z",
            "updated_at": "2018-04-27T02:25:42Z",
            "author_association": "MEMBER",
            "body": "Flask itself has a `run` command. Consider to remove your `run` command."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/384878230",
            "html_url": "https://github.com/pallets/flask/issues/2725#issuecomment-384878230",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2725",
            "id": 384878230,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4NDg3ODIzMA==",
            "user": {
                "login": "ngxlua",
                "id": 31426367,
                "node_id": "MDQ6VXNlcjMxNDI2MzY3",
                "avatar_url": "https://avatars3.githubusercontent.com/u/31426367?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ngxlua",
                "html_url": "https://github.com/ngxlua",
                "followers_url": "https://api.github.com/users/ngxlua/followers",
                "following_url": "https://api.github.com/users/ngxlua/following{/other_user}",
                "gists_url": "https://api.github.com/users/ngxlua/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ngxlua/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ngxlua/subscriptions",
                "organizations_url": "https://api.github.com/users/ngxlua/orgs",
                "repos_url": "https://api.github.com/users/ngxlua/repos",
                "events_url": "https://api.github.com/users/ngxlua/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ngxlua/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-04-27T06:33:32Z",
            "updated_at": "2018-04-27T06:33:32Z",
            "author_association": "NONE",
            "body": "@lepture  can I override this method?"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/384992601",
            "html_url": "https://github.com/pallets/flask/issues/2725#issuecomment-384992601",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2725",
            "id": 384992601,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4NDk5MjYwMQ==",
            "user": {
                "login": "lepture",
                "id": 290496,
                "node_id": "MDQ6VXNlcjI5MDQ5Ng==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/290496?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/lepture",
                "html_url": "https://github.com/lepture",
                "followers_url": "https://api.github.com/users/lepture/followers",
                "following_url": "https://api.github.com/users/lepture/following{/other_user}",
                "gists_url": "https://api.github.com/users/lepture/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/lepture/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lepture/subscriptions",
                "organizations_url": "https://api.github.com/users/lepture/orgs",
                "repos_url": "https://api.github.com/users/lepture/repos",
                "events_url": "https://api.github.com/users/lepture/events{/privacy}",
                "received_events_url": "https://api.github.com/users/lepture/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-04-27T14:46:50Z",
            "updated_at": "2018-04-27T14:46:50Z",
            "author_association": "MEMBER",
            "body": "@ngxlua I think it is impossible to call `app.run` with `flask cmd`. Even when you rename it to other names. When run a cli with `flask ${cmd}`, it will set a `FLASK_RUN_FROM_CLI` flag, which will disable `app.run` function."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/384993470",
            "html_url": "https://github.com/pallets/flask/issues/2725#issuecomment-384993470",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2725",
            "id": 384993470,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4NDk5MzQ3MA==",
            "user": {
                "login": "lepture",
                "id": 290496,
                "node_id": "MDQ6VXNlcjI5MDQ5Ng==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/290496?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/lepture",
                "html_url": "https://github.com/lepture",
                "followers_url": "https://api.github.com/users/lepture/followers",
                "following_url": "https://api.github.com/users/lepture/following{/other_user}",
                "gists_url": "https://api.github.com/users/lepture/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/lepture/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lepture/subscriptions",
                "organizations_url": "https://api.github.com/users/lepture/orgs",
                "repos_url": "https://api.github.com/users/lepture/repos",
                "events_url": "https://api.github.com/users/lepture/events{/privacy}",
                "received_events_url": "https://api.github.com/users/lepture/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-04-27T14:49:42Z",
            "updated_at": "2018-04-27T14:49:42Z",
            "author_association": "MEMBER",
            "body": "I didn't see the point of your usage. From what you provide, it seems Flask v1.0 has all the stuff you want."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/385013368",
            "html_url": "https://github.com/pallets/flask/issues/2725#issuecomment-385013368",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2725",
            "id": 385013368,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTAxMzM2OA==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-04-27T15:52:36Z",
            "updated_at": "2018-04-27T15:52:36Z",
            "author_association": "MEMBER",
            "body": "If you want to configure your application, you should use the factory pattern. You can pass arguments to it using the `FLASK_APP` env var, or you can use the `app.env` property to get what `FLASK_ENV` was set to. You should use the standard `run` command to run your application with the dev server.\r\n\r\n```python\r\n# app.py\r\ndef create_app():\r\n    app = Flask(__name__)\r\n    if app.env == 'production':\r\n        ...\r\n    return app\r\n```\r\n\r\n```\r\nFLASK_ENV=development flask run\r\n```"
        }
    ]
}