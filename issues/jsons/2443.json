{
    "url": "https://api.github.com/repos/pallets/flask/issues/2443",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2443/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2443/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2443/events",
    "html_url": "https://github.com/pallets/flask/pull/2443",
    "id": 248790296,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTM0NzE2Njk4",
    "number": 2443,
    "title": "Casting the value received from the Web Server in the request object \u2026",
    "user": {
        "login": "ibirisol",
        "id": 7149522,
        "node_id": "MDQ6VXNlcjcxNDk1MjI=",
        "avatar_url": "https://avatars1.githubusercontent.com/u/7149522?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ibirisol",
        "html_url": "https://github.com/ibirisol",
        "followers_url": "https://api.github.com/users/ibirisol/followers",
        "following_url": "https://api.github.com/users/ibirisol/following{/other_user}",
        "gists_url": "https://api.github.com/users/ibirisol/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/ibirisol/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ibirisol/subscriptions",
        "organizations_url": "https://api.github.com/users/ibirisol/orgs",
        "repos_url": "https://api.github.com/users/ibirisol/repos",
        "events_url": "https://api.github.com/users/ibirisol/events{/privacy}",
        "received_events_url": "https://api.github.com/users/ibirisol/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2017-08-08T17:33:32Z",
    "updated_at": "2018-10-23T17:44:16Z",
    "closed_at": "2017-08-08T17:34:46Z",
    "author_association": "NONE",
    "pull_request": {
        "url": "https://api.github.com/repos/pallets/flask/pulls/2443",
        "html_url": "https://github.com/pallets/flask/pull/2443",
        "diff_url": "https://github.com/pallets/flask/pull/2443.diff",
        "patch_url": "https://github.com/pallets/flask/pull/2443.patch"
    },
    "body": "Casting the value received from the Web Server in the request object if it is a string\r\n\r\nI'm using apache2 with libapache2-mod-wsgi-py3 When flask tries to convert the permanent_session_lifetime the following error appears.\r\n\r\n```\r\n[Mon Aug 07 20:22:54.177034 2017] [wsgi:error] [pid 21324:tid 139774833305344] [remote 172.17.0.1:38058] mod_wsgi (pid=21324): Exception occurred processing WSGI script '/var/www/app/web/run.wsgi'.\r\n[Mon Aug 07 20:22:54.177830 2017] [wsgi:error] [pid 21324:tid 139774833305344] [remote 172.17.0.1:38058] Traceback (most recent call last):\r\n[Mon Aug 07 20:22:54.177881 2017] [wsgi:error] [pid 21324:tid 139774833305344] [remote 172.17.0.1:38058]   File \"/var/www/app/instance/venv/lib/python3.5/site-packages/flask/app.py\", line 1998, in __call__\r\n[Mon Aug 07 20:22:54.177889 2017] [wsgi:error] [pid 21324:tid 139774833305344] [remote 172.17.0.1:38058]     return self.wsgi_app(environ, start_response)\r\n[Mon Aug 07 20:22:54.177902 2017] [wsgi:error] [pid 21324:tid 139774833305344] [remote 172.17.0.1:38058]   File \"/var/www/app/instance/venv/lib/python3.5/site-packages/flask/app.py\", line 1979, in wsgi_app\r\n[Mon Aug 07 20:22:54.177908 2017] [wsgi:error] [pid 21324:tid 139774833305344] [remote 172.17.0.1:38058]     ctx.push()\r\n[Mon Aug 07 20:22:54.177919 2017] [wsgi:error] [pid 21324:tid 139774833305344] [remote 172.17.0.1:38058]   File \"/var/www/app/instance/venv/lib/python3.5/site-packages/flask/ctx.py\", line 332, in push\r\n[Mon Aug 07 20:22:54.177925 2017] [wsgi:error] [pid 21324:tid 139774833305344] [remote 172.17.0.1:38058]     self.session = self.app.open_session(self.request)\r\n[Mon Aug 07 20:22:54.177935 2017] [wsgi:error] [pid 21324:tid 139774833305344] [remote 172.17.0.1:38058]   File \"/var/www/app/instance/venv/lib/python3.5/site-packages/flask/app.py\", line 913, in open_session\r\n[Mon Aug 07 20:22:54.177941 2017] [wsgi:error] [pid 21324:tid 139774833305344] [remote 172.17.0.1:38058]     return self.session_interface.open_session(self, request)\r\n[Mon Aug 07 20:22:54.177953 2017] [wsgi:error] [pid 21324:tid 139774833305344] [remote 172.17.0.1:38058]   File \"/var/www/app/instance/venv/lib/python3.5/site-packages/flask/sessions.py\", line 330, in open_session\r\n[Mon Aug 07 20:22:54.177958 2017] [wsgi:error] [pid 21324:tid 139774833305344] [remote 172.17.0.1:38058]     max_age = total_seconds(app.permanent_session_lifetime)\r\n[Mon Aug 07 20:22:54.177970 2017] [wsgi:error] [pid 21324:tid 139774833305344] [remote 172.17.0.1:38058]   File \"/var/www/app/instance/venv/lib/python3.5/site-packages/flask/config.py\", line 33, in __get__\r\n[Mon Aug 07 20:22:54.177975 2017] [wsgi:error] [pid 21324:tid 139774833305344] [remote 172.17.0.1:38058]     rv = self.get_converter(rv)\r\n[Mon Aug 07 20:22:54.177987 2017] [wsgi:error] [pid 21324:tid 139774833305344] [remote 172.17.0.1:38058]   File \"/var/www/app/instance/venv/lib/python3.5/site-packages/flask/app.py\", line 47, in _make_timedelta\r\n[Mon Aug 07 20:22:54.177993 2017] [wsgi:error] [pid 21324:tid 139774833305344] [remote 172.17.0.1:38058]     return timedelta(seconds=value)\r\n[Mon Aug 07 20:22:54.178022 2017] [wsgi:error] [pid 21324:tid 139774833305344] [remote 172.17.0.1:38058] TypeError: unsupported type for timedelta seconds component: str\r\n```\r\n\r\nWith that pull, the permanent_session_lifetime and send_file_max_age_default will be converted correctly from string type value.",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/321027307",
            "html_url": "https://github.com/pallets/flask/pull/2443#issuecomment-321027307",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2443",
            "id": 321027307,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTAyNzMwNw==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-08-08T17:34:46Z",
            "updated_at": "2017-08-08T17:38:07Z",
            "author_association": "MEMBER",
            "body": "Why are you passing a string there? Simply use a number or a timedelta object and it won't fail. This value is not coming from the web server but from your config file. The documentation even mentions that it can be a timedelta or an integer:\r\n\r\n> the lifetime of a permanent session as datetime.timedelta object. Starting with Flask 0.8 this can also be an integer representing seconds.\r\n\r\nPS: General advice: the first line of a Git commit message [should be less than 51 chars](https://chris.beams.io/posts/git-commit/) (and certainly not so long that github truncates it)."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/321032164",
            "html_url": "https://github.com/pallets/flask/pull/2443#issuecomment-321032164",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2443",
            "id": 321032164,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMyMTAzMjE2NA==",
            "user": {
                "login": "ibirisol",
                "id": 7149522,
                "node_id": "MDQ6VXNlcjcxNDk1MjI=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/7149522?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ibirisol",
                "html_url": "https://github.com/ibirisol",
                "followers_url": "https://api.github.com/users/ibirisol/followers",
                "following_url": "https://api.github.com/users/ibirisol/following{/other_user}",
                "gists_url": "https://api.github.com/users/ibirisol/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ibirisol/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ibirisol/subscriptions",
                "organizations_url": "https://api.github.com/users/ibirisol/orgs",
                "repos_url": "https://api.github.com/users/ibirisol/repos",
                "events_url": "https://api.github.com/users/ibirisol/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ibirisol/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-08-08T17:52:22Z",
            "updated_at": "2017-08-08T17:52:22Z",
            "author_association": "NONE",
            "body": "Thanks @ThiefMaster, This is true you are right.\r\nI made in that way to show that behavior explicitly. But that is an error in the config file, but for deploy in production a flask app, sometimes someone will forget that the config file is python code."
        }
    ]
}