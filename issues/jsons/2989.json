{
    "url": "https://api.github.com/repos/pallets/flask/issues/2989",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2989/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2989/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2989/events",
    "html_url": "https://github.com/pallets/flask/issues/2989",
    "id": 378137002,
    "node_id": "MDU6SXNzdWUzNzgxMzcwMDI=",
    "number": 2989,
    "title": "Flask doesn't auto-escape files not ending in html, htm, xml, xhtml",
    "user": {
        "login": "ColdHeat",
        "id": 166333,
        "node_id": "MDQ6VXNlcjE2NjMzMw==",
        "avatar_url": "https://avatars3.githubusercontent.com/u/166333?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ColdHeat",
        "html_url": "https://github.com/ColdHeat",
        "followers_url": "https://api.github.com/users/ColdHeat/followers",
        "following_url": "https://api.github.com/users/ColdHeat/following{/other_user}",
        "gists_url": "https://api.github.com/users/ColdHeat/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/ColdHeat/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ColdHeat/subscriptions",
        "organizations_url": "https://api.github.com/users/ColdHeat/orgs",
        "repos_url": "https://api.github.com/users/ColdHeat/repos",
        "events_url": "https://api.github.com/users/ColdHeat/events{/privacy}",
        "received_events_url": "https://api.github.com/users/ColdHeat/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2018-11-07T04:18:28Z",
    "updated_at": "2018-11-07T05:19:10Z",
    "closed_at": "2018-11-07T04:59:49Z",
    "author_association": "NONE",
    "body": "```\r\n    def select_jinja_autoescape(self, filename):\r\n        \"\"\"Returns ``True`` if autoescaping should be active for the given\r\n        template name. If no template name is given, returns `True`.\r\n\r\n        .. versionadded:: 0.5\r\n        \"\"\"\r\n        if filename is None:\r\n            return True\r\n        return filename.endswith(('.html', '.htm', '.xml', '.xhtml'))\r\n```\r\n\r\nThis seems odd. Why not just autoescape all file extensions. Or at least include `.j2` and `.jinja2`?",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/436505295",
            "html_url": "https://github.com/pallets/flask/issues/2989#issuecomment-436505295",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2989",
            "id": 436505295,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjUwNTI5NQ==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-11-07T04:59:49Z",
            "updated_at": "2018-11-07T04:59:49Z",
            "author_association": "MEMBER",
            "body": "Because not all file extensions need HTML escaping, and there are no standard file extensions for Jinja. From Jinja's docs: \"A Jinja template doesn't need to have a specific extension: .html , .xml , or any other extension is just fine.\"\r\n\r\nYou can override this method if you would like to autoescape a different set of files."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/436506067",
            "html_url": "https://github.com/pallets/flask/issues/2989#issuecomment-436506067",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2989",
            "id": 436506067,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjUwNjA2Nw==",
            "user": {
                "login": "ColdHeat",
                "id": 166333,
                "node_id": "MDQ6VXNlcjE2NjMzMw==",
                "avatar_url": "https://avatars3.githubusercontent.com/u/166333?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ColdHeat",
                "html_url": "https://github.com/ColdHeat",
                "followers_url": "https://api.github.com/users/ColdHeat/followers",
                "following_url": "https://api.github.com/users/ColdHeat/following{/other_user}",
                "gists_url": "https://api.github.com/users/ColdHeat/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ColdHeat/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ColdHeat/subscriptions",
                "organizations_url": "https://api.github.com/users/ColdHeat/orgs",
                "repos_url": "https://api.github.com/users/ColdHeat/repos",
                "events_url": "https://api.github.com/users/ColdHeat/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ColdHeat/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-11-07T05:05:13Z",
            "updated_at": "2018-11-07T05:05:31Z",
            "author_association": "NONE",
            "body": "There may be no accepted standard file extension to the pallets developers but users are definitely using extensions that aren't going to be escaped but rendered to the browser. \r\n\r\nWhy not just include values that users are using? In what context of flask are people using render_template or render_template_string not expecting that the content will be escaped? \r\n\r\nThis is quite a serious gotcha especially if someone decides to use an extension that is used elsewhere (Ansible for j2). \r\n\r\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/436506467",
            "html_url": "https://github.com/pallets/flask/issues/2989#issuecomment-436506467",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2989",
            "id": 436506467,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjUwNjQ2Nw==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-11-07T05:08:11Z",
            "updated_at": "2018-11-07T05:08:11Z",
            "author_association": "MEMBER",
            "body": "Ansible might use `.j2`, but I've rarely seen it in the flask world. All flask examples and tutorials i know use `.html`"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/436507102",
            "html_url": "https://github.com/pallets/flask/issues/2989#issuecomment-436507102",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2989",
            "id": 436507102,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjUwNzEwMg==",
            "user": {
                "login": "ColdHeat",
                "id": 166333,
                "node_id": "MDQ6VXNlcjE2NjMzMw==",
                "avatar_url": "https://avatars3.githubusercontent.com/u/166333?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ColdHeat",
                "html_url": "https://github.com/ColdHeat",
                "followers_url": "https://api.github.com/users/ColdHeat/followers",
                "following_url": "https://api.github.com/users/ColdHeat/following{/other_user}",
                "gists_url": "https://api.github.com/users/ColdHeat/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ColdHeat/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ColdHeat/subscriptions",
                "organizations_url": "https://api.github.com/users/ColdHeat/orgs",
                "repos_url": "https://api.github.com/users/ColdHeat/repos",
                "events_url": "https://api.github.com/users/ColdHeat/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ColdHeat/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-11-07T05:12:33Z",
            "updated_at": "2018-11-07T05:19:10Z",
            "author_association": "NONE",
            "body": "I mean this was the second result on Google: https://github.com/alex-leonhardt/flask-blog/blob/master/templates/post.html.j2 and another example of what I would consider poor practice: https://stackoverflow.com/a/46689010\r\n\r\nAnd if a user is curious and decides to search what others are using as file extensions it shows that others are using `.j2`. And it isn't clear that this causes them to be trivially vulnerable to XSS. \r\n\r\nPerhaps state in the documentation that `.html` is the correct template extension? \r\n\r\n"
        }
    ]
}