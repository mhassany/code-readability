{
    "url": "https://api.github.com/repos/pallets/flask/issues/580",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/580/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/580/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/580/events",
    "html_url": "https://github.com/pallets/flask/issues/580",
    "id": 6403916,
    "node_id": "MDU6SXNzdWU2NDAzOTE2",
    "number": 580,
    "title": "POST with accidental tuple is very difficult to debug",
    "user": {
        "login": "voltagex",
        "id": 159567,
        "node_id": "MDQ6VXNlcjE1OTU2Nw==",
        "avatar_url": "https://avatars3.githubusercontent.com/u/159567?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/voltagex",
        "html_url": "https://github.com/voltagex",
        "followers_url": "https://api.github.com/users/voltagex/followers",
        "following_url": "https://api.github.com/users/voltagex/following{/other_user}",
        "gists_url": "https://api.github.com/users/voltagex/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/voltagex/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/voltagex/subscriptions",
        "organizations_url": "https://api.github.com/users/voltagex/orgs",
        "repos_url": "https://api.github.com/users/voltagex/repos",
        "events_url": "https://api.github.com/users/voltagex/events{/privacy}",
        "received_events_url": "https://api.github.com/users/voltagex/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2012-08-23T10:33:21Z",
    "updated_at": "2012-08-26T11:07:50Z",
    "closed_at": "2012-08-26T11:07:50Z",
    "author_association": "NONE",
    "body": "https://gist.github.com/3434633 shows a small application which I send a POST request to - unfortunately this causes the following traceback:\n\n127.0.0.1 - - [23/Aug/2012 19:55:27] \"POST /uptime/osiris/ HTTP/1.1\" 500 -\nTraceback (most recent call last):\nFile \"/usr/share/pyshared/flask/app.py\", line 1518, in call\nreturn self.wsgiapp(environ, start_response)\nFile \"/usr/share/pyshared/flask/app.py\", line 1506, in wsgi_app\nresponse = self.make_response(self.handle_exception(e))\nFile \"/usr/share/pyshared/flask/app.py\", line 1504, in wsgi_app\nresponse = self.full_dispatch_request()\nFile \"/usr/share/pyshared/flask/app.py\", line 1265, in full_dispatch_request\nresponse = self.make_response(rv)\nFile \"/usr/share/pyshared/flask/app.py\", line 1338, in make_response\nreturn self.response_class(*rv)\nFile \"/usr/share/pyshared/werkzeug/wrappers.py\", line 642, in __init_\nself.status = status\nFile \"/usr/share/pyshared/werkzeug/wrappers.py\", line 748, in _set_status\nself._status_code = int(self._status.split(None, 1)[0])\nIndexError: list index out of range\n\nThis is with the following request - curl -d \"\" http://localhost:5000/uptime/test/ but supplying any post data will cause the same\n\nThe issue is with accidentally returning a tuple in my code - however the error doesn't seem like that at all and it was only due to an eagle-eyed person in the IRC channel that I found this one. Could this be made more explicit? (i.e something in the trace to say that this was supposed to be a (content, status) tuple or a single string.\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/8031498",
            "html_url": "https://github.com/pallets/flask/issues/580#issuecomment-8031498",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/580",
            "id": 8031498,
            "node_id": "MDEyOklzc3VlQ29tbWVudDgwMzE0OTg=",
            "user": {
                "login": "ghost",
                "id": 10137,
                "node_id": "MDQ6VXNlcjEwMTM3",
                "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ghost",
                "html_url": "https://github.com/ghost",
                "followers_url": "https://api.github.com/users/ghost/followers",
                "following_url": "https://api.github.com/users/ghost/following{/other_user}",
                "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
                "organizations_url": "https://api.github.com/users/ghost/orgs",
                "repos_url": "https://api.github.com/users/ghost/repos",
                "events_url": "https://api.github.com/users/ghost/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ghost/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-08-26T09:12:02Z",
            "updated_at": "2012-08-26T09:12:02Z",
            "author_association": "NONE",
            "body": "Hello voltagex!\n\n``` python\ndef set_uptime(machine,uptime):\n        return \"You sent \" + machine, uptime\n```\n\nIf you return a tuple, Flask uses the first argument as response body, and the second as status code.\nSince uptime - the second argument of the tuple - is \"\" and not a valid integer, Werkzeug can't process the response.\n\nMaybe you would have done this:\n\n``` python\ndef set_uptime(machine,uptime):\n        return \"You sent \" + machine + uptime\n```\n\nI think this can be closed.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/8032200",
            "html_url": "https://github.com/pallets/flask/issues/580#issuecomment-8032200",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/580",
            "id": 8032200,
            "node_id": "MDEyOklzc3VlQ29tbWVudDgwMzIyMDA=",
            "user": {
                "login": "voltagex",
                "id": 159567,
                "node_id": "MDQ6VXNlcjE1OTU2Nw==",
                "avatar_url": "https://avatars3.githubusercontent.com/u/159567?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/voltagex",
                "html_url": "https://github.com/voltagex",
                "followers_url": "https://api.github.com/users/voltagex/followers",
                "following_url": "https://api.github.com/users/voltagex/following{/other_user}",
                "gists_url": "https://api.github.com/users/voltagex/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/voltagex/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/voltagex/subscriptions",
                "organizations_url": "https://api.github.com/users/voltagex/orgs",
                "repos_url": "https://api.github.com/users/voltagex/repos",
                "events_url": "https://api.github.com/users/voltagex/events{/privacy}",
                "received_events_url": "https://api.github.com/users/voltagex/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-08-26T11:07:50Z",
            "updated_at": "2012-08-26T11:07:50Z",
            "author_association": "NONE",
            "body": "Fair enough, thanks\n"
        }
    ]
}