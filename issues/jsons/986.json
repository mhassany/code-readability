{
    "url": "https://api.github.com/repos/pallets/flask/issues/986",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/986/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/986/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/986/events",
    "html_url": "https://github.com/pallets/flask/issues/986",
    "id": 28112201,
    "node_id": "MDU6SXNzdWUyODExMjIwMQ==",
    "number": 986,
    "title": "Remove or downplay Tornado recommendation",
    "user": {
        "login": "bdarnell",
        "id": 160562,
        "node_id": "MDQ6VXNlcjE2MDU2Mg==",
        "avatar_url": "https://avatars1.githubusercontent.com/u/160562?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bdarnell",
        "html_url": "https://github.com/bdarnell",
        "followers_url": "https://api.github.com/users/bdarnell/followers",
        "following_url": "https://api.github.com/users/bdarnell/following{/other_user}",
        "gists_url": "https://api.github.com/users/bdarnell/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/bdarnell/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/bdarnell/subscriptions",
        "organizations_url": "https://api.github.com/users/bdarnell/orgs",
        "repos_url": "https://api.github.com/users/bdarnell/repos",
        "events_url": "https://api.github.com/users/bdarnell/events{/privacy}",
        "received_events_url": "https://api.github.com/users/bdarnell/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 6,
    "created_at": "2014-02-23T04:33:22Z",
    "updated_at": "2014-09-25T15:21:44Z",
    "closed_at": "2014-09-25T15:21:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "http://flask.pocoo.org/docs/deploying/wsgi-standalone/ talks about Tornado's scaling properties, but does not mention that most of this scalability is lost when the single-threaded asynchronous server is combined with a synchronous WSGI framework like flask.  I see a lot of questions on stackoverflow from people who use Flask on Tornado and are surprised that they are not getting any concurrency.  \n\nI think it would be best to remove Tornado from this page entirely since Tornado is not really focused on being a WSGI container and WSGI apps are nearly always better served by a multi-threaded server like gunicorn or uwsgi.  If you do want to keep a mention of Tornado as a WSGI server, please acknowledge its limitations (single-threaded) and that it really only makes sense when you want to combine a WSGI app with a Tornado-native app in the same process.\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/36237005",
            "html_url": "https://github.com/pallets/flask/issues/986#issuecomment-36237005",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/986",
            "id": 36237005,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjM3MDA1",
            "user": {
                "login": "grahamlyons",
                "id": 284688,
                "node_id": "MDQ6VXNlcjI4NDY4OA==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/284688?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/grahamlyons",
                "html_url": "https://github.com/grahamlyons",
                "followers_url": "https://api.github.com/users/grahamlyons/followers",
                "following_url": "https://api.github.com/users/grahamlyons/following{/other_user}",
                "gists_url": "https://api.github.com/users/grahamlyons/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/grahamlyons/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/grahamlyons/subscriptions",
                "organizations_url": "https://api.github.com/users/grahamlyons/orgs",
                "repos_url": "https://api.github.com/users/grahamlyons/repos",
                "events_url": "https://api.github.com/users/grahamlyons/events{/privacy}",
                "received_events_url": "https://api.github.com/users/grahamlyons/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-02-27T12:31:18Z",
            "updated_at": "2014-02-27T12:32:49Z",
            "author_association": "NONE",
            "body": "+1\n\n@bdarnell, those docs are part of this repo so you can edit them and open a pull request: https://github.com/mitsuhiko/flask/blob/master/docs/deploying/wsgi-standalone.rst#tornado\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/36268106",
            "html_url": "https://github.com/pallets/flask/issues/986#issuecomment-36268106",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/986",
            "id": 36268106,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjY4MTA2",
            "user": {
                "login": "mizhi",
                "id": 901983,
                "node_id": "MDQ6VXNlcjkwMTk4Mw==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/901983?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mizhi",
                "html_url": "https://github.com/mizhi",
                "followers_url": "https://api.github.com/users/mizhi/followers",
                "following_url": "https://api.github.com/users/mizhi/following{/other_user}",
                "gists_url": "https://api.github.com/users/mizhi/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mizhi/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mizhi/subscriptions",
                "organizations_url": "https://api.github.com/users/mizhi/orgs",
                "repos_url": "https://api.github.com/users/mizhi/repos",
                "events_url": "https://api.github.com/users/mizhi/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mizhi/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-02-27T17:33:02Z",
            "updated_at": "2014-02-27T17:33:56Z",
            "author_association": "NONE",
            "body": ":+1: \n\nDiscovered this when I did performance testing.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/37572978",
            "html_url": "https://github.com/pallets/flask/issues/986#issuecomment-37572978",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/986",
            "id": 37572978,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTcyOTc4",
            "user": {
                "login": "DasIch",
                "id": 182316,
                "node_id": "MDQ6VXNlcjE4MjMxNg==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/182316?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/DasIch",
                "html_url": "https://github.com/DasIch",
                "followers_url": "https://api.github.com/users/DasIch/followers",
                "following_url": "https://api.github.com/users/DasIch/following{/other_user}",
                "gists_url": "https://api.github.com/users/DasIch/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/DasIch/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/DasIch/subscriptions",
                "organizations_url": "https://api.github.com/users/DasIch/orgs",
                "repos_url": "https://api.github.com/users/DasIch/repos",
                "events_url": "https://api.github.com/users/DasIch/events{/privacy}",
                "received_events_url": "https://api.github.com/users/DasIch/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-03-13T18:58:08Z",
            "updated_at": "2014-03-13T18:58:08Z",
            "author_association": "CONTRIBUTOR",
            "body": "-1 on removing the Tornado section entirely as it is a noteworthy server. +1 on adding a warning.\n\nAs we also have a section on Twisted which should have the same issues, I think adding a section that explains the problem of using asynchronous servers with Flask in general would be the best way to solve this problem.\n\nI'm not very familiar with asynchronous servers myself, could someone who is make a pull request that adds such a section?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/37589006",
            "html_url": "https://github.com/pallets/flask/issues/986#issuecomment-37589006",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/986",
            "id": 37589006,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTg5MDA2",
            "user": {
                "login": "bdarnell",
                "id": 160562,
                "node_id": "MDQ6VXNlcjE2MDU2Mg==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/160562?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/bdarnell",
                "html_url": "https://github.com/bdarnell",
                "followers_url": "https://api.github.com/users/bdarnell/followers",
                "following_url": "https://api.github.com/users/bdarnell/following{/other_user}",
                "gists_url": "https://api.github.com/users/bdarnell/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/bdarnell/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bdarnell/subscriptions",
                "organizations_url": "https://api.github.com/users/bdarnell/orgs",
                "repos_url": "https://api.github.com/users/bdarnell/repos",
                "events_url": "https://api.github.com/users/bdarnell/events{/privacy}",
                "received_events_url": "https://api.github.com/users/bdarnell/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-03-13T21:27:14Z",
            "updated_at": "2014-03-13T21:27:14Z",
            "author_association": "CONTRIBUTOR",
            "body": "I think twisted's wsgi server runs the wsgi app in a thread pool, so it doesn't have the same issue (I haven't verified this, though).\n\nSince wsgi is a synchronous interface, it doesn't really matter whether the server is asynchronous or not (I believe gunicorn has an asynchronous HTTP server at its core as well).  What matters is the execution context - multithreaded, multiprocess, etc.  Tornado's wsgi server is single-threaded and by default runs in a single process (it can optionally run in multiple processes, but since it pins connections to processes it's not as good at being a multi-process wsgi server as one designed for this purpose).  \n\nHere's the warning I've added to the tornado docs for WSGIContainer:\nhttp://www.tornadoweb.org/en/latest/wsgi.html#tornado.wsgi.WSGIContainer\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/37607410",
            "html_url": "https://github.com/pallets/flask/issues/986#issuecomment-37607410",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/986",
            "id": 37607410,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3NjA3NDEw",
            "user": {
                "login": "mizhi",
                "id": 901983,
                "node_id": "MDQ6VXNlcjkwMTk4Mw==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/901983?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mizhi",
                "html_url": "https://github.com/mizhi",
                "followers_url": "https://api.github.com/users/mizhi/followers",
                "following_url": "https://api.github.com/users/mizhi/following{/other_user}",
                "gists_url": "https://api.github.com/users/mizhi/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mizhi/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mizhi/subscriptions",
                "organizations_url": "https://api.github.com/users/mizhi/orgs",
                "repos_url": "https://api.github.com/users/mizhi/repos",
                "events_url": "https://api.github.com/users/mizhi/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mizhi/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-03-14T01:49:05Z",
            "updated_at": "2014-03-14T01:49:05Z",
            "author_association": "NONE",
            "body": "@bdarnell Thanks for adding the warning! Tornado's single-thread-per-process model and pinning connections to processes was exactly the issue I ran into while running my tests.\n\nI haven't tried twistd's implementation, but I found that nginx+uwsgi worked very nicely for my purposes.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/37702372",
            "html_url": "https://github.com/pallets/flask/issues/986#issuecomment-37702372",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/986",
            "id": 37702372,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3NzAyMzcy",
            "user": {
                "login": "docapotamus",
                "id": 1929544,
                "node_id": "MDQ6VXNlcjE5Mjk1NDQ=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1929544?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/docapotamus",
                "html_url": "https://github.com/docapotamus",
                "followers_url": "https://api.github.com/users/docapotamus/followers",
                "following_url": "https://api.github.com/users/docapotamus/following{/other_user}",
                "gists_url": "https://api.github.com/users/docapotamus/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/docapotamus/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/docapotamus/subscriptions",
                "organizations_url": "https://api.github.com/users/docapotamus/orgs",
                "repos_url": "https://api.github.com/users/docapotamus/repos",
                "events_url": "https://api.github.com/users/docapotamus/events{/privacy}",
                "received_events_url": "https://api.github.com/users/docapotamus/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-03-14T22:04:18Z",
            "updated_at": "2014-03-14T22:04:18Z",
            "author_association": "NONE",
            "body": "I don't think this is just a tornado issue. It seems to related to the number of deployment methods and the config there of.\n\nI may try and add some more content to the deployment section as its a very common question on SO and the IRC. It seems to lengthen the flask dev process that people are unsure on the methods.\n\nI use gunicorn and it may be worth mentioning the worker types and such as these will suffer similar problems especially as Tornado is one of them. It may be worth us all extending the docs on our deployment methods just to take the edge and magic out of it.\n"
        }
    ]
}