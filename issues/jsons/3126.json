{
    "url": "https://api.github.com/repos/pallets/flask/issues/3126",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/3126/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/3126/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/3126/events",
    "html_url": "https://github.com/pallets/flask/issues/3126",
    "id": 423244702,
    "node_id": "MDU6SXNzdWU0MjMyNDQ3MDI=",
    "number": 3126,
    "title": "Import error in dev mode, not with wsgi virtualhost (virtualenv and vagrant)",
    "user": {
        "login": "quoidautre",
        "id": 191692,
        "node_id": "MDQ6VXNlcjE5MTY5Mg==",
        "avatar_url": "https://avatars2.githubusercontent.com/u/191692?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/quoidautre",
        "html_url": "https://github.com/quoidautre",
        "followers_url": "https://api.github.com/users/quoidautre/followers",
        "following_url": "https://api.github.com/users/quoidautre/following{/other_user}",
        "gists_url": "https://api.github.com/users/quoidautre/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/quoidautre/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/quoidautre/subscriptions",
        "organizations_url": "https://api.github.com/users/quoidautre/orgs",
        "repos_url": "https://api.github.com/users/quoidautre/repos",
        "events_url": "https://api.github.com/users/quoidautre/events{/privacy}",
        "received_events_url": "https://api.github.com/users/quoidautre/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2019-03-20T13:15:54Z",
    "updated_at": "2019-03-21T09:50:35Z",
    "closed_at": "2019-03-20T13:17:29Z",
    "author_association": "NONE",
    "body": "---\r\n\r\n### Expected Behavior\r\nIn my Flask project (Debian 8.10 VM, vagrant and virtualenvs), I use mapnik, and it's installed with apt-get (_with pip, there's a lot of errors_) : \r\n```shell\r\n$ sudo apt-get install libmapnik2.2 mapnik-utils python-mapnik python-mapnik2    \r\n\r\n$ dpkg -l | grep mapnik\r\nii  libmapnik2.2                         2.2.0+ds1-7+b2                     amd64        C++/Python toolkit for developing GIS applications (libraries)\r\nii  mapnik-utils                         2.2.0+ds1-7+b2                     amd64        C++/Python toolkit for developing GIS applications (utilities)\r\nii  python-mapnik                        2.2.0+ds1-7+b2                     amd64        C++/Python toolkit for developing GIS applications (Python)\r\nii  python-mapnik2                       2.2.0+ds1-7                        all          C++/Python toolkit for developing GIS applications (dummy)\r\n\r\n```\r\nI use an apache's virtualhost : \r\n```apache\r\n<VirtualHost *:80>\r\n        ServerName vm.my_app\r\n        DocumentRoot /var/www/my_app/my_app\r\n        WSGIDaemonProcess flask_my_app user=www-data group=www-data python-path=/var/www/my_app/my_app:/home/vagrant/.virtualenvs/my_app/lib/python2.7/site-packages display-name=%{GROUP}\r\n        WSGIProcessGroup flask_my_app\r\n        WSGIScriptAlias / /var/www/my_app/my_app/flask_my_app/flask_my_app.wsgi\r\n        WSGIApplicationGroup %{GLOBAL}\r\n        WSGIPassAuthorization on\r\n        WSGIScriptReloading On\r\n\r\n        Alias /site_media/ /var/www/my_app/my_app/site_media/\r\n        Alias /media/ /var/www/my_app/my_app/media/\r\n        Alias /static/ /var/www/my_app/my_app/static/\r\n        AliasMatch /([/]*\\.css) /var/www/my_app/my_app/static/css/$1\r\n\r\n        <Directory /var/www/my_app/my_app>\r\n            Order allow,deny\r\n            Allow from all\r\n            Require all granted\r\n        </Directory>\r\n\r\n        <Directory /var/www/my_app/my_app/flask_my_app>\r\n            Order allow,deny\r\n            Allow from all\r\n            Require all granted\r\n        </Directory>\r\n\r\n</VirtualHost>\r\n```\r\nOk, it's fine..., except that I must add some characters in the wsgi file when I change my code :(\r\n\r\nAnd, so here the error : \r\n```\r\n(No module named mapnik --> <type 'exceptions.ImportError'> => \r\nTraceback (most recent call last): \r\nFile \"/var/www/my_app/my_app/flask_my_app/views.py\", line 202, in zonesmeteo t = importlib.import_module('cron_dept_treatments.%s' % dept_code) \r\nFile \"/usr/lib/python2.7/importlib/__init__.py\", line 37, in import_module __import__(name) \r\nFile \"/var/www/my_app/my_app/cron_dept_treatments/20.py\", line 17, in <module> import mapnik ImportError: No module named mapnik )\r\n```\r\n```pytb\r\n(my_env)    \r\n$ python\r\nPython 2.7.12 (default, Nov 12 2018, 14:36:49)\r\n[GCC 5.4.0 20160609] on linux2\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import flask\r\n>>> flask.__path__\r\n['/home/vagrant/.virtualenvs/my_app/local/lib/python2.7/site-packages/flask']\r\n>>> import mapnik\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nImportError: No module named mapnik\r\n>>> quit()\r\n\r\n(my_env)\r\n$ deactivate\r\n\r\n$ python\r\nPython 2.7.9 (default, Sep 25 2018, 20:42:16)\r\n[GCC 4.9.2] on linux2\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import mapnik\r\n>>> mapnik.__path__\r\n['/usr/lib/python2.7/dist-packages/mapnik']\r\n>>>\r\n```\r\n\r\n### Environment\r\n\r\n* Python version: 2.7\r\n* Flask version: 1.0.2\r\n* Werkzeug version: 0.14.1\r\n\r\nThanks\r\nF.\r\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/474824101",
            "html_url": "https://github.com/pallets/flask/issues/3126#issuecomment-474824101",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/3126",
            "id": 474824101,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDgyNDEwMQ==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-03-20T13:17:29Z",
            "updated_at": "2019-03-20T13:17:29Z",
            "author_association": "MEMBER",
            "body": "If you want to have access to globally-installed packages, make sure to create your virtualenv with `--system-site-packages`. Otherwise it has no access to anything installed outside the virtualenv."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/474893116",
            "html_url": "https://github.com/pallets/flask/issues/3126#issuecomment-474893116",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/3126",
            "id": 474893116,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDg5MzExNg==",
            "user": {
                "login": "quoidautre",
                "id": 191692,
                "node_id": "MDQ6VXNlcjE5MTY5Mg==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/191692?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/quoidautre",
                "html_url": "https://github.com/quoidautre",
                "followers_url": "https://api.github.com/users/quoidautre/followers",
                "following_url": "https://api.github.com/users/quoidautre/following{/other_user}",
                "gists_url": "https://api.github.com/users/quoidautre/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/quoidautre/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/quoidautre/subscriptions",
                "organizations_url": "https://api.github.com/users/quoidautre/orgs",
                "repos_url": "https://api.github.com/users/quoidautre/repos",
                "events_url": "https://api.github.com/users/quoidautre/events{/privacy}",
                "received_events_url": "https://api.github.com/users/quoidautre/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-03-20T15:44:31Z",
            "updated_at": "2019-03-21T09:50:35Z",
            "author_association": "NONE",
            "body": "Hi, \r\nThanks, but can I modify the env ?, or,  I must remove it and regenerate it ?\r\n\r\nUpdate : \r\nI just do this :  ` mkvirtualenv --system-site-packages --python=``which python`` my_env` (simple inversed quote)\r\n"
        }
    ]
}