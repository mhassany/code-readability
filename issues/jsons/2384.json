{
    "url": "https://api.github.com/repos/pallets/flask/issues/2384",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2384/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2384/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2384/events",
    "html_url": "https://github.com/pallets/flask/issues/2384",
    "id": 236926923,
    "node_id": "MDU6SXNzdWUyMzY5MjY5MjM=",
    "number": 2384,
    "title": "Problem with partial video content: send_from_directory() + x-sendfile + mod_wsgi",
    "user": {
        "login": "xplwowi",
        "id": 5732649,
        "node_id": "MDQ6VXNlcjU3MzI2NDk=",
        "avatar_url": "https://avatars1.githubusercontent.com/u/5732649?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xplwowi",
        "html_url": "https://github.com/xplwowi",
        "followers_url": "https://api.github.com/users/xplwowi/followers",
        "following_url": "https://api.github.com/users/xplwowi/following{/other_user}",
        "gists_url": "https://api.github.com/users/xplwowi/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/xplwowi/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/xplwowi/subscriptions",
        "organizations_url": "https://api.github.com/users/xplwowi/orgs",
        "repos_url": "https://api.github.com/users/xplwowi/repos",
        "events_url": "https://api.github.com/users/xplwowi/events{/privacy}",
        "received_events_url": "https://api.github.com/users/xplwowi/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2017-06-19T15:19:07Z",
    "updated_at": "2018-07-12T15:00:05Z",
    "closed_at": "2018-07-12T15:00:05Z",
    "author_association": "NONE",
    "body": "I found that using send_file() to serve video (mp4) files works fine but the same content is not served using send_from_directory(). Only small parts (hundreds of bytes) are delivered to browser.\r\nOn Firefox video embedded through \\<video\\> tags is playable in most cases but opened directly from address bar not. On Chrome both methods are not working.\r\n\r\nWith x-sendfile switched off, send_from_directory() works ok.\r\n\r\nTested on:\r\nDebian: python 3.5.3, flask  0.12.2, apache 2.4.25, mod_wsgi 4.5.11\r\nUbuntu: python 3.5.2, flask 0.12.2, apache 2.4.18, mod_wsgi 4.3.0",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/361372864",
            "html_url": "https://github.com/pallets/flask/issues/2384#issuecomment-361372864",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2384",
            "id": 361372864,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTM3Mjg2NA==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-01-29T20:17:59Z",
            "updated_at": "2018-01-29T20:17:59Z",
            "author_association": "MEMBER",
            "body": "I can unreliably reproduce this. Firefox or Chrome, page or direct viewing, sometimes the page will just hang getting a bunch of 206 responses. Other times it will work fine. Once it works, it seems to keep working until the cache is cleared.\r\n\r\nHowever, I have no idea who's fault it is. If you pass `conditional=False` to `send_from_directory`, it works reliably. But that doesn't seem ideal. And the responses look fine (although I'm not completely sure what I'm looking for). So is it the browser thinking it needs to load more data? Is it xsendfile not handling range requests correctly? I don't know."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/361373176",
            "html_url": "https://github.com/pallets/flask/issues/2384#issuecomment-361373176",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2384",
            "id": 361373176,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTM3MzE3Ng==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-01-29T20:19:05Z",
            "updated_at": "2018-01-29T20:19:54Z",
            "author_association": "MEMBER",
            "body": "I'm going to guess that since range requests work when serving with Flask directly, and the only difference with XSendFile enabled is that the file data is served by Apache while all the headers remain the same, it's probably not Flask at fault."
        }
    ]
}