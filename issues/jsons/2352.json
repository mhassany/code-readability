{
    "url": "https://api.github.com/repos/pallets/flask/issues/2352",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2352/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2352/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2352/events",
    "html_url": "https://github.com/pallets/flask/pull/2352",
    "id": 233086324,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTIzNjQ4NDE2",
    "number": 2352,
    "title": "Make session serializer extensible",
    "user": {
        "login": "davidism",
        "id": 1242887,
        "node_id": "MDQ6VXNlcjEyNDI4ODc=",
        "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidism",
        "html_url": "https://github.com/davidism",
        "followers_url": "https://api.github.com/users/davidism/followers",
        "following_url": "https://api.github.com/users/davidism/following{/other_user}",
        "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
        "organizations_url": "https://api.github.com/users/davidism/orgs",
        "repos_url": "https://api.github.com/users/davidism/repos",
        "events_url": "https://api.github.com/users/davidism/events{/privacy}",
        "received_events_url": "https://api.github.com/users/davidism/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 398831866,
            "node_id": "MDU6TGFiZWwzOTg4MzE4NjY=",
            "url": "https://api.github.com/repos/pallets/flask/labels/json",
            "name": "json",
            "color": "1d76db",
            "default": false,
            "description": null
        },
        {
            "id": 398835124,
            "node_id": "MDU6TGFiZWwzOTg4MzUxMjQ=",
            "url": "https://api.github.com/repos/pallets/flask/labels/session",
            "name": "session",
            "color": "1d76db",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "davidism",
        "id": 1242887,
        "node_id": "MDQ6VXNlcjEyNDI4ODc=",
        "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidism",
        "html_url": "https://github.com/davidism",
        "followers_url": "https://api.github.com/users/davidism/followers",
        "following_url": "https://api.github.com/users/davidism/following{/other_user}",
        "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
        "organizations_url": "https://api.github.com/users/davidism/orgs",
        "repos_url": "https://api.github.com/users/davidism/repos",
        "events_url": "https://api.github.com/users/davidism/events{/privacy}",
        "received_events_url": "https://api.github.com/users/davidism/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "davidism",
            "id": 1242887,
            "node_id": "MDQ6VXNlcjEyNDI4ODc=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/davidism",
            "html_url": "https://github.com/davidism",
            "followers_url": "https://api.github.com/users/davidism/followers",
            "following_url": "https://api.github.com/users/davidism/following{/other_user}",
            "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
            "organizations_url": "https://api.github.com/users/davidism/orgs",
            "repos_url": "https://api.github.com/users/davidism/repos",
            "events_url": "https://api.github.com/users/davidism/events{/privacy}",
            "received_events_url": "https://api.github.com/users/davidism/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": {
        "url": "https://api.github.com/repos/pallets/flask/milestones/2",
        "html_url": "https://github.com/pallets/flask/milestone/2",
        "labels_url": "https://api.github.com/repos/pallets/flask/milestones/2/labels",
        "id": 795954,
        "node_id": "MDk6TWlsZXN0b25lNzk1OTU0",
        "number": 2,
        "title": "1.0",
        "description": "",
        "creator": {
            "login": "untitaker",
            "id": 837573,
            "node_id": "MDQ6VXNlcjgzNzU3Mw==",
            "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/untitaker",
            "html_url": "https://github.com/untitaker",
            "followers_url": "https://api.github.com/users/untitaker/followers",
            "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
            "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
            "organizations_url": "https://api.github.com/users/untitaker/orgs",
            "repos_url": "https://api.github.com/users/untitaker/repos",
            "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
            "received_events_url": "https://api.github.com/users/untitaker/received_events",
            "type": "User",
            "site_admin": false
        },
        "open_issues": 0,
        "closed_issues": 159,
        "state": "closed",
        "created_at": "2014-09-19T15:47:20Z",
        "updated_at": "2018-04-26T21:07:44Z",
        "due_on": "2018-04-26T07:00:00Z",
        "closed_at": "2018-04-26T21:07:44Z"
    },
    "comments": 2,
    "created_at": "2017-06-02T06:12:33Z",
    "updated_at": "2018-10-23T17:44:14Z",
    "closed_at": "2017-06-02T17:07:57Z",
    "author_association": "MEMBER",
    "pull_request": {
        "url": "https://api.github.com/repos/pallets/flask/pulls/2352",
        "html_url": "https://github.com/pallets/flask/pull/2352",
        "diff_url": "https://github.com/pallets/flask/pull/2352.diff",
        "patch_url": "https://github.com/pallets/flask/pull/2352.patch"
    },
    "body": "Continues #1452.\r\n\r\nRefactors `flask.session.TaggedJSONSerializer` to a new `flask.json.tag` module. Creates a `JSONTag` interface and a `TaggedJSONSerializer.register` method to register new tags.\r\n\r\n~~~python\r\nfrom flask.json.tag import JSONTag\r\n\r\nclass TagOrderedDict(JSONTag):\r\n    __slots__ = ('serializer',)\r\n    key = ' od'\r\n\r\n    def check(self, value):\r\n        return isinstance(value, OrderedDict)\r\n\r\n    def to_json(self, value):\r\n        return [[k, self.serializer.tag(v)] for k, v in iteritems(value)]\r\n\r\n    def to_python(self, value):\r\n        return OrderedDict(value)\r\n\r\napp.session_interface.serializer.register(TagOrderedDict, 0)\r\n~~~\r\n\r\nSince `register` takes an index, it can be used to override existing tags (although it would be slightly more efficient to subclass `TaggedJSONSerializer` instead). This can address #1908 by adding a higher-priority `dict` serializer that uses a different format to support non-string keys.\r\n\r\nCloses #1438, #1511, #1908.\r\n\r\n~Still needs:~\r\n\r\n- [x] refactor to move the `serializer` argument to `self.serializer` instead. It was an attempt at optimization but didn't change anything.\r\n- [x] refactor `TagDict` to split the logic between addressing #1511 and regular dict passthrough, as #1452 originally did. This was another optimization attempt that didn't help, it just made the code more confusing.\r\n- [x] more tests\r\n- [x] documentation",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/305791757",
            "html_url": "https://github.com/pallets/flask/pull/2352#issuecomment-305791757",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2352",
            "id": 305791757,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwNTc5MTc1Nw==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-06-02T13:46:26Z",
            "updated_at": "2017-06-02T13:46:26Z",
            "author_association": "MEMBER",
            "body": "@ThiefMaster from https://github.com/pallets/flask/pull/1452#issuecomment-305609953:\r\n\r\nRe: performance: new method is ~ 30 \u00b5s slower.\r\n\r\n~~~\r\nold: 70.7 \u00b5s \u00b1 164 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\r\nnew: 96.3 \u00b5s \u00b1 678 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\r\n~~~\r\n\r\nYou'd need to handle 2,000,000 requests before you wasted 1 extra minute. There's always Flask-Session, etc. where server-side sessions are serialized with `pickle`, which is *much* faster."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/305792177",
            "html_url": "https://github.com/pallets/flask/pull/2352#issuecomment-305792177",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2352",
            "id": 305792177,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwNTc5MjE3Nw==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-06-02T13:48:03Z",
            "updated_at": "2017-06-02T13:48:03Z",
            "author_association": "MEMBER",
            "body": "ok, that seems fine"
        }
    ]
}