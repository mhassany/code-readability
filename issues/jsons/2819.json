{
    "url": "https://api.github.com/repos/pallets/flask/issues/2819",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2819/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2819/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2819/events",
    "html_url": "https://github.com/pallets/flask/issues/2819",
    "id": 329951201,
    "node_id": "MDU6SXNzdWUzMjk5NTEyMDE=",
    "number": 2819,
    "title": "Traceback not flushed immediately ",
    "user": {
        "login": "Faboor",
        "id": 12911864,
        "node_id": "MDQ6VXNlcjEyOTExODY0",
        "avatar_url": "https://avatars3.githubusercontent.com/u/12911864?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Faboor",
        "html_url": "https://github.com/Faboor",
        "followers_url": "https://api.github.com/users/Faboor/followers",
        "following_url": "https://api.github.com/users/Faboor/following{/other_user}",
        "gists_url": "https://api.github.com/users/Faboor/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Faboor/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Faboor/subscriptions",
        "organizations_url": "https://api.github.com/users/Faboor/orgs",
        "repos_url": "https://api.github.com/users/Faboor/repos",
        "events_url": "https://api.github.com/users/Faboor/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Faboor/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2018-06-06T16:52:54Z",
    "updated_at": "2018-06-06T17:48:49Z",
    "closed_at": "2018-06-06T17:48:41Z",
    "author_association": "NONE",
    "body": "### Expected Behavior\r\nWhen an error occurs and traceback is printed out, the stderr should be flushed.\r\n\r\nFile `app.py`:\r\n```python\r\nfrom flask import Flask\r\napp = Flask(__name__)\r\n\r\n@app.route('/')\r\ndef err():\r\n  return i_will_cause_an_error(\" :'( \")\r\n\r\nif __name__ == '__name__':\r\n  app.run()\r\n```\r\nAnd then run it with `python app.py 2>out.txt` and connect to the server, e.g. using `curl http://localhost:5000/`\r\n\r\nHere I'd expect to see the `127.0.0.1 - - [<date>] \"GET / HTTP/1.1 500 -` and a full traceback for the `AttributeError` raised in the file `out.txt`\r\n\r\n### Actual Behavior\r\nOnly `127.0.0.1 - - [<date>] \"GET / HTTP/1.1 500 -` shows up in the `out.txt` file. Only when a new request is made the full traceback is flushed to the file, together with the new response log line.\r\n\r\n### Environment\r\n| | version|\r\n| ------------- |:-------------:|\r\n| Python | 3.5.2 |\r\n| Flask | 1.0.2 |\r\n| Werkzeug | 0.14.1 |",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/395149249",
            "html_url": "https://github.com/pallets/flask/issues/2819#issuecomment-395149249",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2819",
            "id": 395149249,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTE0OTI0OQ==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-06-06T17:26:43Z",
            "updated_at": "2018-06-06T17:26:43Z",
            "author_association": "MEMBER",
            "body": "Are you sure you're not in debug mode?"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/395152874",
            "html_url": "https://github.com/pallets/flask/issues/2819#issuecomment-395152874",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2819",
            "id": 395152874,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTE1Mjg3NA==",
            "user": {
                "login": "Faboor",
                "id": 12911864,
                "node_id": "MDQ6VXNlcjEyOTExODY0",
                "avatar_url": "https://avatars3.githubusercontent.com/u/12911864?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Faboor",
                "html_url": "https://github.com/Faboor",
                "followers_url": "https://api.github.com/users/Faboor/followers",
                "following_url": "https://api.github.com/users/Faboor/following{/other_user}",
                "gists_url": "https://api.github.com/users/Faboor/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Faboor/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Faboor/subscriptions",
                "organizations_url": "https://api.github.com/users/Faboor/orgs",
                "repos_url": "https://api.github.com/users/Faboor/repos",
                "events_url": "https://api.github.com/users/Faboor/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Faboor/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-06-06T17:38:16Z",
            "updated_at": "2018-06-06T17:38:16Z",
            "author_association": "NONE",
            "body": "Sorry, my bad.. it actually is in `FLASK_ENV='development'`, but I'd still expect the traceback to be flushed immediately to stderr, rather than only with the next request (especially when in production environment it does that already).\r\n\r\nIs this some particular feature of the debug mode that I've missed? What's the reasoning behind it?"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/395156153",
            "html_url": "https://github.com/pallets/flask/issues/2819#issuecomment-395156153",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2819",
            "id": 395156153,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTE1NjE1Mw==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-06-06T17:48:41Z",
            "updated_at": "2018-06-06T17:48:49Z",
            "author_association": "MEMBER",
            "body": "Flask holds on to the request when there's an error in debug mode so that the debugger works as expected. This is intentional behavior."
        }
    ]
}