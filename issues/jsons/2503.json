{
    "url": "https://api.github.com/repos/pallets/flask/issues/2503",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2503/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2503/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2503/events",
    "html_url": "https://github.com/pallets/flask/issues/2503",
    "id": 268211869,
    "node_id": "MDU6SXNzdWUyNjgyMTE4Njk=",
    "number": 2503,
    "title": "WAV files cannot play in Safari",
    "user": {
        "login": "evanmiltenburg",
        "id": 1513355,
        "node_id": "MDQ6VXNlcjE1MTMzNTU=",
        "avatar_url": "https://avatars1.githubusercontent.com/u/1513355?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/evanmiltenburg",
        "html_url": "https://github.com/evanmiltenburg",
        "followers_url": "https://api.github.com/users/evanmiltenburg/followers",
        "following_url": "https://api.github.com/users/evanmiltenburg/following{/other_user}",
        "gists_url": "https://api.github.com/users/evanmiltenburg/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/evanmiltenburg/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/evanmiltenburg/subscriptions",
        "organizations_url": "https://api.github.com/users/evanmiltenburg/orgs",
        "repos_url": "https://api.github.com/users/evanmiltenburg/repos",
        "events_url": "https://api.github.com/users/evanmiltenburg/events{/privacy}",
        "received_events_url": "https://api.github.com/users/evanmiltenburg/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 8,
    "created_at": "2017-10-24T22:46:38Z",
    "updated_at": "2018-01-29T15:25:29Z",
    "closed_at": "2018-01-29T15:25:29Z",
    "author_association": "NONE",
    "body": "### Expected Behavior\r\n\r\nI'm trying to embed an audio player in my Flask website. Here's the relevant part of my `index.html`:\r\n\r\n    <audio controls>\r\n    <source src=\"/static/{{audio_file}}\" type=\"audio/wav\">\r\n    Your browser does not support the audio element.\r\n    </audio>\r\n\r\nThis works well in Firefox, but not in Safari.\r\n\r\n### Actual Behavior\r\n\r\n- Safari does show the audio controls, but the audio doesn't load.  \r\n- I can download the file in Safari if I right-click the audio player.\r\n- 'Open audio in new window' gives me a window with the 'play' button with a line struck through, indicating that Safari cannot play the file.\r\n\r\nWhat's frustrating is that *the exact same HTML* (replacing `{{audio_file}}` with the actual filename) does work in Safari when I'm not using Flask (i.e. just opening static html in Safari). So something inside Flask keeps the audio from working.\r\n\r\nI just tried a different file type (mp3, using `house_lo.mp3` copied from the pygame examples), and that works fine in Safari. So the problem only occurs when using `.wav` files. mp3 could solve the problem for me (just convert everything), but it's not ideal.\r\n\r\n    <audio controls>\r\n    <source src=\"/static/house_lo.mp3\" type=\"audio/mp3\">\r\n    Your browser does not support the audio element.\r\n    </audio>\r\n\r\n### Environment\r\n\r\n* Python version: 3.6.1 , Anaconda, OS X Sierra\r\n* Flask version: 0.12\r\n* Werkzeug version: 0.11.15\r\n\r\nI've posted this issue on [StackOverflow](https://stackoverflow.com/questions/46914468/how-to-make-embedded-wav-audio-work-in-safari-using-flask) as well.",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/340225845",
            "html_url": "https://github.com/pallets/flask/issues/2503#issuecomment-340225845",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2503",
            "id": 340225845,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDIyNTg0NQ==",
            "user": {
                "login": "italomaia",
                "id": 14670,
                "node_id": "MDQ6VXNlcjE0Njcw",
                "avatar_url": "https://avatars1.githubusercontent.com/u/14670?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/italomaia",
                "html_url": "https://github.com/italomaia",
                "followers_url": "https://api.github.com/users/italomaia/followers",
                "following_url": "https://api.github.com/users/italomaia/following{/other_user}",
                "gists_url": "https://api.github.com/users/italomaia/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/italomaia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/italomaia/subscriptions",
                "organizations_url": "https://api.github.com/users/italomaia/orgs",
                "repos_url": "https://api.github.com/users/italomaia/repos",
                "events_url": "https://api.github.com/users/italomaia/events{/privacy}",
                "received_events_url": "https://api.github.com/users/italomaia/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-10-28T23:11:33Z",
            "updated_at": "2017-10-28T23:11:33Z",
            "author_association": "NONE",
            "body": "Can you provide a demo, showing the problem?"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/340226210",
            "html_url": "https://github.com/pallets/flask/issues/2503#issuecomment-340226210",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2503",
            "id": 340226210,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDIyNjIxMA==",
            "user": {
                "login": "evanmiltenburg",
                "id": 1513355,
                "node_id": "MDQ6VXNlcjE1MTMzNTU=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1513355?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/evanmiltenburg",
                "html_url": "https://github.com/evanmiltenburg",
                "followers_url": "https://api.github.com/users/evanmiltenburg/followers",
                "following_url": "https://api.github.com/users/evanmiltenburg/following{/other_user}",
                "gists_url": "https://api.github.com/users/evanmiltenburg/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/evanmiltenburg/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/evanmiltenburg/subscriptions",
                "organizations_url": "https://api.github.com/users/evanmiltenburg/orgs",
                "repos_url": "https://api.github.com/users/evanmiltenburg/repos",
                "events_url": "https://api.github.com/users/evanmiltenburg/events{/privacy}",
                "received_events_url": "https://api.github.com/users/evanmiltenburg/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-10-28T23:20:15Z",
            "updated_at": "2017-10-28T23:20:15Z",
            "author_association": "NONE",
            "body": "Sure, here's a minimal Flask example: [flask-issue.zip](https://github.com/pallets/flask/files/1424691/flask-issue.zip)\r\n\r\nWorks in Firefox, doesn't work in Safari.\r\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/341004294",
            "html_url": "https://github.com/pallets/flask/issues/2503#issuecomment-341004294",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2503",
            "id": 341004294,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0MTAwNDI5NA==",
            "user": {
                "login": "karlcow",
                "id": 505230,
                "node_id": "MDQ6VXNlcjUwNTIzMA==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/505230?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/karlcow",
                "html_url": "https://github.com/karlcow",
                "followers_url": "https://api.github.com/users/karlcow/followers",
                "following_url": "https://api.github.com/users/karlcow/following{/other_user}",
                "gists_url": "https://api.github.com/users/karlcow/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/karlcow/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/karlcow/subscriptions",
                "organizations_url": "https://api.github.com/users/karlcow/orgs",
                "repos_url": "https://api.github.com/users/karlcow/repos",
                "events_url": "https://api.github.com/users/karlcow/events{/privacy}",
                "received_events_url": "https://api.github.com/users/karlcow/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-11-01T06:46:42Z",
            "updated_at": "2017-11-01T06:46:42Z",
            "author_association": "NONE",
            "body": "I tested your mini app in both Firefox and Safari and it's working without issues.\r\n`Server: Werkzeug/0.12.2 Python/2.7.10`\r\n\r\n\r\nFirefox\r\n\r\n```\r\n127.0.0.1 - - [01/Nov/2017 15:27:21] \"GET / HTTP/1.1\" 200 -\r\n127.0.0.1 - - [01/Nov/2017 15:27:21] \"GET /static/cello.wav HTTP/1.1\" 200 -\r\n```\r\n\r\nSafari does something slightly different but it's working too.\r\n\r\n```\r\n127.0.0.1 - - [01/Nov/2017 15:29:02] \"GET / HTTP/1.1\" 200 -\r\n127.0.0.1 - - [01/Nov/2017 15:29:02] \"GET /static/cello.wav HTTP/1.1\" 206 -\r\n127.0.0.1 - - [01/Nov/2017 15:29:02] \"GET /static/cello.wav HTTP/1.1\" 200 -\r\n```\r\n\r\n206 is partial content. It means that safari didn't request the full resource but just a couple of bytes  to identify the resource. In this case `Range: bytes=0-1`\r\nAnd your server needs to reply with `Content-Range: bytes 0-1/811826`\r\n\r\n\r\nYou are using werkzeug 0.11.15 which has been released on  Dec 31, 2016\r\nOn september 2016 range request have been implemented so it should be working.\r\n\r\n@evanmiltenburg What is the http response from your flask application when using Safari?\r\n\r\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/341056334",
            "html_url": "https://github.com/pallets/flask/issues/2503#issuecomment-341056334",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2503",
            "id": 341056334,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0MTA1NjMzNA==",
            "user": {
                "login": "evanmiltenburg",
                "id": 1513355,
                "node_id": "MDQ6VXNlcjE1MTMzNTU=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1513355?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/evanmiltenburg",
                "html_url": "https://github.com/evanmiltenburg",
                "followers_url": "https://api.github.com/users/evanmiltenburg/followers",
                "following_url": "https://api.github.com/users/evanmiltenburg/following{/other_user}",
                "gists_url": "https://api.github.com/users/evanmiltenburg/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/evanmiltenburg/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/evanmiltenburg/subscriptions",
                "organizations_url": "https://api.github.com/users/evanmiltenburg/orgs",
                "repos_url": "https://api.github.com/users/evanmiltenburg/repos",
                "events_url": "https://api.github.com/users/evanmiltenburg/events{/privacy}",
                "received_events_url": "https://api.github.com/users/evanmiltenburg/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-11-01T09:49:52Z",
            "updated_at": "2017-11-01T09:49:52Z",
            "author_association": "NONE",
            "body": "HTTP response:\r\n\r\n```\r\n127.0.0.1 - - [01/Nov/2017 09:46:00] \"GET / HTTP/1.1\" 200 -\r\n127.0.0.1 - - [01/Nov/2017 09:46:01] \"GET /favicon.ico HTTP/1.1\" 404 -\r\n127.0.0.1 - - [01/Nov/2017 09:46:01] \"GET /static/cello.wav HTTP/1.1\" 200 -\r\n```\r\n\r\nSo I don't get the 206 request in Safari (Version 11.0.1 (12604.3.5.1.1)). \r\nAnd, of course, the playback functionality doesn't work."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/341056661",
            "html_url": "https://github.com/pallets/flask/issues/2503#issuecomment-341056661",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2503",
            "id": 341056661,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0MTA1NjY2MQ==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-11-01T09:51:18Z",
            "updated_at": "2017-11-01T09:51:45Z",
            "author_association": "MEMBER",
            "body": "Does it work with a real wsgi/web server? Could it be that there is more than one connection? The flask/werkzeug dev server is single-threaded by default and thus does not process more than one request at a time.\r\n\r\nAlso, please use the latest version of Flask/Werkzeug just in case!"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/341058732",
            "html_url": "https://github.com/pallets/flask/issues/2503#issuecomment-341058732",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2503",
            "id": 341058732,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0MTA1ODczMg==",
            "user": {
                "login": "evanmiltenburg",
                "id": 1513355,
                "node_id": "MDQ6VXNlcjE1MTMzNTU=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1513355?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/evanmiltenburg",
                "html_url": "https://github.com/evanmiltenburg",
                "followers_url": "https://api.github.com/users/evanmiltenburg/followers",
                "following_url": "https://api.github.com/users/evanmiltenburg/following{/other_user}",
                "gists_url": "https://api.github.com/users/evanmiltenburg/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/evanmiltenburg/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/evanmiltenburg/subscriptions",
                "organizations_url": "https://api.github.com/users/evanmiltenburg/orgs",
                "repos_url": "https://api.github.com/users/evanmiltenburg/repos",
                "events_url": "https://api.github.com/users/evanmiltenburg/events{/privacy}",
                "received_events_url": "https://api.github.com/users/evanmiltenburg/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-11-01T10:00:37Z",
            "updated_at": "2017-11-01T10:00:37Z",
            "author_association": "NONE",
            "body": "> Does it work with a real webserver? \r\n\r\nI wouldn't know how to test this right now.\r\n\r\n> Could it be that there is more than one connection? The flask/werkzeug dev server is single-threaded by default and thus does not process more than one request at a time.\r\n\r\nI don't think so. I'm only running this app, with a single browser accessing it. And it does work with `.mp3` files."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/341059086",
            "html_url": "https://github.com/pallets/flask/issues/2503#issuecomment-341059086",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2503",
            "id": 341059086,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0MTA1OTA4Ng==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-11-01T10:02:15Z",
            "updated_at": "2017-11-01T10:02:15Z",
            "author_association": "MEMBER",
            "body": "You should. Running uwsgi in http mode or gunicorn is pretty easy. Like this you can know for sure that your problem is caused by the dev server. Also, try `--with-threads` in `flask run` to run it in multithreaded mode."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/341060886",
            "html_url": "https://github.com/pallets/flask/issues/2503#issuecomment-341060886",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2503",
            "id": 341060886,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0MTA2MDg4Ng==",
            "user": {
                "login": "evanmiltenburg",
                "id": 1513355,
                "node_id": "MDQ6VXNlcjE1MTMzNTU=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1513355?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/evanmiltenburg",
                "html_url": "https://github.com/evanmiltenburg",
                "followers_url": "https://api.github.com/users/evanmiltenburg/followers",
                "following_url": "https://api.github.com/users/evanmiltenburg/following{/other_user}",
                "gists_url": "https://api.github.com/users/evanmiltenburg/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/evanmiltenburg/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/evanmiltenburg/subscriptions",
                "organizations_url": "https://api.github.com/users/evanmiltenburg/orgs",
                "repos_url": "https://api.github.com/users/evanmiltenburg/repos",
                "events_url": "https://api.github.com/users/evanmiltenburg/events{/privacy}",
                "received_events_url": "https://api.github.com/users/evanmiltenburg/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-11-01T10:08:28Z",
            "updated_at": "2017-11-01T10:08:28Z",
            "author_association": "NONE",
            "body": "`app.run(threaded=True)` doesn't result in different behavior.\r\n\r\nUnfortunately I have no time to figure out how to run uwsgi in http mode or gunicorn."
        }
    ]
}