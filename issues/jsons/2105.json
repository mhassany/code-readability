{
    "url": "https://api.github.com/repos/pallets/flask/issues/2105",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2105/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2105/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2105/events",
    "html_url": "https://github.com/pallets/flask/pull/2105",
    "id": 193379507,
    "node_id": "MDExOlB1bGxSZXF1ZXN0OTY0NDg3OTU=",
    "number": 2105,
    "title": "Warn when cookie domain is set to an IP",
    "user": {
        "login": "jjoliveira",
        "id": 12168108,
        "node_id": "MDQ6VXNlcjEyMTY4MTA4",
        "avatar_url": "https://avatars2.githubusercontent.com/u/12168108?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jjoliveira",
        "html_url": "https://github.com/jjoliveira",
        "followers_url": "https://api.github.com/users/jjoliveira/followers",
        "following_url": "https://api.github.com/users/jjoliveira/following{/other_user}",
        "gists_url": "https://api.github.com/users/jjoliveira/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jjoliveira/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jjoliveira/subscriptions",
        "organizations_url": "https://api.github.com/users/jjoliveira/orgs",
        "repos_url": "https://api.github.com/users/jjoliveira/repos",
        "events_url": "https://api.github.com/users/jjoliveira/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jjoliveira/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 11,
    "created_at": "2016-12-04T22:04:34Z",
    "updated_at": "2018-10-23T17:44:00Z",
    "closed_at": "2017-05-14T05:00:55Z",
    "author_association": "CONTRIBUTOR",
    "pull_request": {
        "url": "https://api.github.com/repos/pallets/flask/pulls/2105",
        "html_url": "https://github.com/pallets/flask/pull/2105",
        "diff_url": "https://github.com/pallets/flask/pull/2105.diff",
        "patch_url": "https://github.com/pallets/flask/pull/2105.patch"
    },
    "body": "Possible solution for issue #2007, it gives a warning message when an IP is set as SESSION_COOKIE_DOMAIN as user untitaker asked us to do, SERVER_DOMAIN isn't checked because he didn't remembered why it was needed, but the function is_IP in /flask/helpers is prepared to it. If you have any doubt feel free to ask.",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/264736105",
            "html_url": "https://github.com/pallets/flask/pull/2105#issuecomment-264736105",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2105",
            "id": 264736105,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDczNjEwNQ==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-12-04T22:18:54Z",
            "updated_at": "2016-12-04T22:21:16Z",
            "author_association": "MEMBER",
            "body": "I think instead of string operations the proper way to check whether it's an IP is using [`socket.inet_pton()`](https://docs.python.org/2/library/socket.html#socket.inet_pton) and returning `True` if it doesn't raise, otherwise `False`.\r\n\r\nSomething like this:\r\n\r\n```python\r\nfor family in (socket.AF_INET, socket.AF_INET6):\r\n    try:\r\n        socket.inet_pton(family, ip)\r\n    except socket.error:\r\n        pass\r\n    else:\r\n        return True\r\nreturn False\r\n```"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/264737443",
            "html_url": "https://github.com/pallets/flask/pull/2105#issuecomment-264737443",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2105",
            "id": 264737443,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDczNzQ0Mw==",
            "user": {
                "login": "jjoliveira",
                "id": 12168108,
                "node_id": "MDQ6VXNlcjEyMTY4MTA4",
                "avatar_url": "https://avatars2.githubusercontent.com/u/12168108?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/jjoliveira",
                "html_url": "https://github.com/jjoliveira",
                "followers_url": "https://api.github.com/users/jjoliveira/followers",
                "following_url": "https://api.github.com/users/jjoliveira/following{/other_user}",
                "gists_url": "https://api.github.com/users/jjoliveira/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/jjoliveira/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jjoliveira/subscriptions",
                "organizations_url": "https://api.github.com/users/jjoliveira/orgs",
                "repos_url": "https://api.github.com/users/jjoliveira/repos",
                "events_url": "https://api.github.com/users/jjoliveira/events{/privacy}",
                "received_events_url": "https://api.github.com/users/jjoliveira/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-12-04T22:39:27Z",
            "updated_at": "2016-12-04T22:39:27Z",
            "author_association": "CONTRIBUTOR",
            "body": "@ThiefMaster What should be the category of the warning message? "
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/264737615",
            "html_url": "https://github.com/pallets/flask/pull/2105#issuecomment-264737615",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2105",
            "id": 264737615,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDczNzYxNQ==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-12-04T22:41:52Z",
            "updated_at": "2016-12-04T22:41:52Z",
            "author_association": "MEMBER",
            "body": "maybe RuntimeWarning... I'd check if Flask uses any other warnings (that are not deprecation-related) and possibly use the same type\r\n\r\nAlso, tests are failing since you don't handle the case where the domain is unset, i.e. `None`"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/264739476",
            "html_url": "https://github.com/pallets/flask/pull/2105#issuecomment-264739476",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2105",
            "id": 264739476,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDczOTQ3Ng==",
            "user": {
                "login": "jjoliveira",
                "id": 12168108,
                "node_id": "MDQ6VXNlcjEyMTY4MTA4",
                "avatar_url": "https://avatars2.githubusercontent.com/u/12168108?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/jjoliveira",
                "html_url": "https://github.com/jjoliveira",
                "followers_url": "https://api.github.com/users/jjoliveira/followers",
                "following_url": "https://api.github.com/users/jjoliveira/following{/other_user}",
                "gists_url": "https://api.github.com/users/jjoliveira/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/jjoliveira/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jjoliveira/subscriptions",
                "organizations_url": "https://api.github.com/users/jjoliveira/orgs",
                "repos_url": "https://api.github.com/users/jjoliveira/repos",
                "events_url": "https://api.github.com/users/jjoliveira/events{/privacy}",
                "received_events_url": "https://api.github.com/users/jjoliveira/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-12-04T23:10:55Z",
            "updated_at": "2016-12-04T23:10:55Z",
            "author_association": "CONTRIBUTOR",
            "body": "@ThiefMaster  How can I get the socket of the session when I call the function is_ip() in the save_session() function?"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/264739508",
            "html_url": "https://github.com/pallets/flask/pull/2105#issuecomment-264739508",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2105",
            "id": 264739508,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDczOTUwOA==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-12-04T23:11:30Z",
            "updated_at": "2016-12-04T23:11:30Z",
            "author_association": "MEMBER",
            "body": "It's a function from python's `socket` module, so you simple `import socket` at the top of the file..."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/264741269",
            "html_url": "https://github.com/pallets/flask/pull/2105#issuecomment-264741269",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2105",
            "id": 264741269,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDc0MTI2OQ==",
            "user": {
                "login": "jjoliveira",
                "id": 12168108,
                "node_id": "MDQ6VXNlcjEyMTY4MTA4",
                "avatar_url": "https://avatars2.githubusercontent.com/u/12168108?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/jjoliveira",
                "html_url": "https://github.com/jjoliveira",
                "followers_url": "https://api.github.com/users/jjoliveira/followers",
                "following_url": "https://api.github.com/users/jjoliveira/following{/other_user}",
                "gists_url": "https://api.github.com/users/jjoliveira/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/jjoliveira/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jjoliveira/subscriptions",
                "organizations_url": "https://api.github.com/users/jjoliveira/orgs",
                "repos_url": "https://api.github.com/users/jjoliveira/repos",
                "events_url": "https://api.github.com/users/jjoliveira/events{/privacy}",
                "received_events_url": "https://api.github.com/users/jjoliveira/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-12-04T23:41:15Z",
            "updated_at": "2016-12-04T23:41:24Z",
            "author_association": "CONTRIBUTOR",
            "body": "@ThiefMaster Sorry for that, in my last commit all the unit tests are passing. I also did the changes you asked for."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/300988047",
            "html_url": "https://github.com/pallets/flask/pull/2105#issuecomment-300988047",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2105",
            "id": 300988047,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDk4ODA0Nw==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-05-12T05:35:17Z",
            "updated_at": "2017-05-12T05:35:17Z",
            "author_association": "MEMBER",
            "body": "@untitaker can you make a decision on this?"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/301038835",
            "html_url": "https://github.com/pallets/flask/pull/2105#issuecomment-301038835",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2105",
            "id": 301038835,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwMTAzODgzNQ==",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-05-12T10:11:06Z",
            "updated_at": "2017-05-12T10:11:06Z",
            "author_association": "MEMBER",
            "body": "I think the code is fine except for my review comments.\n\nOn Thu, May 11, 2017 at 10:35:23PM -0700, David Lord wrote:\n> @untitaker can you make a decision on this?\n> \n> -- \n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub:\n> https://github.com/pallets/flask/pull/2105#issuecomment-300988047\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/301143206",
            "html_url": "https://github.com/pallets/flask/pull/2105#issuecomment-301143206",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2105",
            "id": 301143206,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwMTE0MzIwNg==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-05-12T17:52:26Z",
            "updated_at": "2017-05-12T17:52:26Z",
            "author_association": "MEMBER",
            "body": "Setting `SESSION_COOKIE_DOMAIN = '127.0.0.1:5000'` works fine. The issue is when it's detected through `SERVER_NAME` instead, in which case Flask adds a `'.'` before the \"domain\", which Chrome doesn't like (rightly so, an IP isn't a domain). We can just use the `is_ip` function to decide to remove the `'.'` prefix and things will work as expected."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/301266226",
            "html_url": "https://github.com/pallets/flask/pull/2105#issuecomment-301266226",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2105",
            "id": 301266226,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwMTI2NjIyNg==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-05-13T18:32:07Z",
            "updated_at": "2017-05-13T18:39:07Z",
            "author_association": "MEMBER",
            "body": "I don't like running `is_ip` for every request when ideally `domain` will not be an IP."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/301291238",
            "html_url": "https://github.com/pallets/flask/pull/2105#issuecomment-301291238",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2105",
            "id": 301291238,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwMTI5MTIzOA==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-05-14T05:00:55Z",
            "updated_at": "2017-05-14T05:00:55Z",
            "author_association": "MEMBER",
            "body": "Continued in #2282."
        }
    ]
}