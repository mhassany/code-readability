{
    "url": "https://api.github.com/repos/pallets/flask/issues/2160",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2160/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2160/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2160/events",
    "html_url": "https://github.com/pallets/flask/issues/2160",
    "id": 203178671,
    "node_id": "MDU6SXNzdWUyMDMxNzg2NzE=",
    "number": 2160,
    "title": "Python - Headers not decoded properly",
    "user": {
        "login": "augustinrieunier",
        "id": 25351277,
        "node_id": "MDQ6VXNlcjI1MzUxMjc3",
        "avatar_url": "https://avatars2.githubusercontent.com/u/25351277?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/augustinrieunier",
        "html_url": "https://github.com/augustinrieunier",
        "followers_url": "https://api.github.com/users/augustinrieunier/followers",
        "following_url": "https://api.github.com/users/augustinrieunier/following{/other_user}",
        "gists_url": "https://api.github.com/users/augustinrieunier/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/augustinrieunier/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/augustinrieunier/subscriptions",
        "organizations_url": "https://api.github.com/users/augustinrieunier/orgs",
        "repos_url": "https://api.github.com/users/augustinrieunier/repos",
        "events_url": "https://api.github.com/users/augustinrieunier/events{/privacy}",
        "received_events_url": "https://api.github.com/users/augustinrieunier/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 6,
    "created_at": "2017-01-25T18:05:09Z",
    "updated_at": "2017-01-25T20:55:07Z",
    "closed_at": "2017-01-25T20:55:07Z",
    "author_association": "NONE",
    "body": "Hi,\r\nI try to pass information in headers, such as passwords.\r\nWhen receiving it in my program, special characters are not properly decoded, such as \u20ac\u00a3 and french accented chars.\r\nIt works fine if they're encoding in regular http args.\r\n\r\nExample:\r\n> curl -v  --header \"user_email:toto@toto.com\" --header \"user_password:\u00e9\u20ac\"  -X GET  \"http://localhost:5000/api/private/v1.0/auth\"\r\n >  Trying ::1...\r\n > connect to ::1 port 5000 failed: Connection refused\r\n > Trying 127.0.0.1...\r\n > Connected to localhost (127.0.0.1) port 5000 (#0)\r\n> GET /api/private/v1.0/auth HTTP/1.1\r\n> Host: localhost:5000\r\n> User-Agent: curl/7.43.0\r\n> Accept: */*\r\n> user_email:toto@toto.com\r\n> user_password:\u00e9\u20ac`\r\n\r\n\r\n\r\nOn the app side:\r\n\r\n> Headers=Accept: */*\r\n> Content-Length: \r\n> User-Agent: curl/7.43.0\r\n> User-Password: \u00c3\u00a9\u00e2\u0082\u00ac\r\n> Host: localhost:5000\r\n> User-Email: toto@toto.com\r\n> Content-Type: \r\n\r\n\r\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/275186294",
            "html_url": "https://github.com/pallets/flask/issues/2160#issuecomment-275186294",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2160",
            "id": 275186294,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTE4NjI5NA==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-01-25T18:10:12Z",
            "updated_at": "2017-01-25T18:11:34Z",
            "author_association": "MEMBER",
            "body": "Can you please test with a HTTP client that is not affected by whatever encoding your shell uses?\r\n\r\nHowever, I think headers should be ascii-only: http://stackoverflow.com/questions/4400678/what-character-encoding-should-i-use-for-a-http-header\r\n\r\nSending a password has a header seems to be a bad idea anyway - it'd be better to send a POST request with the username and password in the body (for which you can specify a charset/encoding!) and then return a token that will be used in a header (usually in `Authorization`) for all other requests."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/275186526",
            "html_url": "https://github.com/pallets/flask/issues/2160#issuecomment-275186526",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2160",
            "id": 275186526,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTE4NjUyNg==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-01-25T18:11:04Z",
            "updated_at": "2017-01-25T18:11:26Z",
            "author_association": "MEMBER",
            "body": "And also ensure that you're outputting the values using the correct encoding."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/275201569",
            "html_url": "https://github.com/pallets/flask/issues/2160#issuecomment-275201569",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2160",
            "id": 275201569,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTIwMTU2OQ==",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-01-25T19:05:39Z",
            "updated_at": "2017-01-25T19:05:39Z",
            "author_association": "MEMBER",
            "body": "Well @ThiefMaster the Authorization header is a thing, so I think sending passwords as header should be fine... in fact it *has to be*. :)"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/275203198",
            "html_url": "https://github.com/pallets/flask/issues/2160#issuecomment-275203198",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2160",
            "id": 275203198,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTIwMzE5OA==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-01-25T19:11:50Z",
            "updated_at": "2017-01-25T19:11:50Z",
            "author_association": "MEMBER",
            "body": "the authorization header is base64-encoded though.. so no raw non-ascii in there"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/275203529",
            "html_url": "https://github.com/pallets/flask/issues/2160#issuecomment-275203529",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2160",
            "id": 275203529,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTIwMzUyOQ==",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-01-25T19:13:06Z",
            "updated_at": "2017-01-25T19:13:06Z",
            "author_association": "MEMBER",
            "body": "Oh, yeah."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/275228420",
            "html_url": "https://github.com/pallets/flask/issues/2160#issuecomment-275228420",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2160",
            "id": 275228420,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTIyODQyMA==",
            "user": {
                "login": "augustinrieunier",
                "id": 25351277,
                "node_id": "MDQ6VXNlcjI1MzUxMjc3",
                "avatar_url": "https://avatars2.githubusercontent.com/u/25351277?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/augustinrieunier",
                "html_url": "https://github.com/augustinrieunier",
                "followers_url": "https://api.github.com/users/augustinrieunier/followers",
                "following_url": "https://api.github.com/users/augustinrieunier/following{/other_user}",
                "gists_url": "https://api.github.com/users/augustinrieunier/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/augustinrieunier/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/augustinrieunier/subscriptions",
                "organizations_url": "https://api.github.com/users/augustinrieunier/orgs",
                "repos_url": "https://api.github.com/users/augustinrieunier/repos",
                "events_url": "https://api.github.com/users/augustinrieunier/events{/privacy}",
                "received_events_url": "https://api.github.com/users/augustinrieunier/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-01-25T20:48:33Z",
            "updated_at": "2017-01-25T20:48:33Z",
            "author_association": "NONE",
            "body": "Thanks all for jumping here first.\r\nAbout testing with another tool, it is actually with another tool that we found the problem (a java dev based on the lib Jersey/2.23.2 (HttpUrlConnection 1.8.0_73)) so result will be the same than in my shell.\r\n\r\nI think the point about the ASCII limitation seems a good explanation at that stage. I did not think about that.\r\nIt works fine if it's base64-ified .\r\n\r\nI think we can close this it's not a bug in the end :)\r\n\r\nThanks a lot !\r\n\r\n\r\n"
        }
    ]
}