{
    "url": "https://api.github.com/repos/pallets/flask/issues/1133",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1133/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1133/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1133/events",
    "html_url": "https://github.com/pallets/flask/issues/1133",
    "id": 38695938,
    "node_id": "MDU6SXNzdWUzODY5NTkzOA==",
    "number": 1133,
    "title": "custom rendering view not possible anymore",
    "user": {
        "login": "matdrapeau",
        "id": 439887,
        "node_id": "MDQ6VXNlcjQzOTg4Nw==",
        "avatar_url": "https://avatars1.githubusercontent.com/u/439887?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/matdrapeau",
        "html_url": "https://github.com/matdrapeau",
        "followers_url": "https://api.github.com/users/matdrapeau/followers",
        "following_url": "https://api.github.com/users/matdrapeau/following{/other_user}",
        "gists_url": "https://api.github.com/users/matdrapeau/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/matdrapeau/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/matdrapeau/subscriptions",
        "organizations_url": "https://api.github.com/users/matdrapeau/orgs",
        "repos_url": "https://api.github.com/users/matdrapeau/repos",
        "events_url": "https://api.github.com/users/matdrapeau/events{/privacy}",
        "received_events_url": "https://api.github.com/users/matdrapeau/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 9,
    "created_at": "2014-07-25T04:10:06Z",
    "updated_at": "2014-07-29T14:15:06Z",
    "closed_at": "2014-07-29T14:08:59Z",
    "author_association": "NONE",
    "body": "This decorator seems not supported anymore in 0.10\nhttp://flask.pocoo.org/snippets/18/\n\nHow can we double decorate a function using a custom view?\nIn the case we don't want to define different endpoints, like this:\n\n```\n@view(app, '/<name>', render_html('page.html'))\n@view(app, '/api/page/<name>', render_json)\ndef show_page(name):\n    ...\n```\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/50262502",
            "html_url": "https://github.com/pallets/flask/issues/1133#issuecomment-50262502",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1133",
            "id": 50262502,
            "node_id": "MDEyOklzc3VlQ29tbWVudDUwMjYyNTAy",
            "user": {
                "login": "DasIch",
                "id": 182316,
                "node_id": "MDQ6VXNlcjE4MjMxNg==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/182316?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/DasIch",
                "html_url": "https://github.com/DasIch",
                "followers_url": "https://api.github.com/users/DasIch/followers",
                "following_url": "https://api.github.com/users/DasIch/following{/other_user}",
                "gists_url": "https://api.github.com/users/DasIch/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/DasIch/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/DasIch/subscriptions",
                "organizations_url": "https://api.github.com/users/DasIch/orgs",
                "repos_url": "https://api.github.com/users/DasIch/repos",
                "events_url": "https://api.github.com/users/DasIch/events{/privacy}",
                "received_events_url": "https://api.github.com/users/DasIch/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-07-27T11:57:31Z",
            "updated_at": "2014-07-27T11:57:31Z",
            "author_association": "CONTRIBUTOR",
            "body": "What is \"seems not supported anymore\" supposed to mean?\n\nWhat did you do? What did you expect? What happened instead?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/50266207",
            "html_url": "https://github.com/pallets/flask/issues/1133#issuecomment-50266207",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1133",
            "id": 50266207,
            "node_id": "MDEyOklzc3VlQ29tbWVudDUwMjY2MjA3",
            "user": {
                "login": "matdrapeau",
                "id": 439887,
                "node_id": "MDQ6VXNlcjQzOTg4Nw==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/439887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/matdrapeau",
                "html_url": "https://github.com/matdrapeau",
                "followers_url": "https://api.github.com/users/matdrapeau/followers",
                "following_url": "https://api.github.com/users/matdrapeau/following{/other_user}",
                "gists_url": "https://api.github.com/users/matdrapeau/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/matdrapeau/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/matdrapeau/subscriptions",
                "organizations_url": "https://api.github.com/users/matdrapeau/orgs",
                "repos_url": "https://api.github.com/users/matdrapeau/repos",
                "events_url": "https://api.github.com/users/matdrapeau/events{/privacy}",
                "received_events_url": "https://api.github.com/users/matdrapeau/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-07-27T14:46:36Z",
            "updated_at": "2014-07-27T14:46:36Z",
            "author_association": "NONE",
            "body": "The decorator generates this error:\n\n```\nAssertionError: View function mapping is overwriting an existing endpoint function:\nwrapperAssertionError: View function mapping is overwriting an existing endpoint function: wrapper\n```\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/50333688",
            "html_url": "https://github.com/pallets/flask/issues/1133#issuecomment-50333688",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1133",
            "id": 50333688,
            "node_id": "MDEyOklzc3VlQ29tbWVudDUwMzMzNjg4",
            "user": {
                "login": "danielchatfield",
                "id": 1058676,
                "node_id": "MDQ6VXNlcjEwNTg2NzY=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/1058676?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/danielchatfield",
                "html_url": "https://github.com/danielchatfield",
                "followers_url": "https://api.github.com/users/danielchatfield/followers",
                "following_url": "https://api.github.com/users/danielchatfield/following{/other_user}",
                "gists_url": "https://api.github.com/users/danielchatfield/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/danielchatfield/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/danielchatfield/subscriptions",
                "organizations_url": "https://api.github.com/users/danielchatfield/orgs",
                "repos_url": "https://api.github.com/users/danielchatfield/repos",
                "events_url": "https://api.github.com/users/danielchatfield/events{/privacy}",
                "received_events_url": "https://api.github.com/users/danielchatfield/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-07-28T12:50:16Z",
            "updated_at": "2014-07-28T12:50:16Z",
            "author_association": "NONE",
            "body": "IMO the snippet is pretty bad, it is messy and relies heavily on flask internals.\n\nIf an endpoint isn't passed then flask has to guess the endpoint from the name of the function, in your case 'show_page' - the issue here is that you have two separate functions (one for each decorator) that have both been registered to the same endpoint so the error makes sense.\n\nIn a previous version the check may not have been done and the endpoint was simply overwritten but I think the current behaviour is correct as blindly overwriting endpoints can lead to unexpected behaviour.\n\nYou should be able to \"fix\" this by passing an `endpoint` to the view decorator:\n\n```\n@view(app, '/<name>', render_html('page.html'))\n@view(app, '/api/page/<name>', render_json, endpoint='show_page_json')\ndef show_page(name):\n    ...\n```\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/50334521",
            "html_url": "https://github.com/pallets/flask/issues/1133#issuecomment-50334521",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1133",
            "id": 50334521,
            "node_id": "MDEyOklzc3VlQ29tbWVudDUwMzM0NTIx",
            "user": {
                "login": "danielchatfield",
                "id": 1058676,
                "node_id": "MDQ6VXNlcjEwNTg2NzY=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/1058676?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/danielchatfield",
                "html_url": "https://github.com/danielchatfield",
                "followers_url": "https://api.github.com/users/danielchatfield/followers",
                "following_url": "https://api.github.com/users/danielchatfield/following{/other_user}",
                "gists_url": "https://api.github.com/users/danielchatfield/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/danielchatfield/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/danielchatfield/subscriptions",
                "organizations_url": "https://api.github.com/users/danielchatfield/orgs",
                "repos_url": "https://api.github.com/users/danielchatfield/repos",
                "events_url": "https://api.github.com/users/danielchatfield/events{/privacy}",
                "received_events_url": "https://api.github.com/users/danielchatfield/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-07-28T12:58:55Z",
            "updated_at": "2014-07-28T12:59:53Z",
            "author_association": "NONE",
            "body": "I haven't tested this but I think this is essentially the same as the current decorator but simpler:\n\nhttps://gist.github.com/danielchatfield/ce221624e7a81716abb0\n\nIt will still need the endpoint to be set on all but one of the routes.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/50345894",
            "html_url": "https://github.com/pallets/flask/issues/1133#issuecomment-50345894",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1133",
            "id": 50345894,
            "node_id": "MDEyOklzc3VlQ29tbWVudDUwMzQ1ODk0",
            "user": {
                "login": "matdrapeau",
                "id": 439887,
                "node_id": "MDQ6VXNlcjQzOTg4Nw==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/439887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/matdrapeau",
                "html_url": "https://github.com/matdrapeau",
                "followers_url": "https://api.github.com/users/matdrapeau/followers",
                "following_url": "https://api.github.com/users/matdrapeau/following{/other_user}",
                "gists_url": "https://api.github.com/users/matdrapeau/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/matdrapeau/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/matdrapeau/subscriptions",
                "organizations_url": "https://api.github.com/users/matdrapeau/orgs",
                "repos_url": "https://api.github.com/users/matdrapeau/repos",
                "events_url": "https://api.github.com/users/matdrapeau/events{/privacy}",
                "received_events_url": "https://api.github.com/users/matdrapeau/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-07-28T14:31:57Z",
            "updated_at": "2014-07-28T14:31:57Z",
            "author_association": "NONE",
            "body": "@danielchatfield exactly, this other snippet also requires an endpoint to work\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/50350775",
            "html_url": "https://github.com/pallets/flask/issues/1133#issuecomment-50350775",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1133",
            "id": 50350775,
            "node_id": "MDEyOklzc3VlQ29tbWVudDUwMzUwNzc1",
            "user": {
                "login": "danielchatfield",
                "id": 1058676,
                "node_id": "MDQ6VXNlcjEwNTg2NzY=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/1058676?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/danielchatfield",
                "html_url": "https://github.com/danielchatfield",
                "followers_url": "https://api.github.com/users/danielchatfield/followers",
                "following_url": "https://api.github.com/users/danielchatfield/following{/other_user}",
                "gists_url": "https://api.github.com/users/danielchatfield/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/danielchatfield/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/danielchatfield/subscriptions",
                "organizations_url": "https://api.github.com/users/danielchatfield/orgs",
                "repos_url": "https://api.github.com/users/danielchatfield/repos",
                "events_url": "https://api.github.com/users/danielchatfield/events{/privacy}",
                "received_events_url": "https://api.github.com/users/danielchatfield/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-07-28T15:06:28Z",
            "updated_at": "2014-07-28T22:34:01Z",
            "author_association": "NONE",
            "body": "I could make it _work_ how you are expecting by checking whether that endpoint exists and if it does then ~~removing it~~ _change its name_ before registering the route but IMO this is bad as it requires knowledge of flask internals to understand what it is doing.\n\nInternally flask does this:\n\n`route` -> `endpoint` -> `view`\n\nIn previous versions of flask that didn't check if the route was being overridden this is what the decorator did:\n\nMap `'/api/page/<name>'` to the endpoint `show_page` which was mapped to decorated view (which we shall call `json_view`).\n\nThen when it was called a second time it did this:\n\nMap `'/<name>'` to the endpoint and overwrite the existing view with the new one which adds another wrapper around the decorated function (`html_view`).\n\nThis new decorated view (`html_view`) calls the wrapped function (`json_view`) which in turn calls the actual view function (`show_page`). Each decorator checks whether the current request matches the `route_id` for that decorator and if it does then it renders the response.\n\nI don't think I have explained this very well but it is fairly complex (and needlessly so).\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/50352097",
            "html_url": "https://github.com/pallets/flask/issues/1133#issuecomment-50352097",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1133",
            "id": 50352097,
            "node_id": "MDEyOklzc3VlQ29tbWVudDUwMzUyMDk3",
            "user": {
                "login": "danielchatfield",
                "id": 1058676,
                "node_id": "MDQ6VXNlcjEwNTg2NzY=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/1058676?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/danielchatfield",
                "html_url": "https://github.com/danielchatfield",
                "followers_url": "https://api.github.com/users/danielchatfield/followers",
                "following_url": "https://api.github.com/users/danielchatfield/following{/other_user}",
                "gists_url": "https://api.github.com/users/danielchatfield/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/danielchatfield/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/danielchatfield/subscriptions",
                "organizations_url": "https://api.github.com/users/danielchatfield/orgs",
                "repos_url": "https://api.github.com/users/danielchatfield/repos",
                "events_url": "https://api.github.com/users/danielchatfield/events{/privacy}",
                "received_events_url": "https://api.github.com/users/danielchatfield/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-07-28T15:16:22Z",
            "updated_at": "2014-07-28T15:20:10Z",
            "author_association": "NONE",
            "body": "This is the updated decorator (again I have not tested this code) that should work as you expect:\n\nhttps://gist.github.com/danielchatfield/ce221624e7a81716abb0\n\nMy suggestion is still to use explicit endpoints though.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/50480190",
            "html_url": "https://github.com/pallets/flask/issues/1133#issuecomment-50480190",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1133",
            "id": 50480190,
            "node_id": "MDEyOklzc3VlQ29tbWVudDUwNDgwMTkw",
            "user": {
                "login": "mitsuhiko",
                "id": 7396,
                "node_id": "MDQ6VXNlcjczOTY=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/7396?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mitsuhiko",
                "html_url": "https://github.com/mitsuhiko",
                "followers_url": "https://api.github.com/users/mitsuhiko/followers",
                "following_url": "https://api.github.com/users/mitsuhiko/following{/other_user}",
                "gists_url": "https://api.github.com/users/mitsuhiko/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mitsuhiko/subscriptions",
                "organizations_url": "https://api.github.com/users/mitsuhiko/orgs",
                "repos_url": "https://api.github.com/users/mitsuhiko/repos",
                "events_url": "https://api.github.com/users/mitsuhiko/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mitsuhiko/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-07-29T14:08:59Z",
            "updated_at": "2014-07-29T14:08:59Z",
            "author_association": "MEMBER",
            "body": "This was always an error, Flask just started giving you a proper error instead of doing something random. :)\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/50481043",
            "html_url": "https://github.com/pallets/flask/issues/1133#issuecomment-50481043",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1133",
            "id": 50481043,
            "node_id": "MDEyOklzc3VlQ29tbWVudDUwNDgxMDQz",
            "user": {
                "login": "danielchatfield",
                "id": 1058676,
                "node_id": "MDQ6VXNlcjEwNTg2NzY=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/1058676?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/danielchatfield",
                "html_url": "https://github.com/danielchatfield",
                "followers_url": "https://api.github.com/users/danielchatfield/followers",
                "following_url": "https://api.github.com/users/danielchatfield/following{/other_user}",
                "gists_url": "https://api.github.com/users/danielchatfield/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/danielchatfield/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/danielchatfield/subscriptions",
                "organizations_url": "https://api.github.com/users/danielchatfield/orgs",
                "repos_url": "https://api.github.com/users/danielchatfield/repos",
                "events_url": "https://api.github.com/users/danielchatfield/events{/privacy}",
                "received_events_url": "https://api.github.com/users/danielchatfield/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-07-29T14:14:48Z",
            "updated_at": "2014-07-29T14:14:48Z",
            "author_association": "NONE",
            "body": "@mitsuhiko What do you think should be done about the snippet?\n"
        }
    ]
}