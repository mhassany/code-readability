{
    "url": "https://api.github.com/repos/pallets/flask/issues/2651",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2651/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2651/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2651/events",
    "html_url": "https://github.com/pallets/flask/issues/2651",
    "id": 302443416,
    "node_id": "MDU6SXNzdWUzMDI0NDM0MTY=",
    "number": 2651,
    "title": "get_json's silent option cache None and causes weird side-effect",
    "user": {
        "login": "RobertDeRose",
        "id": 388745,
        "node_id": "MDQ6VXNlcjM4ODc0NQ==",
        "avatar_url": "https://avatars1.githubusercontent.com/u/388745?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/RobertDeRose",
        "html_url": "https://github.com/RobertDeRose",
        "followers_url": "https://api.github.com/users/RobertDeRose/followers",
        "following_url": "https://api.github.com/users/RobertDeRose/following{/other_user}",
        "gists_url": "https://api.github.com/users/RobertDeRose/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/RobertDeRose/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/RobertDeRose/subscriptions",
        "organizations_url": "https://api.github.com/users/RobertDeRose/orgs",
        "repos_url": "https://api.github.com/users/RobertDeRose/repos",
        "events_url": "https://api.github.com/users/RobertDeRose/events{/privacy}",
        "received_events_url": "https://api.github.com/users/RobertDeRose/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 135583063,
            "node_id": "MDU6TGFiZWwxMzU1ODMwNjM=",
            "url": "https://api.github.com/repos/pallets/flask/labels/bug",
            "name": "bug",
            "color": "d93f0b",
            "default": true,
            "description": null
        },
        {
            "id": 398831866,
            "node_id": "MDU6TGFiZWwzOTg4MzE4NjY=",
            "url": "https://api.github.com/repos/pallets/flask/labels/json",
            "name": "json",
            "color": "1d76db",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": {
        "url": "https://api.github.com/repos/pallets/flask/milestones/2",
        "html_url": "https://github.com/pallets/flask/milestone/2",
        "labels_url": "https://api.github.com/repos/pallets/flask/milestones/2/labels",
        "id": 795954,
        "node_id": "MDk6TWlsZXN0b25lNzk1OTU0",
        "number": 2,
        "title": "1.0",
        "description": "",
        "creator": {
            "login": "untitaker",
            "id": 837573,
            "node_id": "MDQ6VXNlcjgzNzU3Mw==",
            "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/untitaker",
            "html_url": "https://github.com/untitaker",
            "followers_url": "https://api.github.com/users/untitaker/followers",
            "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
            "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
            "organizations_url": "https://api.github.com/users/untitaker/orgs",
            "repos_url": "https://api.github.com/users/untitaker/repos",
            "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
            "received_events_url": "https://api.github.com/users/untitaker/received_events",
            "type": "User",
            "site_admin": false
        },
        "open_issues": 0,
        "closed_issues": 159,
        "state": "closed",
        "created_at": "2014-09-19T15:47:20Z",
        "updated_at": "2018-04-26T21:07:44Z",
        "due_on": "2018-04-26T07:00:00Z",
        "closed_at": "2018-04-26T21:07:44Z"
    },
    "comments": 7,
    "created_at": "2018-03-05T20:09:06Z",
    "updated_at": "2018-04-09T10:00:42Z",
    "closed_at": "2018-04-09T10:00:42Z",
    "author_association": "NONE",
    "body": "### Expected Behavior\r\n#### Sample Code\r\n\r\n```python\r\napp = Flask(__name__)\r\n\r\n@app.route(\"/\", methods=[\"POST\"])\r\ndef broke_behvior():\r\n    print(request.is_json)\r\n    rv = request.get_json(silent=True)\r\n    print(rv)\r\n    rv = request.get_json()\r\n    print(rv)\r\n    return \"\", 200\r\n\r\nclient = app.test_client()\r\nclient.post(\"/\", data=\"'invalid json'\")\r\n```\r\n\r\n#### Output\r\n\r\n```bash\r\nFalse\r\nNone\r\n<Response streamed [400 BAD REQUEST]>\r\n```\r\n\r\n### Actual Behavior\r\n\r\n```bash\r\nFalse\r\nNone\r\nNone\r\n<Response streamed [200 OK]>\r\n```\r\n\r\n\r\nThe fact that calling `get_json` with `silent` and then calling it without `silent` seems to break expected behavior. When I don't call `silent` I am depending on the exception being thrown, however, because the code `caches` even on error, you get this weird behavior.\r\n\r\nWhile this might be expected behavior by the authors, the docs don't make this clear.\r\n\r\nI would think, invalid json should not be cached, yet I can see the value of it, however, it adds an layer of uncertainty and therefore, I my opinion, is a bug.\r\n\r\n### Environment\r\n\r\n* Python version: 3.4\r\n* Flask version: 0.12.2\r\n* Werkzeug version: 0.14.1\r\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/370625152",
            "html_url": "https://github.com/pallets/flask/issues/2651#issuecomment-370625152",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2651",
            "id": 370625152,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDYyNTE1Mg==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-03-06T01:10:59Z",
            "updated_at": "2018-03-06T01:10:59Z",
            "author_association": "MEMBER",
            "body": "See also #2087 and #2181.\r\n\r\nWhy are you using silent then not silent in the same request? I don't think this behavior is inconsistent."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/370651273",
            "html_url": "https://github.com/pallets/flask/issues/2651#issuecomment-370651273",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2651",
            "id": 370651273,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDY1MTI3Mw==",
            "user": {
                "login": "RobertDeRose",
                "id": 388745,
                "node_id": "MDQ6VXNlcjM4ODc0NQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/388745?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/RobertDeRose",
                "html_url": "https://github.com/RobertDeRose",
                "followers_url": "https://api.github.com/users/RobertDeRose/followers",
                "following_url": "https://api.github.com/users/RobertDeRose/following{/other_user}",
                "gists_url": "https://api.github.com/users/RobertDeRose/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/RobertDeRose/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/RobertDeRose/subscriptions",
                "organizations_url": "https://api.github.com/users/RobertDeRose/orgs",
                "repos_url": "https://api.github.com/users/RobertDeRose/repos",
                "events_url": "https://api.github.com/users/RobertDeRose/events{/privacy}",
                "received_events_url": "https://api.github.com/users/RobertDeRose/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-03-06T03:34:13Z",
            "updated_at": "2018-03-06T03:34:13Z",
            "author_association": "NONE",
            "body": "@davidism I'm not actually, it's a contrived example to show the behavior.  We have some before and after hooks that call `get_json(slient)` because we didn't want to throw if there was an error, but there was no way to know this would cause invalid json to be cached as None, that's not very predictable behavior and it's not documented."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/370667286",
            "html_url": "https://github.com/pallets/flask/issues/2651#issuecomment-370667286",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2651",
            "id": 370667286,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDY2NzI4Ng==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-03-06T05:24:18Z",
            "updated_at": "2018-03-06T05:24:31Z",
            "author_association": "MEMBER",
            "body": "Then stop using `silent` if it's not appropriate for your use case. Catch the error yourself and ignore it."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/370667509",
            "html_url": "https://github.com/pallets/flask/issues/2651#issuecomment-370667509",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2651",
            "id": 370667509,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDY2NzUwOQ==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-03-06T05:25:30Z",
            "updated_at": "2018-03-06T05:25:30Z",
            "author_association": "MEMBER",
            "body": "I'm fine with a PR clarifying the docs, but I don't think the behavior should change."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/370786704",
            "html_url": "https://github.com/pallets/flask/issues/2651#issuecomment-370786704",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2651",
            "id": 370786704,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDc4NjcwNA==",
            "user": {
                "login": "RobertDeRose",
                "id": 388745,
                "node_id": "MDQ6VXNlcjM4ODc0NQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/388745?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/RobertDeRose",
                "html_url": "https://github.com/RobertDeRose",
                "followers_url": "https://api.github.com/users/RobertDeRose/followers",
                "following_url": "https://api.github.com/users/RobertDeRose/following{/other_user}",
                "gists_url": "https://api.github.com/users/RobertDeRose/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/RobertDeRose/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/RobertDeRose/subscriptions",
                "organizations_url": "https://api.github.com/users/RobertDeRose/orgs",
                "repos_url": "https://api.github.com/users/RobertDeRose/repos",
                "events_url": "https://api.github.com/users/RobertDeRose/events{/privacy}",
                "received_events_url": "https://api.github.com/users/RobertDeRose/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-03-06T13:49:54Z",
            "updated_at": "2018-03-06T13:49:54Z",
            "author_association": "NONE",
            "body": "I'll make a PR, but I disagree that the behavior isn't odd to the point of being a bug.  Using `silent` anywhere else in the Request's life time changes the behavior of calling the function later in the Request's life.  That's not a good thing.  Weird side-effects like this introduce hard to find bugs, like this did for our usage of Flask. "
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/373058983",
            "html_url": "https://github.com/pallets/flask/issues/2651#issuecomment-373058983",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2651",
            "id": 373058983,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzA1ODk4Mw==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-03-14T15:18:01Z",
            "updated_at": "2018-03-14T15:18:01Z",
            "author_association": "MEMBER",
            "body": "Thought about this more. I can see the issue where an extension or `before_request` might call `get_json(slient=True)`, thus hiding the error from a user-written view when `get_json` is called."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/373060195",
            "html_url": "https://github.com/pallets/flask/issues/2651#issuecomment-373060195",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2651",
            "id": 373060195,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzA2MDE5NQ==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-03-14T15:21:19Z",
            "updated_at": "2018-03-14T15:21:19Z",
            "author_association": "MEMBER",
            "body": "I'm marking this as 1.1, but if some can submit a PR in the next day or so I'll put it in 1.0."
        }
    ]
}