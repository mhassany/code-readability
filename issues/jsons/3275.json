{
    "url": "https://api.github.com/repos/pallets/flask/issues/3275",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/3275/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/3275/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/3275/events",
    "html_url": "https://github.com/pallets/flask/issues/3275",
    "id": 462714178,
    "node_id": "MDU6SXNzdWU0NjI3MTQxNzg=",
    "number": 3275,
    "title": "flask requires `is_package` from import loaders, however this api is optional since PEP 451",
    "user": {
        "login": "asottile",
        "id": 1810591,
        "node_id": "MDQ6VXNlcjE4MTA1OTE=",
        "avatar_url": "https://avatars3.githubusercontent.com/u/1810591?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/asottile",
        "html_url": "https://github.com/asottile",
        "followers_url": "https://api.github.com/users/asottile/followers",
        "following_url": "https://api.github.com/users/asottile/following{/other_user}",
        "gists_url": "https://api.github.com/users/asottile/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/asottile/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/asottile/subscriptions",
        "organizations_url": "https://api.github.com/users/asottile/orgs",
        "repos_url": "https://api.github.com/users/asottile/repos",
        "events_url": "https://api.github.com/users/asottile/events{/privacy}",
        "received_events_url": "https://api.github.com/users/asottile/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2019-07-01T13:26:54Z",
    "updated_at": "2019-07-01T17:57:15Z",
    "closed_at": "2019-07-01T17:57:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "For more information: https://github.com/pytest-dev/pytest/issues/5532\r\n\r\nhttps://www.python.org/dev/peps/pep-0451/#api-changes\r\n\r\nA compliant PEP 451 loader can avoid a lot of the tricky APIs just through implementing `find_spect` -- in this case `is_package` is replaced by `submodule_search_locations` being truthy\r\n\r\nI'll see if I can't take a stab at this, it looks like this is a reopen of #487\r\n\r\nHere's a minimal example:\r\n\r\n```python\r\nimport flask\r\n\r\napp = flask.Flask(__name__)\r\n\r\ndef test():\r\n    pass\r\n```\r\n\r\n```console\r\n$ pytest t.py\r\n============================= test session starts ==============================\r\nplatform linux -- Python 3.6.7, pytest-5.0.0, py-1.8.0, pluggy-0.12.0\r\nrootdir: /tmp/x\r\ncollected 0 items / 1 errors                                                   \r\n\r\n==================================== ERRORS ====================================\r\n____________________________ ERROR collecting t.py _____________________________\r\nt.py:3: in <module>\r\n    app = flask.Flask(__name__)\r\nvenv/lib/python3.6/site-packages/flask/app.py:381: in __init__\r\n    instance_path = self.auto_find_instance_path()\r\nvenv/lib/python3.6/site-packages/flask/app.py:678: in auto_find_instance_path\r\n    prefix, package_path = find_package(self.import_name)\r\nvenv/lib/python3.6/site-packages/flask/helpers.py:826: in find_package\r\n    loader, root_mod_name):\r\nvenv/lib/python3.6/site-packages/flask/helpers.py:789: in _matching_loader_thinks_module_is_package\r\n    loader.__class__.__name__)\r\nE   AttributeError: AssertionRewritingHook.is_package() method is missing but is required by Flask of PEP 302 import hooks.  If you do not use import hooks and you encounter this error please file a bug against Flask.\r\n!!!!!!!!!!!!!!!!!!! Interrupted: 1 errors during collection !!!!!!!!!!!!!!!!!!!!\r\n=========================== 1 error in 0.31 seconds ============================\r\n```\r\n\r\n```console\r\n$ pip freeze --all\r\natomicwrites==1.3.0\r\nattrs==19.1.0\r\nClick==7.0\r\nFlask==1.0.3\r\nimportlib-metadata==0.18\r\nitsdangerous==1.1.0\r\nJinja2==2.10.1\r\nMarkupSafe==1.1.1\r\nmore-itertools==7.1.0\r\npackaging==19.0\r\npip==19.1.1\r\npluggy==0.12.0\r\npy==1.8.0\r\npyparsing==2.4.0\r\npytest==5.0.0\r\nsetuptools==41.0.1\r\nsix==1.12.0\r\nwcwidth==0.1.7\r\nWerkzeug==0.15.4\r\nwheel==0.33.4\r\nzipp==0.5.1\r\n```"
}