{
    "url": "https://api.github.com/repos/pallets/flask/issues/1473",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1473/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1473/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1473/events",
    "html_url": "https://github.com/pallets/flask/issues/1473",
    "id": 82376370,
    "node_id": "MDU6SXNzdWU4MjM3NjM3MA==",
    "number": 1473,
    "title": "Flask server stops responding to new HTTP connections",
    "user": {
        "login": "mk270",
        "id": 923403,
        "node_id": "MDQ6VXNlcjkyMzQwMw==",
        "avatar_url": "https://avatars3.githubusercontent.com/u/923403?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mk270",
        "html_url": "https://github.com/mk270",
        "followers_url": "https://api.github.com/users/mk270/followers",
        "following_url": "https://api.github.com/users/mk270/following{/other_user}",
        "gists_url": "https://api.github.com/users/mk270/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/mk270/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mk270/subscriptions",
        "organizations_url": "https://api.github.com/users/mk270/orgs",
        "repos_url": "https://api.github.com/users/mk270/repos",
        "events_url": "https://api.github.com/users/mk270/events{/privacy}",
        "received_events_url": "https://api.github.com/users/mk270/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2015-05-29T10:43:52Z",
    "updated_at": "2015-05-29T11:50:10Z",
    "closed_at": "2015-05-29T11:50:10Z",
    "author_association": "NONE",
    "body": "After a day or two, my Flask app stops noticing new connections; strace says:\n\nmk@pling /proc/31539/fd> strace -p 31539 -e '!stat'\nProcess 31539 attached - interrupt to quit\nselect(0, NULL, NULL, NULL, {0, 805175}) = 0 (Timeout)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\nselect(0, NULL, NULL, NULL, {1, 0}^C <unfinished ...>\nProcess 31539 detached\n\n(note that the stat() calls between each select() have been omitted).\n\nSo select() is being called without any fds, basically as a blocking primitive, but I seem to have the following fds:\n\nlsof -p etc:\npython  31539   mk    3u  IPv4 141934535      0t0      TCP *:5000 (LISTEN)\npython  31539   mk    4u  IPv4 142787301      0t0      TCP 93.93.128.61:5000->61.240.144.65:60000 (ESTABLISHED)\n\nSo it should by rights be select()ing on fd 3 at the very least.\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/106771274",
            "html_url": "https://github.com/pallets/flask/issues/1473#issuecomment-106771274",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1473",
            "id": 106771274,
            "node_id": "MDEyOklzc3VlQ29tbWVudDEwNjc3MTI3NA==",
            "user": {
                "login": "mk270",
                "id": 923403,
                "node_id": "MDQ6VXNlcjkyMzQwMw==",
                "avatar_url": "https://avatars3.githubusercontent.com/u/923403?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mk270",
                "html_url": "https://github.com/mk270",
                "followers_url": "https://api.github.com/users/mk270/followers",
                "following_url": "https://api.github.com/users/mk270/following{/other_user}",
                "gists_url": "https://api.github.com/users/mk270/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mk270/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mk270/subscriptions",
                "organizations_url": "https://api.github.com/users/mk270/orgs",
                "repos_url": "https://api.github.com/users/mk270/repos",
                "events_url": "https://api.github.com/users/mk270/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mk270/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-05-29T10:46:12Z",
            "updated_at": "2015-05-29T10:46:12Z",
            "author_association": "NONE",
            "body": "Ah, tiresomely, I forgot -f to strace - so the above output is misleading\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/106774889",
            "html_url": "https://github.com/pallets/flask/issues/1473#issuecomment-106774889",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1473",
            "id": 106774889,
            "node_id": "MDEyOklzc3VlQ29tbWVudDEwNjc3NDg4OQ==",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-05-29T10:58:20Z",
            "updated_at": "2015-05-29T10:58:20Z",
            "author_association": "MEMBER",
            "body": "Are you using the development server in production? `app.run` can only serve one connection at a time, it's very easy to freeze the server by leaving one connection open.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/106775278",
            "html_url": "https://github.com/pallets/flask/issues/1473#issuecomment-106775278",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1473",
            "id": 106775278,
            "node_id": "MDEyOklzc3VlQ29tbWVudDEwNjc3NTI3OA==",
            "user": {
                "login": "mk270",
                "id": 923403,
                "node_id": "MDQ6VXNlcjkyMzQwMw==",
                "avatar_url": "https://avatars3.githubusercontent.com/u/923403?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mk270",
                "html_url": "https://github.com/mk270",
                "followers_url": "https://api.github.com/users/mk270/followers",
                "following_url": "https://api.github.com/users/mk270/following{/other_user}",
                "gists_url": "https://api.github.com/users/mk270/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mk270/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mk270/subscriptions",
                "organizations_url": "https://api.github.com/users/mk270/orgs",
                "repos_url": "https://api.github.com/users/mk270/repos",
                "events_url": "https://api.github.com/users/mk270/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mk270/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-05-29T11:00:56Z",
            "updated_at": "2015-05-29T11:01:04Z",
            "author_association": "NONE",
            "body": "And I have to use some external tool like gunicorn to work around this?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/106776248",
            "html_url": "https://github.com/pallets/flask/issues/1473#issuecomment-106776248",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1473",
            "id": 106776248,
            "node_id": "MDEyOklzc3VlQ29tbWVudDEwNjc3NjI0OA==",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-05-29T11:08:48Z",
            "updated_at": "2015-05-29T11:08:48Z",
            "author_association": "MEMBER",
            "body": "Yes.\n\nFlask is a web framework, not a server. Not including a scalable server sacrifices a bit of usability for flexibility. I don't know your background, but that distinction is not unique to Flask.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/106781794",
            "html_url": "https://github.com/pallets/flask/issues/1473#issuecomment-106781794",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1473",
            "id": 106781794,
            "node_id": "MDEyOklzc3VlQ29tbWVudDEwNjc4MTc5NA==",
            "user": {
                "login": "mk270",
                "id": 923403,
                "node_id": "MDQ6VXNlcjkyMzQwMw==",
                "avatar_url": "https://avatars3.githubusercontent.com/u/923403?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mk270",
                "html_url": "https://github.com/mk270",
                "followers_url": "https://api.github.com/users/mk270/followers",
                "following_url": "https://api.github.com/users/mk270/following{/other_user}",
                "gists_url": "https://api.github.com/users/mk270/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mk270/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mk270/subscriptions",
                "organizations_url": "https://api.github.com/users/mk270/orgs",
                "repos_url": "https://api.github.com/users/mk270/repos",
                "events_url": "https://api.github.com/users/mk270/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mk270/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-05-29T11:50:10Z",
            "updated_at": "2015-05-29T11:50:10Z",
            "author_association": "NONE",
            "body": "thanks\n"
        }
    ]
}