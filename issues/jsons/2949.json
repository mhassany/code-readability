{
    "url": "https://api.github.com/repos/pallets/flask/issues/2949",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2949/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2949/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2949/events",
    "html_url": "https://github.com/pallets/flask/issues/2949",
    "id": 371384627,
    "node_id": "MDU6SXNzdWUzNzEzODQ2Mjc=",
    "number": 2949,
    "title": "Documentation \"Testing Flask Applications\" should show client teardown",
    "user": {
        "login": "ncraike",
        "id": 1109269,
        "node_id": "MDQ6VXNlcjExMDkyNjk=",
        "avatar_url": "https://avatars3.githubusercontent.com/u/1109269?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ncraike",
        "html_url": "https://github.com/ncraike",
        "followers_url": "https://api.github.com/users/ncraike/followers",
        "following_url": "https://api.github.com/users/ncraike/following{/other_user}",
        "gists_url": "https://api.github.com/users/ncraike/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/ncraike/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ncraike/subscriptions",
        "organizations_url": "https://api.github.com/users/ncraike/orgs",
        "repos_url": "https://api.github.com/users/ncraike/repos",
        "events_url": "https://api.github.com/users/ncraike/events{/privacy}",
        "received_events_url": "https://api.github.com/users/ncraike/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 32876,
            "node_id": "MDU6TGFiZWwzMjg3Ng==",
            "url": "https://api.github.com/repos/pallets/flask/labels/docs",
            "name": "docs",
            "color": "0e8a16",
            "default": false,
            "description": null
        },
        {
            "id": 170296925,
            "node_id": "MDU6TGFiZWwxNzAyOTY5MjU=",
            "url": "https://api.github.com/repos/pallets/flask/labels/good%20first%20issue",
            "name": "good first issue",
            "color": "fbca04",
            "default": true,
            "description": null
        },
        {
            "id": 1373069970,
            "node_id": "MDU6TGFiZWwxMzczMDY5OTcw",
            "url": "https://api.github.com/repos/pallets/flask/labels/save-for-sprint",
            "name": "save-for-sprint",
            "color": "ff6bd2",
            "default": false,
            "description": "Please don't pick this unless you're participating in an official sprint."
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2018-10-18T06:50:46Z",
    "updated_at": "2019-06-01T13:38:34Z",
    "closed_at": "2019-06-01T13:38:34Z",
    "author_association": "NONE",
    "body": "The `flask.testing` `FlaskClient` has clean-up which only happens if you use the test client in a `with` block:\r\n\r\n```python\r\nclass FlaskClient(Client):\r\n\r\n    # ...\r\n\r\n    def __exit__(self, exc_type, exc_value, tb):\r\n        self.preserve_context = False\r\n\r\n        # on exit we want to clean up earlier.  Normally the request context\r\n        # stays preserved until the next request in the same thread comes\r\n        # in.  See RequestGlobals.push() for the general behavior.\r\n        top = _request_ctx_stack.top\r\n        if top is not None and top.preserved:\r\n            top.pop()\r\n```\r\n\r\nThis is described in the API documentation for [`app.test_client()`](http://flask.pocoo.org/docs/0.12/api/#flask.Flask.test_client), but isn't mentioned in the [Testing Flask Applications](http://flask.pocoo.org/docs/1.0/testing/) chapter of the documentation, and the \"testing skeleton\" code doesn't use `test_client()` in a `with` block:\r\n\r\n```python\r\n@pytest.fixture\r\ndef client():\r\n    db_fd, flaskr.app.config['DATABASE'] = tempfile.mkstemp()\r\n    flaskr.app.config['TESTING'] = True\r\n    client = flaskr.app.test_client()\r\n\r\n    with flaskr.app.app_context():\r\n        flaskr.init_db()\r\n\r\n    yield client\r\n```\r\n\r\nThe [Testing Flask Applications](http://flask.pocoo.org/docs/1.0/testing/) chapter should demonstrate using the test client in _some way_ which does teardown.\r\n\r\nI raise this because I used the skeleton code as basis for a `pytest` fixture, and I _believe_ I've run into intermittent test failure issues which are caused by request context leaking between tests.",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/433667664",
            "html_url": "https://github.com/pallets/flask/issues/2949#issuecomment-433667664",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2949",
            "id": 433667664,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQzMzY2NzY2NA==",
            "user": {
                "login": "Albert-Guan",
                "id": 20601182,
                "node_id": "MDQ6VXNlcjIwNjAxMTgy",
                "avatar_url": "https://avatars3.githubusercontent.com/u/20601182?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Albert-Guan",
                "html_url": "https://github.com/Albert-Guan",
                "followers_url": "https://api.github.com/users/Albert-Guan/followers",
                "following_url": "https://api.github.com/users/Albert-Guan/following{/other_user}",
                "gists_url": "https://api.github.com/users/Albert-Guan/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Albert-Guan/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Albert-Guan/subscriptions",
                "organizations_url": "https://api.github.com/users/Albert-Guan/orgs",
                "repos_url": "https://api.github.com/users/Albert-Guan/repos",
                "events_url": "https://api.github.com/users/Albert-Guan/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Albert-Guan/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-10-28T01:00:52Z",
            "updated_at": "2018-10-28T01:01:05Z",
            "author_association": "NONE",
            "body": "Hi! I just start using flask and I am working on this issue. I want to test if my changes work, so I follow the \r\n[http://flask.pocoo.org/docs/1.0/testing/](url)\r\nBut in this line: `from flaskr import flaskr` it fails. \r\nI didn't see a **flaskr** under **flaskr module** in the **examples/tutorial directory. Is there any way to to test the codes?"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/433672530",
            "html_url": "https://github.com/pallets/flask/issues/2949#issuecomment-433672530",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2949",
            "id": 433672530,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQzMzY3MjUzMA==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-10-28T03:08:59Z",
            "updated_at": "2018-10-28T03:08:59Z",
            "author_association": "MEMBER",
            "body": "The testing docs are not in sync with the tutorial right now. The tutorial itself includes a part on testing, so refer to that for now."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/433771627",
            "html_url": "https://github.com/pallets/flask/issues/2949#issuecomment-433771627",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2949",
            "id": 433771627,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQzMzc3MTYyNw==",
            "user": {
                "login": "Albert-Guan",
                "id": 20601182,
                "node_id": "MDQ6VXNlcjIwNjAxMTgy",
                "avatar_url": "https://avatars3.githubusercontent.com/u/20601182?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Albert-Guan",
                "html_url": "https://github.com/Albert-Guan",
                "followers_url": "https://api.github.com/users/Albert-Guan/followers",
                "following_url": "https://api.github.com/users/Albert-Guan/following{/other_user}",
                "gists_url": "https://api.github.com/users/Albert-Guan/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Albert-Guan/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Albert-Guan/subscriptions",
                "organizations_url": "https://api.github.com/users/Albert-Guan/orgs",
                "repos_url": "https://api.github.com/users/Albert-Guan/repos",
                "events_url": "https://api.github.com/users/Albert-Guan/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Albert-Guan/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-10-29T02:41:37Z",
            "updated_at": "2018-10-29T02:41:37Z",
            "author_association": "NONE",
            "body": "Should I create a new issue to update the testing docs? And this issue can also be fixed in the updated test docs.  I think it is not worth to fixing this issue here because the testing docs, at least this part needs to be changed sometime in the future. "
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/443061518",
            "html_url": "https://github.com/pallets/flask/issues/2949#issuecomment-443061518",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2949",
            "id": 443061518,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzA2MTUxOA==",
            "user": {
                "login": "chirgjn",
                "id": 3641378,
                "node_id": "MDQ6VXNlcjM2NDEzNzg=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/3641378?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/chirgjn",
                "html_url": "https://github.com/chirgjn",
                "followers_url": "https://api.github.com/users/chirgjn/followers",
                "following_url": "https://api.github.com/users/chirgjn/following{/other_user}",
                "gists_url": "https://api.github.com/users/chirgjn/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/chirgjn/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/chirgjn/subscriptions",
                "organizations_url": "https://api.github.com/users/chirgjn/orgs",
                "repos_url": "https://api.github.com/users/chirgjn/repos",
                "events_url": "https://api.github.com/users/chirgjn/events{/privacy}",
                "received_events_url": "https://api.github.com/users/chirgjn/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-11-30T01:50:07Z",
            "updated_at": "2018-11-30T01:50:07Z",
            "author_association": "NONE",
            "body": "\ud83d\udc4b @davidism would like to pick this issue up and update the docs if It's not done already"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/461177658",
            "html_url": "https://github.com/pallets/flask/issues/2949#issuecomment-461177658",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2949",
            "id": 461177658,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MTE3NzY1OA==",
            "user": {
                "login": "Jessicalau93",
                "id": 46872712,
                "node_id": "MDQ6VXNlcjQ2ODcyNzEy",
                "avatar_url": "https://avatars3.githubusercontent.com/u/46872712?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Jessicalau93",
                "html_url": "https://github.com/Jessicalau93",
                "followers_url": "https://api.github.com/users/Jessicalau93/followers",
                "following_url": "https://api.github.com/users/Jessicalau93/following{/other_user}",
                "gists_url": "https://api.github.com/users/Jessicalau93/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Jessicalau93/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Jessicalau93/subscriptions",
                "organizations_url": "https://api.github.com/users/Jessicalau93/orgs",
                "repos_url": "https://api.github.com/users/Jessicalau93/repos",
                "events_url": "https://api.github.com/users/Jessicalau93/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Jessicalau93/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-02-06T20:36:21Z",
            "updated_at": "2019-02-06T20:38:37Z",
            "author_association": "NONE",
            "body": "#2949"
        }
    ]
}