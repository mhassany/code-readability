{
    "url": "https://api.github.com/repos/pallets/flask/issues/2078",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2078/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2078/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2078/events",
    "html_url": "https://github.com/pallets/flask/issues/2078",
    "id": 186962029,
    "node_id": "MDU6SXNzdWUxODY5NjIwMjk=",
    "number": 2078,
    "title": "Adding documentation on best practices for Server-sent events and WebSockets",
    "user": {
        "login": "runfalk",
        "id": 864128,
        "node_id": "MDQ6VXNlcjg2NDEyOA==",
        "avatar_url": "https://avatars1.githubusercontent.com/u/864128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/runfalk",
        "html_url": "https://github.com/runfalk",
        "followers_url": "https://api.github.com/users/runfalk/followers",
        "following_url": "https://api.github.com/users/runfalk/following{/other_user}",
        "gists_url": "https://api.github.com/users/runfalk/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/runfalk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/runfalk/subscriptions",
        "organizations_url": "https://api.github.com/users/runfalk/orgs",
        "repos_url": "https://api.github.com/users/runfalk/repos",
        "events_url": "https://api.github.com/users/runfalk/events{/privacy}",
        "received_events_url": "https://api.github.com/users/runfalk/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2016-11-03T01:34:42Z",
    "updated_at": "2017-12-18T12:30:37Z",
    "closed_at": "2017-06-01T04:16:44Z",
    "author_association": "NONE",
    "body": "Earlier this year I did some development involving Server-sent events (SSE) using Flask. I found there is no official documentation on how to best handle this. Since the specification is simple I ended up implementing it myself. However, I think there is room for improvement.\r\n\r\nI find there are a couple of problems with working with SSE and Flask:\r\n\r\n- Development environment requires using a separate service or threading. Using a separate service adds complexity and using threading disallows the use of frame inspection in the built-in Don't Panic debugger for all requests.\r\n- There is no official information on best practices when it comes to deployment of SSE. Should it be a separate service or can it be included in the application? Especially for smaller applications I find the complexity of introducing a separate service for managing SSE adds a lot of complexity to an otherwise simple project.\r\n\r\nThe same points hold true for WebSockets as they are similar.",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/269564535",
            "html_url": "https://github.com/pallets/flask/issues/2078#issuecomment-269564535",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2078",
            "id": 269564535,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI2OTU2NDUzNQ==",
            "user": {
                "login": "runfalk",
                "id": 864128,
                "node_id": "MDQ6VXNlcjg2NDEyOA==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/864128?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/runfalk",
                "html_url": "https://github.com/runfalk",
                "followers_url": "https://api.github.com/users/runfalk/followers",
                "following_url": "https://api.github.com/users/runfalk/following{/other_user}",
                "gists_url": "https://api.github.com/users/runfalk/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/runfalk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/runfalk/subscriptions",
                "organizations_url": "https://api.github.com/users/runfalk/orgs",
                "repos_url": "https://api.github.com/users/runfalk/repos",
                "events_url": "https://api.github.com/users/runfalk/events{/privacy}",
                "received_events_url": "https://api.github.com/users/runfalk/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-12-29T00:43:12Z",
            "updated_at": "2016-12-29T00:43:12Z",
            "author_association": "NONE",
            "body": "@mitsuhiko did a talk at PyBay 2016 about Flask, and one of the last sections was on WebSockets with Flask. I'm linking to the part about WebSockets here for future reference:\r\n\r\nhttps://youtu.be/1ByQhAM5c1I?t=2493"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/305384675",
            "html_url": "https://github.com/pallets/flask/issues/2078#issuecomment-305384675",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2078",
            "id": 305384675,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwNTM4NDY3NQ==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-06-01T04:16:44Z",
            "updated_at": "2017-06-01T04:16:44Z",
            "author_association": "MEMBER",
            "body": "Flask is not going to define \"best practices\" for most things, as that's up to the developer. There is [Flask-SSE](https://flask-sse.readthedocs.io/en/latest/) for SSE, [Flask-Sockets](https://github.com/kennethreitz/flask-sockets) or [Flask-SocketIO](https://flask-socketio.readthedocs.io/en/latest/) for websockets.\r\n\r\nThe takeaway from the talk you linked is that Flask itself doesn't do anything, it's a separate service, which the extensions above cover. If you're interested in adding async support to Flask itself, I'm investigating [ASGI](http://channels.readthedocs.io/en/stable/asgi.html)."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/305419979",
            "html_url": "https://github.com/pallets/flask/issues/2078#issuecomment-305419979",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2078",
            "id": 305419979,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwNTQxOTk3OQ==",
            "user": {
                "login": "runfalk",
                "id": 864128,
                "node_id": "MDQ6VXNlcjg2NDEyOA==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/864128?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/runfalk",
                "html_url": "https://github.com/runfalk",
                "followers_url": "https://api.github.com/users/runfalk/followers",
                "following_url": "https://api.github.com/users/runfalk/following{/other_user}",
                "gists_url": "https://api.github.com/users/runfalk/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/runfalk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/runfalk/subscriptions",
                "organizations_url": "https://api.github.com/users/runfalk/orgs",
                "repos_url": "https://api.github.com/users/runfalk/repos",
                "events_url": "https://api.github.com/users/runfalk/events{/privacy}",
                "received_events_url": "https://api.github.com/users/runfalk/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-06-01T08:02:47Z",
            "updated_at": "2017-06-01T08:02:47Z",
            "author_association": "NONE",
            "body": "I'd argue that it would be useful to have a section for this under _Patterns for Flask_ is useful and relevant. There already are patterns for specific technologies such as _Celery Based Background Tasks_. I know about the Flask extensions, but they all introduce problems:\r\n\r\n- You can no longer run your app using `flask run`\r\n- The Werkzeug debugger no longer works\r\n\r\nThe thing about the linked talk I find useful is that @mitsuhiko advocates for not using Flask for the actual websocket server. Stating that _\"Flask doesn't do websockets and SSE very well yet, and therefore you should implement it as a separate service. You should do this using signed tokens.\"_ is useful to everyone looking at the documentation.\r\n\r\nSince both SSE and websockets are becoming increasingly popular, I really think they should be addressed in some way in the documentation. It doesn't even have to be best practices, just give the user a good starting point."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/352412803",
            "html_url": "https://github.com/pallets/flask/issues/2078#issuecomment-352412803",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2078",
            "id": 352412803,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM1MjQxMjgwMw==",
            "user": {
                "login": "hyzhak",
                "id": 184706,
                "node_id": "MDQ6VXNlcjE4NDcwNg==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/184706?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/hyzhak",
                "html_url": "https://github.com/hyzhak",
                "followers_url": "https://api.github.com/users/hyzhak/followers",
                "following_url": "https://api.github.com/users/hyzhak/following{/other_user}",
                "gists_url": "https://api.github.com/users/hyzhak/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/hyzhak/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/hyzhak/subscriptions",
                "organizations_url": "https://api.github.com/users/hyzhak/orgs",
                "repos_url": "https://api.github.com/users/hyzhak/repos",
                "events_url": "https://api.github.com/users/hyzhak/events{/privacy}",
                "received_events_url": "https://api.github.com/users/hyzhak/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-12-18T12:30:37Z",
            "updated_at": "2017-12-18T12:30:37Z",
            "author_association": "NONE",
            "body": "I vote for adding documentation about SSE topic. Because some points of implementation of SSE on flask are not clear at all. For example I'm getting resource leaking and don't know how to avoid it https://stackoverflow.com/questions/47868205/detect-client-disconnect-in-flask-for-streaming-response-server-sent-events-s.\r\nOr if flask team agrees that flask is not good for SSE and other async services it would be great to explicit note it in documentation as well."
        }
    ]
}