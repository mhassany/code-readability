{
    "url": "https://api.github.com/repos/pallets/flask/issues/149",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/149/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/149/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/149/events",
    "html_url": "https://github.com/pallets/flask/issues/149",
    "id": 465582,
    "node_id": "MDU6SXNzdWU0NjU1ODI=",
    "number": 149,
    "title": "UnicodeEncodeError when script is in a folder with non-ascii characters in the name",
    "user": {
        "login": "jjunho",
        "id": 516612,
        "node_id": "MDQ6VXNlcjUxNjYxMg==",
        "avatar_url": "https://avatars0.githubusercontent.com/u/516612?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jjunho",
        "html_url": "https://github.com/jjunho",
        "followers_url": "https://api.github.com/users/jjunho/followers",
        "following_url": "https://api.github.com/users/jjunho/following{/other_user}",
        "gists_url": "https://api.github.com/users/jjunho/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jjunho/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jjunho/subscriptions",
        "organizations_url": "https://api.github.com/users/jjunho/orgs",
        "repos_url": "https://api.github.com/users/jjunho/repos",
        "events_url": "https://api.github.com/users/jjunho/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jjunho/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 6,
    "created_at": "2010-12-09T17:51:54Z",
    "updated_at": "2016-06-03T22:52:12Z",
    "closed_at": "2016-06-03T22:52:12Z",
    "author_association": "NONE",
    "body": "Very very nice work done in Flask! Really liked it!\nHowever, I was trying to run my Flask script under a subfolder of my Desktop folder in Ubuntu. Since my system is set up for Portuguese (I'm Brazilian), the default name for the folder is \"\u00c1rea de Trabalho\". I was getting UnicodeEncodeError every time I tried to run the example in \"11.7 Uploading Files\". (At least it was really good to teach me how to use the Flask debugger!) I went around, examining where the error was coming from, and, finally, got to \"File \"/usr/local/lib/python2.6/dist-packages/Flask-0.6-py2.6.egg/flask/helpers.py\", line 350, in send_file\", when the function adler32 uses the unicode string. Then, I just tried a quick \"from zlib import adler32; adler32(u'\u00c1')\" to realize that zlib doesn't allow unicode strings, returning a \"UnicodeEncodeError: 'ascii' codec can't encode character u'\\xc1' in position 0: ordinal not in range(128)\".\nOf course I can move my script to another folder, but it would be nice not having to think about that in the future, especially when it is said that \"Flask like Jinja2 and Werkzeug is totally Unicode based when it comes to text\".\nSorry if I don't make much sense... it's almost 3:00am around here...\n\nCongrats for the great job on Flask!\n\njjunho\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/600891",
            "html_url": "https://github.com/pallets/flask/issues/149#issuecomment-600891",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/149",
            "id": 600891,
            "node_id": "MDEyOklzc3VlQ29tbWVudDYwMDg5MQ==",
            "user": {
                "login": "mitsuhiko",
                "id": 7396,
                "node_id": "MDQ6VXNlcjczOTY=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/7396?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mitsuhiko",
                "html_url": "https://github.com/mitsuhiko",
                "followers_url": "https://api.github.com/users/mitsuhiko/followers",
                "following_url": "https://api.github.com/users/mitsuhiko/following{/other_user}",
                "gists_url": "https://api.github.com/users/mitsuhiko/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mitsuhiko/subscriptions",
                "organizations_url": "https://api.github.com/users/mitsuhiko/orgs",
                "repos_url": "https://api.github.com/users/mitsuhiko/repos",
                "events_url": "https://api.github.com/users/mitsuhiko/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mitsuhiko/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2010-12-09T20:30:01Z",
            "updated_at": "2010-12-09T20:30:01Z",
            "author_association": "MEMBER",
            "body": "Heh. I really should have included an exception for \"except for filesystem access\". The reason for this being that it's close to impossible to support unicode file access on POSIX systems. But it's definitively something that should be improved, just that it's damn hard to get it right.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/4634074",
            "html_url": "https://github.com/pallets/flask/issues/149#issuecomment-4634074",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/149",
            "id": 4634074,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MzQwNzQ=",
            "user": {
                "login": "dgerber",
                "id": 393344,
                "node_id": "MDQ6VXNlcjM5MzM0NA==",
                "avatar_url": "https://avatars3.githubusercontent.com/u/393344?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/dgerber",
                "html_url": "https://github.com/dgerber",
                "followers_url": "https://api.github.com/users/dgerber/followers",
                "following_url": "https://api.github.com/users/dgerber/following{/other_user}",
                "gists_url": "https://api.github.com/users/dgerber/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/dgerber/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dgerber/subscriptions",
                "organizations_url": "https://api.github.com/users/dgerber/orgs",
                "repos_url": "https://api.github.com/users/dgerber/repos",
                "events_url": "https://api.github.com/users/dgerber/events{/privacy}",
                "received_events_url": "https://api.github.com/users/dgerber/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-03-22T08:02:29Z",
            "updated_at": "2012-03-27T17:19:00Z",
            "author_association": "CONTRIBUTOR",
            "body": "What about wrapping path operations like this?\n\n```\ntry:\n    return os.path.join(directory, filename)\nexcept UnicodeDecodeError:\n    encoding = sys.getfilesystemencoding()\n    d, f = [x if isinstance(x, unicode) else unicode(x, encoding) for x in (directory, filename)]\n    return os.path.join(d, f)\n```\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/11095803",
            "html_url": "https://github.com/pallets/flask/issues/149#issuecomment-11095803",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/149",
            "id": 11095803,
            "node_id": "MDEyOklzc3VlQ29tbWVudDExMDk1ODAz",
            "user": {
                "login": "sprhawk",
                "id": 465558,
                "node_id": "MDQ6VXNlcjQ2NTU1OA==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/465558?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/sprhawk",
                "html_url": "https://github.com/sprhawk",
                "followers_url": "https://api.github.com/users/sprhawk/followers",
                "following_url": "https://api.github.com/users/sprhawk/following{/other_user}",
                "gists_url": "https://api.github.com/users/sprhawk/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/sprhawk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sprhawk/subscriptions",
                "organizations_url": "https://api.github.com/users/sprhawk/orgs",
                "repos_url": "https://api.github.com/users/sprhawk/repos",
                "events_url": "https://api.github.com/users/sprhawk/events{/privacy}",
                "received_events_url": "https://api.github.com/users/sprhawk/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-12-06T17:44:48Z",
            "updated_at": "2012-12-06T17:46:20Z",
            "author_association": "NONE",
            "body": "I encounter the problem and fixed by:\n\n```\ncreate database xxx default character set utf8 default collate utf8_gerneral_ci\n```\n\nin schema.sql:\n\n```\nset names 'utf8' colate 'utf8_general_ci'\n```\n\nin sqlalchemy connection uri:\n\n```\nmysql://test:test@localhost/test?charset=utf8\n```\n\nthen it works well in Jinja2\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/12177642",
            "html_url": "https://github.com/pallets/flask/issues/149#issuecomment-12177642",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/149",
            "id": 12177642,
            "node_id": "MDEyOklzc3VlQ29tbWVudDEyMTc3NjQy",
            "user": {
                "login": "booo",
                "id": 424513,
                "node_id": "MDQ6VXNlcjQyNDUxMw==",
                "avatar_url": "https://avatars3.githubusercontent.com/u/424513?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/booo",
                "html_url": "https://github.com/booo",
                "followers_url": "https://api.github.com/users/booo/followers",
                "following_url": "https://api.github.com/users/booo/following{/other_user}",
                "gists_url": "https://api.github.com/users/booo/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/booo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/booo/subscriptions",
                "organizations_url": "https://api.github.com/users/booo/orgs",
                "repos_url": "https://api.github.com/users/booo/repos",
                "events_url": "https://api.github.com/users/booo/events{/privacy}",
                "received_events_url": "https://api.github.com/users/booo/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2013-01-12T12:45:34Z",
            "updated_at": "2013-01-12T12:45:34Z",
            "author_association": "NONE",
            "body": "It would be extremely useful if we fix this problem or add a comment to the documentation that tells the user not to use a path that contains characters other the ascii charset.\n\nIf you point me in the right direction I can add the comment to the documentation.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/223703569",
            "html_url": "https://github.com/pallets/flask/issues/149#issuecomment-223703569",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/149",
            "id": 223703569,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyMzcwMzU2OQ==",
            "user": {
                "login": "jeffwidman",
                "id": 483314,
                "node_id": "MDQ6VXNlcjQ4MzMxNA==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/483314?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/jeffwidman",
                "html_url": "https://github.com/jeffwidman",
                "followers_url": "https://api.github.com/users/jeffwidman/followers",
                "following_url": "https://api.github.com/users/jeffwidman/following{/other_user}",
                "gists_url": "https://api.github.com/users/jeffwidman/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/jeffwidman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jeffwidman/subscriptions",
                "organizations_url": "https://api.github.com/users/jeffwidman/orgs",
                "repos_url": "https://api.github.com/users/jeffwidman/repos",
                "events_url": "https://api.github.com/users/jeffwidman/events{/privacy}",
                "received_events_url": "https://api.github.com/users/jeffwidman/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-06-03T21:52:07Z",
            "updated_at": "2016-06-03T21:52:07Z",
            "author_association": "MEMBER",
            "body": "The original bug was reported against Flask 0.6. \n\nIs this issue still relevant?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/223713282",
            "html_url": "https://github.com/pallets/flask/issues/149#issuecomment-223713282",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/149",
            "id": 223713282,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyMzcxMzI4Mg==",
            "user": {
                "login": "antsar",
                "id": 2976310,
                "node_id": "MDQ6VXNlcjI5NzYzMTA=",
                "avatar_url": "https://avatars2.githubusercontent.com/u/2976310?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/antsar",
                "html_url": "https://github.com/antsar",
                "followers_url": "https://api.github.com/users/antsar/followers",
                "following_url": "https://api.github.com/users/antsar/following{/other_user}",
                "gists_url": "https://api.github.com/users/antsar/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/antsar/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/antsar/subscriptions",
                "organizations_url": "https://api.github.com/users/antsar/orgs",
                "repos_url": "https://api.github.com/users/antsar/repos",
                "events_url": "https://api.github.com/users/antsar/events{/privacy}",
                "received_events_url": "https://api.github.com/users/antsar/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-06-03T22:51:57Z",
            "updated_at": "2016-06-03T22:51:57Z",
            "author_association": "CONTRIBUTOR",
            "body": "Tried this on 0.7 thru master and **could not reproduce**. Flask examples run fine even when the path contains non-ascii chars.\n"
        }
    ]
}