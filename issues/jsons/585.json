{
    "url": "https://api.github.com/repos/pallets/flask/issues/585",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/585/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/585/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/585/events",
    "html_url": "https://github.com/pallets/flask/issues/585",
    "id": 6577240,
    "node_id": "MDU6SXNzdWU2NTc3MjQw",
    "number": 585,
    "title": "Multiple URL rules pointing to lambdas in the same scope do not work",
    "user": {
        "login": "boomlinde",
        "id": 724281,
        "node_id": "MDQ6VXNlcjcyNDI4MQ==",
        "avatar_url": "https://avatars2.githubusercontent.com/u/724281?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/boomlinde",
        "html_url": "https://github.com/boomlinde",
        "followers_url": "https://api.github.com/users/boomlinde/followers",
        "following_url": "https://api.github.com/users/boomlinde/following{/other_user}",
        "gists_url": "https://api.github.com/users/boomlinde/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/boomlinde/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/boomlinde/subscriptions",
        "organizations_url": "https://api.github.com/users/boomlinde/orgs",
        "repos_url": "https://api.github.com/users/boomlinde/repos",
        "events_url": "https://api.github.com/users/boomlinde/events{/privacy}",
        "received_events_url": "https://api.github.com/users/boomlinde/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2012-08-31T12:07:24Z",
    "updated_at": "2012-08-31T14:53:56Z",
    "closed_at": "2012-08-31T14:46:52Z",
    "author_association": "NONE",
    "body": "I'm dynamically generating a bunch of views in a piece of code that essentially boils down to\n\n``` python\nfor manager in managers:\n    app.add_url_rule('/managers/%s/<parameter>' % manager['identifier'], manager['lambda']\n```\n\nwhere the lambda key in the manager objects is a lambda object using a small set of common functions with varying input parameters based on values in the manager object.\n\nThe issue is that when adding multiple url rules pointing to lambdas in the same module, all the routes will point to the lambda that was defined last. Upon further investigation, it seems Flask URL rules only refer to endpoint functions by name in a string, so all the endpoints that point to lambdas in the same scope will end up pointing at the same lambda, referred to as \"package.<lambda>\".\n\nI realize that keeping names is necessary for reverse lookup of URL rules, but I think that ideally Flask should keep track of the endpoint function object itself by a pointer as well and use that to call.\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/8192826",
            "html_url": "https://github.com/pallets/flask/issues/585#issuecomment-8192826",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/585",
            "id": 8192826,
            "node_id": "MDEyOklzc3VlQ29tbWVudDgxOTI4MjY=",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-08-31T14:01:45Z",
            "updated_at": "2012-08-31T14:01:45Z",
            "author_association": "MEMBER",
            "body": "Not sure if that's the problem, but your second manager access could either be identified as part of the formatting thing, or as second parameter for `add_url_rule`\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/8192888",
            "html_url": "https://github.com/pallets/flask/issues/585#issuecomment-8192888",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/585",
            "id": 8192888,
            "node_id": "MDEyOklzc3VlQ29tbWVudDgxOTI4ODg=",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-08-31T14:04:14Z",
            "updated_at": "2012-08-31T14:06:29Z",
            "author_association": "MEMBER",
            "body": "Also, according to [the documentation for add_url_rule](http://flask.pocoo.org/docs/api/#flask.Flask.add_url_rule), you have the wrong number of arguments passed to `add_url_rule`.\n\n``` python\nfor manager in managers:\n    app.add_url_rule('/managers/%s/<parameter>' % manager['identifier'], manager['identifier'], manager['lambda'])\n```\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/8194286",
            "html_url": "https://github.com/pallets/flask/issues/585#issuecomment-8194286",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/585",
            "id": 8194286,
            "node_id": "MDEyOklzc3VlQ29tbWVudDgxOTQyODY=",
            "user": {
                "login": "boomlinde",
                "id": 724281,
                "node_id": "MDQ6VXNlcjcyNDI4MQ==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/724281?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/boomlinde",
                "html_url": "https://github.com/boomlinde",
                "followers_url": "https://api.github.com/users/boomlinde/followers",
                "following_url": "https://api.github.com/users/boomlinde/following{/other_user}",
                "gists_url": "https://api.github.com/users/boomlinde/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/boomlinde/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/boomlinde/subscriptions",
                "organizations_url": "https://api.github.com/users/boomlinde/orgs",
                "repos_url": "https://api.github.com/users/boomlinde/repos",
                "events_url": "https://api.github.com/users/boomlinde/events{/privacy}",
                "received_events_url": "https://api.github.com/users/boomlinde/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-08-31T14:46:49Z",
            "updated_at": "2012-08-31T14:53:56Z",
            "author_association": "NONE",
            "body": "I realize now that I have overlooked some things, and this was of course not a bug in Flask. Thank you for the help untitaker!\n\nI should be more careful when trying to boil things down! At a different place in the code I generate the identifier parameter myself, simply copying function.**name**. Replacing that with str(function) resolved my issue. I feel dumb.\n"
        }
    ]
}