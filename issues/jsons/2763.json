{
    "url": "https://api.github.com/repos/pallets/flask/issues/2763",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2763/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2763/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2763/events",
    "html_url": "https://github.com/pallets/flask/issues/2763",
    "id": 321124448,
    "node_id": "MDU6SXNzdWUzMjExMjQ0NDg=",
    "number": 2763,
    "title": "Request files are left in memory",
    "user": {
        "login": "AggressivelyMeows",
        "id": 25571984,
        "node_id": "MDQ6VXNlcjI1NTcxOTg0",
        "avatar_url": "https://avatars0.githubusercontent.com/u/25571984?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/AggressivelyMeows",
        "html_url": "https://github.com/AggressivelyMeows",
        "followers_url": "https://api.github.com/users/AggressivelyMeows/followers",
        "following_url": "https://api.github.com/users/AggressivelyMeows/following{/other_user}",
        "gists_url": "https://api.github.com/users/AggressivelyMeows/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/AggressivelyMeows/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/AggressivelyMeows/subscriptions",
        "organizations_url": "https://api.github.com/users/AggressivelyMeows/orgs",
        "repos_url": "https://api.github.com/users/AggressivelyMeows/repos",
        "events_url": "https://api.github.com/users/AggressivelyMeows/events{/privacy}",
        "received_events_url": "https://api.github.com/users/AggressivelyMeows/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 6,
    "created_at": "2018-05-08T10:12:46Z",
    "updated_at": "2018-05-08T14:28:00Z",
    "closed_at": "2018-05-08T14:28:00Z",
    "author_association": "NONE",
    "body": "### Expected Behaviour\r\nWhen the request is over, the incoming files and JSON should be removed from memory\r\n\r\n### Actual Behavior\r\nThe files and other request data is left in memory with no apparent way to close the objects. i have tried using the python garbage collector but that fails to find the files and other related data.\r\n\r\nThe memory is silently used up until flask is killed by the host\r\n\r\n### Environment\r\n\r\n* Python version: 3.6\r\n* Flask version: 1.0.2\r\n* Werkzeug version: 2.10\r\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/387354437",
            "html_url": "https://github.com/pallets/flask/issues/2763#issuecomment-387354437",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2763",
            "id": 387354437,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzM1NDQzNw==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-08T10:13:26Z",
            "updated_at": "2018-05-08T10:13:26Z",
            "author_association": "MEMBER",
            "body": "Which WSGI container/server are you using?"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/387354965",
            "html_url": "https://github.com/pallets/flask/issues/2763#issuecomment-387354965",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2763",
            "id": 387354965,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzM1NDk2NQ==",
            "user": {
                "login": "AggressivelyMeows",
                "id": 25571984,
                "node_id": "MDQ6VXNlcjI1NTcxOTg0",
                "avatar_url": "https://avatars0.githubusercontent.com/u/25571984?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/AggressivelyMeows",
                "html_url": "https://github.com/AggressivelyMeows",
                "followers_url": "https://api.github.com/users/AggressivelyMeows/followers",
                "following_url": "https://api.github.com/users/AggressivelyMeows/following{/other_user}",
                "gists_url": "https://api.github.com/users/AggressivelyMeows/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/AggressivelyMeows/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/AggressivelyMeows/subscriptions",
                "organizations_url": "https://api.github.com/users/AggressivelyMeows/orgs",
                "repos_url": "https://api.github.com/users/AggressivelyMeows/repos",
                "events_url": "https://api.github.com/users/AggressivelyMeows/events{/privacy}",
                "received_events_url": "https://api.github.com/users/AggressivelyMeows/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-08T10:15:15Z",
            "updated_at": "2018-05-08T10:15:15Z",
            "author_association": "NONE",
            "body": "Flasks inbuilt developer server"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/387355795",
            "html_url": "https://github.com/pallets/flask/issues/2763#issuecomment-387355795",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2763",
            "id": 387355795,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzM1NTc5NQ==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-08T10:18:08Z",
            "updated_at": "2018-05-08T10:18:08Z",
            "author_association": "MEMBER",
            "body": "Not suitable for production, so I'm not sure how relevant this issue is.\r\n\r\nAlso, there's `PRESERVE_CONTEXT_ON_EXCEPTION` (enabled by default in debug mode) which stops a request context from being removed in case of an exception. That will of course leak memory whenever a request finishes with an exception."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/387400364",
            "html_url": "https://github.com/pallets/flask/issues/2763#issuecomment-387400364",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2763",
            "id": 387400364,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzQwMDM2NA==",
            "user": {
                "login": "AggressivelyMeows",
                "id": 25571984,
                "node_id": "MDQ6VXNlcjI1NTcxOTg0",
                "avatar_url": "https://avatars0.githubusercontent.com/u/25571984?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/AggressivelyMeows",
                "html_url": "https://github.com/AggressivelyMeows",
                "followers_url": "https://api.github.com/users/AggressivelyMeows/followers",
                "following_url": "https://api.github.com/users/AggressivelyMeows/following{/other_user}",
                "gists_url": "https://api.github.com/users/AggressivelyMeows/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/AggressivelyMeows/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/AggressivelyMeows/subscriptions",
                "organizations_url": "https://api.github.com/users/AggressivelyMeows/orgs",
                "repos_url": "https://api.github.com/users/AggressivelyMeows/repos",
                "events_url": "https://api.github.com/users/AggressivelyMeows/events{/privacy}",
                "received_events_url": "https://api.github.com/users/AggressivelyMeows/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-08T13:23:13Z",
            "updated_at": "2018-05-08T13:28:28Z",
            "author_association": "NONE",
            "body": "There are no errors coming up. The request ends successfully. This isn't for production yet, still doing debug testing.\r\n\r\nEDIT: `PRESERVE_CONTEXT_ON_EXCEPTION`does not fix the problem."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/387414880",
            "html_url": "https://github.com/pallets/flask/issues/2763#issuecomment-387414880",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2763",
            "id": 387414880,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzQxNDg4MA==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-08T14:08:14Z",
            "updated_at": "2018-05-08T14:08:31Z",
            "author_association": "MEMBER",
            "body": "How are you seeing that memory is still held and files are still opened. Please include an example that we can use to reproduce the issue."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/387418203",
            "html_url": "https://github.com/pallets/flask/issues/2763#issuecomment-387418203",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2763",
            "id": 387418203,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzQxODIwMw==",
            "user": {
                "login": "AggressivelyMeows",
                "id": 25571984,
                "node_id": "MDQ6VXNlcjI1NTcxOTg0",
                "avatar_url": "https://avatars0.githubusercontent.com/u/25571984?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/AggressivelyMeows",
                "html_url": "https://github.com/AggressivelyMeows",
                "followers_url": "https://api.github.com/users/AggressivelyMeows/followers",
                "following_url": "https://api.github.com/users/AggressivelyMeows/following{/other_user}",
                "gists_url": "https://api.github.com/users/AggressivelyMeows/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/AggressivelyMeows/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/AggressivelyMeows/subscriptions",
                "organizations_url": "https://api.github.com/users/AggressivelyMeows/orgs",
                "repos_url": "https://api.github.com/users/AggressivelyMeows/repos",
                "events_url": "https://api.github.com/users/AggressivelyMeows/events{/privacy}",
                "received_events_url": "https://api.github.com/users/AggressivelyMeows/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-08T14:18:28Z",
            "updated_at": "2018-05-08T14:18:28Z",
            "author_association": "NONE",
            "body": "The problem was solved by making sure the request files were saved and closed on my end. Seems that not all of the files I was using had closed."
        }
    ]
}