{
    "url": "https://api.github.com/repos/pallets/flask/issues/1994",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1994/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1994/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1994/events",
    "html_url": "https://github.com/pallets/flask/issues/1994",
    "id": 173541470,
    "node_id": "MDU6SXNzdWUxNzM1NDE0NzA=",
    "number": 1994,
    "title": "dictsort filter fails on nested_dict typed list",
    "user": {
        "login": "smile4steve",
        "id": 8741607,
        "node_id": "MDQ6VXNlcjg3NDE2MDc=",
        "avatar_url": "https://avatars3.githubusercontent.com/u/8741607?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/smile4steve",
        "html_url": "https://github.com/smile4steve",
        "followers_url": "https://api.github.com/users/smile4steve/followers",
        "following_url": "https://api.github.com/users/smile4steve/following{/other_user}",
        "gists_url": "https://api.github.com/users/smile4steve/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/smile4steve/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/smile4steve/subscriptions",
        "organizations_url": "https://api.github.com/users/smile4steve/orgs",
        "repos_url": "https://api.github.com/users/smile4steve/repos",
        "events_url": "https://api.github.com/users/smile4steve/events{/privacy}",
        "received_events_url": "https://api.github.com/users/smile4steve/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2016-08-26T20:53:04Z",
    "updated_at": "2016-09-01T18:51:53Z",
    "closed_at": "2016-08-29T20:02:18Z",
    "author_association": "NONE",
    "body": "I have a [`nested_dict`](https://pypi.python.org/pypi/nested_dict) that I want to use the `dictsort` filter on.  The template works without `dictsort`, and the filter works on regular dicts.  However, it fails with the following error when using `dictsort` with a `nested_dict`.\n\n```\nUndefinedError: nested_dict.implementation.nested_dict object has no element ('5.008008', defaultdict(<class 'nested_dict.implementation.nested_dict'>, {'full': 'perl-5.8.8', 'tiny': '5.8.8'}))\n```\n\n```\n{% for perl_number in perl_num2ver|dictsort %}\n    <th>{{ perl_num2ver[perl_number]['tiny'] }}</th>  \n{% endfor %}\n```\n\n```\nreturn render_template('pivot_table.html', perl_num2ver=perl_num2ver())\n```\n\nThe method creating the `nested_dict` object:\n\n```\nfrom nested_dict import nested_dict\n\ndef perl_num2ver():\n    cfg = nested_dict()  # so we can do hash of hash, dict of dict\n    cfg['5.020003'][ 'full' ] = 'perl-5.20.3'\n    # etc.\n    return cfg\n```\n\n```\nclick==6.6\nFlask==0.11.1\nitsdangerous==0.24\nJinja2==2.8\nMarkupSafe==0.23\npydumper==1.0.1\npymongo==3.3.0\nWerkzeug==0.11.10\n```\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/242891582",
            "html_url": "https://github.com/pallets/flask/issues/1994#issuecomment-242891582",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1994",
            "id": 242891582,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI0Mjg5MTU4Mg==",
            "user": {
                "login": "liuliqiang",
                "id": 9395418,
                "node_id": "MDQ6VXNlcjkzOTU0MTg=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/9395418?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/liuliqiang",
                "html_url": "https://github.com/liuliqiang",
                "followers_url": "https://api.github.com/users/liuliqiang/followers",
                "following_url": "https://api.github.com/users/liuliqiang/following{/other_user}",
                "gists_url": "https://api.github.com/users/liuliqiang/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/liuliqiang/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/liuliqiang/subscriptions",
                "organizations_url": "https://api.github.com/users/liuliqiang/orgs",
                "repos_url": "https://api.github.com/users/liuliqiang/repos",
                "events_url": "https://api.github.com/users/liuliqiang/events{/privacy}",
                "received_events_url": "https://api.github.com/users/liuliqiang/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-08-27T02:57:45Z",
            "updated_at": "2016-08-27T02:57:45Z",
            "author_association": "NONE",
            "body": "i think it may not break at jinja's dictsort, can you show the full stacktrace for your break?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/243199183",
            "html_url": "https://github.com/pallets/flask/issues/1994#issuecomment-243199183",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1994",
            "id": 243199183,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI0MzE5OTE4Mw==",
            "user": {
                "login": "smile4steve",
                "id": 8741607,
                "node_id": "MDQ6VXNlcjg3NDE2MDc=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/8741607?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/smile4steve",
                "html_url": "https://github.com/smile4steve",
                "followers_url": "https://api.github.com/users/smile4steve/followers",
                "following_url": "https://api.github.com/users/smile4steve/following{/other_user}",
                "gists_url": "https://api.github.com/users/smile4steve/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/smile4steve/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/smile4steve/subscriptions",
                "organizations_url": "https://api.github.com/users/smile4steve/orgs",
                "repos_url": "https://api.github.com/users/smile4steve/repos",
                "events_url": "https://api.github.com/users/smile4steve/events{/privacy}",
                "received_events_url": "https://api.github.com/users/smile4steve/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-08-29T17:49:11Z",
            "updated_at": "2016-08-29T19:48:17Z",
            "author_association": "NONE",
            "body": "```\n{% for perl_number in perl_num2ver %} works\n{# for perl_number in perl_num2ver|dictsort #} fails\n```\n\n``` python-traceback\nTraceback (most recent call last):\n  File \"/users/steshriv/projects/tinker/mongo/lib/python2.7/site-packages/flask/app.py\", line 2000, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"/users/steshriv/projects/tinker/mongo/lib/python2.7/site-packages/flask/app.py\", line 1991, in wsgi_app\n    response = self.make_response(self.handle_exception(e))\n  File \"/users/steshriv/projects/tinker/mongo/lib/python2.7/site-packages/flask/app.py\", line 1567, in handle_exception\n    reraise(exc_type, exc_value, tb)\n  File \"/users/steshriv/projects/tinker/mongo/lib/python2.7/site-packages/flask/app.py\", line 1988, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"/users/steshriv/projects/tinker/mongo/lib/python2.7/site-packages/flask/app.py\", line 1641, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n  File \"/users/steshriv/projects/tinker/mongo/lib/python2.7/site-packages/flask/app.py\", line 1544, in handle_user_exception\n    reraise(exc_type, exc_value, tb)\n  File \"/users/steshriv/projects/tinker/mongo/lib/python2.7/site-packages/flask/app.py\", line 1639, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"/users/steshriv/projects/tinker/mongo/lib/python2.7/site-packages/flask/app.py\", line 1625, in dispatch_request\n    return self.view_functions[rule.endpoint](**req.view_args)\n  File \"/users/steshriv/projects/tinker/mongo/lib/python2.7/site-packages/flask/views.py\", line 84, in view\n    return self.dispatch_request(*args, **kwargs)\n  File \"/users/steshriv/projects/tinker/mongo/lib/python2.7/site-packages/flask/views.py\", line 149, in dispatch_request\n    return meth(*args, **kwargs)\n  File \"/var/www/vhosts/dctools_wsgi/FlaskApp/__init__.py\", line 113, in post\n    return flask.render_template('pivot_table.html', **data)\n  File \"/users/steshriv/projects/tinker/mongo/lib/python2.7/site-packages/flask/templating.py\", line 134, in render_template\n    context, ctx.app)\n  File \"/users/steshriv/projects/tinker/mongo/lib/python2.7/site-packages/flask/templating.py\", line 116, in _render\n    rv = template.render(context)\n  File \"/users/steshriv/projects/tinker/mongo/lib/python2.7/site-packages/jinja2/environment.py\", line 989, in render\n    return self.environment.handle_exception(exc_info, True)\n  File \"/users/steshriv/projects/tinker/mongo/lib/python2.7/site-packages/jinja2/environment.py\", line 754, in handle_exception\n    reraise(exc_type, exc_value, tb)\n  File \"/var/www/vhosts/dctools_wsgi/FlaskApp/templates/pivot_table.html\", line 4, in top-level template code\n    {% extends page_format %}\n  File \"/var/www/vhosts/dctools_wsgi/FlaskApp/templates/search.html\", line 104, in top-level template code\n    {% block results %}{% endblock %}\n  File \"/var/www/vhosts/dctools_wsgi/FlaskApp/templates/pivot_table.html\", line 18, in block \"results\"\n    <th>{{ perl_num2ver[ perl_number ]['tiny'] }}</th>\n  File \"/users/steshriv/projects/tinker/mongo/lib/python2.7/site-packages/jinja2/environment.py\", line 389, in getitem\n    return obj[argument]\nUndefinedError: nested_dict.implementation.nested_dict object has no element ('5.008008', defaultdict(<class 'nested_dict.implementation.nested_dict'>, {'full': 'perl-5.8.8', 'tiny': '5.8.8'}))\n```\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/243238106",
            "html_url": "https://github.com/pallets/flask/issues/1994#issuecomment-243238106",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1994",
            "id": 243238106,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI0MzIzODEwNg==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-08-29T20:02:17Z",
            "updated_at": "2016-08-29T20:04:57Z",
            "author_association": "MEMBER",
            "body": "`dictsort` isn't failing, `{{ perl_num2ver[perl_number]['tiny'] }}` is, as the traceback shows.  From the [docs](http://jinja.pocoo.org/docs/dev/templates/#dictsort): \"yield (key, value) pairs\".  You're expecting it to yield keys only, which is what iterating over a dict does.\n\n```\n{% for key, value in perl_num2ver|dictsort %}\n    {{ value['tiny'] }}\n{% endfor %}\n```\n\nPlease use Stack Overflow for questions about your own code.  This issue tracker is for bug specific to Flask's own code.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/244175709",
            "html_url": "https://github.com/pallets/flask/issues/1994#issuecomment-244175709",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1994",
            "id": 244175709,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDE3NTcwOQ==",
            "user": {
                "login": "smile4steve",
                "id": 8741607,
                "node_id": "MDQ6VXNlcjg3NDE2MDc=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/8741607?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/smile4steve",
                "html_url": "https://github.com/smile4steve",
                "followers_url": "https://api.github.com/users/smile4steve/followers",
                "following_url": "https://api.github.com/users/smile4steve/following{/other_user}",
                "gists_url": "https://api.github.com/users/smile4steve/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/smile4steve/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/smile4steve/subscriptions",
                "organizations_url": "https://api.github.com/users/smile4steve/orgs",
                "repos_url": "https://api.github.com/users/smile4steve/repos",
                "events_url": "https://api.github.com/users/smile4steve/events{/privacy}",
                "received_events_url": "https://api.github.com/users/smile4steve/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-09-01T18:51:53Z",
            "updated_at": "2016-09-01T18:51:53Z",
            "author_association": "NONE",
            "body": "Thank you for your help.  Sorry I did not understand the documentation.  Thanks for the education. \n"
        }
    ]
}