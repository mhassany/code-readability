{
    "url": "https://api.github.com/repos/pallets/flask/issues/2106",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2106/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2106/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2106/events",
    "html_url": "https://github.com/pallets/flask/issues/2106",
    "id": 193479225,
    "node_id": "MDU6SXNzdWUxOTM0NzkyMjU=",
    "number": 2106,
    "title": "Invalid Host header returns HTTP/500 insetad of HTTP/400",
    "user": {
        "login": "brmzkw",
        "id": 795841,
        "node_id": "MDQ6VXNlcjc5NTg0MQ==",
        "avatar_url": "https://avatars0.githubusercontent.com/u/795841?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brmzkw",
        "html_url": "https://github.com/brmzkw",
        "followers_url": "https://api.github.com/users/brmzkw/followers",
        "following_url": "https://api.github.com/users/brmzkw/following{/other_user}",
        "gists_url": "https://api.github.com/users/brmzkw/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/brmzkw/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/brmzkw/subscriptions",
        "organizations_url": "https://api.github.com/users/brmzkw/orgs",
        "repos_url": "https://api.github.com/users/brmzkw/repos",
        "events_url": "https://api.github.com/users/brmzkw/events{/privacy}",
        "received_events_url": "https://api.github.com/users/brmzkw/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 11,
    "created_at": "2016-12-05T12:01:28Z",
    "updated_at": "2018-05-21T23:53:25Z",
    "closed_at": "2017-05-22T17:22:06Z",
    "author_association": "NONE",
    "body": "test.py:\r\n\r\n```from flask import Flask\r\napp = Flask(__name__)\r\n\r\n@app.route('/')\r\ndef hello_world():\r\n    return 'Hello, World!'\r\n```\r\n\r\nrun:\r\n\r\n```\r\n$> FLASK_APP=test.py flask run\r\n * Serving Flask app \"test\"\r\n * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)\r\n```\r\n\r\nquery:\r\n\r\n```\r\n$> curl localhost:5000 -H \"Host: '`python -c 'print \\\"\\xbf\\\"'`\" -i\r\nHTTP/1.0 500 INTERNAL SERVER ERROR\r\nContent-Type: text/html\r\nContent-Length: 291\r\nServer: Werkzeug/0.11.11 Python/2.7.12\r\nDate: Mon, 05 Dec 2016 11:57:46 GMT\r\n\r\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 3.2 Final//EN\">\r\n<title>500 Internal Server Error</title>\r\n<h1>Internal Server Error</h1>\r\n<p>The server encountered an internal error and was unable to complete your request.  Either the server is overloaded or there is an error in the application.</p>\r\n```\r\n\r\nserver log:\r\n```\r\n127.0.0.1 - - [05/Dec/2016 12:57:46] \"GET / HTTP/1.1\" 500 -\r\nError on request:\r\nTraceback (most recent call last):\r\n  File \"/private/tmp/venv/lib/python2.7/site-packages/werkzeug/serving.py\", line 193, in run_wsgi\r\n    execute(self.server.app)\r\n  File \"/private/tmp/venv/lib/python2.7/site-packages/werkzeug/serving.py\", line 181, in execute\r\n    application_iter = app(environ, start_response)\r\n  File \"/private/tmp/venv/lib/python2.7/site-packages/flask/app.py\", line 2000, in __call__\r\n    return self.wsgi_app(environ, start_response)\r\n  File \"/private/tmp/venv/lib/python2.7/site-packages/flask/app.py\", line 1983, in wsgi_app\r\n    ctx = self.request_context(environ)\r\n  File \"/private/tmp/venv/lib/python2.7/site-packages/flask/app.py\", line 1944, in request_context\r\n    return RequestContext(self, environ)\r\n  File \"/private/tmp/venv/lib/python2.7/site-packages/flask/ctx.py\", line 242, in __init__\r\n    self.url_adapter = app.create_url_adapter(self.request)\r\n  File \"/private/tmp/venv/lib/python2.7/site-packages/flask/app.py\", line 1771, in create_url_adapter\r\n    server_name=self.config['SERVER_NAME'])\r\n  File \"/private/tmp/venv/lib/python2.7/site-packages/werkzeug/routing.py\", line 1327, in bind_to_environ\r\n    query_args=query_args)\r\n  File \"/private/tmp/venv/lib/python2.7/site-packages/werkzeug/routing.py\", line 1239, in bind\r\n    raise BadHost()\r\nBadHost: 400: Bad Request\r\n```\r\n\r\nI'm not sure if this issue should be created here or on the werkzeug repository.\r\n\r\nAnyway, I think a HTTP/400 should be returned to the client instead of a HTTP/500.",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/264845548",
            "html_url": "https://github.com/pallets/flask/issues/2106#issuecomment-264845548",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2106",
            "id": 264845548,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDg0NTU0OA==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-12-05T12:47:02Z",
            "updated_at": "2016-12-05T12:47:22Z",
            "author_association": "MEMBER",
            "body": "`BadHost` is already a `BadRequest` subclass so unless you enabled `TRAP_HTTP_EXCEPTIONS` (which, at least in the example you posted, you didn't) you should indeed get a 400 error from this. If not it's a Flask bug."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/264861678",
            "html_url": "https://github.com/pallets/flask/issues/2106#issuecomment-264861678",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2106",
            "id": 264861678,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDg2MTY3OA==",
            "user": {
                "login": "brmzkw",
                "id": 795841,
                "node_id": "MDQ6VXNlcjc5NTg0MQ==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/795841?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/brmzkw",
                "html_url": "https://github.com/brmzkw",
                "followers_url": "https://api.github.com/users/brmzkw/followers",
                "following_url": "https://api.github.com/users/brmzkw/following{/other_user}",
                "gists_url": "https://api.github.com/users/brmzkw/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/brmzkw/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/brmzkw/subscriptions",
                "organizations_url": "https://api.github.com/users/brmzkw/orgs",
                "repos_url": "https://api.github.com/users/brmzkw/repos",
                "events_url": "https://api.github.com/users/brmzkw/events{/privacy}",
                "received_events_url": "https://api.github.com/users/brmzkw/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-12-05T14:04:13Z",
            "updated_at": "2016-12-05T14:04:13Z",
            "author_association": "NONE",
            "body": "I didn't set `TRAP_HTTP_EXCEPTIONS`.\r\n\r\nI tried to run the code with uwsgi.\r\n\r\n```\r\n$> cat tutu.py\r\nfrom flask import Flask\r\napp = Flask(__name__)\r\n\r\n\r\n@app.route('/')\r\ndef hello_world():\r\n    return 'Hello, World!'\r\n```\r\n\r\nServer:\r\n\r\n```\r\n $> uwsgi --http localhost:5000 --master --module tutu --callable=app -H /tmp/venv/\r\n*** Starting uWSGI 2.0.14 (64bit) on [Mon Dec  5 15:01:54 2016] ***\r\ncompiled with version: 4.2.1 Compatible Apple LLVM 7.0.2 (clang-700.1.81) on 05 December 2016 14:35:14\r\nos: Darwin-14.5.0 Darwin Kernel Version 14.5.0: Sun Sep 25 22:07:15 PDT 2016; root:xnu-2782.50.9~1/RELEASE_X86_64\r\nnodename: biwork\r\nmachine: x86_64\r\nclock source: unix\r\npcre jit disabled\r\ndetected number of CPU cores: 4\r\ncurrent working directory: /private/tmp/toto\r\ndetected binary path: /private/tmp/venv/bin/uwsgi\r\nyour processes number limit is 709\r\nyour memory page size is 4096 bytes\r\ndetected max file descriptor number: 7168\r\nlock engine: OSX spinlocks\r\nthunder lock: disabled (you can enable it with --thunder-lock)\r\nuWSGI http bound on localhost:5000 fd 4\r\nuwsgi socket 0 bound to TCP address 127.0.0.1:58561 (port auto-assigned) fd 3\r\nPython version: 2.7.12 (default, Jun 29 2016, 14:04:44)  [GCC 4.2.1 Compatible Apple LLVM 7.0.2 (clang-700.1.81)]\r\nSet PythonHome to /tmp/venv/\r\n*** Python threads support is disabled. You can enable it with --enable-threads ***\r\nPython main interpreter initialized at 0x7f9f4bc0d900\r\nyour server socket listen backlog is limited to 100 connections\r\nyour mercy for graceful operations on workers is 60 seconds\r\nmapped 145520 bytes (142 KB) for 1 cores\r\n*** Operational MODE: single process ***\r\nWSGI app 0 (mountpoint='') ready in 0 seconds on interpreter 0x7f9f4bc0d900 pid: 11511 (default app)\r\n*** uWSGI is running in multiple interpreter mode ***\r\nspawned uWSGI master process (pid: 11511)\r\nspawned uWSGI worker 1 (pid: 11512, cores: 1)\r\nspawned uWSGI http 1 (pid: 11513)\r\n```\r\n\r\n(The latest stable version of uWSGI (2.0.14) and Flask (0.11.1) are installed in /tmp/venv).\r\n\r\n\r\nclient:\r\n\r\n```\r\n$> curl localhost:5000 -H \"Host: '`python -c 'print \\\"\\xbf\\\"'`\" -i\r\ncurl: (52) Empty reply from server\r\n```\r\n\r\nserver log:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/tmp/venv/lib/python2.7/site-packages/flask/app.py\", line 2000, in __call__\r\n    return self.wsgi_app(environ, start_response)\r\n  File \"/tmp/venv/lib/python2.7/site-packages/flask/app.py\", line 1983, in wsgi_app\r\n    ctx = self.request_context(environ)\r\n  File \"/tmp/venv/lib/python2.7/site-packages/flask/app.py\", line 1944, in request_context\r\n    return RequestContext(self, environ)\r\n  File \"/tmp/venv/lib/python2.7/site-packages/flask/ctx.py\", line 242, in __init__\r\n    self.url_adapter = app.create_url_adapter(self.request)\r\n  File \"/tmp/venv/lib/python2.7/site-packages/flask/app.py\", line 1771, in create_url_adapter\r\n    server_name=self.config['SERVER_NAME'])\r\n  File \"/tmp/venv/lib/python2.7/site-packages/werkzeug/routing.py\", line 1327, in bind_to_environ\r\n    query_args=query_args)\r\n  File \"/tmp/venv/lib/python2.7/site-packages/werkzeug/routing.py\", line 1239, in bind\r\n    raise BadHost()\r\nwerkzeug.exceptions.BadHost: 400: Bad Request\r\n[pid: 11538|app: 0|req: 1/1] 127.0.0.1 () {28 vars in 276 bytes} [Mon Dec  5 15:03:25 2016] GET / => generated 0 bytes in 3 msecs (HTTP/1.1 500) 0 headers in 0 bytes (0 switches on core 0)\r\n```\r\n\r\nI really think it's a Flask/Werkzeug bug."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/303164918",
            "html_url": "https://github.com/pallets/flask/issues/2106#issuecomment-303164918",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2106",
            "id": 303164918,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwMzE2NDkxOA==",
            "user": {
                "login": "brianrusso",
                "id": 6276108,
                "node_id": "MDQ6VXNlcjYyNzYxMDg=",
                "avatar_url": "https://avatars2.githubusercontent.com/u/6276108?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/brianrusso",
                "html_url": "https://github.com/brianrusso",
                "followers_url": "https://api.github.com/users/brianrusso/followers",
                "following_url": "https://api.github.com/users/brianrusso/following{/other_user}",
                "gists_url": "https://api.github.com/users/brianrusso/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/brianrusso/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/brianrusso/subscriptions",
                "organizations_url": "https://api.github.com/users/brianrusso/orgs",
                "repos_url": "https://api.github.com/users/brianrusso/repos",
                "events_url": "https://api.github.com/users/brianrusso/events{/privacy}",
                "received_events_url": "https://api.github.com/users/brianrusso/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-05-22T17:21:17Z",
            "updated_at": "2017-05-22T17:21:17Z",
            "author_association": "NONE",
            "body": "Cannot replicate on 0.12.2\r\nExample from submitter returns 200"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/389713708",
            "html_url": "https://github.com/pallets/flask/issues/2106#issuecomment-389713708",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2106",
            "id": 389713708,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTcxMzcwOA==",
            "user": {
                "login": "anotheredward",
                "id": 228527,
                "node_id": "MDQ6VXNlcjIyODUyNw==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/228527?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/anotheredward",
                "html_url": "https://github.com/anotheredward",
                "followers_url": "https://api.github.com/users/anotheredward/followers",
                "following_url": "https://api.github.com/users/anotheredward/following{/other_user}",
                "gists_url": "https://api.github.com/users/anotheredward/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/anotheredward/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/anotheredward/subscriptions",
                "organizations_url": "https://api.github.com/users/anotheredward/orgs",
                "repos_url": "https://api.github.com/users/anotheredward/repos",
                "events_url": "https://api.github.com/users/anotheredward/events{/privacy}",
                "received_events_url": "https://api.github.com/users/anotheredward/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-17T01:15:19Z",
            "updated_at": "2018-05-17T01:53:56Z",
            "author_association": "NONE",
            "body": "I get this error on the example code with:\r\n* flask 1.0.2\r\n* python 3.6.5\r\n* mac 10.13.4\r\n\r\nwhen running\r\n`FLASK_APP=test.py flask run`\r\n\r\nVisiting `localhost:5000` returns a 500 Internal Server Error with no output in the console.\r\n\r\nVisiting `127.0.0.1:5000` returns works as expected.\r\n\r\nIs it possible that there is something about the configuration of my machine that makes this issue occur @brianrusso that you can help me find?\r\n\r\nI'm not sure where to find the `server logs` provided above by @brmzkw  when running the debug server.\r\n\r\nWould love to help get this error fixed, as it's surprisingly hard to debug! "
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/389774628",
            "html_url": "https://github.com/pallets/flask/issues/2106#issuecomment-389774628",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2106",
            "id": 389774628,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTc3NDYyOA==",
            "user": {
                "login": "brmzkw",
                "id": 795841,
                "node_id": "MDQ6VXNlcjc5NTg0MQ==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/795841?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/brmzkw",
                "html_url": "https://github.com/brmzkw",
                "followers_url": "https://api.github.com/users/brmzkw/followers",
                "following_url": "https://api.github.com/users/brmzkw/following{/other_user}",
                "gists_url": "https://api.github.com/users/brmzkw/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/brmzkw/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/brmzkw/subscriptions",
                "organizations_url": "https://api.github.com/users/brmzkw/orgs",
                "repos_url": "https://api.github.com/users/brmzkw/repos",
                "events_url": "https://api.github.com/users/brmzkw/events{/privacy}",
                "received_events_url": "https://api.github.com/users/brmzkw/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-17T07:40:57Z",
            "updated_at": "2018-05-17T13:07:36Z",
            "author_association": "NONE",
            "body": "~Security issue?~\r\n\r\nedit: Sorry, the comment was because you restrained the conversation but I didn't notice you probably did it by mistake, since it was restrained only for a few seconds"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/389849379",
            "html_url": "https://github.com/pallets/flask/issues/2106#issuecomment-389849379",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2106",
            "id": 389849379,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4OTg0OTM3OQ==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-17T12:29:38Z",
            "updated_at": "2018-05-17T12:30:37Z",
            "author_association": "MEMBER",
            "body": "I still can't reproduce this issue. Both localhost and 127.0.0.1 return a 200 response. I'm not sure why you would say it's a security issue."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/390035399",
            "html_url": "https://github.com/pallets/flask/issues/2106#issuecomment-390035399",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2106",
            "id": 390035399,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDAzNTM5OQ==",
            "user": {
                "login": "anotheredward",
                "id": 228527,
                "node_id": "MDQ6VXNlcjIyODUyNw==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/228527?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/anotheredward",
                "html_url": "https://github.com/anotheredward",
                "followers_url": "https://api.github.com/users/anotheredward/followers",
                "following_url": "https://api.github.com/users/anotheredward/following{/other_user}",
                "gists_url": "https://api.github.com/users/anotheredward/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/anotheredward/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/anotheredward/subscriptions",
                "organizations_url": "https://api.github.com/users/anotheredward/orgs",
                "repos_url": "https://api.github.com/users/anotheredward/repos",
                "events_url": "https://api.github.com/users/anotheredward/events{/privacy}",
                "received_events_url": "https://api.github.com/users/anotheredward/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-17T22:36:49Z",
            "updated_at": "2018-05-17T22:36:49Z",
            "author_association": "NONE",
            "body": "Is there anything I can do to help pin this error down @davidism ?"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/390036019",
            "html_url": "https://github.com/pallets/flask/issues/2106#issuecomment-390036019",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2106",
            "id": 390036019,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDAzNjAxOQ==",
            "user": {
                "login": "anotheredward",
                "id": 228527,
                "node_id": "MDQ6VXNlcjIyODUyNw==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/228527?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/anotheredward",
                "html_url": "https://github.com/anotheredward",
                "followers_url": "https://api.github.com/users/anotheredward/followers",
                "following_url": "https://api.github.com/users/anotheredward/following{/other_user}",
                "gists_url": "https://api.github.com/users/anotheredward/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/anotheredward/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/anotheredward/subscriptions",
                "organizations_url": "https://api.github.com/users/anotheredward/orgs",
                "repos_url": "https://api.github.com/users/anotheredward/repos",
                "events_url": "https://api.github.com/users/anotheredward/events{/privacy}",
                "received_events_url": "https://api.github.com/users/anotheredward/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-17T22:40:07Z",
            "updated_at": "2018-05-17T22:40:21Z",
            "author_association": "NONE",
            "body": "I'm using pipenv. Here's my pipfile.lock, if that might help?\r\n```json\r\n{\r\n    \"_meta\": {\r\n        \"hash\": {\r\n            \"sha256\": \"8ec50e78e90ad609e540d41d1ed90f3fb880ffbdf6049b0a6b2f1a00158a3288\"\r\n        },\r\n        \"pipfile-spec\": 6,\r\n        \"requires\": {\r\n            \"python_version\": \"3.6\"\r\n        },\r\n        \"sources\": [\r\n            {\r\n                \"name\": \"pypi\",\r\n                \"url\": \"https://pypi.org/simple\",\r\n                \"verify_ssl\": true\r\n            }\r\n        ]\r\n    },\r\n    \"default\": {\r\n        \"click\": {\r\n            \"hashes\": [\r\n                \"sha256:29f99fc6125fbc931b758dc053b3114e55c77a6e4c6c3a2674a2dc986016381d\",\r\n                \"sha256:f15516df478d5a56180fbf80e68f206010e6d160fc39fa508b65e035fd75130b\"\r\n            ],\r\n            \"version\": \"==6.7\"\r\n        },\r\n        \"flask\": {\r\n            \"hashes\": [\r\n                \"sha256:2271c0070dbcb5275fad4a82e29f23ab92682dc45f9dfbc22c02ba9b9322ce48\",\r\n                \"sha256:a080b744b7e345ccfcbc77954861cb05b3c63786e93f2b3875e0913d44b43f05\"\r\n            ],\r\n            \"index\": \"pypi\",\r\n            \"version\": \"==1.0.2\"\r\n        },\r\n        \"itsdangerous\": {\r\n            \"hashes\": [\r\n                \"sha256:cbb3fcf8d3e33df861709ecaf89d9e6629cff0a217bc2848f1b41cd30d360519\"\r\n            ],\r\n            \"version\": \"==0.24\"\r\n        },\r\n        \"jinja2\": {\r\n            \"hashes\": [\r\n                \"sha256:74c935a1b8bb9a3947c50a54766a969d4846290e1e788ea44c1392163723c3bd\",\r\n                \"sha256:f84be1bb0040caca4cea721fcbbbbd61f9be9464ca236387158b0feea01914a4\"\r\n            ],\r\n            \"version\": \"==2.10\"\r\n        },\r\n        \"markupsafe\": {\r\n            \"hashes\": [\r\n                \"sha256:a6be69091dac236ea9c6bc7d012beab42010fa914c459791d627dad4910eb665\"\r\n            ],\r\n            \"version\": \"==1.0\"\r\n        },\r\n        \"werkzeug\": {\r\n            \"hashes\": [\r\n                \"sha256:c3fd7a7d41976d9f44db327260e263132466836cef6f91512889ed60ad26557c\",\r\n                \"sha256:d5da73735293558eb1651ee2fddc4d0dedcfa06538b8813a2e20011583c9e49b\"\r\n            ],\r\n            \"version\": \"==0.14.1\"\r\n        }\r\n    },\r\n    \"develop\": {}\r\n}\r\n```\r\nMy hosts file is the default one that installs with OSX:\r\n```\r\n##\r\n# Host Database\r\n#\r\n# localhost is used to configure the loopback interface\r\n# when the system is booting.  Do not change this entry.\r\n##\r\n127.0.0.1\tlocalhost\r\n255.255.255.255\tbroadcasthost\r\n::1             localhost\r\n```\r\n\r\nI previously didn't have this issue, but I recently re-installed OSX and now I do.\r\nMy workmate does not have this issue on his machine either when running the same application."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/390036260",
            "html_url": "https://github.com/pallets/flask/issues/2106#issuecomment-390036260",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2106",
            "id": 390036260,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDAzNjI2MA==",
            "user": {
                "login": "anotheredward",
                "id": 228527,
                "node_id": "MDQ6VXNlcjIyODUyNw==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/228527?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/anotheredward",
                "html_url": "https://github.com/anotheredward",
                "followers_url": "https://api.github.com/users/anotheredward/followers",
                "following_url": "https://api.github.com/users/anotheredward/following{/other_user}",
                "gists_url": "https://api.github.com/users/anotheredward/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/anotheredward/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/anotheredward/subscriptions",
                "organizations_url": "https://api.github.com/users/anotheredward/orgs",
                "repos_url": "https://api.github.com/users/anotheredward/repos",
                "events_url": "https://api.github.com/users/anotheredward/events{/privacy}",
                "received_events_url": "https://api.github.com/users/anotheredward/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-17T22:41:19Z",
            "updated_at": "2018-05-17T22:41:19Z",
            "author_association": "NONE",
            "body": "@brmzkw Could you please tell me how you got the \"server logs\" in your error reports? That's something I'd like to look at on my machine as well :)"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/390588538",
            "html_url": "https://github.com/pallets/flask/issues/2106#issuecomment-390588538",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2106",
            "id": 390588538,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDU4ODUzOA==",
            "user": {
                "login": "brmzkw",
                "id": 795841,
                "node_id": "MDQ6VXNlcjc5NTg0MQ==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/795841?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/brmzkw",
                "html_url": "https://github.com/brmzkw",
                "followers_url": "https://api.github.com/users/brmzkw/followers",
                "following_url": "https://api.github.com/users/brmzkw/following{/other_user}",
                "gists_url": "https://api.github.com/users/brmzkw/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/brmzkw/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/brmzkw/subscriptions",
                "organizations_url": "https://api.github.com/users/brmzkw/orgs",
                "repos_url": "https://api.github.com/users/brmzkw/repos",
                "events_url": "https://api.github.com/users/brmzkw/events{/privacy}",
                "received_events_url": "https://api.github.com/users/brmzkw/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-21T08:28:40Z",
            "updated_at": "2018-05-21T08:28:40Z",
            "author_association": "NONE",
            "body": "Yep. Run a docker container:\r\n\r\n```\r\n$> mkdir -p /tmp/test\r\n$> cd /tmp/test\r\n$> docker run -v `pwd`:/app -w /app --name test --rm -ti python:2.7 bash\r\n# pip install flask\r\n# apt-get update && apt-get install -y curl\r\n```\r\n\r\nOn the host, add the file test.py in `/tmp/test`:\r\n\r\n```\r\n$> cat<<EOF > /tmp/test/test.py\r\nfrom flask import Flask\r\n\r\napp = Flask(__name__)\r\n\r\n@app.route('/')\r\ndef hello_world():\r\n    return 'Hello, World!'\r\nEOF\r\n```\r\n\r\nFrom the container, launch flask:\r\n\r\n```\r\n# FLASK_APP=test.py flask run\r\n```\r\n\r\nFrom another shell, make a query:\r\n\r\n```\r\n# docker exec -ti test bash\r\n# curl localhost:5000 -H \"Host: '`python -c 'print \\\"\\xbf\\\"'`\" -i\r\nHTTP/1.0 500 INTERNAL SERVER ERROR\r\nContent-Type: text/html\r\nContent-Length: 291\r\nServer: Werkzeug/0.14.1 Python/2.7.15\r\nDate: Mon, 21 May 2018 08:28:10 GMT\r\n\r\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 3.2 Final//EN\">\r\n<title>500 Internal Server Error</title>\r\n<h1>Internal Server Error</h1>\r\n<p>The server encountered an internal error and was unable to complete your request.  Either the server is overloaded or there is an error in the application.</p>\r\n```\r\n\r\nResult from the first terminal, running flask:\r\n\r\n```\r\n# FLASK_APP=test.py flask run\r\n * Serving Flask app \"test.py\"\r\n * Environment: production\r\n   WARNING: Do not use the development server in a production environment.\r\n   Use a production WSGI server instead.\r\n * Debug mode: off\r\n * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)\r\n127.0.0.1 - - [21/May/2018 08:27:34] \"GET / HTTP/1.1\" 500 -\r\nError on request:\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python2.7/site-packages/werkzeug/serving.py\", line 270, in run_wsgi\r\n    execute(self.server.app)\r\n  File \"/usr/local/lib/python2.7/site-packages/werkzeug/serving.py\", line 258, in execute\r\n    application_iter = app(environ, start_response)\r\n  File \"/usr/local/lib/python2.7/site-packages/flask/app.py\", line 2309, in __call__\r\n    return self.wsgi_app(environ, start_response)\r\n  File \"/usr/local/lib/python2.7/site-packages/flask/app.py\", line 2287, in wsgi_app\r\n    ctx = self.request_context(environ)\r\n  File \"/usr/local/lib/python2.7/site-packages/flask/app.py\", line 2204, in request_context\r\n    return RequestContext(self, environ)\r\n  File \"/usr/local/lib/python2.7/site-packages/flask/ctx.py\", line 284, in __init__\r\n    self.url_adapter = app.create_url_adapter(self.request)\r\n  File \"/usr/local/lib/python2.7/site-packages/flask/app.py\", line 2021, in create_url_adapter\r\n    subdomain=subdomain)\r\n  File \"/usr/local/lib/python2.7/site-packages/werkzeug/routing.py\", line 1345, in bind_to_environ\r\n    query_args=query_args)\r\n  File \"/usr/local/lib/python2.7/site-packages/werkzeug/routing.py\", line 1257, in bind\r\n    raise BadHost()\r\nBadHost: 400 Bad Request: The browser (or proxy) sent a request that this server could not understand.\r\n```"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/390819620",
            "html_url": "https://github.com/pallets/flask/issues/2106#issuecomment-390819620",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2106",
            "id": 390819620,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5MDgxOTYyMA==",
            "user": {
                "login": "anotheredward",
                "id": 228527,
                "node_id": "MDQ6VXNlcjIyODUyNw==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/228527?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/anotheredward",
                "html_url": "https://github.com/anotheredward",
                "followers_url": "https://api.github.com/users/anotheredward/followers",
                "following_url": "https://api.github.com/users/anotheredward/following{/other_user}",
                "gists_url": "https://api.github.com/users/anotheredward/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/anotheredward/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/anotheredward/subscriptions",
                "organizations_url": "https://api.github.com/users/anotheredward/orgs",
                "repos_url": "https://api.github.com/users/anotheredward/repos",
                "events_url": "https://api.github.com/users/anotheredward/events{/privacy}",
                "received_events_url": "https://api.github.com/users/anotheredward/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-21T23:52:30Z",
            "updated_at": "2018-05-21T23:53:25Z",
            "author_association": "NONE",
            "body": "Thanks @brmzkw .\r\n\r\nI've run the above steps and can confirm that I'm seeing the error now.\r\n\r\nI'm still not sure why I didn't see this Error output on my local machine, I'm guessing I configured something incorrectly. Maybe because I had debug mode enabled? But I also didn't get anything useful in the browser window either :(.\r\n\r\n```\r\ncurl localhost:5000 -H \"Host: '`python -c 'print \\\"\\xbf\\\"'`\" -i\r\nHTTP/1.0 500 INTERNAL SERVER ERROR\r\nContent-Type: text/html\r\nContent-Length: 291\r\nServer: Werkzeug/0.14.1 Python/2.7.15\r\nDate: Mon, 21 May 2018 23:50:48 GMT\r\n\r\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 3.2 Final//EN\">\r\n<title>500 Internal Server Error</title>\r\n<h1>Internal Server Error</h1>\r\n<p>The server encountered an internal error and was unable to complete your request.  Either the server is overloaded or there is an error in the application.</p>\r\nroot@cfde202723a5:/app# \r\n```\r\n\r\n```\r\n# FLASK_APP=test.py flask run\r\n * Serving Flask app \"test.py\"\r\n * Environment: production\r\n   WARNING: Do not use the development server in a production environment.\r\n   Use a production WSGI server instead.\r\n * Debug mode: off\r\n * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)\r\n127.0.0.1 - - [21/May/2018 23:50:48] \"GET / HTTP/1.1\" 500 -\r\nError on request:\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python2.7/site-packages/werkzeug/serving.py\", line 270, in run_wsgi\r\n    execute(self.server.app)\r\n  File \"/usr/local/lib/python2.7/site-packages/werkzeug/serving.py\", line 258, in execute\r\n    application_iter = app(environ, start_response)\r\n  File \"/usr/local/lib/python2.7/site-packages/flask/app.py\", line 2309, in __call__\r\n    return self.wsgi_app(environ, start_response)\r\n  File \"/usr/local/lib/python2.7/site-packages/flask/app.py\", line 2287, in wsgi_app\r\n    ctx = self.request_context(environ)\r\n  File \"/usr/local/lib/python2.7/site-packages/flask/app.py\", line 2204, in request_context\r\n    return RequestContext(self, environ)\r\n  File \"/usr/local/lib/python2.7/site-packages/flask/ctx.py\", line 284, in __init__\r\n    self.url_adapter = app.create_url_adapter(self.request)\r\n  File \"/usr/local/lib/python2.7/site-packages/flask/app.py\", line 2021, in create_url_adapter\r\n    subdomain=subdomain)\r\n  File \"/usr/local/lib/python2.7/site-packages/werkzeug/routing.py\", line 1345, in bind_to_environ\r\n    query_args=query_args)\r\n  File \"/usr/local/lib/python2.7/site-packages/werkzeug/routing.py\", line 1257, in bind\r\n    raise BadHost()\r\nBadHost: 400 Bad Request: The browser (or proxy) sent a request that this server could not understand.\r\n```"
        }
    ]
}