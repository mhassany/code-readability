{
    "url": "https://api.github.com/repos/pallets/flask/issues/169",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/169/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/169/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/169/events",
    "html_url": "https://github.com/pallets/flask/issues/169",
    "id": 598755,
    "node_id": "MDU6SXNzdWU1OTg3NTU=",
    "number": 169,
    "title": "trailing slash redirect doesn't work for route('/')",
    "user": {
        "login": "foresto",
        "id": 322134,
        "node_id": "MDQ6VXNlcjMyMjEzNA==",
        "avatar_url": "https://avatars1.githubusercontent.com/u/322134?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/foresto",
        "html_url": "https://github.com/foresto",
        "followers_url": "https://api.github.com/users/foresto/followers",
        "following_url": "https://api.github.com/users/foresto/following{/other_user}",
        "gists_url": "https://api.github.com/users/foresto/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/foresto/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/foresto/subscriptions",
        "organizations_url": "https://api.github.com/users/foresto/orgs",
        "repos_url": "https://api.github.com/users/foresto/repos",
        "events_url": "https://api.github.com/users/foresto/events{/privacy}",
        "received_events_url": "https://api.github.com/users/foresto/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 8,
    "created_at": "2011-02-14T21:32:16Z",
    "updated_at": "2014-10-19T18:38:07Z",
    "closed_at": "2014-10-19T18:38:07Z",
    "author_association": "NONE",
    "body": "Flask's automatic redirects to add a trailing slash don't appear to work for the root view.  This isn't noticeable when the application is mounted at the root of a domain, but mine is mounted in a subdirectory using mod-wsgi:\n\nWSGIScriptAlias /myapp /path/to/myapp/modwsgi/stub.py\n\nThe result is that when someone visits http://mysite/myapp, none of the application's relative urls work.  (This is expected if the trailing slash is missing, because a relative url like static/image.png means something different depending on whether the current page is http://foo/bar or http://foo/bar/)\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/878950",
            "html_url": "https://github.com/pallets/flask/issues/169#issuecomment-878950",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/169",
            "id": 878950,
            "node_id": "MDEyOklzc3VlQ29tbWVudDg3ODk1MA==",
            "user": {
                "login": "csand",
                "id": 142865,
                "node_id": "MDQ6VXNlcjE0Mjg2NQ==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/142865?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/csand",
                "html_url": "https://github.com/csand",
                "followers_url": "https://api.github.com/users/csand/followers",
                "following_url": "https://api.github.com/users/csand/following{/other_user}",
                "gists_url": "https://api.github.com/users/csand/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/csand/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/csand/subscriptions",
                "organizations_url": "https://api.github.com/users/csand/orgs",
                "repos_url": "https://api.github.com/users/csand/repos",
                "events_url": "https://api.github.com/users/csand/events{/privacy}",
                "received_events_url": "https://api.github.com/users/csand/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2011-03-16T02:15:02Z",
            "updated_at": "2011-03-16T02:15:02Z",
            "author_association": "CONTRIBUTOR",
            "body": "Seems like it'd be an underlying error in <code>werkzeug.routing</code>.\n\nChanging it to\n\n```\nWSGIScriptAlias /myapp/ /path/to/myapp/modwsgi/stub.py\n```\n\nshould fix the error. The URL that should be getting passed to the routing mechanisms is '', I'll see about doing the redirect for that to '/' if '/' is defined.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/879002",
            "html_url": "https://github.com/pallets/flask/issues/169#issuecomment-879002",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/169",
            "id": 879002,
            "node_id": "MDEyOklzc3VlQ29tbWVudDg3OTAwMg==",
            "user": {
                "login": "csand",
                "id": 142865,
                "node_id": "MDQ6VXNlcjE0Mjg2NQ==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/142865?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/csand",
                "html_url": "https://github.com/csand",
                "followers_url": "https://api.github.com/users/csand/followers",
                "following_url": "https://api.github.com/users/csand/following{/other_user}",
                "gists_url": "https://api.github.com/users/csand/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/csand/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/csand/subscriptions",
                "organizations_url": "https://api.github.com/users/csand/orgs",
                "repos_url": "https://api.github.com/users/csand/repos",
                "events_url": "https://api.github.com/users/csand/events{/privacy}",
                "received_events_url": "https://api.github.com/users/csand/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2011-03-16T02:48:34Z",
            "updated_at": "2011-03-16T02:48:34Z",
            "author_association": "CONTRIBUTOR",
            "body": "Based of running the basic routing tests of werkzeug with a script_name set to '', and seeing them pass successfully, my best guess is this isn't an error in werkzeug, and therefore (probably) not an issue in flask, and this issue should be closed.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/879161",
            "html_url": "https://github.com/pallets/flask/issues/169#issuecomment-879161",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/169",
            "id": 879161,
            "node_id": "MDEyOklzc3VlQ29tbWVudDg3OTE2MQ==",
            "user": {
                "login": "foresto",
                "id": 322134,
                "node_id": "MDQ6VXNlcjMyMjEzNA==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/322134?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/foresto",
                "html_url": "https://github.com/foresto",
                "followers_url": "https://api.github.com/users/foresto/followers",
                "following_url": "https://api.github.com/users/foresto/following{/other_user}",
                "gists_url": "https://api.github.com/users/foresto/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/foresto/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/foresto/subscriptions",
                "organizations_url": "https://api.github.com/users/foresto/orgs",
                "repos_url": "https://api.github.com/users/foresto/repos",
                "events_url": "https://api.github.com/users/foresto/events{/privacy}",
                "received_events_url": "https://api.github.com/users/foresto/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2011-03-16T04:10:40Z",
            "updated_at": "2011-03-16T04:13:50Z",
            "author_association": "NONE",
            "body": "coarsesand, you don't seem to understand the problem.\n\nWith your first suggestion, apache won't even recognize /myapp as a valid path.  A request will never reach mod_wsgi/werkzeug/flask that way, let alone allow flask to initiate a redirect to add the trailing slash.\n\nYour second suggestion regarding a SCRIPT_NAME of '' doesn't apply.  This bug report concerns mounting the application in a subdirectory.  In other words, installations where SCRIPT_NAME is never an empty string.\nhttp://www.python.org/dev/peps/pep-0333/\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/1059191",
            "html_url": "https://github.com/pallets/flask/issues/169#issuecomment-1059191",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/169",
            "id": 1059191,
            "node_id": "MDEyOklzc3VlQ29tbWVudDEwNTkxOTE=",
            "user": {
                "login": "oscherler",
                "id": 189712,
                "node_id": "MDQ6VXNlcjE4OTcxMg==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/189712?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/oscherler",
                "html_url": "https://github.com/oscherler",
                "followers_url": "https://api.github.com/users/oscherler/followers",
                "following_url": "https://api.github.com/users/oscherler/following{/other_user}",
                "gists_url": "https://api.github.com/users/oscherler/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/oscherler/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/oscherler/subscriptions",
                "organizations_url": "https://api.github.com/users/oscherler/orgs",
                "repos_url": "https://api.github.com/users/oscherler/repos",
                "events_url": "https://api.github.com/users/oscherler/events{/privacy}",
                "received_events_url": "https://api.github.com/users/oscherler/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2011-04-26T16:35:41Z",
            "updated_at": "2011-04-26T16:35:41Z",
            "author_association": "NONE",
            "body": "I have the same problem by mounting an application with Werkzeug\u2019s `DispatcherMiddleware`, and no idea how to fix this. Extremely annoying.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/1389617",
            "html_url": "https://github.com/pallets/flask/issues/169#issuecomment-1389617",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/169",
            "id": 1389617,
            "node_id": "MDEyOklzc3VlQ29tbWVudDEzODk2MTc=",
            "user": {
                "login": "ddunbar",
                "id": 106625,
                "node_id": "MDQ6VXNlcjEwNjYyNQ==",
                "avatar_url": "https://avatars3.githubusercontent.com/u/106625?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ddunbar",
                "html_url": "https://github.com/ddunbar",
                "followers_url": "https://api.github.com/users/ddunbar/followers",
                "following_url": "https://api.github.com/users/ddunbar/following{/other_user}",
                "gists_url": "https://api.github.com/users/ddunbar/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ddunbar/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ddunbar/subscriptions",
                "organizations_url": "https://api.github.com/users/ddunbar/orgs",
                "repos_url": "https://api.github.com/users/ddunbar/repos",
                "events_url": "https://api.github.com/users/ddunbar/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ddunbar/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2011-06-17T17:29:43Z",
            "updated_at": "2011-06-17T17:29:43Z",
            "author_association": "NONE",
            "body": "I'm sure this isn't at all the right fix, but I worked around this in my app using the following middleware:\n\n``` python\nclass RootSlashPatchMiddleware(object):\n    def __init__(self, app):\n        self.app = app\n\n    def __call__(self, environ, start_response):\n        if environ['PATH_INFO'] == '':\n            return flask.redirect(environ['SCRIPT_NAME'] + '/')(\n                environ, start_response)\n        return self.app(environ, start_response)\n```\n\nand then dropping it in with:\n\n``` python\nclass App(flask.Flask):\n...\n        # Inject a fix for missing slashes on the root URL (see Flask issue\n        # #169).\n        self.wsgi_app = RootSlashPatchMiddleware(self.wsgi_app)\n...\n```\n\nSeems like something Flask shouldn't make \"just work\" though.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/1389701",
            "html_url": "https://github.com/pallets/flask/issues/169#issuecomment-1389701",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/169",
            "id": 1389701,
            "node_id": "MDEyOklzc3VlQ29tbWVudDEzODk3MDE=",
            "user": {
                "login": "oscherler",
                "id": 189712,
                "node_id": "MDQ6VXNlcjE4OTcxMg==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/189712?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/oscherler",
                "html_url": "https://github.com/oscherler",
                "followers_url": "https://api.github.com/users/oscherler/followers",
                "following_url": "https://api.github.com/users/oscherler/following{/other_user}",
                "gists_url": "https://api.github.com/users/oscherler/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/oscherler/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/oscherler/subscriptions",
                "organizations_url": "https://api.github.com/users/oscherler/orgs",
                "repos_url": "https://api.github.com/users/oscherler/repos",
                "events_url": "https://api.github.com/users/oscherler/events{/privacy}",
                "received_events_url": "https://api.github.com/users/oscherler/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2011-06-17T17:41:17Z",
            "updated_at": "2011-06-17T17:41:17Z",
            "author_association": "NONE",
            "body": "Ha ha, here\u2019s what I ended up doing (my problem was a little bit different I believe):\n\n``` python\nfrom werkzeug.wsgi import DispatcherMiddleware\n\nclass FixedDispatcherMiddleware( DispatcherMiddleware ):\n    def __call__( self, environ, start_response ):\n        from werkzeug.utils import append_slash_redirect\n\n        script = environ.get( 'PATH_INFO', '' )\n        has_slash = ( script[-1:] == '/' )\n\n        if script in self.mounts and not has_slash:\n            app = append_slash_redirect( environ )\n            return app( environ, start_response )\n\n        return super( FixedDispatcherMiddleware, self ).__call__( environ, start_response )\n```\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/36212235",
            "html_url": "https://github.com/pallets/flask/issues/169#issuecomment-36212235",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/169",
            "id": 36212235,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjEyMjM1",
            "user": {
                "login": "hamx0r",
                "id": 423974,
                "node_id": "MDQ6VXNlcjQyMzk3NA==",
                "avatar_url": "https://avatars3.githubusercontent.com/u/423974?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/hamx0r",
                "html_url": "https://github.com/hamx0r",
                "followers_url": "https://api.github.com/users/hamx0r/followers",
                "following_url": "https://api.github.com/users/hamx0r/following{/other_user}",
                "gists_url": "https://api.github.com/users/hamx0r/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/hamx0r/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/hamx0r/subscriptions",
                "organizations_url": "https://api.github.com/users/hamx0r/orgs",
                "repos_url": "https://api.github.com/users/hamx0r/repos",
                "events_url": "https://api.github.com/users/hamx0r/events{/privacy}",
                "received_events_url": "https://api.github.com/users/hamx0r/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-02-27T05:43:16Z",
            "updated_at": "2014-02-27T05:43:32Z",
            "author_association": "NONE",
            "body": "I may be missing something, but i see there's a (much easier) fix.  These lines of code simply check the \"/\" URL to make sure it truly ends with a \"/\", and redirects to itself with an appended \"/\" if not.  This makes flask code subdirectory-proof while allowing for migration to the root of another subdomain without any code changes:\n\n`````` python\n# Here's the decorator for the root of our app, be it subdirectory or not\n@app.route('/')\ndef rootApp():\n    # Check if the URL ends with a slash.  Append one if not.\n    # ie www.mydomain.com/mysubdirecotory/myapp redirects to: \n    # www.mydomain.com/mysubdirecotory/myapp/\n    if request.url[-1] != '/':\n        return redirect(request.url + '/')\n    # Now that we're guaranteed a trailing slash for our app root, it's business as usual!\n    return <put your other return code here>```\n``````\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/59659766",
            "html_url": "https://github.com/pallets/flask/issues/169#issuecomment-59659766",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/169",
            "id": 59659766,
            "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjU5NzY2",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-10-19T18:38:07Z",
            "updated_at": "2014-10-19T18:38:07Z",
            "author_association": "MEMBER",
            "body": "I think this is a duplicate of https://github.com/mitsuhiko/werkzeug/issues/360\n"
        }
    ]
}