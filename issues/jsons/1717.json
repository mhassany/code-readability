{
    "url": "https://api.github.com/repos/pallets/flask/issues/1717",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1717/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1717/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1717/events",
    "html_url": "https://github.com/pallets/flask/issues/1717",
    "id": 131289416,
    "node_id": "MDU6SXNzdWUxMzEyODk0MTY=",
    "number": 1717,
    "title": "nginx upstream check, but the access log is wrong.",
    "user": {
        "login": "staugur",
        "id": 10270930,
        "node_id": "MDQ6VXNlcjEwMjcwOTMw",
        "avatar_url": "https://avatars2.githubusercontent.com/u/10270930?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/staugur",
        "html_url": "https://github.com/staugur",
        "followers_url": "https://api.github.com/users/staugur/followers",
        "following_url": "https://api.github.com/users/staugur/following{/other_user}",
        "gists_url": "https://api.github.com/users/staugur/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/staugur/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/staugur/subscriptions",
        "organizations_url": "https://api.github.com/users/staugur/orgs",
        "repos_url": "https://api.github.com/users/staugur/repos",
        "events_url": "https://api.github.com/users/staugur/events{/privacy}",
        "received_events_url": "https://api.github.com/users/staugur/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 7,
    "created_at": "2016-02-04T09:29:58Z",
    "updated_at": "2016-02-04T09:49:14Z",
    "closed_at": "2016-02-04T09:49:14Z",
    "author_association": "NONE",
    "body": "**Some version information**\n\n```\n1. Tengine version: Tengine/2.1.2 (nginx/1.6.2)\n2.CentOS6.7  python2.6\n3.Flask Version: 0.10.1\n```\n\n**Nginx configuration file content:**\n\n```\n    upstream weibo {\n        ip_hash;\n        server 127.0.0.1:7076;\n        check interval=3000 rise=2 fall=5 timeout=1000 type=http;\n        #check_http_expect_alive http_2xx http_3xx ;\n        check_http_send \"GET / HTTP/1.0\\r\\n\\r\\n\";\n    }\n    server {\n        listen 80;\n        client_max_body_size 50M;\n        server_name weibo.saintic.com;\n        location / {\n            proxy_pass_header Server;\n            proxy_set_header Host $http_host;\n            proxy_redirect off;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Scheme $scheme;\n            proxy_pass http://weibo;\n        }\n        location /nstatus {\n           check_status;\n           access_log off;\n        }\n    }\n```\n\n**My flask app(https://github.com/saintic/ULR/blob/master/ulr.py)**\n\n**Access log error:**\n\n```\n127.0.0.1 - - [04/Feb/2016 17:24:54] \"GET / HTTP/1.0\" 302 -\nTraceback (most recent call last):\n  File \"/usr/lib64/python2.6/SocketServer.py\", line 293, in _handle_request_noblock\n    self.process_request(request, client_address)\n  File \"/usr/lib64/python2.6/SocketServer.py\", line 319, in process_request\n    self.finish_request(request, client_address)\n  File \"/usr/lib64/python2.6/SocketServer.py\", line 332, in finish_request\n    self.RequestHandlerClass(request, client_address, self)\n  File \"/usr/lib64/python2.6/SocketServer.py\", line 628, in __init__\n    self.finish()\n  File \"/usr/lib64/python2.6/SocketServer.py\", line 671, in finish\n    self.wfile.flush()\n  File \"/usr/lib64/python2.6/socket.py\", line 303, in flush\n    self._sock.sendall(buffer(data, write_offset, buffer_size))\nerror: [Errno 32] Broken pipe\n```\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/179730522",
            "html_url": "https://github.com/pallets/flask/issues/1717#issuecomment-179730522",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1717",
            "id": 179730522,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE3OTczMDUyMg==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-02-04T09:31:04Z",
            "updated_at": "2016-02-04T09:31:04Z",
            "author_association": "MEMBER",
            "body": "You are not supposed to use the dev server (`app.run()`) in production.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/179733380",
            "html_url": "https://github.com/pallets/flask/issues/1717#issuecomment-179733380",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1717",
            "id": 179733380,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE3OTczMzM4MA==",
            "user": {
                "login": "staugur",
                "id": 10270930,
                "node_id": "MDQ6VXNlcjEwMjcwOTMw",
                "avatar_url": "https://avatars2.githubusercontent.com/u/10270930?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/staugur",
                "html_url": "https://github.com/staugur",
                "followers_url": "https://api.github.com/users/staugur/followers",
                "following_url": "https://api.github.com/users/staugur/following{/other_user}",
                "gists_url": "https://api.github.com/users/staugur/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/staugur/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/staugur/subscriptions",
                "organizations_url": "https://api.github.com/users/staugur/orgs",
                "repos_url": "https://api.github.com/users/staugur/repos",
                "events_url": "https://api.github.com/users/staugur/events{/privacy}",
                "received_events_url": "https://api.github.com/users/staugur/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-02-04T09:38:02Z",
            "updated_at": "2016-02-04T09:38:02Z",
            "author_association": "NONE",
            "body": "This method(app.run()) is only used in the development of the environment?\n\nProduction environment must be deployed in the following ways?\nhttp://www.pythondoc.com/flask/deploying/index.html\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/179733501",
            "html_url": "https://github.com/pallets/flask/issues/1717#issuecomment-179733501",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1717",
            "id": 179733501,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE3OTczMzUwMQ==",
            "user": {
                "login": "staugur",
                "id": 10270930,
                "node_id": "MDQ6VXNlcjEwMjcwOTMw",
                "avatar_url": "https://avatars2.githubusercontent.com/u/10270930?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/staugur",
                "html_url": "https://github.com/staugur",
                "followers_url": "https://api.github.com/users/staugur/followers",
                "following_url": "https://api.github.com/users/staugur/following{/other_user}",
                "gists_url": "https://api.github.com/users/staugur/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/staugur/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/staugur/subscriptions",
                "organizations_url": "https://api.github.com/users/staugur/orgs",
                "repos_url": "https://api.github.com/users/staugur/repos",
                "events_url": "https://api.github.com/users/staugur/events{/privacy}",
                "received_events_url": "https://api.github.com/users/staugur/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-02-04T09:38:37Z",
            "updated_at": "2016-02-04T09:38:37Z",
            "author_association": "NONE",
            "body": "sorry, the url is http://flask.pocoo.org/docs/0.10/deploying/\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/179733691",
            "html_url": "https://github.com/pallets/flask/issues/1717#issuecomment-179733691",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1717",
            "id": 179733691,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE3OTczMzY5MQ==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-02-04T09:39:33Z",
            "updated_at": "2016-02-04T09:39:33Z",
            "author_association": "MEMBER",
            "body": "so what is the actual problem? the \"broken pipe\"? it just means that the client closed the connection early\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/179735213",
            "html_url": "https://github.com/pallets/flask/issues/1717#issuecomment-179735213",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1717",
            "id": 179735213,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE3OTczNTIxMw==",
            "user": {
                "login": "staugur",
                "id": 10270930,
                "node_id": "MDQ6VXNlcjEwMjcwOTMw",
                "avatar_url": "https://avatars2.githubusercontent.com/u/10270930?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/staugur",
                "html_url": "https://github.com/staugur",
                "followers_url": "https://api.github.com/users/staugur/followers",
                "following_url": "https://api.github.com/users/staugur/following{/other_user}",
                "gists_url": "https://api.github.com/users/staugur/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/staugur/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/staugur/subscriptions",
                "organizations_url": "https://api.github.com/users/staugur/orgs",
                "repos_url": "https://api.github.com/users/staugur/repos",
                "events_url": "https://api.github.com/users/staugur/events{/privacy}",
                "received_events_url": "https://api.github.com/users/staugur/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-02-04T09:43:40Z",
            "updated_at": "2016-02-04T09:43:40Z",
            "author_association": "NONE",
            "body": "What an embarrassing question!\nI will check the solution from Google.Just don't want it to appear.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/179735407",
            "html_url": "https://github.com/pallets/flask/issues/1717#issuecomment-179735407",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1717",
            "id": 179735407,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE3OTczNTQwNw==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-02-04T09:44:35Z",
            "updated_at": "2016-02-04T09:44:35Z",
            "author_association": "MEMBER",
            "body": "It's the dev server, you can simply ignore the exception\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/179736806",
            "html_url": "https://github.com/pallets/flask/issues/1717#issuecomment-179736806",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1717",
            "id": 179736806,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE3OTczNjgwNg==",
            "user": {
                "login": "staugur",
                "id": 10270930,
                "node_id": "MDQ6VXNlcjEwMjcwOTMw",
                "avatar_url": "https://avatars2.githubusercontent.com/u/10270930?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/staugur",
                "html_url": "https://github.com/staugur",
                "followers_url": "https://api.github.com/users/staugur/followers",
                "following_url": "https://api.github.com/users/staugur/following{/other_user}",
                "gists_url": "https://api.github.com/users/staugur/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/staugur/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/staugur/subscriptions",
                "organizations_url": "https://api.github.com/users/staugur/orgs",
                "repos_url": "https://api.github.com/users/staugur/repos",
                "events_url": "https://api.github.com/users/staugur/events{/privacy}",
                "received_events_url": "https://api.github.com/users/staugur/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-02-04T09:49:07Z",
            "updated_at": "2016-02-04T09:49:07Z",
            "author_association": "NONE",
            "body": "Thank you very much\uff01\n"
        }
    ]
}