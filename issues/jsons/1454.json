{
    "url": "https://api.github.com/repos/pallets/flask/issues/1454",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1454/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1454/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1454/events",
    "html_url": "https://github.com/pallets/flask/issues/1454",
    "id": 73649758,
    "node_id": "MDU6SXNzdWU3MzY0OTc1OA==",
    "number": 1454,
    "title": "test_client fails for url with \"%2F\"",
    "user": {
        "login": "cthrax",
        "id": 102173,
        "node_id": "MDQ6VXNlcjEwMjE3Mw==",
        "avatar_url": "https://avatars0.githubusercontent.com/u/102173?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/cthrax",
        "html_url": "https://github.com/cthrax",
        "followers_url": "https://api.github.com/users/cthrax/followers",
        "following_url": "https://api.github.com/users/cthrax/following{/other_user}",
        "gists_url": "https://api.github.com/users/cthrax/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/cthrax/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/cthrax/subscriptions",
        "organizations_url": "https://api.github.com/users/cthrax/orgs",
        "repos_url": "https://api.github.com/users/cthrax/repos",
        "events_url": "https://api.github.com/users/cthrax/events{/privacy}",
        "received_events_url": "https://api.github.com/users/cthrax/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2015-05-06T15:05:14Z",
    "updated_at": "2015-09-03T08:58:28Z",
    "closed_at": "2015-05-11T13:59:29Z",
    "author_association": "NONE",
    "body": "I'm working with a parameterized url such as:\n\n``` python\n\"/api/<string:apiToken>\"\n```\n\nWhen I send this token containing \"%2F\" the url encoded form of \"/\" I get a 404 from the test client. However, the running app works fine.\n\nI'm using Flask 0.10.1 and a minimal test example looks like the following:\n\n``` python\nimport unittest\nimport flask\nclass TestTestClient(unittest.TestCase):\n    def test_url(self):\n        app = flask.Flask(__name__)\n        @app.route('/<string:parameter>')\n        def hello_world(parameter):\n            return parameter\n\n        test_client = app.test_client()\n\n        response = test_client.get(\"/FOO\")\n        self.assertEqual(response.status_code, 200)  # Passes\n        self.assertEqual(response.data, \"FOO\")  # Passes\n\n        response = test_client.get(\"/%%2F\")\n        self.assertEqual(response.status_code, 200) # Fails with 404\n```\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/100661280",
            "html_url": "https://github.com/pallets/flask/issues/1454#issuecomment-100661280",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1454",
            "id": 100661280,
            "node_id": "MDEyOklzc3VlQ29tbWVudDEwMDY2MTI4MA==",
            "user": {
                "login": "indriesergiu",
                "id": 1252398,
                "node_id": "MDQ6VXNlcjEyNTIzOTg=",
                "avatar_url": "https://avatars0.githubusercontent.com/u/1252398?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/indriesergiu",
                "html_url": "https://github.com/indriesergiu",
                "followers_url": "https://api.github.com/users/indriesergiu/followers",
                "following_url": "https://api.github.com/users/indriesergiu/following{/other_user}",
                "gists_url": "https://api.github.com/users/indriesergiu/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/indriesergiu/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/indriesergiu/subscriptions",
                "organizations_url": "https://api.github.com/users/indriesergiu/orgs",
                "repos_url": "https://api.github.com/users/indriesergiu/repos",
                "events_url": "https://api.github.com/users/indriesergiu/events{/privacy}",
                "received_events_url": "https://api.github.com/users/indriesergiu/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-05-10T16:12:10Z",
            "updated_at": "2015-05-10T16:12:10Z",
            "author_association": "NONE",
            "body": "I've used the route you described and found the following:\n- http://127.0.0.1:5000%2F - does work (no text is output and no 404 is thrown)\n- http://127.0.0.1:5000%2Ftest - doesn't seem to work (\"test\" is not output and no 404 is thrown)\n\nI don't know if this is expected behaviour but seeing as though the app doesn't work with encoded URLs maybe the test_client isn't supposed to either.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/100917207",
            "html_url": "https://github.com/pallets/flask/issues/1454#issuecomment-100917207",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1454",
            "id": 100917207,
            "node_id": "MDEyOklzc3VlQ29tbWVudDEwMDkxNzIwNw==",
            "user": {
                "login": "cthrax",
                "id": 102173,
                "node_id": "MDQ6VXNlcjEwMjE3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/102173?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/cthrax",
                "html_url": "https://github.com/cthrax",
                "followers_url": "https://api.github.com/users/cthrax/followers",
                "following_url": "https://api.github.com/users/cthrax/following{/other_user}",
                "gists_url": "https://api.github.com/users/cthrax/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/cthrax/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cthrax/subscriptions",
                "organizations_url": "https://api.github.com/users/cthrax/orgs",
                "repos_url": "https://api.github.com/users/cthrax/repos",
                "events_url": "https://api.github.com/users/cthrax/events{/privacy}",
                "received_events_url": "https://api.github.com/users/cthrax/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-05-11T13:59:29Z",
            "updated_at": "2015-05-11T13:59:29Z",
            "author_association": "NONE",
            "body": "Interesting, I reran some of the things I was doing and I think I was just getting lucky. I would have \"http://127.0.0.1:5000/%2Ffoo\" which would work fine in. Since my \"foo\" strings were random, I didn't notice that trend.\n\nThanks for the help!\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/137383748",
            "html_url": "https://github.com/pallets/flask/issues/1454#issuecomment-137383748",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1454",
            "id": 137383748,
            "node_id": "MDEyOklzc3VlQ29tbWVudDEzNzM4Mzc0OA==",
            "user": {
                "login": "mandarvaze",
                "id": 46438,
                "node_id": "MDQ6VXNlcjQ2NDM4",
                "avatar_url": "https://avatars1.githubusercontent.com/u/46438?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mandarvaze",
                "html_url": "https://github.com/mandarvaze",
                "followers_url": "https://api.github.com/users/mandarvaze/followers",
                "following_url": "https://api.github.com/users/mandarvaze/following{/other_user}",
                "gists_url": "https://api.github.com/users/mandarvaze/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mandarvaze/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mandarvaze/subscriptions",
                "organizations_url": "https://api.github.com/users/mandarvaze/orgs",
                "repos_url": "https://api.github.com/users/mandarvaze/repos",
                "events_url": "https://api.github.com/users/mandarvaze/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mandarvaze/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-09-03T08:58:28Z",
            "updated_at": "2015-09-03T08:58:28Z",
            "author_association": "NONE",
            "body": "I may also be facing similar problem.\nSimilar, not exactly same, cause my URL itself doesn't contain the token. The token is part of the header.\nBut considering the \"randomness\", I think I have same issue.\nWhen I use `requests` library, there are no errors, since it is actually talks to the server.\nThe problem is seen only when using test_client.\n\nFor at least one URL, token is not needed, yet I get 404 randomly.\nIf I run the tests **back to back** multiple times, I get combination of 200/201 (for `GET` and `POST` respectively) and 404 for the same URL\n"
        }
    ]
}