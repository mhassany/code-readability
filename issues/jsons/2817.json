{
    "url": "https://api.github.com/repos/pallets/flask/issues/2817",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2817/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2817/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2817/events",
    "html_url": "https://github.com/pallets/flask/issues/2817",
    "id": 329823741,
    "node_id": "MDU6SXNzdWUzMjk4MjM3NDE=",
    "number": 2817,
    "title": "Importing from PWD using `python -m` fails in development environment",
    "user": {
        "login": "jwg4",
        "id": 5060616,
        "node_id": "MDQ6VXNlcjUwNjA2MTY=",
        "avatar_url": "https://avatars0.githubusercontent.com/u/5060616?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jwg4",
        "html_url": "https://github.com/jwg4",
        "followers_url": "https://api.github.com/users/jwg4/followers",
        "following_url": "https://api.github.com/users/jwg4/following{/other_user}",
        "gists_url": "https://api.github.com/users/jwg4/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jwg4/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jwg4/subscriptions",
        "organizations_url": "https://api.github.com/users/jwg4/orgs",
        "repos_url": "https://api.github.com/users/jwg4/repos",
        "events_url": "https://api.github.com/users/jwg4/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jwg4/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2018-06-06T11:16:34Z",
    "updated_at": "2018-06-07T11:09:23Z",
    "closed_at": "2018-06-07T11:09:23Z",
    "author_association": "NONE",
    "body": "### Expected Behavior\r\n\r\nWe have a Flask app defined in a file which sits inside a folder, say `app/run.py`:\r\n\r\n```python\r\nfrom flask import Flask\r\n\r\nfrom foo import bar\r\n\r\napp = Flask(__name__)\r\n\r\napp.run()\r\n```\r\n\r\nThe file imports from the top-level directory, in this case `foo.py`\r\n\r\n```python\r\nbar = \"SOMETHING TO IMPORT\"\r\n```\r\n\r\nThe empty file `__init__.py` exists in the directory `app`.\r\n\r\nUsing the default environment (production), we can run the Flask app by invoking the module from the top-level directory, using `-m`\r\n\r\n```\r\npython -m app.run\r\n```\r\n\r\nThe `foo` module is imported correctly and the app runs.\r\n\r\n```\r\n * Serving Flask app \"run\" (lazy loading)\r\n * Environment: production\r\n   WARNING: Do not use the development server in a production environment.\r\n   Use a production WSGI server instead.\r\n * Debug mode: off\r\n * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)\r\n```\r\n\r\n### Actual Behavior\r\n\r\nIf we try to use the development environment, setting the `FLASK_ENV` variable, it fails.\r\n\r\n```\r\nFLASK_ENV=development python -m app.run\r\n```\r\n\r\n```pytb\r\n * Serving Flask app \"run\" (lazy loading)\r\n * Environment: development\r\n * Debug mode: on\r\n * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)\r\n * Restarting with stat\r\nTraceback (most recent call last):\r\n  File \"/home/jack/z/flask_dev/app/run.py\", line 3, in <module>\r\n    from foo import bar\r\nImportError: No module named foo\r\n```\r\n\r\n### Environment\r\n\r\n* Python version: \r\n    Python 2.7.12 (default, Nov 20 2017, 18:23:56) \r\n    [GCC 5.4.0 20160609] on linux2\r\n\r\n* package versions:\r\n    click==6.7\r\n    Flask==1.0.2\r\n    itsdangerous==0.24\r\n    Jinja2==2.10\r\n    MarkupSafe==1.0\r\n    Werkzeug==0.14.1\r\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/395318115",
            "html_url": "https://github.com/pallets/flask/issues/2817#issuecomment-395318115",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2817",
            "id": 395318115,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTMxODExNQ==",
            "user": {
                "login": "lepture",
                "id": 290496,
                "node_id": "MDQ6VXNlcjI5MDQ5Ng==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/290496?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/lepture",
                "html_url": "https://github.com/lepture",
                "followers_url": "https://api.github.com/users/lepture/followers",
                "following_url": "https://api.github.com/users/lepture/following{/other_user}",
                "gists_url": "https://api.github.com/users/lepture/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/lepture/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lepture/subscriptions",
                "organizations_url": "https://api.github.com/users/lepture/orgs",
                "repos_url": "https://api.github.com/users/lepture/repos",
                "events_url": "https://api.github.com/users/lepture/events{/privacy}",
                "received_events_url": "https://api.github.com/users/lepture/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-06-07T07:15:58Z",
            "updated_at": "2018-06-07T07:15:58Z",
            "author_association": "MEMBER",
            "body": "Close it since it is not a bug of Flask.\r\n\r\nIt seems a misunderstanding of Python PATH. I don't know where you put your `foo.py` according to your description. It is better to ask your question on StackOverflow with a minimal example."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/395334293",
            "html_url": "https://github.com/pallets/flask/issues/2817#issuecomment-395334293",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2817",
            "id": 395334293,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTMzNDI5Mw==",
            "user": {
                "login": "jwg4",
                "id": 5060616,
                "node_id": "MDQ6VXNlcjUwNjA2MTY=",
                "avatar_url": "https://avatars0.githubusercontent.com/u/5060616?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/jwg4",
                "html_url": "https://github.com/jwg4",
                "followers_url": "https://api.github.com/users/jwg4/followers",
                "following_url": "https://api.github.com/users/jwg4/following{/other_user}",
                "gists_url": "https://api.github.com/users/jwg4/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/jwg4/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jwg4/subscriptions",
                "organizations_url": "https://api.github.com/users/jwg4/orgs",
                "repos_url": "https://api.github.com/users/jwg4/repos",
                "events_url": "https://api.github.com/users/jwg4/events{/privacy}",
                "received_events_url": "https://api.github.com/users/jwg4/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-06-07T08:18:06Z",
            "updated_at": "2018-06-07T08:18:06Z",
            "author_association": "NONE",
            "body": "With all due respect, it seems like _you_ haven't understood the issue.\r\n\r\nI do understand how PATH works, and I did say where foo.py is located.\r\n\r\nI also said that starting the Flask server this way works for the production environment, but not for the development environment. So clearly, this is related to Flask rather than be a general issue of Python imports. But to be absolutely clear, if you don't have the call to `app.run()` in the file `run.py`, running a script in this way works perfectly well, with the module being imported correctly.\r\n\r\nI would be grateful if you could look at this issue again and try to fully understand what is reported about the behavior of the Flask development server."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/395341733",
            "html_url": "https://github.com/pallets/flask/issues/2817#issuecomment-395341733",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2817",
            "id": 395341733,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTM0MTczMw==",
            "user": {
                "login": "lepture",
                "id": 290496,
                "node_id": "MDQ6VXNlcjI5MDQ5Ng==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/290496?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/lepture",
                "html_url": "https://github.com/lepture",
                "followers_url": "https://api.github.com/users/lepture/followers",
                "following_url": "https://api.github.com/users/lepture/following{/other_user}",
                "gists_url": "https://api.github.com/users/lepture/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/lepture/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lepture/subscriptions",
                "organizations_url": "https://api.github.com/users/lepture/orgs",
                "repos_url": "https://api.github.com/users/lepture/repos",
                "events_url": "https://api.github.com/users/lepture/events{/privacy}",
                "received_events_url": "https://api.github.com/users/lepture/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-06-07T08:42:52Z",
            "updated_at": "2018-06-07T08:42:52Z",
            "author_association": "MEMBER",
            "body": "> The file imports from the top-level directory, in this case foo.py\r\n\r\nI'm sorry, but I don't fully understand your `top-level`. Is it `/home/jack/z/flask_dev/app/foo.py` or `/home/jack/z/flask_dev/foo.py`? I can only guess."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/395342977",
            "html_url": "https://github.com/pallets/flask/issues/2817#issuecomment-395342977",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2817",
            "id": 395342977,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTM0Mjk3Nw==",
            "user": {
                "login": "lepture",
                "id": 290496,
                "node_id": "MDQ6VXNlcjI5MDQ5Ng==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/290496?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/lepture",
                "html_url": "https://github.com/lepture",
                "followers_url": "https://api.github.com/users/lepture/followers",
                "following_url": "https://api.github.com/users/lepture/following{/other_user}",
                "gists_url": "https://api.github.com/users/lepture/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/lepture/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lepture/subscriptions",
                "organizations_url": "https://api.github.com/users/lepture/orgs",
                "repos_url": "https://api.github.com/users/lepture/repos",
                "events_url": "https://api.github.com/users/lepture/events{/privacy}",
                "received_events_url": "https://api.github.com/users/lepture/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-06-07T08:47:05Z",
            "updated_at": "2018-06-07T08:51:32Z",
            "author_association": "MEMBER",
            "body": "It is a werkzeug reloader issue.\r\n\r\nMaybe related to pallets/werkzeug#461"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/395361384",
            "html_url": "https://github.com/pallets/flask/issues/2817#issuecomment-395361384",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2817",
            "id": 395361384,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTM2MTM4NA==",
            "user": {
                "login": "jwg4",
                "id": 5060616,
                "node_id": "MDQ6VXNlcjUwNjA2MTY=",
                "avatar_url": "https://avatars0.githubusercontent.com/u/5060616?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/jwg4",
                "html_url": "https://github.com/jwg4",
                "followers_url": "https://api.github.com/users/jwg4/followers",
                "following_url": "https://api.github.com/users/jwg4/following{/other_user}",
                "gists_url": "https://api.github.com/users/jwg4/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/jwg4/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jwg4/subscriptions",
                "organizations_url": "https://api.github.com/users/jwg4/orgs",
                "repos_url": "https://api.github.com/users/jwg4/repos",
                "events_url": "https://api.github.com/users/jwg4/events{/privacy}",
                "received_events_url": "https://api.github.com/users/jwg4/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-06-07T09:48:28Z",
            "updated_at": "2018-06-07T09:48:28Z",
            "author_association": "NONE",
            "body": "Thanks! Trying to understand exactly what that issue and #1246 imply for this."
        }
    ]
}