{
    "url": "https://api.github.com/repos/pallets/flask/issues/664",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/664/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/664/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/664/events",
    "html_url": "https://github.com/pallets/flask/issues/664",
    "id": 9961435,
    "node_id": "MDU6SXNzdWU5OTYxNDM1",
    "number": 664,
    "title": "problem with example in deferred callbacks documentation",
    "user": {
        "login": "trungly",
        "id": 47417,
        "node_id": "MDQ6VXNlcjQ3NDE3",
        "avatar_url": "https://avatars1.githubusercontent.com/u/47417?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/trungly",
        "html_url": "https://github.com/trungly",
        "followers_url": "https://api.github.com/users/trungly/followers",
        "following_url": "https://api.github.com/users/trungly/following{/other_user}",
        "gists_url": "https://api.github.com/users/trungly/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/trungly/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/trungly/subscriptions",
        "organizations_url": "https://api.github.com/users/trungly/orgs",
        "repos_url": "https://api.github.com/users/trungly/repos",
        "events_url": "https://api.github.com/users/trungly/events{/privacy}",
        "received_events_url": "https://api.github.com/users/trungly/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2013-01-14T23:02:55Z",
    "updated_at": "2013-01-27T00:54:06Z",
    "closed_at": "2013-01-27T00:54:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "I found this issue when trying out the example code the Deferred Callbacks pattern:\nhttp://flask.pocoo.org/docs/patterns/deferredcallbacks/\n\nIn the for loop of the call_after_request_callbacks() function, it is setting the response to the return value of callback function.  Then later, under Practical Example, the remember_language() function implicitly returns None.  This will likely cause a problem on the second iteration of the for loop.\n\nThis can be fixed by either 1) not setting the response to the callback returned value, or by b) returning the response in the remember_language() function.\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/12245110",
            "html_url": "https://github.com/pallets/flask/issues/664#issuecomment-12245110",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/664",
            "id": 12245110,
            "node_id": "MDEyOklzc3VlQ29tbWVudDEyMjQ1MTEw",
            "user": {
                "login": "trungly",
                "id": 47417,
                "node_id": "MDQ6VXNlcjQ3NDE3",
                "avatar_url": "https://avatars1.githubusercontent.com/u/47417?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/trungly",
                "html_url": "https://github.com/trungly",
                "followers_url": "https://api.github.com/users/trungly/followers",
                "following_url": "https://api.github.com/users/trungly/following{/other_user}",
                "gists_url": "https://api.github.com/users/trungly/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/trungly/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/trungly/subscriptions",
                "organizations_url": "https://api.github.com/users/trungly/orgs",
                "repos_url": "https://api.github.com/users/trungly/repos",
                "events_url": "https://api.github.com/users/trungly/events{/privacy}",
                "received_events_url": "https://api.github.com/users/trungly/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2013-01-14T23:07:32Z",
            "updated_at": "2013-01-14T23:08:07Z",
            "author_association": "CONTRIBUTOR",
            "body": "I'm new to this.  I'm not really sure how to submit pull requests or if I even have permissions to, but this is my fix for option a) mentioned above:\nb4fc4412e8bbdb359d1f5b9dd22a95326e73b896\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/12272414",
            "html_url": "https://github.com/pallets/flask/issues/664#issuecomment-12272414",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/664",
            "id": 12272414,
            "node_id": "MDEyOklzc3VlQ29tbWVudDEyMjcyNDE0",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2013-01-15T15:30:41Z",
            "updated_at": "2013-01-15T15:31:38Z",
            "author_association": "MEMBER",
            "body": "You can do with your fork whatever you want. I notice your commit was pushed to the master branch of your fork. While it would do for this single patch, it'd be better if you create a branch for each problem you fix.\n\nIn short, make the following on your fork:\n\n```\ngit branch deferred_callbacks_fix\n```\n\nThis will create a new branch with the commits from the current branch, which is master. At least i assume that. `git checkout master` to be sure.\n\nNow that you have your changes in a separate branch, it would be wise to keep the master branch clean from any changes that don't have made their way into upstream yet:\n\n```\ngit reset --hard HEAD^\n```\n\nThis will undo the last commit in the current branch, in your case master. Let's push our changes to GitHub:\n\n```\ngit push -f origin master\ngit push origin deferred_callbacks_fix\n```\n\nThe `-f` in the first command is needed because, by undoing a commit, you have made changes to the history, a thing which git usually is not fond of. In this case, however, it's just fine.\n\nNow you should find a pull request button at https://github.com/trungly/flask\n\nFor more info look at https://help.github.com/articles/creating-a-pull-request and also the rest of GitHub's help.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/12280402",
            "html_url": "https://github.com/pallets/flask/issues/664#issuecomment-12280402",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/664",
            "id": 12280402,
            "node_id": "MDEyOklzc3VlQ29tbWVudDEyMjgwNDAy",
            "user": {
                "login": "trungly",
                "id": 47417,
                "node_id": "MDQ6VXNlcjQ3NDE3",
                "avatar_url": "https://avatars1.githubusercontent.com/u/47417?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/trungly",
                "html_url": "https://github.com/trungly",
                "followers_url": "https://api.github.com/users/trungly/followers",
                "following_url": "https://api.github.com/users/trungly/following{/other_user}",
                "gists_url": "https://api.github.com/users/trungly/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/trungly/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/trungly/subscriptions",
                "organizations_url": "https://api.github.com/users/trungly/orgs",
                "repos_url": "https://api.github.com/users/trungly/repos",
                "events_url": "https://api.github.com/users/trungly/events{/privacy}",
                "received_events_url": "https://api.github.com/users/trungly/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2013-01-15T18:00:50Z",
            "updated_at": "2013-01-15T18:00:50Z",
            "author_association": "CONTRIBUTOR",
            "body": "Thanks Markus, for taking the time to explain things.  It really goes a long way and I appreciate it.\n"
        }
    ]
}