{
    "url": "https://api.github.com/repos/pallets/flask/issues/555",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/555/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/555/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/555/events",
    "html_url": "https://github.com/pallets/flask/issues/555",
    "id": 5723559,
    "node_id": "MDU6SXNzdWU1NzIzNTU5",
    "number": 555,
    "title": "Subdomains in blueprints don't work",
    "user": {
        "login": "tomekwojcik",
        "id": 226482,
        "node_id": "MDQ6VXNlcjIyNjQ4Mg==",
        "avatar_url": "https://avatars1.githubusercontent.com/u/226482?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tomekwojcik",
        "html_url": "https://github.com/tomekwojcik",
        "followers_url": "https://api.github.com/users/tomekwojcik/followers",
        "following_url": "https://api.github.com/users/tomekwojcik/following{/other_user}",
        "gists_url": "https://api.github.com/users/tomekwojcik/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/tomekwojcik/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/tomekwojcik/subscriptions",
        "organizations_url": "https://api.github.com/users/tomekwojcik/orgs",
        "repos_url": "https://api.github.com/users/tomekwojcik/repos",
        "events_url": "https://api.github.com/users/tomekwojcik/events{/privacy}",
        "received_events_url": "https://api.github.com/users/tomekwojcik/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 11,
    "created_at": "2012-07-19T20:14:37Z",
    "updated_at": "2017-09-12T07:47:22Z",
    "closed_at": "2012-07-19T20:38:36Z",
    "author_association": "NONE",
    "body": "Look at the code below:\n\n``` python\n# -*- coding: utf-8 -*-\n\nfrom flask import Flask, Blueprint\n\napp = Flask(__name__)\napp.config.DEBUG = True\n#app.url_map.default_subdomain = 'www'\n\nwww = Blueprint('www', 'www', subdomain='www')\nsub = Blueprint('sub', 'sub', subdomain='sub')\n\n\n@www.route('/')\ndef www_hello():\n    return 'www.www_hello'\n\n\n@sub.route('/')\ndef sub_hello():\n    return 'sub.sub_hello'\n\n\napp.register_blueprint(www)\napp.register_blueprint(sub)\n\nif __name__ == '__main__':\n    app.run(host='127.0.0.1', port=8888, debug=True)\n```\n\nAssuming the app's being served at mysite.com.\nNavigating to www.mysite.com or sub.mysite.com will produce 404. When you uncomment `app.url_map.default_subdomain` both URLs will point to `www_hello`.\n\nIs it me or there's something seriously not right with Flask's Blueprints?\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/7114596",
            "html_url": "https://github.com/pallets/flask/issues/555#issuecomment-7114596",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/555",
            "id": 7114596,
            "node_id": "MDEyOklzc3VlQ29tbWVudDcxMTQ1OTY=",
            "user": {
                "login": "tomekwojcik",
                "id": 226482,
                "node_id": "MDQ6VXNlcjIyNjQ4Mg==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/226482?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/tomekwojcik",
                "html_url": "https://github.com/tomekwojcik",
                "followers_url": "https://api.github.com/users/tomekwojcik/followers",
                "following_url": "https://api.github.com/users/tomekwojcik/following{/other_user}",
                "gists_url": "https://api.github.com/users/tomekwojcik/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/tomekwojcik/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/tomekwojcik/subscriptions",
                "organizations_url": "https://api.github.com/users/tomekwojcik/orgs",
                "repos_url": "https://api.github.com/users/tomekwojcik/repos",
                "events_url": "https://api.github.com/users/tomekwojcik/events{/privacy}",
                "received_events_url": "https://api.github.com/users/tomekwojcik/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-07-19T20:38:36Z",
            "updated_at": "2012-07-19T20:38:36Z",
            "author_association": "NONE",
            "body": "OK, I managed to finally deal with it. Turns out that when I do `app.config['SERVER_NAME'] = 'mysite.com'` everythingh works as a charm.\n\nSorry for a false positive :).\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/9937094",
            "html_url": "https://github.com/pallets/flask/issues/555#issuecomment-9937094",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/555",
            "id": 9937094,
            "node_id": "MDEyOklzc3VlQ29tbWVudDk5MzcwOTQ=",
            "user": {
                "login": "mateuszgachowski",
                "id": 628992,
                "node_id": "MDQ6VXNlcjYyODk5Mg==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/628992?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mateuszgachowski",
                "html_url": "https://github.com/mateuszgachowski",
                "followers_url": "https://api.github.com/users/mateuszgachowski/followers",
                "following_url": "https://api.github.com/users/mateuszgachowski/following{/other_user}",
                "gists_url": "https://api.github.com/users/mateuszgachowski/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mateuszgachowski/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mateuszgachowski/subscriptions",
                "organizations_url": "https://api.github.com/users/mateuszgachowski/orgs",
                "repos_url": "https://api.github.com/users/mateuszgachowski/repos",
                "events_url": "https://api.github.com/users/mateuszgachowski/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mateuszgachowski/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-10-31T08:53:54Z",
            "updated_at": "2012-10-31T08:53:54Z",
            "author_association": "NONE",
            "body": "If you still have problems with that, try to add to your proxy (example for apache):\n\n```\nProxyPreserveHost On\n```\n\nIt fixed the problem for me.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/11323642",
            "html_url": "https://github.com/pallets/flask/issues/555#issuecomment-11323642",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/555",
            "id": 11323642,
            "node_id": "MDEyOklzc3VlQ29tbWVudDExMzIzNjQy",
            "user": {
                "login": "plar",
                "id": 72739,
                "node_id": "MDQ6VXNlcjcyNzM5",
                "avatar_url": "https://avatars3.githubusercontent.com/u/72739?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/plar",
                "html_url": "https://github.com/plar",
                "followers_url": "https://api.github.com/users/plar/followers",
                "following_url": "https://api.github.com/users/plar/following{/other_user}",
                "gists_url": "https://api.github.com/users/plar/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/plar/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/plar/subscriptions",
                "organizations_url": "https://api.github.com/users/plar/orgs",
                "repos_url": "https://api.github.com/users/plar/repos",
                "events_url": "https://api.github.com/users/plar/events{/privacy}",
                "received_events_url": "https://api.github.com/users/plar/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-12-13T06:10:35Z",
            "updated_at": "2012-12-13T06:10:35Z",
            "author_association": "NONE",
            "body": "Does it work at all? I'm trying to run it using Flask 0.9 and seems like it does not work.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/11326985",
            "html_url": "https://github.com/pallets/flask/issues/555#issuecomment-11326985",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/555",
            "id": 11326985,
            "node_id": "MDEyOklzc3VlQ29tbWVudDExMzI2OTg1",
            "user": {
                "login": "mateuszgachowski",
                "id": 628992,
                "node_id": "MDQ6VXNlcjYyODk5Mg==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/628992?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mateuszgachowski",
                "html_url": "https://github.com/mateuszgachowski",
                "followers_url": "https://api.github.com/users/mateuszgachowski/followers",
                "following_url": "https://api.github.com/users/mateuszgachowski/following{/other_user}",
                "gists_url": "https://api.github.com/users/mateuszgachowski/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mateuszgachowski/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mateuszgachowski/subscriptions",
                "organizations_url": "https://api.github.com/users/mateuszgachowski/orgs",
                "repos_url": "https://api.github.com/users/mateuszgachowski/repos",
                "events_url": "https://api.github.com/users/mateuszgachowski/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mateuszgachowski/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-12-13T08:56:03Z",
            "updated_at": "2012-12-13T08:56:03Z",
            "author_association": "NONE",
            "body": "Yeah, it works. Try follow Tomek's and mine tips. If you will still have problems paste some of your code here.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/11336932",
            "html_url": "https://github.com/pallets/flask/issues/555#issuecomment-11336932",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/555",
            "id": 11336932,
            "node_id": "MDEyOklzc3VlQ29tbWVudDExMzM2OTMy",
            "user": {
                "login": "plar",
                "id": 72739,
                "node_id": "MDQ6VXNlcjcyNzM5",
                "avatar_url": "https://avatars3.githubusercontent.com/u/72739?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/plar",
                "html_url": "https://github.com/plar",
                "followers_url": "https://api.github.com/users/plar/followers",
                "following_url": "https://api.github.com/users/plar/following{/other_user}",
                "gists_url": "https://api.github.com/users/plar/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/plar/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/plar/subscriptions",
                "organizations_url": "https://api.github.com/users/plar/orgs",
                "repos_url": "https://api.github.com/users/plar/repos",
                "events_url": "https://api.github.com/users/plar/events{/privacy}",
                "received_events_url": "https://api.github.com/users/plar/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-12-13T14:51:41Z",
            "updated_at": "2012-12-13T14:52:08Z",
            "author_association": "NONE",
            "body": "``` python\n# -*- coding: utf-8 -*-\nfrom flask import Flask, Blueprint\n\napp = Flask(__name__)\napp.config.SERVER_NAME = 'example.com'\napp.url_map.default_subdomain = 'www'\n\nwww = Blueprint('www', 'www', subdomain='www')\n@www.route('/')\ndef www_index():\n    return 'www'\napp.register_blueprint(www)\n\napi = Blueprint('api', 'api', subdomain='api')\n@api.route('/')\ndef api_index():\n    return 'api'\napp.register_blueprint(api)\n\nif __name__ == '__main__':\n    app.run(host='example.com', port=9999, debug=False)\n```\n\nIt outputs 'www' in both requests (www.example.com:9999 & api.example.com:9999)\nIf you comment 'app.url_map.default_subdomain = 'www'' line then I get 404 for both urls.\n\n---8<--- pip freeze ---\nFlask==0.9\nFlask-Assets==0.8\nFlask-Script==0.5.1\nJinja2==2.6\nWerkzeug==0.8.3\nargparse==1.2.1\ncssmin==0.1.4\nwebassets==0.8\n--->8---\n\n---8<--- /etc/hosts ---\n127.0.0.1   example.com api.example.com www.example.com\n--->8---\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/11339946",
            "html_url": "https://github.com/pallets/flask/issues/555#issuecomment-11339946",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/555",
            "id": 11339946,
            "node_id": "MDEyOklzc3VlQ29tbWVudDExMzM5OTQ2",
            "user": {
                "login": "mateuszgachowski",
                "id": 628992,
                "node_id": "MDQ6VXNlcjYyODk5Mg==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/628992?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mateuszgachowski",
                "html_url": "https://github.com/mateuszgachowski",
                "followers_url": "https://api.github.com/users/mateuszgachowski/followers",
                "following_url": "https://api.github.com/users/mateuszgachowski/following{/other_user}",
                "gists_url": "https://api.github.com/users/mateuszgachowski/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mateuszgachowski/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mateuszgachowski/subscriptions",
                "organizations_url": "https://api.github.com/users/mateuszgachowski/orgs",
                "repos_url": "https://api.github.com/users/mateuszgachowski/repos",
                "events_url": "https://api.github.com/users/mateuszgachowski/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mateuszgachowski/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-12-13T16:03:41Z",
            "updated_at": "2012-12-13T16:03:41Z",
            "author_association": "NONE",
            "body": "Following documentation: \n\n```\nSERVER_NAME - the name and port number of the server. Required for subdomain support (e.g.: 'myapp.dev:5000') Note that localhost does not support subdomains so setting this to \u201clocalhost\u201d does not help. Setting a SERVER_NAME also by default enables URL generation without a request context but with an application context.\n```\n\nTry to set the proxy from domain default port (80) or add port (9999) to SERVER_NAME variable.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/11345174",
            "html_url": "https://github.com/pallets/flask/issues/555#issuecomment-11345174",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/555",
            "id": 11345174,
            "node_id": "MDEyOklzc3VlQ29tbWVudDExMzQ1MTc0",
            "user": {
                "login": "plar",
                "id": 72739,
                "node_id": "MDQ6VXNlcjcyNzM5",
                "avatar_url": "https://avatars3.githubusercontent.com/u/72739?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/plar",
                "html_url": "https://github.com/plar",
                "followers_url": "https://api.github.com/users/plar/followers",
                "following_url": "https://api.github.com/users/plar/following{/other_user}",
                "gists_url": "https://api.github.com/users/plar/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/plar/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/plar/subscriptions",
                "organizations_url": "https://api.github.com/users/plar/orgs",
                "repos_url": "https://api.github.com/users/plar/repos",
                "events_url": "https://api.github.com/users/plar/events{/privacy}",
                "received_events_url": "https://api.github.com/users/plar/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-12-13T17:57:05Z",
            "updated_at": "2012-12-13T17:57:56Z",
            "author_association": "NONE",
            "body": "1. I've added :9999 to the SERVER_NAME='example.com:9999'  -> outputs 'www' in both requests\n2. I've changed port=9999 to port=80 -> same as above, outputs 'www' in both requests\n\nSo, It did not help.\n\nI don't use any proxy on my side. I run it as: python runserver.py\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/11364353",
            "html_url": "https://github.com/pallets/flask/issues/555#issuecomment-11364353",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/555",
            "id": 11364353,
            "node_id": "MDEyOklzc3VlQ29tbWVudDExMzY0MzUz",
            "user": {
                "login": "plar",
                "id": 72739,
                "node_id": "MDQ6VXNlcjcyNzM5",
                "avatar_url": "https://avatars3.githubusercontent.com/u/72739?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/plar",
                "html_url": "https://github.com/plar",
                "followers_url": "https://api.github.com/users/plar/followers",
                "following_url": "https://api.github.com/users/plar/following{/other_user}",
                "gists_url": "https://api.github.com/users/plar/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/plar/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/plar/subscriptions",
                "organizations_url": "https://api.github.com/users/plar/orgs",
                "repos_url": "https://api.github.com/users/plar/repos",
                "events_url": "https://api.github.com/users/plar/events{/privacy}",
                "received_events_url": "https://api.github.com/users/plar/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-12-14T03:51:04Z",
            "updated_at": "2012-12-14T03:51:04Z",
            "author_association": "NONE",
            "body": "The problem was here: app.config.SERVER_NAME = 'example.com:9999'\nit should be app.config.['SERVER_NAME'] = 'example.com:9999'\n\nAfter that everything works! \n\n``` python\n# -*- coding: utf-8 -*-\n\"\"\"\nAdd the following line to the /etc/hosts file\n127.0.0.1 example.com www.example.com api.example.com\n\"\"\"\nfrom flask import Flask, Blueprint\n\napp = Flask(__name__)\napp.config['SERVER_NAME'] = 'example.com:9999'\n\nwww = Blueprint('www', 'www', subdomain='www')\n@www.route('/')\ndef www_index():\n    return 'www'\napp.register_blueprint(www)\n\napi = Blueprint('api', 'api', subdomain='api')\n@api.route('/')\ndef api_index():\n    return 'api'\napp.register_blueprint(api)\n\nif __name__ == '__main__':\n    app.run(host='example.com', port=9999, debug=False)\n\n```\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/138642274",
            "html_url": "https://github.com/pallets/flask/issues/555#issuecomment-138642274",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/555",
            "id": 138642274,
            "node_id": "MDEyOklzc3VlQ29tbWVudDEzODY0MjI3NA==",
            "user": {
                "login": "abdounasser202",
                "id": 11424142,
                "node_id": "MDQ6VXNlcjExNDI0MTQy",
                "avatar_url": "https://avatars3.githubusercontent.com/u/11424142?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/abdounasser202",
                "html_url": "https://github.com/abdounasser202",
                "followers_url": "https://api.github.com/users/abdounasser202/followers",
                "following_url": "https://api.github.com/users/abdounasser202/following{/other_user}",
                "gists_url": "https://api.github.com/users/abdounasser202/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/abdounasser202/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/abdounasser202/subscriptions",
                "organizations_url": "https://api.github.com/users/abdounasser202/orgs",
                "repos_url": "https://api.github.com/users/abdounasser202/repos",
                "events_url": "https://api.github.com/users/abdounasser202/events{/privacy}",
                "received_events_url": "https://api.github.com/users/abdounasser202/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-09-08T17:31:20Z",
            "updated_at": "2015-09-08T17:31:20Z",
            "author_association": "NONE",
            "body": "@plar after trying your code i've got \nsocket.error: [Errno 99] Cannot assign requested address\ncan you help please?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/159213958",
            "html_url": "https://github.com/pallets/flask/issues/555#issuecomment-159213958",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/555",
            "id": 159213958,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE1OTIxMzk1OA==",
            "user": {
                "login": "Asoul",
                "id": 1904659,
                "node_id": "MDQ6VXNlcjE5MDQ2NTk=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/1904659?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Asoul",
                "html_url": "https://github.com/Asoul",
                "followers_url": "https://api.github.com/users/Asoul/followers",
                "following_url": "https://api.github.com/users/Asoul/following{/other_user}",
                "gists_url": "https://api.github.com/users/Asoul/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Asoul/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Asoul/subscriptions",
                "organizations_url": "https://api.github.com/users/Asoul/orgs",
                "repos_url": "https://api.github.com/users/Asoul/repos",
                "events_url": "https://api.github.com/users/Asoul/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Asoul/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-11-24T09:59:48Z",
            "updated_at": "2015-11-24T09:59:48Z",
            "author_association": "NONE",
            "body": "add SERVER_NAME config works for me, thanks!\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/328769865",
            "html_url": "https://github.com/pallets/flask/issues/555#issuecomment-328769865",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/555",
            "id": 328769865,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMyODc2OTg2NQ==",
            "user": {
                "login": "g10guang",
                "id": 18458140,
                "node_id": "MDQ6VXNlcjE4NDU4MTQw",
                "avatar_url": "https://avatars0.githubusercontent.com/u/18458140?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/g10guang",
                "html_url": "https://github.com/g10guang",
                "followers_url": "https://api.github.com/users/g10guang/followers",
                "following_url": "https://api.github.com/users/g10guang/following{/other_user}",
                "gists_url": "https://api.github.com/users/g10guang/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/g10guang/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/g10guang/subscriptions",
                "organizations_url": "https://api.github.com/users/g10guang/orgs",
                "repos_url": "https://api.github.com/users/g10guang/repos",
                "events_url": "https://api.github.com/users/g10guang/events{/privacy}",
                "received_events_url": "https://api.github.com/users/g10guang/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-09-12T07:47:22Z",
            "updated_at": "2017-09-12T07:47:22Z",
            "author_association": "NONE",
            "body": "`app.config['SERVER_NAME'] = 'example.com:9999'`\r\n\r\nSERVER_NAME should append the `port`"
        }
    ]
}