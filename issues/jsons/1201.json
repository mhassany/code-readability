{
    "url": "https://api.github.com/repos/pallets/flask/issues/1201",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1201/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1201/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1201/events",
    "html_url": "https://github.com/pallets/flask/issues/1201",
    "id": 45543328,
    "node_id": "MDU6SXNzdWU0NTU0MzMyOA==",
    "number": 1201,
    "title": "How do I only enable cookies if the user logs in?",
    "user": {
        "login": "ghost",
        "id": 10137,
        "node_id": "MDQ6VXNlcjEwMTM3",
        "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ghost",
        "html_url": "https://github.com/ghost",
        "followers_url": "https://api.github.com/users/ghost/followers",
        "following_url": "https://api.github.com/users/ghost/following{/other_user}",
        "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
        "organizations_url": "https://api.github.com/users/ghost/orgs",
        "repos_url": "https://api.github.com/users/ghost/repos",
        "events_url": "https://api.github.com/users/ghost/events{/privacy}",
        "received_events_url": "https://api.github.com/users/ghost/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2014-10-11T06:17:26Z",
    "updated_at": "2014-10-12T20:07:07Z",
    "closed_at": "2014-10-12T20:04:18Z",
    "author_association": "NONE",
    "body": "I have a Flask app that runs on https behind nginx. The app also uses flask-login to log users in.\n\nI have set my app.secret_key and have 3 views:\n\n```\n@app.route('/')\ndef index():\n    return render_template('index.html')\n\n@app.route('/login', methods=['GET', 'POST'])\ndef login():\n    form = Login()\n    if form.validate_on_submit():\n        # log the user in...\n        ......\n        return redirect(request.args.get('next') or '/')\n    return render_template('login.html', form=form)\n\n@login_required\n@app.route('/logged_in')\ndef logged_in():\n    return render_template('logged_in.html')\n```\n\nThe vast, vast majority of my users do not log in (and don't have a user account) and some are complaining that we are setting cookies on them. I can confirm this behavior in my browser (Firefox) when I delete the cookie, visit \"https://www.example.com\" and see that the cookie gets reset.\n\nHow do I change the behavior so that the cookie only gets set if the user logs in?\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/58776151",
            "html_url": "https://github.com/pallets/flask/issues/1201#issuecomment-58776151",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1201",
            "id": 58776151,
            "node_id": "MDEyOklzc3VlQ29tbWVudDU4Nzc2MTUx",
            "user": {
                "login": "umcsdon",
                "id": 6402391,
                "node_id": "MDQ6VXNlcjY0MDIzOTE=",
                "avatar_url": "https://avatars2.githubusercontent.com/u/6402391?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/umcsdon",
                "html_url": "https://github.com/umcsdon",
                "followers_url": "https://api.github.com/users/umcsdon/followers",
                "following_url": "https://api.github.com/users/umcsdon/following{/other_user}",
                "gists_url": "https://api.github.com/users/umcsdon/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/umcsdon/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/umcsdon/subscriptions",
                "organizations_url": "https://api.github.com/users/umcsdon/orgs",
                "repos_url": "https://api.github.com/users/umcsdon/repos",
                "events_url": "https://api.github.com/users/umcsdon/events{/privacy}",
                "received_events_url": "https://api.github.com/users/umcsdon/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-10-12T07:27:44Z",
            "updated_at": "2014-10-12T07:27:44Z",
            "author_association": "NONE",
            "body": "See the documentation: http://flask.pocoo.org/docs/0.10/quickstart/#cookies\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/58776457",
            "html_url": "https://github.com/pallets/flask/issues/1201#issuecomment-58776457",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1201",
            "id": 58776457,
            "node_id": "MDEyOklzc3VlQ29tbWVudDU4Nzc2NDU3",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-10-12T07:44:04Z",
            "updated_at": "2014-10-12T07:44:04Z",
            "author_association": "MEMBER",
            "body": "I think this question might be Flask-Login specific.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/58810372",
            "html_url": "https://github.com/pallets/flask/issues/1201#issuecomment-58810372",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1201",
            "id": 58810372,
            "node_id": "MDEyOklzc3VlQ29tbWVudDU4ODEwMzcy",
            "user": {
                "login": "ghost",
                "id": 10137,
                "node_id": "MDQ6VXNlcjEwMTM3",
                "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ghost",
                "html_url": "https://github.com/ghost",
                "followers_url": "https://api.github.com/users/ghost/followers",
                "following_url": "https://api.github.com/users/ghost/following{/other_user}",
                "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
                "organizations_url": "https://api.github.com/users/ghost/orgs",
                "repos_url": "https://api.github.com/users/ghost/repos",
                "events_url": "https://api.github.com/users/ghost/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ghost/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-10-12T17:11:29Z",
            "updated_at": "2014-10-12T17:11:29Z",
            "author_association": "NONE",
            "body": "@umcsdon: I've read the documentation. Where does it say how to achieve that?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/58819903",
            "html_url": "https://github.com/pallets/flask/issues/1201#issuecomment-58819903",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1201",
            "id": 58819903,
            "node_id": "MDEyOklzc3VlQ29tbWVudDU4ODE5OTAz",
            "user": {
                "login": "pbu88",
                "id": 3682272,
                "node_id": "MDQ6VXNlcjM2ODIyNzI=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/3682272?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/pbu88",
                "html_url": "https://github.com/pbu88",
                "followers_url": "https://api.github.com/users/pbu88/followers",
                "following_url": "https://api.github.com/users/pbu88/following{/other_user}",
                "gists_url": "https://api.github.com/users/pbu88/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/pbu88/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pbu88/subscriptions",
                "organizations_url": "https://api.github.com/users/pbu88/orgs",
                "repos_url": "https://api.github.com/users/pbu88/repos",
                "events_url": "https://api.github.com/users/pbu88/events{/privacy}",
                "received_events_url": "https://api.github.com/users/pbu88/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-10-12T19:55:36Z",
            "updated_at": "2014-10-12T19:55:36Z",
            "author_association": "NONE",
            "body": "I don't think this is the right place for your question. You should go to IRC, Flask mailing list or StackOverflow.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/58820315",
            "html_url": "https://github.com/pallets/flask/issues/1201#issuecomment-58820315",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1201",
            "id": 58820315,
            "node_id": "MDEyOklzc3VlQ29tbWVudDU4ODIwMzE1",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-10-12T20:07:06Z",
            "updated_at": "2014-10-12T20:07:06Z",
            "author_association": "MEMBER",
            "body": "So Flask doesn't do this, and i couldn't find any code in Flask-Login that would do this either. @kristen1980 please provide a self-contained example that doesn't modify flask.session in the index view.\n"
        }
    ]
}