{
    "url": "https://api.github.com/repos/pallets/flask/issues/3141",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/3141/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/3141/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/3141/events",
    "html_url": "https://github.com/pallets/flask/issues/3141",
    "id": 430099607,
    "node_id": "MDU6SXNzdWU0MzAwOTk2MDc=",
    "number": 3141,
    "title": "RuntimeError: Attempted to use a closed Session. with flask",
    "user": {
        "login": "manuel3265",
        "id": 39747299,
        "node_id": "MDQ6VXNlcjM5NzQ3Mjk5",
        "avatar_url": "https://avatars1.githubusercontent.com/u/39747299?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/manuel3265",
        "html_url": "https://github.com/manuel3265",
        "followers_url": "https://api.github.com/users/manuel3265/followers",
        "following_url": "https://api.github.com/users/manuel3265/following{/other_user}",
        "gists_url": "https://api.github.com/users/manuel3265/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/manuel3265/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/manuel3265/subscriptions",
        "organizations_url": "https://api.github.com/users/manuel3265/orgs",
        "repos_url": "https://api.github.com/users/manuel3265/repos",
        "events_url": "https://api.github.com/users/manuel3265/events{/privacy}",
        "received_events_url": "https://api.github.com/users/manuel3265/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2019-04-07T03:11:46Z",
    "updated_at": "2019-04-07T03:55:18Z",
    "closed_at": "2019-04-07T03:55:18Z",
    "author_association": "NONE",
    "body": "I'm trying to run a Tacotron-2 training in flask, get parameters in json format. but the following error arises when I execute the training:\r\n\r\n```\r\nARNING: The TensorFlow contrib module will not be included in TensorFlow 2.0.\r\nFor more information, please see:\r\n  * https://github.com/tensorflow/community/blob/master/rfcs/20180907-contrib-sunset.md\r\n  * https://github.com/tensorflow/addons\r\nIf you depend on functionality not listed there, please file an issue.\r\nUsing TensorFlow backend.\r\n * Serving Flask app \"server\" (lazy loading)\r\n * Environment: production\r\n   WARNING: Do not use the development server in a production environment.\r\n   Use a production WSGI server instead.\r\n * Debug mode: on\r\n * Running on http://0.0.0.0:8891/ (Press CTRL+C to quit)\r\n * Restarting with stat\r\n/usr/local/lib/python3.6/dist-packages/numba/errors.py:105: UserWarning: Insufficiently recent colorama version found. Numba requires colorama >= 0.3.9\r\n  warnings.warn(msg)\r\nWARNING: The TensorFlow contrib module will not be included in TensorFlow 2.0.\r\nFor more information, please see:\r\n  * https://github.com/tensorflow/community/blob/master/rfcs/20180907-contrib-sunset.md\r\n  * https://github.com/tensorflow/addons\r\nIf you depend on functionality not listed there, please file an issue.\r\nUsing TensorFlow backend.\r\n * Debugger is active!\r\n * Debugger PIN: 303-138-053\r\nCheckpoint path: logs-Tacotron-2/taco_pretrained/tacotron_model.ckpt\r\nLoading training data from: tacotron-files/servex-tacotron/training_data/train.txt\r\nUsing model: Tacotron\r\nHyperparameters:\r\n  GL_on_GPU: True\r\n  NN_init: True\r\n  NN_scaler: 0.3\r\n  allow_clipping_in_normalization: True\r\n  attention_dim: 128\r\n  attention_filters: 32\r\n  attention_kernel: (31,)\r\n  attention_win_size: 7\r\n  batch_norm_position: after\r\n  cbhg_conv_channels: 128\r\n  cbhg_highway_units: 128\r\n  cbhg_highwaynet_layers: 4\r\netc...\r\nTacotron Parameters       29.039 Million.\r\nWARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/losses/losses_impl.py:667: to_float (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse tf.cast instead.\r\ninitialisation done /gpu:0\r\nInitialized Tacotron model. Dimensions (? = dynamic shape): \r\n  Train mode:               False\r\n  Eval mode:                True\r\n  GTA mode:                 False\r\n  Synthesis mode:           False\r\n  Input:                    (?, ?)\r\n  device:                   0\r\n  embedding:                (?, ?, 512)\r\n  enc conv out:             (?, ?, 512)\r\n  encoder out:              (?, ?, 512)\r\n  decoder out:              (?, ?, 80)\r\n  residual out:             (?, ?, 512)\r\n  projected residual out:   (?, ?, 80)\r\n  mel out:                  (?, ?, 80)\r\n  linear out:               (?, ?, 1025)\r\n  <stop_token> out:         (?, ?)\r\n  Tacotron Parameters       29.039 Million.\r\nTacotron training set to a maximum of 200000 steps\r\nholaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\r\nLoading checkpoint logs-Tacotron-2/taco_pretrained/tacotron_model.ckpt-0\r\nWARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/tensorflow/python/training/saver.py:1266: checkpoint_exists (from tensorflow.python.training.checkpoint_management) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse standard file APIs to check for files with this prefix.\r\nExiting due to exception: '<' not supported between instances of 'int' and 'str'\r\nTraceback (most recent call last):\r\n  File \"/home/manuel_garcia02/Tacotron/tacotron/train.py\", line 224, in train\r\n    while not coord.should_stop() and step < args.tacotron_train_steps:\r\nTypeError: '<' not supported between instances of 'int' and 'str'\r\n186.179.100.228 - - [07/Apr/2019 02:52:15] \"POST /tts/train HTTP/1.1\" 200 -\r\nGenerated 15 test batches of size 32 in 0.891 sec\r\nGenerated 64 train batches of size 32 in 2.169 sec\r\nException in thread background:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.6/threading.py\", line 916, in _bootstrap_inner\r\n    self.run()\r\n  File \"/usr/lib/python3.6/threading.py\", line 864, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/home/manuel_garcia02/Tacotron/tacotron/feeder.py\", line 169, in _enqueue_next_train_group\r\n    self._session.run(self._enqueue_op, feed_dict=feed_dict)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py\", line 929, in run\r\n    run_metadata_ptr)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py\", line 1075, in _run\r\n    raise RuntimeError('Attempted to use a closed Session.')\r\n\r\n\r\n\r\n```\r\nWhy can it be produced?\r\n---\r\n\r\n### Expected Behavior\r\n\r\nI should start training normally\r\n\r\n```python\r\nPaste a minimal example that causes the problem.\r\n```\r\n\r\n```pytb\r\nPaste the full traceback if there was an exception.\r\n```\r\n\r\n### Environment\r\n\r\n* Python version: 3.6\r\n* Flask version: 1.0.2\r\n* Werkzeug version:\r\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/480556983",
            "html_url": "https://github.com/pallets/flask/issues/3141#issuecomment-480556983",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/3141",
            "id": 480556983,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MDU1Njk4Mw==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-04-07T03:55:18Z",
            "updated_at": "2019-04-07T03:55:18Z",
            "author_association": "MEMBER",
            "body": "As the traceback shows, this is about tensorflow."
        }
    ]
}