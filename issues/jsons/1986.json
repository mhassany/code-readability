{
    "url": "https://api.github.com/repos/pallets/flask/issues/1986",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1986/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1986/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1986/events",
    "html_url": "https://github.com/pallets/flask/issues/1986",
    "id": 172235467,
    "node_id": "MDU6SXNzdWUxNzIyMzU0Njc=",
    "number": 1986,
    "title": "Setting items on `response.header` with bytestrings results in new headers in Python 3",
    "user": {
        "login": "jameshiew",
        "id": 2990876,
        "node_id": "MDQ6VXNlcjI5OTA4NzY=",
        "avatar_url": "https://avatars0.githubusercontent.com/u/2990876?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jameshiew",
        "html_url": "https://github.com/jameshiew",
        "followers_url": "https://api.github.com/users/jameshiew/followers",
        "following_url": "https://api.github.com/users/jameshiew/following{/other_user}",
        "gists_url": "https://api.github.com/users/jameshiew/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jameshiew/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jameshiew/subscriptions",
        "organizations_url": "https://api.github.com/users/jameshiew/orgs",
        "repos_url": "https://api.github.com/users/jameshiew/repos",
        "events_url": "https://api.github.com/users/jameshiew/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jameshiew/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2016-08-19T22:56:50Z",
    "updated_at": "2017-05-30T17:06:29Z",
    "closed_at": "2017-05-30T17:06:29Z",
    "author_association": "NONE",
    "body": "Minimal example below\n\n``` python\n# coding=utf8\nfrom flask import Flask, Response\n\napp = Flask(__name__)\n\n@app.route('/')\ndef hello():\n    response = Response(\"!!!\")\n    response.headers[b'Server'] = 'Flask'\n    return response\n```\n\nIn Python 2.7.12, the resulting response has a HTTP header of `Server: Flask`. In Python 3.5.2, the resulting response has HTTP headers of `Server: Werkzeug/0.11.10 Python/3.5.2` and `b'Server': Flask`.  Python 2 has the expected behavior.\n\nTesting from within a Python 3 venv, `pip freeze` output is:\n\n```\nclick==6.6\nFlask==0.11.1\nitsdangerous==0.24\nJinja2==2.8\nMarkupSafe==0.23\nWerkzeug==0.11.10\n```\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/241170621",
            "html_url": "https://github.com/pallets/flask/issues/1986#issuecomment-241170621",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1986",
            "id": 241170621,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI0MTE3MDYyMQ==",
            "user": {
                "login": "qingyunha",
                "id": 5804868,
                "node_id": "MDQ6VXNlcjU4MDQ4Njg=",
                "avatar_url": "https://avatars0.githubusercontent.com/u/5804868?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/qingyunha",
                "html_url": "https://github.com/qingyunha",
                "followers_url": "https://api.github.com/users/qingyunha/followers",
                "following_url": "https://api.github.com/users/qingyunha/following{/other_user}",
                "gists_url": "https://api.github.com/users/qingyunha/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/qingyunha/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/qingyunha/subscriptions",
                "organizations_url": "https://api.github.com/users/qingyunha/orgs",
                "repos_url": "https://api.github.com/users/qingyunha/repos",
                "events_url": "https://api.github.com/users/qingyunha/events{/privacy}",
                "received_events_url": "https://api.github.com/users/qingyunha/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-08-20T01:40:11Z",
            "updated_at": "2016-08-20T01:40:11Z",
            "author_association": "NONE",
            "body": "Maybe because of this, in python 2\n\n```\nb\"Server\"  ==  \"Server\"\nTrue\n```\n\nin Python 3\n\n```\nb\"Server\"  ==  \"Server\"\nFalse\n```\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/245537830",
            "html_url": "https://github.com/pallets/flask/issues/1986#issuecomment-245537830",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1986",
            "id": 245537830,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI0NTUzNzgzMA==",
            "user": {
                "login": "mitsuhiko",
                "id": 7396,
                "node_id": "MDQ6VXNlcjczOTY=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/7396?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mitsuhiko",
                "html_url": "https://github.com/mitsuhiko",
                "followers_url": "https://api.github.com/users/mitsuhiko/followers",
                "following_url": "https://api.github.com/users/mitsuhiko/following{/other_user}",
                "gists_url": "https://api.github.com/users/mitsuhiko/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mitsuhiko/subscriptions",
                "organizations_url": "https://api.github.com/users/mitsuhiko/orgs",
                "repos_url": "https://api.github.com/users/mitsuhiko/repos",
                "events_url": "https://api.github.com/users/mitsuhiko/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mitsuhiko/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-09-08T09:05:11Z",
            "updated_at": "2016-09-08T09:05:11Z",
            "author_association": "MEMBER",
            "body": "It's not super great but the API does not support bytes on 3.x for keys. Technically not a bug.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/304944524",
            "html_url": "https://github.com/pallets/flask/issues/1986#issuecomment-304944524",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1986",
            "id": 304944524,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDk0NDUyNA==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-05-30T17:06:29Z",
            "updated_at": "2017-05-30T17:06:29Z",
            "author_association": "MEMBER",
            "body": "I'm curious why you have a `b` string for the header name in the first place. Anyway, this is Werkzeug behavior, not Flask. If you really need this please file against Werkzeug, should be a pretty straightforward fix if you're interested in making a PR."
        }
    ]
}