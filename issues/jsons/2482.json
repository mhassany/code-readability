{
    "url": "https://api.github.com/repos/pallets/flask/issues/2482",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2482/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2482/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2482/events",
    "html_url": "https://github.com/pallets/flask/issues/2482",
    "id": 262365002,
    "node_id": "MDU6SXNzdWUyNjIzNjUwMDI=",
    "number": 2482,
    "title": "TypeError: Decimal('1.600') is not JSON serializable",
    "user": {
        "login": "biertie",
        "id": 533918,
        "node_id": "MDQ6VXNlcjUzMzkxOA==",
        "avatar_url": "https://avatars2.githubusercontent.com/u/533918?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/biertie",
        "html_url": "https://github.com/biertie",
        "followers_url": "https://api.github.com/users/biertie/followers",
        "following_url": "https://api.github.com/users/biertie/following{/other_user}",
        "gists_url": "https://api.github.com/users/biertie/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/biertie/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/biertie/subscriptions",
        "organizations_url": "https://api.github.com/users/biertie/orgs",
        "repos_url": "https://api.github.com/users/biertie/repos",
        "events_url": "https://api.github.com/users/biertie/events{/privacy}",
        "received_events_url": "https://api.github.com/users/biertie/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2017-10-03T09:43:05Z",
    "updated_at": "2017-10-03T12:51:08Z",
    "closed_at": "2017-10-03T12:51:08Z",
    "author_association": "NONE",
    "body": "I've encountered an avoidable bug in Flask's jsonify module. \r\nWhen trying to push a dictionary with includes one (or multiple) Decimal objects through jsonify we encounter the following error:\r\n \r\n\r\n> TypeError: Decimal('1.600') is not JSON serializable\r\n\r\nI've traced back the error to the following python file:\r\n/usr/lib64/python2.7/site-packages/flask/json.py\r\n\r\n\r\nThe JSON module used by Flask comes from 'itsdangerous' which doesn't seem like a great idea, mostly because the version seems depreciated. \r\nSince a lot of users run queries from the database through jsonify it is not unthinkable that more users are facing this issue, and have to jump around in hoolaphoops to get it working. \r\nBy using the 'simplejson' module ( > 2.1 ; released on 11 Mar 2010) we can avoid this and use the 'use_decimals' option in simplejson.dump. \r\n\r\nThefore I would like to propose the following codechange in flask/json.py: \r\n[import statement]\r\n```\r\n# Try to use the default simplejson implementation. This is good for performance and stability.\r\n# Otherwise use the same json implementation as itsdangerous on which we\r\n# depend anyways.\r\ntry:\r\n    import simplejson as _json\r\nexcept ImportError:\r\n    try:\r\n        from itsdangerous import simplejson as _json\r\n    except ImportError:\r\n        from itsdangerous import json as _json\r\n```\r\n\r\n### Environment\r\n\r\n* Python version: 2.7\r\n* Flask version: 0.12.2\r\n* Werkzeug version: 0.12\r\n* simplejson version: 3.11.1\r\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/333831596",
            "html_url": "https://github.com/pallets/flask/issues/2482#issuecomment-333831596",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2482",
            "id": 333831596,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzgzMTU5Ng==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-10-03T12:51:08Z",
            "updated_at": "2017-10-03T12:51:08Z",
            "author_association": "MEMBER",
            "body": "itsdangerous loads `json` the same way: try `simplejson`, otherwise `json`. It is not deprecated, I'm not sure what gave you that impression."
        }
    ]
}