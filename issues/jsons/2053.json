{
    "url": "https://api.github.com/repos/pallets/flask/issues/2053",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2053/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2053/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2053/events",
    "html_url": "https://github.com/pallets/flask/pull/2053",
    "id": 181861455,
    "node_id": "MDExOlB1bGxSZXF1ZXN0ODg1NjYzNzI=",
    "number": 2053,
    "title": "Add possible overriding of builtin cli cmds",
    "user": {
        "login": "mrecachinas",
        "id": 924243,
        "node_id": "MDQ6VXNlcjkyNDI0Mw==",
        "avatar_url": "https://avatars2.githubusercontent.com/u/924243?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mrecachinas",
        "html_url": "https://github.com/mrecachinas",
        "followers_url": "https://api.github.com/users/mrecachinas/followers",
        "following_url": "https://api.github.com/users/mrecachinas/following{/other_user}",
        "gists_url": "https://api.github.com/users/mrecachinas/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/mrecachinas/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mrecachinas/subscriptions",
        "organizations_url": "https://api.github.com/users/mrecachinas/orgs",
        "repos_url": "https://api.github.com/users/mrecachinas/repos",
        "events_url": "https://api.github.com/users/mrecachinas/events{/privacy}",
        "received_events_url": "https://api.github.com/users/mrecachinas/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 380608249,
            "node_id": "MDU6TGFiZWwzODA2MDgyNDk=",
            "url": "https://api.github.com/repos/pallets/flask/labels/cli",
            "name": "cli",
            "color": "1d76db",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 11,
    "created_at": "2016-10-09T02:50:57Z",
    "updated_at": "2018-10-23T17:44:07Z",
    "closed_at": "2017-05-27T15:48:28Z",
    "author_association": "CONTRIBUTOR",
    "pull_request": {
        "url": "https://api.github.com/repos/pallets/flask/pulls/2053",
        "html_url": "https://github.com/pallets/flask/pull/2053",
        "diff_url": "https://github.com/pallets/flask/pull/2053.diff",
        "patch_url": "https://github.com/pallets/flask/pull/2053.patch"
    },
    "body": "This PR is in reference to #2020 (cc @davidism). Basically, a CLI command was checked if it was a builtin, and if so, it executed it. I've changed this to now wait until it sees if the same command exists in the user-created commands.\n\nAlso, the test I added works both with and without the changes, so definitely let me know what I'm missing.\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/296460989",
            "html_url": "https://github.com/pallets/flask/pull/2053#issuecomment-296460989",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2053",
            "id": 296460989,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5NjQ2MDk4OQ==",
            "user": {
                "login": "kblomqvist",
                "id": 206775,
                "node_id": "MDQ6VXNlcjIwNjc3NQ==",
                "avatar_url": "https://avatars3.githubusercontent.com/u/206775?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/kblomqvist",
                "html_url": "https://github.com/kblomqvist",
                "followers_url": "https://api.github.com/users/kblomqvist/followers",
                "following_url": "https://api.github.com/users/kblomqvist/following{/other_user}",
                "gists_url": "https://api.github.com/users/kblomqvist/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/kblomqvist/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/kblomqvist/subscriptions",
                "organizations_url": "https://api.github.com/users/kblomqvist/orgs",
                "repos_url": "https://api.github.com/users/kblomqvist/repos",
                "events_url": "https://api.github.com/users/kblomqvist/events{/privacy}",
                "received_events_url": "https://api.github.com/users/kblomqvist/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-04-23T17:25:26Z",
            "updated_at": "2017-04-23T17:25:26Z",
            "author_association": "CONTRIBUTOR",
            "body": "Would this also allow to call the builtin command from the overridden command?"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/296461866",
            "html_url": "https://github.com/pallets/flask/pull/2053#issuecomment-296461866",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2053",
            "id": 296461866,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5NjQ2MTg2Ng==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-04-23T17:29:04Z",
            "updated_at": "2017-04-23T17:29:04Z",
            "author_association": "MEMBER",
            "body": "Would you need to? I assume if you're overriding it you can make it do whatever you want, including adding a flag that calls the original instead."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/296467565",
            "html_url": "https://github.com/pallets/flask/pull/2053#issuecomment-296467565",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2053",
            "id": 296467565,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5NjQ2NzU2NQ==",
            "user": {
                "login": "kblomqvist",
                "id": 206775,
                "node_id": "MDQ6VXNlcjIwNjc3NQ==",
                "avatar_url": "https://avatars3.githubusercontent.com/u/206775?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/kblomqvist",
                "html_url": "https://github.com/kblomqvist",
                "followers_url": "https://api.github.com/users/kblomqvist/followers",
                "following_url": "https://api.github.com/users/kblomqvist/following{/other_user}",
                "gists_url": "https://api.github.com/users/kblomqvist/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/kblomqvist/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/kblomqvist/subscriptions",
                "organizations_url": "https://api.github.com/users/kblomqvist/orgs",
                "repos_url": "https://api.github.com/users/kblomqvist/repos",
                "events_url": "https://api.github.com/users/kblomqvist/events{/privacy}",
                "received_events_url": "https://api.github.com/users/kblomqvist/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-04-23T17:54:57Z",
            "updated_at": "2017-04-23T17:54:57Z",
            "author_association": "CONTRIBUTOR",
            "body": "As long as I don't know how to implement the builtin run command, I would need to be able to call it."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/296468945",
            "html_url": "https://github.com/pallets/flask/pull/2053#issuecomment-296468945",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2053",
            "id": 296468945,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5NjQ2ODk0NQ==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-04-23T18:02:31Z",
            "updated_at": "2017-04-23T18:02:31Z",
            "author_association": "MEMBER",
            "body": "Oh, I see what you mean. The commands should still be importable and callable, but not sure if there's a specific way it's supposed to be done with Click."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/296472557",
            "html_url": "https://github.com/pallets/flask/pull/2053#issuecomment-296472557",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2053",
            "id": 296472557,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5NjQ3MjU1Nw==",
            "user": {
                "login": "kblomqvist",
                "id": 206775,
                "node_id": "MDQ6VXNlcjIwNjc3NQ==",
                "avatar_url": "https://avatars3.githubusercontent.com/u/206775?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/kblomqvist",
                "html_url": "https://github.com/kblomqvist",
                "followers_url": "https://api.github.com/users/kblomqvist/followers",
                "following_url": "https://api.github.com/users/kblomqvist/following{/other_user}",
                "gists_url": "https://api.github.com/users/kblomqvist/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/kblomqvist/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/kblomqvist/subscriptions",
                "organizations_url": "https://api.github.com/users/kblomqvist/orgs",
                "repos_url": "https://api.github.com/users/kblomqvist/repos",
                "events_url": "https://api.github.com/users/kblomqvist/events{/privacy}",
                "received_events_url": "https://api.github.com/users/kblomqvist/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-04-23T18:22:41Z",
            "updated_at": "2017-04-23T18:22:41Z",
            "author_association": "CONTRIBUTOR",
            "body": "Not sure either, but maybe... http://click.pocoo.org/5/advanced/#invoking-other-commands."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/296472668",
            "html_url": "https://github.com/pallets/flask/pull/2053#issuecomment-296472668",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2053",
            "id": 296472668,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5NjQ3MjY2OA==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-04-23T18:23:12Z",
            "updated_at": "2017-04-23T18:23:12Z",
            "author_association": "MEMBER",
            "body": "@kblomqvist that looks right.\r\n\r\n@mrecachinas the test needs to work with `@app.cli.command`. Creating a separate `FlaskGroup` is the existing solution."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/298486687",
            "html_url": "https://github.com/pallets/flask/pull/2053#issuecomment-298486687",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2053",
            "id": 298486687,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODQ4NjY4Nw==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-05-02T03:07:18Z",
            "updated_at": "2017-05-02T03:07:18Z",
            "author_association": "MEMBER",
            "body": "I've been working on getting this into shape to merge. Overriding the built-in commands in a useful way involves copy-pasting the whole command.\r\n\r\nI assume you would override `run` to pass extra arguments to `run_simple`. I can add `**kwargs` to the signature, but you still don't have access to any of the processing that's done to the built-in's options. And you have to remember to copy the built-in's help and options.\r\n\r\nOverriding `routes` doesn't really make sense, or I don't know how to refactor it for that to be useful.\r\n\r\nOverriding `shell` makes sense, for example to use IPython if it's installed or just forward to the built-in command otherwise, but you need to remember to pop any extra params from the context first, since the built-in takes no arguments.\r\n\r\nI guess this is still more convenient than setting up a separate `FlaskGroup`, but it's a little disappointing that it's not more powerful.\r\n\r\n---\r\n\r\nHere's a custom `run`, assuming the built-in passes `**kwargs` to `run_simple`, for example:\r\n\r\n~~~python\r\n@app.cli.command('run', help=builtin_run_command.help, short_help=builtin_run_command.short_help)\r\n@click.option('--ssl', 'ssl_context', flag_value='adhoc')\r\n@click.pass_context\r\ndef run_command(ctx, ssl_context=None, **kwargs):\r\n    click.echo(' * SSL is {}'.format(ssl_context or 'disabled')\r\n    ctx.forward(builtin_run_command)\r\n\r\nrun_command.params[:0] = builtin_run_command.params\r\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/298487873",
            "html_url": "https://github.com/pallets/flask/pull/2053#issuecomment-298487873",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2053",
            "id": 298487873,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODQ4Nzg3Mw==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-05-02T03:18:53Z",
            "updated_at": "2017-05-02T03:19:27Z",
            "author_association": "MEMBER",
            "body": "Actually, `shell` absolutely requires copying the  whole thing if you want the same behavior, since it's building a custom banner and checking `PYTHONSTARTUP`."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/304134817",
            "html_url": "https://github.com/pallets/flask/pull/2053#issuecomment-304134817",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2053",
            "id": 304134817,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDEzNDgxNw==",
            "user": {
                "login": "kennethreitz",
                "id": 119893,
                "node_id": "MDQ6VXNlcjExOTg5Mw==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/119893?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/kennethreitz",
                "html_url": "https://github.com/kennethreitz",
                "followers_url": "https://api.github.com/users/kennethreitz/followers",
                "following_url": "https://api.github.com/users/kennethreitz/following{/other_user}",
                "gists_url": "https://api.github.com/users/kennethreitz/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/kennethreitz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/kennethreitz/subscriptions",
                "organizations_url": "https://api.github.com/users/kennethreitz/orgs",
                "repos_url": "https://api.github.com/users/kennethreitz/repos",
                "events_url": "https://api.github.com/users/kennethreitz/events{/privacy}",
                "received_events_url": "https://api.github.com/users/kennethreitz/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-05-25T21:52:46Z",
            "updated_at": "2017-05-25T21:52:46Z",
            "author_association": "CONTRIBUTOR",
            "body": "This overall seems like a bad idea. "
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/304459995",
            "html_url": "https://github.com/pallets/flask/pull/2053#issuecomment-304459995",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2053",
            "id": 304459995,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDQ1OTk5NQ==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-05-27T15:48:28Z",
            "updated_at": "2017-05-27T15:51:15Z",
            "author_association": "MEMBER",
            "body": "Yeah, I'm going to close this. Thanks for the work though, @mrecachinas, we needed to at least see what it would look like.\r\n\r\nIf someone wants to override a builtin they can use the cli entry points, which already work fine, but I'd rather that stay a semi-undocumented feature. @doobeh is working on a Flask-Gunicorn extension which demonstrates the technique anyway.\r\n\r\nIt would be nice to show a message \"can't override built-in command with `@app.cli.command`\" so users aren't confused when their command isn't recognized, but not sure how feasible that is."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/304472614",
            "html_url": "https://github.com/pallets/flask/pull/2053#issuecomment-304472614",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2053",
            "id": 304472614,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDQ3MjYxNA==",
            "user": {
                "login": "mrecachinas",
                "id": 924243,
                "node_id": "MDQ6VXNlcjkyNDI0Mw==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/924243?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mrecachinas",
                "html_url": "https://github.com/mrecachinas",
                "followers_url": "https://api.github.com/users/mrecachinas/followers",
                "following_url": "https://api.github.com/users/mrecachinas/following{/other_user}",
                "gists_url": "https://api.github.com/users/mrecachinas/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mrecachinas/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mrecachinas/subscriptions",
                "organizations_url": "https://api.github.com/users/mrecachinas/orgs",
                "repos_url": "https://api.github.com/users/mrecachinas/repos",
                "events_url": "https://api.github.com/users/mrecachinas/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mrecachinas/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-05-27T19:44:58Z",
            "updated_at": "2017-05-27T19:44:58Z",
            "author_association": "CONTRIBUTOR",
            "body": "@davidism no worries! I agree with your conclusion."
        }
    ]
}