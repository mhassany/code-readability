{
    "url": "https://api.github.com/repos/pallets/flask/issues/1124",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1124/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1124/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1124/events",
    "html_url": "https://github.com/pallets/flask/issues/1124",
    "id": 37960447,
    "node_id": "MDU6SXNzdWUzNzk2MDQ0Nw==",
    "number": 1124,
    "title": "CLI: \"flask\" command help doesn't list custom commands",
    "user": {
        "login": "erwagasore",
        "id": 1290048,
        "node_id": "MDQ6VXNlcjEyOTAwNDg=",
        "avatar_url": "https://avatars2.githubusercontent.com/u/1290048?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/erwagasore",
        "html_url": "https://github.com/erwagasore",
        "followers_url": "https://api.github.com/users/erwagasore/followers",
        "following_url": "https://api.github.com/users/erwagasore/following{/other_user}",
        "gists_url": "https://api.github.com/users/erwagasore/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/erwagasore/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/erwagasore/subscriptions",
        "organizations_url": "https://api.github.com/users/erwagasore/orgs",
        "repos_url": "https://api.github.com/users/erwagasore/repos",
        "events_url": "https://api.github.com/users/erwagasore/events{/privacy}",
        "received_events_url": "https://api.github.com/users/erwagasore/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 135583063,
            "node_id": "MDU6TGFiZWwxMzU1ODMwNjM=",
            "url": "https://api.github.com/repos/pallets/flask/labels/bug",
            "name": "bug",
            "color": "d93f0b",
            "default": true,
            "description": null
        },
        {
            "id": 380608249,
            "node_id": "MDU6TGFiZWwzODA2MDgyNDk=",
            "url": "https://api.github.com/repos/pallets/flask/labels/cli",
            "name": "cli",
            "color": "1d76db",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": {
        "url": "https://api.github.com/repos/pallets/flask/milestones/2",
        "html_url": "https://github.com/pallets/flask/milestone/2",
        "labels_url": "https://api.github.com/repos/pallets/flask/milestones/2/labels",
        "id": 795954,
        "node_id": "MDk6TWlsZXN0b25lNzk1OTU0",
        "number": 2,
        "title": "1.0",
        "description": "",
        "creator": {
            "login": "untitaker",
            "id": 837573,
            "node_id": "MDQ6VXNlcjgzNzU3Mw==",
            "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/untitaker",
            "html_url": "https://github.com/untitaker",
            "followers_url": "https://api.github.com/users/untitaker/followers",
            "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
            "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
            "organizations_url": "https://api.github.com/users/untitaker/orgs",
            "repos_url": "https://api.github.com/users/untitaker/repos",
            "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
            "received_events_url": "https://api.github.com/users/untitaker/received_events",
            "type": "User",
            "site_admin": false
        },
        "open_issues": 0,
        "closed_issues": 159,
        "state": "closed",
        "created_at": "2014-09-19T15:47:20Z",
        "updated_at": "2018-04-26T21:07:44Z",
        "due_on": "2018-04-26T07:00:00Z",
        "closed_at": "2018-04-26T21:07:44Z"
    },
    "comments": 11,
    "created_at": "2014-07-16T08:39:22Z",
    "updated_at": "2016-05-26T19:29:49Z",
    "closed_at": "2016-05-26T19:29:49Z",
    "author_association": "NONE",
    "body": "I am playing with the latest release of flask with <code>cli</code> module. I have created a command called <code>initdb</code> and when I call <code>flask initdb</code> it works as expected, but when I just call <code>flask</code> command it supposed to show the list of all available commands including <code>initdb</code>, which is not the case. Any idea why?\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/49256338",
            "html_url": "https://github.com/pallets/flask/issues/1124#issuecomment-49256338",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1124",
            "id": 49256338,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MjU2MzM4",
            "user": {
                "login": "SherMM",
                "id": 3230218,
                "node_id": "MDQ6VXNlcjMyMzAyMTg=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/3230218?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/SherMM",
                "html_url": "https://github.com/SherMM",
                "followers_url": "https://api.github.com/users/SherMM/followers",
                "following_url": "https://api.github.com/users/SherMM/following{/other_user}",
                "gists_url": "https://api.github.com/users/SherMM/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/SherMM/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/SherMM/subscriptions",
                "organizations_url": "https://api.github.com/users/SherMM/orgs",
                "repos_url": "https://api.github.com/users/SherMM/repos",
                "events_url": "https://api.github.com/users/SherMM/events{/privacy}",
                "received_events_url": "https://api.github.com/users/SherMM/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-07-17T04:05:51Z",
            "updated_at": "2014-07-17T04:05:51Z",
            "author_association": "NONE",
            "body": "The flask command doesn't work for me. I don't know if I haven't set something up incorrectly, but trying to follow examples where the flask command is used do not work for me. I get the following:\n`flask: command not found`. Also, when trying to play with the minitwit example, and just trying `python minitwit.py` or `python minitwit_tests.py`  I get the following error:  `@app.cli.command('initdb')\nAttributeError: 'Flask' object has no attribute 'cli'`\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/49317784",
            "html_url": "https://github.com/pallets/flask/issues/1124#issuecomment-49317784",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1124",
            "id": 49317784,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MzE3Nzg0",
            "user": {
                "login": "erwagasore",
                "id": 1290048,
                "node_id": "MDQ6VXNlcjEyOTAwNDg=",
                "avatar_url": "https://avatars2.githubusercontent.com/u/1290048?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/erwagasore",
                "html_url": "https://github.com/erwagasore",
                "followers_url": "https://api.github.com/users/erwagasore/followers",
                "following_url": "https://api.github.com/users/erwagasore/following{/other_user}",
                "gists_url": "https://api.github.com/users/erwagasore/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/erwagasore/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/erwagasore/subscriptions",
                "organizations_url": "https://api.github.com/users/erwagasore/orgs",
                "repos_url": "https://api.github.com/users/erwagasore/repos",
                "events_url": "https://api.github.com/users/erwagasore/events{/privacy}",
                "received_events_url": "https://api.github.com/users/erwagasore/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-07-17T14:55:03Z",
            "updated_at": "2014-07-17T14:55:03Z",
            "author_association": "NONE",
            "body": "I learned alot from the image tweeted by @mitsuhiko how this will help @SherMM http://i.imgur.com/hhuKBkv.png\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/49380953",
            "html_url": "https://github.com/pallets/flask/issues/1124#issuecomment-49380953",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1124",
            "id": 49380953,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MzgwOTUz",
            "user": {
                "login": "SherMM",
                "id": 3230218,
                "node_id": "MDQ6VXNlcjMyMzAyMTg=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/3230218?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/SherMM",
                "html_url": "https://github.com/SherMM",
                "followers_url": "https://api.github.com/users/SherMM/followers",
                "following_url": "https://api.github.com/users/SherMM/following{/other_user}",
                "gists_url": "https://api.github.com/users/SherMM/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/SherMM/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/SherMM/subscriptions",
                "organizations_url": "https://api.github.com/users/SherMM/orgs",
                "repos_url": "https://api.github.com/users/SherMM/repos",
                "events_url": "https://api.github.com/users/SherMM/events{/privacy}",
                "received_events_url": "https://api.github.com/users/SherMM/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-07-17T23:49:12Z",
            "updated_at": "2014-07-17T23:49:12Z",
            "author_association": "NONE",
            "body": "I still cannot get the flask command to work, even after following post by @erwagasore . I haven't used Flask in a couple months, but my version is current. I am not sure if there needs to be a flask_config file or something else, but no shell I use recognizes this command. \n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/49381360",
            "html_url": "https://github.com/pallets/flask/issues/1124#issuecomment-49381360",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1124",
            "id": 49381360,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MzgxMzYw",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-07-17T23:55:54Z",
            "updated_at": "2014-07-17T23:55:54Z",
            "author_association": "MEMBER",
            "body": "There is no `flask` command. Where are you getting this information from?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/49382910",
            "html_url": "https://github.com/pallets/flask/issues/1124#issuecomment-49382910",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1124",
            "id": 49382910,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MzgyOTEw",
            "user": {
                "login": "SherMM",
                "id": 3230218,
                "node_id": "MDQ6VXNlcjMyMzAyMTg=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/3230218?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/SherMM",
                "html_url": "https://github.com/SherMM",
                "followers_url": "https://api.github.com/users/SherMM/followers",
                "following_url": "https://api.github.com/users/SherMM/following{/other_user}",
                "gists_url": "https://api.github.com/users/SherMM/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/SherMM/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/SherMM/subscriptions",
                "organizations_url": "https://api.github.com/users/SherMM/orgs",
                "repos_url": "https://api.github.com/users/SherMM/repos",
                "events_url": "https://api.github.com/users/SherMM/events{/privacy}",
                "received_events_url": "https://api.github.com/users/SherMM/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-07-18T00:22:50Z",
            "updated_at": "2014-07-18T00:22:57Z",
            "author_association": "NONE",
            "body": "This is just what I interpreted (apparently incorrectly) from the minitwit docs and link provided by @erwagasore above. I just realized, I don't have the version of flask with the `cli.py` module. So, I am guess it's my problem. Sorry for the confusion, but thanks for the help anyways. \n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/49424374",
            "html_url": "https://github.com/pallets/flask/issues/1124#issuecomment-49424374",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1124",
            "id": 49424374,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NDI0Mzc0",
            "user": {
                "login": "erwagasore",
                "id": 1290048,
                "node_id": "MDQ6VXNlcjEyOTAwNDg=",
                "avatar_url": "https://avatars2.githubusercontent.com/u/1290048?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/erwagasore",
                "html_url": "https://github.com/erwagasore",
                "followers_url": "https://api.github.com/users/erwagasore/followers",
                "following_url": "https://api.github.com/users/erwagasore/following{/other_user}",
                "gists_url": "https://api.github.com/users/erwagasore/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/erwagasore/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/erwagasore/subscriptions",
                "organizations_url": "https://api.github.com/users/erwagasore/orgs",
                "repos_url": "https://api.github.com/users/erwagasore/repos",
                "events_url": "https://api.github.com/users/erwagasore/events{/privacy}",
                "received_events_url": "https://api.github.com/users/erwagasore/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-07-18T12:19:27Z",
            "updated_at": "2014-07-18T12:19:27Z",
            "author_association": "NONE",
            "body": "The <code>cli.py</code> module is in the latest flask commit on this repository. Check this out https://github.com/smurfix/flask-script/issues/97 for more info on the future of flask\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/53726490",
            "html_url": "https://github.com/pallets/flask/issues/1124#issuecomment-53726490",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1124",
            "id": 53726490,
            "node_id": "MDEyOklzc3VlQ29tbWVudDUzNzI2NDkw",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-08-28T14:22:03Z",
            "updated_at": "2014-08-28T14:22:03Z",
            "author_association": "MEMBER",
            "body": "Sorry for closing.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/53730073",
            "html_url": "https://github.com/pallets/flask/issues/1124#issuecomment-53730073",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1124",
            "id": 53730073,
            "node_id": "MDEyOklzc3VlQ29tbWVudDUzNzMwMDcz",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-08-28T14:45:16Z",
            "updated_at": "2014-08-28T14:45:16Z",
            "author_association": "MEMBER",
            "body": "Since `flask --help` works correctly i suppose that this is a deficiency in click.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/53885039",
            "html_url": "https://github.com/pallets/flask/issues/1124#issuecomment-53885039",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1124",
            "id": 53885039,
            "node_id": "MDEyOklzc3VlQ29tbWVudDUzODg1MDM5",
            "user": {
                "login": "pbu88",
                "id": 3682272,
                "node_id": "MDQ6VXNlcjM2ODIyNzI=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/3682272?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/pbu88",
                "html_url": "https://github.com/pbu88",
                "followers_url": "https://api.github.com/users/pbu88/followers",
                "following_url": "https://api.github.com/users/pbu88/following{/other_user}",
                "gists_url": "https://api.github.com/users/pbu88/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/pbu88/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/pbu88/subscriptions",
                "organizations_url": "https://api.github.com/users/pbu88/orgs",
                "repos_url": "https://api.github.com/users/pbu88/repos",
                "events_url": "https://api.github.com/users/pbu88/events{/privacy}",
                "received_events_url": "https://api.github.com/users/pbu88/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-08-29T14:44:52Z",
            "updated_at": "2014-08-29T17:29:32Z",
            "author_association": "NONE",
            "body": "I think I got a clue on this one. It seems indeed a problem with `click`. The `envvar` access is actually never executed:\n\n```\n# click.core.MultiCommand.parse_args\ndef parse_args(self, ctx, args):\n    if not args and self.no_args_is_help and not ctx.resilient_parsing:\n        echo(ctx.get_help())\n        ctx.exit()\n    return Command.parse_args(self, ctx, args)\n```\n\nThis is the closest I've come to narrow the problem. If not args (`flask`) the function will exit on `ctx.exit()` but the problem is that env variables are actually accessed in `Command.parse_args`. That's why `flask --help` works correctly, because it has at least one arg and the environment gets set up.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/53933889",
            "html_url": "https://github.com/pallets/flask/issues/1124#issuecomment-53933889",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1124",
            "id": 53933889,
            "node_id": "MDEyOklzc3VlQ29tbWVudDUzOTMzODg5",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-08-29T21:49:40Z",
            "updated_at": "2014-08-29T21:49:40Z",
            "author_association": "MEMBER",
            "body": "I've also come that far. As a workaround we could set `invoke_without_subcommand` to true and print the help manually, but i think this should be fixed in click.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/221970437",
            "html_url": "https://github.com/pallets/flask/issues/1124#issuecomment-221970437",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1124",
            "id": 221970437,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTk3MDQzNw==",
            "user": {
                "login": "mitsuhiko",
                "id": 7396,
                "node_id": "MDQ6VXNlcjczOTY=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/7396?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mitsuhiko",
                "html_url": "https://github.com/mitsuhiko",
                "followers_url": "https://api.github.com/users/mitsuhiko/followers",
                "following_url": "https://api.github.com/users/mitsuhiko/following{/other_user}",
                "gists_url": "https://api.github.com/users/mitsuhiko/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mitsuhiko/subscriptions",
                "organizations_url": "https://api.github.com/users/mitsuhiko/orgs",
                "repos_url": "https://api.github.com/users/mitsuhiko/repos",
                "events_url": "https://api.github.com/users/mitsuhiko/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mitsuhiko/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-05-26T19:29:49Z",
            "updated_at": "2016-05-26T19:29:49Z",
            "author_association": "MEMBER",
            "body": "I'm closing this for now as the latest changes implicitly fixed this.\n"
        }
    ]
}