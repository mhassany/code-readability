{
    "url": "https://api.github.com/repos/pallets/flask/issues/513",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/513/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/513/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/513/events",
    "html_url": "https://github.com/pallets/flask/issues/513",
    "id": 4773144,
    "node_id": "MDU6SXNzdWU0NzczMTQ0",
    "number": 513,
    "title": "FAIL: test_jsonify",
    "user": {
        "login": "ddrouin",
        "id": 1783479,
        "node_id": "MDQ6VXNlcjE3ODM0Nzk=",
        "avatar_url": "https://avatars3.githubusercontent.com/u/1783479?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ddrouin",
        "html_url": "https://github.com/ddrouin",
        "followers_url": "https://api.github.com/users/ddrouin/followers",
        "following_url": "https://api.github.com/users/ddrouin/following{/other_user}",
        "gists_url": "https://api.github.com/users/ddrouin/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/ddrouin/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ddrouin/subscriptions",
        "organizations_url": "https://api.github.com/users/ddrouin/orgs",
        "repos_url": "https://api.github.com/users/ddrouin/repos",
        "events_url": "https://api.github.com/users/ddrouin/events{/privacy}",
        "received_events_url": "https://api.github.com/users/ddrouin/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2012-05-27T20:39:40Z",
    "updated_at": "2013-06-19T14:36:03Z",
    "closed_at": "2013-06-19T14:36:03Z",
    "author_association": "NONE",
    "body": "``` bash\nddrouin@Dave:~> git clone https://github.com/mitsuhiko/flask.git \nCloning into 'flask'...\n```\n\n**version** = '0.9-dev' appears in flask/flask/**init**.py \n\nTests run with Python 2.7.3 on Ubuntu 12.04 LTS\n\n``` bash\nddrouin@Dave:~/flask> python run-tests.py \n........................................................................................................................................E..................................................\n======================================================================\nERROR: test_jsonify (flask.testsuite.helpers.JSONTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/ddrouin/flask/flask/testsuite/helpers.py\", line 88, in test_jsonify\n    self.assert_equal(rv.mimetype, 'application/json', url)\nTypeError: assert_equal() takes exactly 3 arguments (4 given)\n\n----------------------------------------------------------------------\nRan 187 tests in 0.706s\n\nFAILED (errors=1)\n```\n\n/kw and /dict work fine, occurs on /unpadded.\nsimplejson is present, version 2.3.2\n\nline 136 in flask/flask.helpers has:\n\n``` python\nif 'padded' in kwargs:\n     ....\n     return current_app.response_class(content, mimetype='application/javascript')\n```\n\nSo the defect is triggered by kwargs containing {'padded': False}.  To fix this - I ended up changing my copy to this and now the tests all pass:\n\n``` python\n    if 'padded' in kwargs:\n        padded = kwargs['padded']\n        del kwargs['padded']\n    else:\n        padded = False\n\n    if padded:\n        if isinstance(padded, str):\n            callback = request.args.get(padded) or 'jsonp'\n        else:\n            callback = request.args.get('callback') or \\\n                       request.args.get('jsonp') or 'jsonp'\n        json_str = json.dumps(dict(*args, **kwargs), indent=None)\n        content = str(callback) + \"(\" + json_str + \")\"\n        return current_app.response_class(content, mimetype='application/javascript')\n    return current_app.response_class(json.dumps(dict(*args, **kwargs),\n        indent=None if request.is_xhr else 2), mimetype='application/json')\n```\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/8891603",
            "html_url": "https://github.com/pallets/flask/issues/513#issuecomment-8891603",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/513",
            "id": 8891603,
            "node_id": "MDEyOklzc3VlQ29tbWVudDg4OTE2MDM=",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-09-26T14:27:10Z",
            "updated_at": "2012-09-26T14:27:10Z",
            "author_association": "MEMBER",
            "body": "Tests run fine for me.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/14065032",
            "html_url": "https://github.com/pallets/flask/issues/513#issuecomment-14065032",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/513",
            "id": 14065032,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE0MDY1MDMy",
            "user": {
                "login": "passy",
                "id": 9906,
                "node_id": "MDQ6VXNlcjk5MDY=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/9906?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/passy",
                "html_url": "https://github.com/passy",
                "followers_url": "https://api.github.com/users/passy/followers",
                "following_url": "https://api.github.com/users/passy/following{/other_user}",
                "gists_url": "https://api.github.com/users/passy/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/passy/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/passy/subscriptions",
                "organizations_url": "https://api.github.com/users/passy/orgs",
                "repos_url": "https://api.github.com/users/passy/repos",
                "events_url": "https://api.github.com/users/passy/events{/privacy}",
                "received_events_url": "https://api.github.com/users/passy/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2013-02-25T18:50:43Z",
            "updated_at": "2013-02-25T18:50:43Z",
            "author_association": "CONTRIBUTOR",
            "body": "Can't reconstruct this on 4a156d3.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/19687925",
            "html_url": "https://github.com/pallets/flask/issues/513#issuecomment-19687925",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/513",
            "id": 19687925,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE5Njg3OTI1",
            "user": {
                "login": "DasIch",
                "id": 182316,
                "node_id": "MDQ6VXNlcjE4MjMxNg==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/182316?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/DasIch",
                "html_url": "https://github.com/DasIch",
                "followers_url": "https://api.github.com/users/DasIch/followers",
                "following_url": "https://api.github.com/users/DasIch/following{/other_user}",
                "gists_url": "https://api.github.com/users/DasIch/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/DasIch/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/DasIch/subscriptions",
                "organizations_url": "https://api.github.com/users/DasIch/orgs",
                "repos_url": "https://api.github.com/users/DasIch/repos",
                "events_url": "https://api.github.com/users/DasIch/events{/privacy}",
                "received_events_url": "https://api.github.com/users/DasIch/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2013-06-19T14:36:03Z",
            "updated_at": "2013-06-19T14:36:03Z",
            "author_association": "CONTRIBUTOR",
            "body": "Can't reproduce, looks like it's fixed.\n"
        }
    ]
}