{
    "url": "https://api.github.com/repos/pallets/flask/issues/3319",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/3319/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/3319/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/3319/events",
    "html_url": "https://github.com/pallets/flask/issues/3319",
    "id": 475333054,
    "node_id": "MDU6SXNzdWU0NzUzMzMwNTQ=",
    "number": 3319,
    "title": "Flask request.stream doesn't work as expected all times",
    "user": {
        "login": "adrienferrari",
        "id": 19345631,
        "node_id": "MDQ6VXNlcjE5MzQ1NjMx",
        "avatar_url": "https://avatars1.githubusercontent.com/u/19345631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/adrienferrari",
        "html_url": "https://github.com/adrienferrari",
        "followers_url": "https://api.github.com/users/adrienferrari/followers",
        "following_url": "https://api.github.com/users/adrienferrari/following{/other_user}",
        "gists_url": "https://api.github.com/users/adrienferrari/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/adrienferrari/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/adrienferrari/subscriptions",
        "organizations_url": "https://api.github.com/users/adrienferrari/orgs",
        "repos_url": "https://api.github.com/users/adrienferrari/repos",
        "events_url": "https://api.github.com/users/adrienferrari/events{/privacy}",
        "received_events_url": "https://api.github.com/users/adrienferrari/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2019-07-31T20:07:16Z",
    "updated_at": "2019-08-01T19:55:24Z",
    "closed_at": "2019-08-01T19:55:24Z",
    "author_association": "NONE",
    "body": "\r\n\r\n### Expected Behavior\r\nI need to stream data the Flask server to another external API. For this I'm using the request object from Flash with stream argument.\r\n\r\n```python\r\nfrom flask import request, Response\r\n\r\n@blueprint.route(\"/upload3\", methods=[\"POST\"])\r\ndef upload3():\r\n    resp = requests.post(\r\n                    url,\r\n                    data=request.stream,\r\n                    auth=auth,\r\n                    verify=False,\r\n                    stream=True)\r\n    return Response(status=200)\r\n```\r\n\r\n### Actual Behavior\r\nIt works properly when the client and Flask server are on the same network but it doesn't work when not.\r\nclient -> Flask server -> external API\r\nHere the result on the same network\r\nhttps://photos.app.goo.gl/wzRvN667791NxQhXA\r\n\r\nHere the trouble : The server wait all incoming data before sending it to the other server. But we can see that the connection is already opend.\r\nI can also see the python process eating the RAM memory corresponding to the data size.\r\nhttps://photos.app.goo.gl/EAWPvSL4CCBZURKb6\r\nhttps://photos.app.goo.gl/EGSnFU6fLHAwgPB46\r\n\r\n\r\n### Environment\r\n\r\n* Python version:3.6\r\n* Flask version:1.0.3\r\n* Werkzeug version:0.15.4```\r\n"
}