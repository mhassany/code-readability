{
    "url": "https://api.github.com/repos/pallets/flask/issues/2629",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2629/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2629/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2629/events",
    "html_url": "https://github.com/pallets/flask/pull/2629",
    "id": 296333921,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTY4NTQ4MTk2",
    "number": 2629,
    "title": "prevent double slash /a//b when blueprint prefix ends with slash",
    "user": {
        "login": "zcchen",
        "id": 1926362,
        "node_id": "MDQ6VXNlcjE5MjYzNjI=",
        "avatar_url": "https://avatars0.githubusercontent.com/u/1926362?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/zcchen",
        "html_url": "https://github.com/zcchen",
        "followers_url": "https://api.github.com/users/zcchen/followers",
        "following_url": "https://api.github.com/users/zcchen/following{/other_user}",
        "gists_url": "https://api.github.com/users/zcchen/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/zcchen/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/zcchen/subscriptions",
        "organizations_url": "https://api.github.com/users/zcchen/orgs",
        "repos_url": "https://api.github.com/users/zcchen/repos",
        "events_url": "https://api.github.com/users/zcchen/events{/privacy}",
        "received_events_url": "https://api.github.com/users/zcchen/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 357932495,
            "node_id": "MDU6TGFiZWwzNTc5MzI0OTU=",
            "url": "https://api.github.com/repos/pallets/flask/labels/blueprints",
            "name": "blueprints",
            "color": "1d76db",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 7,
    "created_at": "2018-02-12T10:56:05Z",
    "updated_at": "2018-05-01T18:19:50Z",
    "closed_at": "2018-02-24T00:00:31Z",
    "author_association": "CONTRIBUTOR",
    "pull_request": {
        "url": "https://api.github.com/repos/pallets/flask/pulls/2629",
        "html_url": "https://github.com/pallets/flask/pull/2629",
        "diff_url": "https://github.com/pallets/flask/pull/2629.diff",
        "patch_url": "https://github.com/pallets/flask/pull/2629.patch"
    },
    "body": "Simple example file as below:\r\n\r\n```\r\nfrom __future__ import print_function\r\n\r\nfrom flask import Flask, Blueprint, redirect\r\n\r\nbp = Blueprint('bp', __name__)\r\napp = Flask(__name__)\r\n\r\n@bp.route('/b/')\r\ndef tmp():\r\n    return \"URI should be '/a/b/\"\r\n\r\n\r\n@app.route('/')\r\ndef index():\r\n    return redirect(\"/a/b/\")\r\n\r\napp.register_blueprint(bp, url_prefix='/a/')\r\n\r\nif __name__ == \"__main__\":\r\n    print(\"app.url_map: \", app.url_map)\r\n    app.run(port=5000, host='127.0.0.1', debug=True)\r\n```\r\n\r\nWith the old code, there is one rule like this `<Rule '/a//b/' (HEAD, OPTIONS, GET) ->`.\r\nWith the new code, that rule would be change to `<Rule '/a/b/' (HEAD, OPTIONS, GET) ->`.",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/364889841",
            "html_url": "https://github.com/pallets/flask/pull/2629#issuecomment-364889841",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2629",
            "id": 364889841,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDg4OTg0MQ==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-02-12T10:58:21Z",
            "updated_at": "2018-02-12T10:58:21Z",
            "author_association": "MEMBER",
            "body": "I think people should rather not add trailing slashes to their `url_prefix` ;)\r\n\r\nMaybe showing a warning would be better instead of removing consecutive slashes so people can actually fix their code?\r\n\r\nPS: The commit message is a bit too long (even GitHub truncates it), first line should be 51 chars max."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/364892024",
            "html_url": "https://github.com/pallets/flask/pull/2629#issuecomment-364892024",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2629",
            "id": 364892024,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDg5MjAyNA==",
            "user": {
                "login": "zcchen",
                "id": 1926362,
                "node_id": "MDQ6VXNlcjE5MjYzNjI=",
                "avatar_url": "https://avatars0.githubusercontent.com/u/1926362?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/zcchen",
                "html_url": "https://github.com/zcchen",
                "followers_url": "https://api.github.com/users/zcchen/followers",
                "following_url": "https://api.github.com/users/zcchen/following{/other_user}",
                "gists_url": "https://api.github.com/users/zcchen/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/zcchen/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zcchen/subscriptions",
                "organizations_url": "https://api.github.com/users/zcchen/orgs",
                "repos_url": "https://api.github.com/users/zcchen/repos",
                "events_url": "https://api.github.com/users/zcchen/events{/privacy}",
                "received_events_url": "https://api.github.com/users/zcchen/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-02-12T11:08:10Z",
            "updated_at": "2018-02-12T11:08:10Z",
            "author_association": "CONTRIBUTOR",
            "body": "Maybe someone would use `url_prefix = '/'`?\r\nAt that time, bp.route would also have a rule like '/' ."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/364892209",
            "html_url": "https://github.com/pallets/flask/pull/2629#issuecomment-364892209",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2629",
            "id": 364892209,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDg5MjIwOQ==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-02-12T11:09:07Z",
            "updated_at": "2018-02-12T11:09:07Z",
            "author_association": "MEMBER",
            "body": "`url_prefix='/'` seems to be quite pointless, isn't it?"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/364899785",
            "html_url": "https://github.com/pallets/flask/pull/2629#issuecomment-364899785",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2629",
            "id": 364899785,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDg5OTc4NQ==",
            "user": {
                "login": "zcchen",
                "id": 1926362,
                "node_id": "MDQ6VXNlcjE5MjYzNjI=",
                "avatar_url": "https://avatars0.githubusercontent.com/u/1926362?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/zcchen",
                "html_url": "https://github.com/zcchen",
                "followers_url": "https://api.github.com/users/zcchen/followers",
                "following_url": "https://api.github.com/users/zcchen/following{/other_user}",
                "gists_url": "https://api.github.com/users/zcchen/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/zcchen/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zcchen/subscriptions",
                "organizations_url": "https://api.github.com/users/zcchen/orgs",
                "repos_url": "https://api.github.com/users/zcchen/repos",
                "events_url": "https://api.github.com/users/zcchen/events{/privacy}",
                "received_events_url": "https://api.github.com/users/zcchen/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-02-12T11:45:09Z",
            "updated_at": "2018-02-12T11:47:20Z",
            "author_association": "CONTRIBUTOR",
            "body": "Yes.\r\nBut should we clear the extra and useless slashes in the URL?"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/364951208",
            "html_url": "https://github.com/pallets/flask/pull/2629#issuecomment-364951208",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2629",
            "id": 364951208,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDk1MTIwOA==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-02-12T15:10:56Z",
            "updated_at": "2018-02-20T00:30:55Z",
            "author_association": "MEMBER",
            "body": "Related to pallets/werkzeug#1132.\r\n\r\n`url_prefix=''` (or just not specifying it at all) already works for registering a blueprint at the root path."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/366834787",
            "html_url": "https://github.com/pallets/flask/pull/2629#issuecomment-366834787",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2629",
            "id": 366834787,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM2NjgzNDc4Nw==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-02-20T00:35:28Z",
            "updated_at": "2018-02-20T00:35:28Z",
            "author_association": "MEMBER",
            "body": "This should probably just strip exactly one trailing slash off the prefix. I don't want to mess with route definitions in general, just the prefixing. If pallets/werkzeug#1132 is implemented, it will handle normalizing routes in general."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/367297650",
            "html_url": "https://github.com/pallets/flask/pull/2629#issuecomment-367297650",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2629",
            "id": 367297650,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM2NzI5NzY1MA==",
            "user": {
                "login": "anowlcalledjosh",
                "id": 9433472,
                "node_id": "MDQ6VXNlcjk0MzM0NzI=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/9433472?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/anowlcalledjosh",
                "html_url": "https://github.com/anowlcalledjosh",
                "followers_url": "https://api.github.com/users/anowlcalledjosh/followers",
                "following_url": "https://api.github.com/users/anowlcalledjosh/following{/other_user}",
                "gists_url": "https://api.github.com/users/anowlcalledjosh/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/anowlcalledjosh/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/anowlcalledjosh/subscriptions",
                "organizations_url": "https://api.github.com/users/anowlcalledjosh/orgs",
                "repos_url": "https://api.github.com/users/anowlcalledjosh/repos",
                "events_url": "https://api.github.com/users/anowlcalledjosh/events{/privacy}",
                "received_events_url": "https://api.github.com/users/anowlcalledjosh/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-02-21T11:29:57Z",
            "updated_at": "2018-02-21T11:29:57Z",
            "author_association": "CONTRIBUTOR",
            "body": "I agree that some kind of feature to either strip a trailing slash or to warn that it's not necessary should be added \u2013 I recently was trying to work out why some things were not working properly when using `url_prefix=\"/\"`, since that seemed like the obvious thing to do to explicitly register a blueprint at the root of the app."
        }
    ]
}