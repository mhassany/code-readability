{
    "url": "https://api.github.com/repos/pallets/flask/issues/2507",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2507/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2507/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2507/events",
    "html_url": "https://github.com/pallets/flask/issues/2507",
    "id": 269325258,
    "node_id": "MDU6SXNzdWUyNjkzMjUyNTg=",
    "number": 2507,
    "title": "Percent encoded forward slash is stil treated as a URL component delimiter",
    "user": {
        "login": "heartsucker",
        "id": 3998464,
        "node_id": "MDQ6VXNlcjM5OTg0NjQ=",
        "avatar_url": "https://avatars0.githubusercontent.com/u/3998464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/heartsucker",
        "html_url": "https://github.com/heartsucker",
        "followers_url": "https://api.github.com/users/heartsucker/followers",
        "following_url": "https://api.github.com/users/heartsucker/following{/other_user}",
        "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions",
        "organizations_url": "https://api.github.com/users/heartsucker/orgs",
        "repos_url": "https://api.github.com/users/heartsucker/repos",
        "events_url": "https://api.github.com/users/heartsucker/events{/privacy}",
        "received_events_url": "https://api.github.com/users/heartsucker/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2017-10-28T15:13:39Z",
    "updated_at": "2017-10-28T15:18:22Z",
    "closed_at": "2017-10-28T15:18:22Z",
    "author_association": "NONE",
    "body": "### Expected Behavior\r\n\r\nWhen a forward slash (`/`) is percent encoded, it should not be treated as a delimiter in a URL but instead should be treated as a string character.\r\n\r\n```python\r\nfrom flask import Flask\r\napp = Flask(__name__)\r\n\r\n@app.route('/<string:foo>')\r\ndef index(foo):\r\n    return foo\r\n\r\napp.run('localhost', 3000)\r\n```\r\n\r\n```bash\r\n$ curl localhost:3000/foo%2Fbar\r\nfoo/bar\r\n```\r\n\r\n\r\n### Actual Behavior\r\n\r\n```bash\r\n$ curl localhost:3000/foo%2Fbar\r\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 3.2 Final//EN\">\r\n<title>404 Not Found</title>\r\n<h1>Not Found</h1>\r\n<p>The requested URL was not found on the server.  If you entered the URL manually please check your spelling and try again.</p>\r\n```\r\n\r\n### Environment\r\n\r\n* Python version: `Python 3.5.3`\r\n* Flask version: `0.12.2`\r\n* Werkzeug version: `0.12.2`\r\n\r\nvenv:\r\n```\r\nclick==6.7\r\nFlask==0.12.2\r\nitsdangerous==0.24\r\nJinja2==2.9.6\r\nMarkupSafe==1.0\r\nWerkzeug==0.12.2\r\n```\r\n\r\n### Use Case\r\n\r\nA website has the URL rule `/<string:company>/<string:user>`. Company names and users would have to have the slash character disallowed otherwise they would not be able to be cleanly represented as a URL.\r\n\r\n\r\n### A Second Example\r\n\r\nA second issue that I assume is directly related is that `url_for` doesn't escape the forward slash.\r\n\r\n```python\r\nfrom flask import Flask, Markup, request, redirect, url_for\r\napp = Flask(__name__)\r\n\r\n@app.route('/', methods=('GET', 'POST'))\r\ndef index():\r\n    if request.method == 'POST':\r\n        return redirect(url_for('other', foo=request.form['foo'], bar=request.form['bar']))\r\n    else:\r\n        return Markup(\r\n            '''<form method=\"POST\">\r\n                 <input name=\"foo\" type=\"text\">\r\n                 <input name=\"bar\" type=\"text\">\r\n                 <input type=\"submit\" value=\"Submit\">\r\n               </form>\r\n            ''')\r\n\r\n\r\n@app.route('/other/<string:foo>/<string:bar>')\r\ndef other(foo, bar):\r\n    return '{}<br>{}'.format(foo, bar)\r\n\r\n\r\napp.run('localhost', 3000)\r\n```\r\n\r\nIn the browser, submitting `foo/moarfoo` and `bar` into the two fields yields the URL `/foo/moarfoo/bar` instead of `/foo%2Fmoarfoo/bar`.",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/340198456",
            "html_url": "https://github.com/pallets/flask/issues/2507#issuecomment-340198456",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2507",
            "id": 340198456,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0MDE5ODQ1Ng==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-10-28T15:18:22Z",
            "updated_at": "2017-10-28T15:18:22Z",
            "author_association": "MEMBER",
            "body": "See #900 and pallets/werkzeug#21.\r\n\r\nFYI, if you may be able to use `<path:foo>` to have a segment that can contain slashes. However, I think both company names and user names should be \"slugified\" (pure ascii, no weird chars, no whitespace, no slashes, other stuff converted to dashes) before being used in an URL. For example, you'd convert \"Greedy Corp\" to \"greedy-corp\" and \"Slightly/Evil Org\" to \"slightly-evil-org\""
        }
    ]
}