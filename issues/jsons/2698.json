{
    "url": "https://api.github.com/repos/pallets/flask/issues/2698",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2698/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2698/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2698/events",
    "html_url": "https://github.com/pallets/flask/issues/2698",
    "id": 313599037,
    "node_id": "MDU6SXNzdWUzMTM1OTkwMzc=",
    "number": 2698,
    "title": "Flask logging issue with gunicorn ",
    "user": {
        "login": "amirgohar-AG",
        "id": 11002686,
        "node_id": "MDQ6VXNlcjExMDAyNjg2",
        "avatar_url": "https://avatars1.githubusercontent.com/u/11002686?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amirgohar-AG",
        "html_url": "https://github.com/amirgohar-AG",
        "followers_url": "https://api.github.com/users/amirgohar-AG/followers",
        "following_url": "https://api.github.com/users/amirgohar-AG/following{/other_user}",
        "gists_url": "https://api.github.com/users/amirgohar-AG/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/amirgohar-AG/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/amirgohar-AG/subscriptions",
        "organizations_url": "https://api.github.com/users/amirgohar-AG/orgs",
        "repos_url": "https://api.github.com/users/amirgohar-AG/repos",
        "events_url": "https://api.github.com/users/amirgohar-AG/events{/privacy}",
        "received_events_url": "https://api.github.com/users/amirgohar-AG/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2018-04-12T06:56:44Z",
    "updated_at": "2018-04-12T07:17:37Z",
    "closed_at": "2018-04-12T07:17:37Z",
    "author_association": "NONE",
    "body": "### Expected Behavior\r\n\r\nExpecting to get Log messages other than ERROR level into gunicorn error.log file in order to persist my logs.\r\n\r\n```\r\nLogging Configuration:\r\ngunicorn_logger = logging.getLogger('gunicorn.error')\r\napp.logger.handlers = gunicorn_logger.handlers\r\napp.logger.setLevel(gunicorn_logger.level)\r\n\r\nCommand to run Gunicorn:\r\ngunicorn --access-logfile \"access.log\" --error-logfile \"error.log\" --log-level info --worker-class gevent --workers=3 --timeout 60 --bind 0.0.0.0:8081 manage:app\r\n```\r\n\r\n### Actual Behavior\r\n\r\nSometimes when an error message is logged it keeps on logging the same message for some time and then throws this error mentioned below. It doesn't happen all the time or on a certain log message but will occur randomly. App keeps working fine doesn't stop responding to the requests but adds too much noise in logs. If i use simple StreamHandler then it doesn't through any errors but the INFO or DEBUG messages or not written to Gunicorn error.log file as it doesn't capture stdout may be\r\n\r\n```pytb\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\nweb_1           | [2018-04-10 04:48:34,793] ERROR in api: AUTH_ERROR: cannot get Auth-Token for user 'amir@wanclouds.net'\r\n\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/gunicorn/http/wsgi.py\", line 70, in write\r\nweb_1           |     stream.write(data)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/werkzeug/local.py\", line 347, in __getattr__\r\nweb_1           |     return getattr(self._get_current_object(), name)\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/werkzeug/local.py\", line 306, in _get_current_object\r\nweb_1           |     return self.__local()\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/flask/logging.py\", line 37, in _proxy_stream\r\nweb_1           |     ctx = _request_ctx_stack.top\r\nweb_1           |   File \"/usr/local/lib/python2.7/site-packages/werkzeug/local.py\", line 166, in top\r\nweb_1           |     return self._local.stack[-1]\r\nweb_1           | RuntimeError: maximum recursion depth exceeded\r\n\r\n```\r\n\r\n### Environment\r\n\r\n* Python version: 2.7\r\n* Flask version: 0.12.2\r\n* Werkzeug version: 0.12.2\r\n"
}