{
    "url": "https://api.github.com/repos/pallets/flask/issues/2240",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2240/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2240/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2240/events",
    "html_url": "https://github.com/pallets/flask/pull/2240",
    "id": 221438314,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTE1NjcwNTQw",
    "number": 2240,
    "title": "update send_file cache control timeout=-1 no-cache",
    "user": {
        "login": "gshmu",
        "id": 1797676,
        "node_id": "MDQ6VXNlcjE3OTc2NzY=",
        "avatar_url": "https://avatars2.githubusercontent.com/u/1797676?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gshmu",
        "html_url": "https://github.com/gshmu",
        "followers_url": "https://api.github.com/users/gshmu/followers",
        "following_url": "https://api.github.com/users/gshmu/following{/other_user}",
        "gists_url": "https://api.github.com/users/gshmu/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/gshmu/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/gshmu/subscriptions",
        "organizations_url": "https://api.github.com/users/gshmu/orgs",
        "repos_url": "https://api.github.com/users/gshmu/repos",
        "events_url": "https://api.github.com/users/gshmu/events{/privacy}",
        "received_events_url": "https://api.github.com/users/gshmu/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 7,
    "created_at": "2017-04-13T02:02:46Z",
    "updated_at": "2018-10-23T17:44:06Z",
    "closed_at": "2017-05-29T18:35:05Z",
    "author_association": "NONE",
    "pull_request": {
        "url": "https://api.github.com/repos/pallets/flask/pulls/2240",
        "html_url": "https://github.com/pallets/flask/pull/2240",
        "diff_url": "https://github.com/pallets/flask/pull/2240.diff",
        "patch_url": "https://github.com/pallets/flask/pull/2240.patch"
    },
    "body": "update send_file cache control\r\nset timeout <= 0 will no-cache no-store",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/294295317",
            "html_url": "https://github.com/pallets/flask/pull/2240#issuecomment-294295317",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2240",
            "id": 294295317,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDI5NTMxNw==",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-04-15T14:04:12Z",
            "updated_at": "2017-04-15T14:04:28Z",
            "author_association": "MEMBER",
            "body": "This effectively becomes the default behavior, which I consider wrong. `send_file` is also used for static assets. Also note that `private` is already the default value if no header is specified."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/294345301",
            "html_url": "https://github.com/pallets/flask/pull/2240#issuecomment-294345301",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2240",
            "id": 294345301,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDM0NTMwMQ==",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-04-16T10:44:47Z",
            "updated_at": "2017-04-16T10:44:47Z",
            "author_association": "MEMBER",
            "body": "Any thoughts on my previous comment? How does browser's behavior change with this PR?"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/294348686",
            "html_url": "https://github.com/pallets/flask/pull/2240#issuecomment-294348686",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2240",
            "id": 294348686,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDM0ODY4Ng==",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-04-16T12:16:16Z",
            "updated_at": "2017-04-16T12:16:16Z",
            "author_association": "MEMBER",
            "body": "I would hold off of this before we know what this actually accomplishes."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/300967948",
            "html_url": "https://github.com/pallets/flask/pull/2240#issuecomment-300967948",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2240",
            "id": 300967948,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDk2Nzk0OA==",
            "user": {
                "login": "lepture",
                "id": 290496,
                "node_id": "MDQ6VXNlcjI5MDQ5Ng==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/290496?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/lepture",
                "html_url": "https://github.com/lepture",
                "followers_url": "https://api.github.com/users/lepture/followers",
                "following_url": "https://api.github.com/users/lepture/following{/other_user}",
                "gists_url": "https://api.github.com/users/lepture/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/lepture/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lepture/subscriptions",
                "organizations_url": "https://api.github.com/users/lepture/orgs",
                "repos_url": "https://api.github.com/users/lepture/repos",
                "events_url": "https://api.github.com/users/lepture/events{/privacy}",
                "received_events_url": "https://api.github.com/users/lepture/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-05-12T02:33:03Z",
            "updated_at": "2017-05-12T02:33:03Z",
            "author_association": "MEMBER",
            "body": "It would benefit the development. Chrome is caching way too much now. With no-cache control header, developers can easily refresh and load the new css/js code."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/300984123",
            "html_url": "https://github.com/pallets/flask/pull/2240#issuecomment-300984123",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2240",
            "id": 300984123,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwMDk4NDEyMw==",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-05-12T04:59:33Z",
            "updated_at": "2017-05-12T04:59:33Z",
            "author_association": "MEMBER",
            "body": "True, but this affects more than dev.\n\nOn 12 May 2017 04:33:09 GMT+02:00, Hsiaoming Yang <notifications@github.com> wrote:\n>It would benefit the development. Chrome is caching way too much now.\n>With no-cache control header, developers can easily refresh and load\n>the new css/js code.\n>\n>-- \n>You are receiving this because your review was requested.\n>Reply to this email directly or view it on GitHub:\n>https://github.com/pallets/flask/pull/2240#issuecomment-300967948\n\n-- \nSent from my Android device with K-9 Mail. Please excuse my brevity."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/304134559",
            "html_url": "https://github.com/pallets/flask/pull/2240#issuecomment-304134559",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2240",
            "id": 304134559,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDEzNDU1OQ==",
            "user": {
                "login": "kennethreitz",
                "id": 119893,
                "node_id": "MDQ6VXNlcjExOTg5Mw==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/119893?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/kennethreitz",
                "html_url": "https://github.com/kennethreitz",
                "followers_url": "https://api.github.com/users/kennethreitz/followers",
                "following_url": "https://api.github.com/users/kennethreitz/following{/other_user}",
                "gists_url": "https://api.github.com/users/kennethreitz/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/kennethreitz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/kennethreitz/subscriptions",
                "organizations_url": "https://api.github.com/users/kennethreitz/orgs",
                "repos_url": "https://api.github.com/users/kennethreitz/repos",
                "events_url": "https://api.github.com/users/kennethreitz/events{/privacy}",
                "received_events_url": "https://api.github.com/users/kennethreitz/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-05-25T21:51:19Z",
            "updated_at": "2017-05-25T21:51:19Z",
            "author_association": "CONTRIBUTOR",
            "body": "So, are we going to merge this or toss it?"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/304712400",
            "html_url": "https://github.com/pallets/flask/pull/2240#issuecomment-304712400",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2240",
            "id": 304712400,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDcxMjQwMA==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-05-29T18:35:05Z",
            "updated_at": "2017-05-29T18:35:05Z",
            "author_association": "MEMBER",
            "body": "I liked the idea at first, but after researching the headers more it's unclear.\r\n\r\n* `no-cache` means always ask for the headers even if the cached resource isn't expired\r\n* `no-store` means don't cache anything anything, always get the remote resource\r\n* `must-revalidate` means something like `no-cache`, but is more strict?\r\n\r\nWhy do we want `-1` to mean `no-store` as opposed to only `no-cache`, which seems more efficient while still accomplishing \"don't use stale static files\"? Why do we remove the `public` flag, which I think is the default anyway? I think this probably belongs in a function in your own code, rather than as a magic number for this parameter.\r\n\r\n~~~python\r\ndef send_file_no_cache(*args, **kwargs):\r\n    rv = send_file(*args, **kwargs)\r\n    rv.cache_control.no_cache = True\r\n    rv.cache_control.no_store = True\r\n    return rv\r\n~~~\r\n\r\nThe docs I found aren't completely clear about what combinations do.\r\n\r\n* https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching\r\n* https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control\r\n\r\nIf you can clarify more and think this should be merged, please reopen discussion."
        }
    ]
}