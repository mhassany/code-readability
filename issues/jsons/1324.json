{
    "url": "https://api.github.com/repos/pallets/flask/issues/1324",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1324/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1324/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1324/events",
    "html_url": "https://github.com/pallets/flask/issues/1324",
    "id": 54949935,
    "node_id": "MDU6SXNzdWU1NDk0OTkzNQ==",
    "number": 1324,
    "title": "test_client removes query_string",
    "user": {
        "login": "flaker",
        "id": 627517,
        "node_id": "MDQ6VXNlcjYyNzUxNw==",
        "avatar_url": "https://avatars1.githubusercontent.com/u/627517?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/flaker",
        "html_url": "https://github.com/flaker",
        "followers_url": "https://api.github.com/users/flaker/followers",
        "following_url": "https://api.github.com/users/flaker/following{/other_user}",
        "gists_url": "https://api.github.com/users/flaker/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/flaker/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/flaker/subscriptions",
        "organizations_url": "https://api.github.com/users/flaker/orgs",
        "repos_url": "https://api.github.com/users/flaker/repos",
        "events_url": "https://api.github.com/users/flaker/events{/privacy}",
        "received_events_url": "https://api.github.com/users/flaker/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 11,
    "created_at": "2015-01-20T22:29:46Z",
    "updated_at": "2016-04-05T16:28:53Z",
    "closed_at": "2015-01-25T19:43:19Z",
    "author_association": "NONE",
    "body": "I've been trying to use test_client with some simple services I've made but noticed that when calling a service sending something through the query string, nothing is received on the endpoint. So:\n\ntest_client.get(\"http://localhost/api1_0/some-service?param1=value1\")\n\n(Actually I use url_to())\n\ngets to some-service as expected, but the request.args collection is empty. This call works perfectly if I use an external tool like curl.\n\nDebugging, I've got to the method make_test_environ_builder (testing.py) where url.path is used but url.querystring is just disregarded. \n\nIn the end, I've found a workaround (while writing this issue):\n\ntest_client.get(\"http://localhost/api1_0/some-service\", query_string = \"param1=value1\")\n\nThe added parameter travels to the EnvironBuilder.\n\nIt seems to me that this is a bug since there is no reason why the query string should be disregarded in the first place. But I am new to Flask so I may be missing something\n\nThank you.\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/70893046",
            "html_url": "https://github.com/pallets/flask/issues/1324#issuecomment-70893046",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1324",
            "id": 70893046,
            "node_id": "MDEyOklzc3VlQ29tbWVudDcwODkzMDQ2",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-01-21T18:28:32Z",
            "updated_at": "2015-01-21T18:28:32Z",
            "author_association": "MEMBER",
            "body": "Could you try with the dev-version of Werkzeug?\n\n```\npip install git+https://github.com/mitsuhiko/werkzeug.git\n```\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/70893147",
            "html_url": "https://github.com/pallets/flask/issues/1324#issuecomment-70893147",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1324",
            "id": 70893147,
            "node_id": "MDEyOklzc3VlQ29tbWVudDcwODkzMTQ3",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-01-21T18:29:02Z",
            "updated_at": "2015-01-21T18:29:02Z",
            "author_association": "MEMBER",
            "body": "Or it might also be because you use an old version of Werkzeug...\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/71377016",
            "html_url": "https://github.com/pallets/flask/issues/1324#issuecomment-71377016",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1324",
            "id": 71377016,
            "node_id": "MDEyOklzc3VlQ29tbWVudDcxMzc3MDE2",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-01-25T15:20:20Z",
            "updated_at": "2015-01-25T15:20:20Z",
            "author_association": "MEMBER",
            "body": "@flaker Any update on this? Otherwise I'll close this issue.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/71384740",
            "html_url": "https://github.com/pallets/flask/issues/1324#issuecomment-71384740",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1324",
            "id": 71384740,
            "node_id": "MDEyOklzc3VlQ29tbWVudDcxMzg0NzQw",
            "user": {
                "login": "flaker",
                "id": 627517,
                "node_id": "MDQ6VXNlcjYyNzUxNw==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/627517?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/flaker",
                "html_url": "https://github.com/flaker",
                "followers_url": "https://api.github.com/users/flaker/followers",
                "following_url": "https://api.github.com/users/flaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/flaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/flaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/flaker/subscriptions",
                "organizations_url": "https://api.github.com/users/flaker/orgs",
                "repos_url": "https://api.github.com/users/flaker/repos",
                "events_url": "https://api.github.com/users/flaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/flaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-01-25T18:29:11Z",
            "updated_at": "2015-01-25T18:29:11Z",
            "author_association": "NONE",
            "body": "Hi @untitaker ,\n\nTo answer your  previous comment. I am using Werkzeug 0.9.6 on my Flask setup, I believe that is a rather new version.\n\nI am going to test getting from git and go back to you on that in a couple of minutes.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/71387885",
            "html_url": "https://github.com/pallets/flask/issues/1324#issuecomment-71387885",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1324",
            "id": 71387885,
            "node_id": "MDEyOklzc3VlQ29tbWVudDcxMzg3ODg1",
            "user": {
                "login": "flaker",
                "id": 627517,
                "node_id": "MDQ6VXNlcjYyNzUxNw==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/627517?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/flaker",
                "html_url": "https://github.com/flaker",
                "followers_url": "https://api.github.com/users/flaker/followers",
                "following_url": "https://api.github.com/users/flaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/flaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/flaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/flaker/subscriptions",
                "organizations_url": "https://api.github.com/users/flaker/orgs",
                "repos_url": "https://api.github.com/users/flaker/repos",
                "events_url": "https://api.github.com/users/flaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/flaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-01-25T19:35:43Z",
            "updated_at": "2015-01-25T19:35:43Z",
            "author_association": "NONE",
            "body": "Ok,\n\nThis is the script I used to test the issue. I am copying it because maybe it is not even a bug, just my ignorance on Flask.\n\n``` python\nfrom flask import Flask, request, url_for\n\napp = Flask(__name__)\napp.config[\"SERVER_NAME\"] = \"localhost\"\n\n@app.route(\"/srv\")\ndef srv():\n    flag = request.args.get(\"hello\")\n    if flag != \"True\":\n        return \"Bye world\"\n    return \"Hello world\"\n\nif __name__ == \"__main__\":\n    app_context = app.app_context()\n    app_context.push()\n    query_string_param = \"hello=True\"\n\n    client = app.test_client()\n    base_url = url_for(\"srv\") \n    url_with_param = base_url + \"?\" + query_string_param\n    print \"Target Url is: %s\" %url_with_param\n    print client.get(url_with_param).get_data()\n    print client.get(base_url, query_string=query_string_param).get_data()\n```\n\nI understand that the correct output should be:\n\n```\nTarget Url is: http://localhost/srv?hello=True\nHello world\nHello world\n```\n\nbut instead it is:\n\n```\nTarget Url is: http://localhost/srv?hello=True\nBye world\nHello world\n```\n\nThe exact same output is reproduced used the following (output from `pip freeze`):\n\n```\nFlask==0.10.1\nitsdangerous==0.24\nJinja2==2.7.3\nMarkupSafe==0.23\nWerkzeug==0.9.6\n```\n\nand the version with Wekzeug downloaded from git\n\n```\nFlask==0.10.1\nitsdangerous==0.24\nJinja2==2.7.3\nMarkupSafe==0.23\n## FIXME: could not find svn URL in dependency_links for this package:\nWerkzeug===0.10.dev0dev-20150125\n```\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/71388154",
            "html_url": "https://github.com/pallets/flask/issues/1324#issuecomment-71388154",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1324",
            "id": 71388154,
            "node_id": "MDEyOklzc3VlQ29tbWVudDcxMzg4MTU0",
            "user": {
                "login": "flaker",
                "id": 627517,
                "node_id": "MDQ6VXNlcjYyNzUxNw==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/627517?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/flaker",
                "html_url": "https://github.com/flaker",
                "followers_url": "https://api.github.com/users/flaker/followers",
                "following_url": "https://api.github.com/users/flaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/flaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/flaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/flaker/subscriptions",
                "organizations_url": "https://api.github.com/users/flaker/orgs",
                "repos_url": "https://api.github.com/users/flaker/repos",
                "events_url": "https://api.github.com/users/flaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/flaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-01-25T19:38:17Z",
            "updated_at": "2015-01-25T19:38:17Z",
            "author_association": "NONE",
            "body": "I've just found this. \n\nA change on the method I mentioned (`make_test_environ_builder`) seems to have fixed the issue.\n\nhttps://github.com/mitsuhiko/flask/blob/b81f72070ec0dc2bede09eedea3d0b0360887720/flask/testing.py\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/71388547",
            "html_url": "https://github.com/pallets/flask/issues/1324#issuecomment-71388547",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1324",
            "id": 71388547,
            "node_id": "MDEyOklzc3VlQ29tbWVudDcxMzg4NTQ3",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-01-25T19:42:23Z",
            "updated_at": "2015-01-25T19:42:23Z",
            "author_association": "MEMBER",
            "body": "Ok so this is fixed in development?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/71388587",
            "html_url": "https://github.com/pallets/flask/issues/1324#issuecomment-71388587",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1324",
            "id": 71388587,
            "node_id": "MDEyOklzc3VlQ29tbWVudDcxMzg4NTg3",
            "user": {
                "login": "flaker",
                "id": 627517,
                "node_id": "MDQ6VXNlcjYyNzUxNw==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/627517?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/flaker",
                "html_url": "https://github.com/flaker",
                "followers_url": "https://api.github.com/users/flaker/followers",
                "following_url": "https://api.github.com/users/flaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/flaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/flaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/flaker/subscriptions",
                "organizations_url": "https://api.github.com/users/flaker/orgs",
                "repos_url": "https://api.github.com/users/flaker/repos",
                "events_url": "https://api.github.com/users/flaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/flaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-01-25T19:43:19Z",
            "updated_at": "2015-01-25T19:43:19Z",
            "author_association": "NONE",
            "body": "I've installed:\npip install git+https://github.com/mitsuhiko/flask.git\n\nand the issue is fixed there.\n\nThank you @untitaker  sorry for bothering you with a solved issue.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/71388624",
            "html_url": "https://github.com/pallets/flask/issues/1324#issuecomment-71388624",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1324",
            "id": 71388624,
            "node_id": "MDEyOklzc3VlQ29tbWVudDcxMzg4NjI0",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-01-25T19:44:01Z",
            "updated_at": "2015-01-25T19:44:01Z",
            "author_association": "MEMBER",
            "body": "No problem, it's been a while since we released a new version.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/205854141",
            "html_url": "https://github.com/pallets/flask/issues/1324#issuecomment-205854141",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1324",
            "id": 205854141,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIwNTg1NDE0MQ==",
            "user": {
                "login": "sibelius",
                "id": 2005841,
                "node_id": "MDQ6VXNlcjIwMDU4NDE=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/2005841?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/sibelius",
                "html_url": "https://github.com/sibelius",
                "followers_url": "https://api.github.com/users/sibelius/followers",
                "following_url": "https://api.github.com/users/sibelius/following{/other_user}",
                "gists_url": "https://api.github.com/users/sibelius/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/sibelius/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sibelius/subscriptions",
                "organizations_url": "https://api.github.com/users/sibelius/orgs",
                "repos_url": "https://api.github.com/users/sibelius/repos",
                "events_url": "https://api.github.com/users/sibelius/events{/privacy}",
                "received_events_url": "https://api.github.com/users/sibelius/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-05T15:18:02Z",
            "updated_at": "2016-04-05T15:18:02Z",
            "author_association": "NONE",
            "body": "is this on 0.10.1?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/205884466",
            "html_url": "https://github.com/pallets/flask/issues/1324#issuecomment-205884466",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1324",
            "id": 205884466,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIwNTg4NDQ2Ng==",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-05T16:28:53Z",
            "updated_at": "2016-04-05T16:28:53Z",
            "author_association": "MEMBER",
            "body": "https://github.com/pallets/flask/commit/e7c587789ae22a626196cea26340253dd9b70bf1 seems to be in 0.10-maintenance, so 0.10.2 will contain it.\n"
        }
    ]
}