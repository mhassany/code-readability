{
    "url": "https://api.github.com/repos/pallets/flask/issues/1168",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1168/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1168/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1168/events",
    "html_url": "https://github.com/pallets/flask/issues/1168",
    "id": 41899563,
    "node_id": "MDU6SXNzdWU0MTg5OTU2Mw==",
    "number": 1168,
    "title": "function flash() not working with redirect()",
    "user": {
        "login": "robin92",
        "id": 1593736,
        "node_id": "MDQ6VXNlcjE1OTM3MzY=",
        "avatar_url": "https://avatars3.githubusercontent.com/u/1593736?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/robin92",
        "html_url": "https://github.com/robin92",
        "followers_url": "https://api.github.com/users/robin92/followers",
        "following_url": "https://api.github.com/users/robin92/following{/other_user}",
        "gists_url": "https://api.github.com/users/robin92/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/robin92/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/robin92/subscriptions",
        "organizations_url": "https://api.github.com/users/robin92/orgs",
        "repos_url": "https://api.github.com/users/robin92/repos",
        "events_url": "https://api.github.com/users/robin92/events{/privacy}",
        "received_events_url": "https://api.github.com/users/robin92/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2014-09-04T06:29:38Z",
    "updated_at": "2017-07-10T15:44:02Z",
    "closed_at": "2014-09-04T09:13:45Z",
    "author_association": "NONE",
    "body": "Here's the example:\n\n``` python\nfrom flask import Flask, flash, get_flashed_messages, redirect, url_for\n\napp = Flask(__name__)\napp.secret_key = 'some_secret'\n\n@app.route('/')\ndef index():\n    app.logger.debug(get_flashed_messages())\n    return 'Hello world'\n\n@app.route('/generate/success')\ndef page_success():\n    flash('This message will be visible!')\n    return str(get_flashed_messages())\n\n@app.route('/generate/fail',)\ndef page_fail():\n    flash('This message will be lost!')\n    return redirect(url_for('index'))\n\nif __name__ == \"__main__\":\n    app.run()\n```\n\nAs you can see flash() fails when using redirect. Tried with `SERVER_NAME` both set and unset. Using `Flask==0.10.1`.\n\nPlease resolve the issue ASAP since it's a top blocker in my project.\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/54414240",
            "html_url": "https://github.com/pallets/flask/issues/1168#issuecomment-54414240",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1168",
            "id": 54414240,
            "node_id": "MDEyOklzc3VlQ29tbWVudDU0NDE0MjQw",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-09-04T06:31:20Z",
            "updated_at": "2014-09-04T06:31:20Z",
            "author_association": "MEMBER",
            "body": "It should work fine. Does your actual project call `get_flashed_messages()` before redirecting by any chance?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/54415211",
            "html_url": "https://github.com/pallets/flask/issues/1168#issuecomment-54415211",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1168",
            "id": 54415211,
            "node_id": "MDEyOklzc3VlQ29tbWVudDU0NDE1MjEx",
            "user": {
                "login": "robin92",
                "id": 1593736,
                "node_id": "MDQ6VXNlcjE1OTM3MzY=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/1593736?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/robin92",
                "html_url": "https://github.com/robin92",
                "followers_url": "https://api.github.com/users/robin92/followers",
                "following_url": "https://api.github.com/users/robin92/following{/other_user}",
                "gists_url": "https://api.github.com/users/robin92/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/robin92/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robin92/subscriptions",
                "organizations_url": "https://api.github.com/users/robin92/orgs",
                "repos_url": "https://api.github.com/users/robin92/repos",
                "events_url": "https://api.github.com/users/robin92/events{/privacy}",
                "received_events_url": "https://api.github.com/users/robin92/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-09-04T06:38:05Z",
            "updated_at": "2014-09-04T07:11:04Z",
            "author_association": "NONE",
            "body": "Nope, I don't think so. But what's strange the above example started working out of the blue... I need to investigate it further since my project still is facing the issue. Nonetheless, all ideas are welcome.\n\nEDIT:\nDon't know if it's related by in the above example I get explicit requests information wriitten on the terminal (eq. `127.0.0.1 GET / 200`) whereas in my project such a debug information is not visible. However stuff gets written when using `app.logger`. I must have done something nasty in my project...\n\nHere's, simplified to GET handler, code of my project:\n\n``` python\nclass NewNewsView(MethodView):\n\n    def get(self):\n        flash('This message gets lost')    # this message gets lost\n        return redirect(url_for('index'))\n\nclass IndexView(MethodView):\n\n    def get(self):\n        return render_template('index.html')    # uses get_flashed_message() in template\n```\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/54437230",
            "html_url": "https://github.com/pallets/flask/issues/1168#issuecomment-54437230",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1168",
            "id": 54437230,
            "node_id": "MDEyOklzc3VlQ29tbWVudDU0NDM3MjMw",
            "user": {
                "login": "robin92",
                "id": 1593736,
                "node_id": "MDQ6VXNlcjE1OTM3MzY=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/1593736?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/robin92",
                "html_url": "https://github.com/robin92",
                "followers_url": "https://api.github.com/users/robin92/followers",
                "following_url": "https://api.github.com/users/robin92/following{/other_user}",
                "gists_url": "https://api.github.com/users/robin92/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/robin92/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robin92/subscriptions",
                "organizations_url": "https://api.github.com/users/robin92/orgs",
                "repos_url": "https://api.github.com/users/robin92/repos",
                "events_url": "https://api.github.com/users/robin92/events{/privacy}",
                "received_events_url": "https://api.github.com/users/robin92/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-09-04T09:13:43Z",
            "updated_at": "2014-09-04T09:13:43Z",
            "author_association": "NONE",
            "body": "Okay, I got it. The issue was caused by setting `APPLICATION_ROOT` which is discouraged in the Wiki so the fault was undoubtedly on my side. Sorry for bothering you. I'm gonna close this issue now.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/254257892",
            "html_url": "https://github.com/pallets/flask/issues/1168#issuecomment-254257892",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1168",
            "id": 254257892,
            "node_id": "MDEyOklzc3VlQ29tbWVudDI1NDI1Nzg5Mg==",
            "user": {
                "login": "ghukill",
                "id": 1753087,
                "node_id": "MDQ6VXNlcjE3NTMwODc=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/1753087?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ghukill",
                "html_url": "https://github.com/ghukill",
                "followers_url": "https://api.github.com/users/ghukill/followers",
                "following_url": "https://api.github.com/users/ghukill/following{/other_user}",
                "gists_url": "https://api.github.com/users/ghukill/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ghukill/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ghukill/subscriptions",
                "organizations_url": "https://api.github.com/users/ghukill/orgs",
                "repos_url": "https://api.github.com/users/ghukill/repos",
                "events_url": "https://api.github.com/users/ghukill/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ghukill/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-10-17T16:25:10Z",
            "updated_at": "2016-10-17T16:25:10Z",
            "author_association": "NONE",
            "body": "Encountered this today, removed `APPLICATION_ROOT`, and problem fixed.  Thanks for the update after your fix @robin92, much appreciated.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/314146774",
            "html_url": "https://github.com/pallets/flask/issues/1168#issuecomment-314146774",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1168",
            "id": 314146774,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMxNDE0Njc3NA==",
            "user": {
                "login": "karissame",
                "id": 1881606,
                "node_id": "MDQ6VXNlcjE4ODE2MDY=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/1881606?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/karissame",
                "html_url": "https://github.com/karissame",
                "followers_url": "https://api.github.com/users/karissame/followers",
                "following_url": "https://api.github.com/users/karissame/following{/other_user}",
                "gists_url": "https://api.github.com/users/karissame/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/karissame/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/karissame/subscriptions",
                "organizations_url": "https://api.github.com/users/karissame/orgs",
                "repos_url": "https://api.github.com/users/karissame/repos",
                "events_url": "https://api.github.com/users/karissame/events{/privacy}",
                "received_events_url": "https://api.github.com/users/karissame/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-07-10T15:44:02Z",
            "updated_at": "2017-07-10T15:44:02Z",
            "author_association": "NONE",
            "body": "I am having the same issue and I don't have an APPLICATION_ROOT in my project. After flashing a message, if I `return redirect('/ ')` the message doesn't appear on the redirected page but if I comment out the redirect and use `return render_template(\"index.html\")` the message does display. \r\n\r\nSetting cache timeout to 0 \"fixes\" this but this site relies on caching for performance reasons so if there is some way to get message flashing to work on redirect and WITH caching enabled, please let me know. Thanks!!"
        }
    ]
}