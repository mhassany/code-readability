{
    "url": "https://api.github.com/repos/pallets/flask/issues/2757",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2757/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2757/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2757/events",
    "html_url": "https://github.com/pallets/flask/issues/2757",
    "id": 320190037,
    "node_id": "MDU6SXNzdWUzMjAxOTAwMzc=",
    "number": 2757,
    "title": "functions added by after_request execute in reversed order",
    "user": {
        "login": "joshuaavalon",
        "id": 7152420,
        "node_id": "MDQ6VXNlcjcxNTI0MjA=",
        "avatar_url": "https://avatars0.githubusercontent.com/u/7152420?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/joshuaavalon",
        "html_url": "https://github.com/joshuaavalon",
        "followers_url": "https://api.github.com/users/joshuaavalon/followers",
        "following_url": "https://api.github.com/users/joshuaavalon/following{/other_user}",
        "gists_url": "https://api.github.com/users/joshuaavalon/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/joshuaavalon/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/joshuaavalon/subscriptions",
        "organizations_url": "https://api.github.com/users/joshuaavalon/orgs",
        "repos_url": "https://api.github.com/users/joshuaavalon/repos",
        "events_url": "https://api.github.com/users/joshuaavalon/events{/privacy}",
        "received_events_url": "https://api.github.com/users/joshuaavalon/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2018-05-04T08:24:38Z",
    "updated_at": "2018-05-04T12:50:29Z",
    "closed_at": "2018-05-04T12:15:22Z",
    "author_association": "NONE",
    "body": "### Expected Behavior\r\nPrint in following order:\r\n\r\nfoo\r\nbar\r\n\r\n```python\r\ndef foo(response):\r\n    print(\"foo\")\r\n    return response\r\ndef bar(response):\r\n    print(\"bar\")\r\n    return response\r\n\r\napp = Flask(__name__)\r\napp.after_request(foo)\r\napp.after_request(bar)\r\n```\r\n\r\n### Actual Behavior\r\nPrint in following order:\r\n\r\nbar\r\nfoo\r\n\r\n### Environment\r\n\r\n* Python version: 3.6.5\r\n* Flask version: 1.0.2\r\n* Werkzeug version: 0.14.1\r\n\r\nThis is very counter intuitive. Is there a reason to execute reversed order? It seems like it is reversed on purpose in `process_response` in `app.py`. The order actually matters. I found out this when I apply gzip and html minifier which gzip is apply first and the minifier is unable to read the data as string.\r\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/386583116",
            "html_url": "https://github.com/pallets/flask/issues/2757#issuecomment-386583116",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2757",
            "id": 386583116,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4NjU4MzExNg==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-04T12:15:22Z",
            "updated_at": "2018-05-04T12:16:01Z",
            "author_association": "MEMBER",
            "body": "This is intentional. Imagine that you add an extension that does the gzip. You'd add this early, before setting up your views and callbacks. If it were to execute first, none of your own callbacks could modify the response body, it would be zipped already. "
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/386591435",
            "html_url": "https://github.com/pallets/flask/issues/2757#issuecomment-386591435",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2757",
            "id": 386591435,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM4NjU5MTQzNQ==",
            "user": {
                "login": "joshuaavalon",
                "id": 7152420,
                "node_id": "MDQ6VXNlcjcxNTI0MjA=",
                "avatar_url": "https://avatars0.githubusercontent.com/u/7152420?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/joshuaavalon",
                "html_url": "https://github.com/joshuaavalon",
                "followers_url": "https://api.github.com/users/joshuaavalon/followers",
                "following_url": "https://api.github.com/users/joshuaavalon/following{/other_user}",
                "gists_url": "https://api.github.com/users/joshuaavalon/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/joshuaavalon/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/joshuaavalon/subscriptions",
                "organizations_url": "https://api.github.com/users/joshuaavalon/orgs",
                "repos_url": "https://api.github.com/users/joshuaavalon/repos",
                "events_url": "https://api.github.com/users/joshuaavalon/events{/privacy}",
                "received_events_url": "https://api.github.com/users/joshuaavalon/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-05-04T12:50:29Z",
            "updated_at": "2018-05-04T12:50:29Z",
            "author_association": "NONE",
            "body": "@davidism How about mention it on documentation?"
        }
    ]
}