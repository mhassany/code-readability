{
    "url": "https://api.github.com/repos/pallets/flask/issues/2908",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2908/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2908/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2908/events",
    "html_url": "https://github.com/pallets/flask/issues/2908",
    "id": 360583893,
    "node_id": "MDU6SXNzdWUzNjA1ODM4OTM=",
    "number": 2908,
    "title": "[Tutorial] Pytest don't find flaskr package",
    "user": {
        "login": "lvlsun",
        "id": 35345183,
        "node_id": "MDQ6VXNlcjM1MzQ1MTgz",
        "avatar_url": "https://avatars0.githubusercontent.com/u/35345183?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lvlsun",
        "html_url": "https://github.com/lvlsun",
        "followers_url": "https://api.github.com/users/lvlsun/followers",
        "following_url": "https://api.github.com/users/lvlsun/following{/other_user}",
        "gists_url": "https://api.github.com/users/lvlsun/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/lvlsun/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/lvlsun/subscriptions",
        "organizations_url": "https://api.github.com/users/lvlsun/orgs",
        "repos_url": "https://api.github.com/users/lvlsun/repos",
        "events_url": "https://api.github.com/users/lvlsun/events{/privacy}",
        "received_events_url": "https://api.github.com/users/lvlsun/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2018-09-15T23:11:08Z",
    "updated_at": "2019-03-25T14:15:43Z",
    "closed_at": "2018-09-16T01:08:19Z",
    "author_association": "NONE",
    "body": "### Expected Behavior\r\n\r\nI follow the tutorial on http://flask.pocoo.org/docs/1.0/tutorial/ and try to run tests\r\n\r\n```(venv) ...\\flaskproj>pytest```\r\n\r\n\r\n### Actual Behavior\r\n\r\n```Traceback (most recent call last):\r\n  File \"...\\flaskproj\\venv\\lib\\site-packages\\_pytest\\config\\__init__.py\", line 381, in _getconftestmodules\r\n    return self._path2confmods[path]\r\nKeyError: local('...\\\\flaskproj\\\\tests')\r\n\r\nDuring handling of the above exception, another exception occurred:\r\nTraceback (most recent call last):\r\n  File \"...\\flaskproj\\venv\\lib\\site-packages\\_pytest\\config\\__init__.py\", line 412, in _importconftest\r\n    return self._conftestpath2mod[conftestpath]\r\nKeyError: local('...\\\\flaskproj\\\\tests\\\\conftest.py')\r\n\r\nDuring handling of the above exception, another exception occurred:\r\nTraceback (most recent call last):\r\n  File \"...\\flaskproj\\venv\\lib\\site-packages\\_pytest\\config\\__init__.py\", line 418, in _importconftest\r\n    mod = conftestpath.pyimport()\r\n  File \"...\\flaskproj\\venv\\lib\\site-packages\\py\\_path\\local.py\", line 668, in pyimport\r\n    __import__(modname)\r\n  File \"...\\flaskproj\\venv\\lib\\site-packages\\_pytest\\assertion\\rewrite.py\", line 296, in load_module\r\n    six.exec_(co, mod.__dict__)\r\n  File \"...\\flaskproj\\tests\\conftest.py\", line 5, in <module>\r\n    from flaskr import create_app\r\nModuleNotFoundError: No module named 'flaskr'\r\nERROR: could not load ...\\flaskproj\\tests\\conftest.py\r\n```\r\n\r\n### Environment\r\n\r\n* Python version: 3.6.5\r\n* Flask version: 1.0.2\r\n* Werkzeug version: 0.14.1\r\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/421665512",
            "html_url": "https://github.com/pallets/flask/issues/2908#issuecomment-421665512",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2908",
            "id": 421665512,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQyMTY2NTUxMg==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-09-16T01:08:19Z",
            "updated_at": "2018-09-16T01:09:28Z",
            "author_association": "MEMBER",
            "body": "Sounds like you didn't install the project (`pip install -e .`) and you're running from inside the `tests` directory.\r\n\r\nI do know all steps complete successfully when followed in order, so without information about the issue there's not much I can do here. If you figure out what's going on and think the tutorial can be clearer, please submit a PR for review."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/421761272",
            "html_url": "https://github.com/pallets/flask/issues/2908#issuecomment-421761272",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2908",
            "id": 421761272,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQyMTc2MTI3Mg==",
            "user": {
                "login": "lvlsun",
                "id": 35345183,
                "node_id": "MDQ6VXNlcjM1MzQ1MTgz",
                "avatar_url": "https://avatars0.githubusercontent.com/u/35345183?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/lvlsun",
                "html_url": "https://github.com/lvlsun",
                "followers_url": "https://api.github.com/users/lvlsun/followers",
                "following_url": "https://api.github.com/users/lvlsun/following{/other_user}",
                "gists_url": "https://api.github.com/users/lvlsun/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/lvlsun/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lvlsun/subscriptions",
                "organizations_url": "https://api.github.com/users/lvlsun/orgs",
                "repos_url": "https://api.github.com/users/lvlsun/repos",
                "events_url": "https://api.github.com/users/lvlsun/events{/privacy}",
                "received_events_url": "https://api.github.com/users/lvlsun/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2018-09-16T12:56:52Z",
            "updated_at": "2018-09-16T12:56:52Z",
            "author_association": "NONE",
            "body": "Flaskr has been installed:\r\n```\r\n(venv) ...\\flaskproj>pip list\r\nDEPRECATION: The default format will switch to columns in the future. You can use --format=(legacy|columns) (or define a format=(legacy|columns) in your pip.conf under the [list] section) to disable this warning.\r\natomicwrites (1.2.1)\r\nattrs (18.2.0)\r\nclick (6.7)\r\ncolorama (0.3.9)\r\nFlask (1.0.2)\r\nflaskr (1.0.0, ...\\flaskproj\\flaskr)\r\nitsdangerous (0.24)\r\nJinja2 (2.10)\r\nMarkupSafe (1.0)\r\nmore-itertools (4.3.0)\r\npip (9.0.3)\r\npluggy (0.7.1)\r\npy (1.6.0)\r\npytest (3.8.0)\r\nsetuptools (39.0.1)\r\nsix (1.11.0)\r\nWerkzeug (0.14.1)\r\nYou are using pip version 9.0.3, however version 18.0 is available.\r\nYou should consider upgrading via the 'python -m pip install --upgrade pip' command.\r\n```\r\nIf I run ```python -m pytest```, terminal produce\r\n```\r\n(venv) ...\\flaskproj>python -m pytest\r\n============================= test session starts =============================\r\nplatform win32 -- Python 3.6.5, pytest-3.8.0, py-1.6.0, pluggy-0.7.1\r\nrootdir: ...\\flaskproj, inifile: setup.cfg\r\ncollected 24 items                                                             \r\n\r\ntests\\test_auth.py ........                                              [ 33%]\r\ntests\\test_blog.py ............                                          [ 83%]\r\ntests\\test_db.py ..                                                      [ 91%]\r\ntests\\test_factory.py ..                                                 [100%]\r\n\r\n========================== 24 passed in 1.47 seconds ==========================\r\n```\r\nbut ```pytest``` failed."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/475487755",
            "html_url": "https://github.com/pallets/flask/issues/2908#issuecomment-475487755",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2908",
            "id": 475487755,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTQ4Nzc1NQ==",
            "user": {
                "login": "hliang",
                "id": 812850,
                "node_id": "MDQ6VXNlcjgxMjg1MA==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/812850?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/hliang",
                "html_url": "https://github.com/hliang",
                "followers_url": "https://api.github.com/users/hliang/followers",
                "following_url": "https://api.github.com/users/hliang/following{/other_user}",
                "gists_url": "https://api.github.com/users/hliang/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/hliang/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/hliang/subscriptions",
                "organizations_url": "https://api.github.com/users/hliang/orgs",
                "repos_url": "https://api.github.com/users/hliang/repos",
                "events_url": "https://api.github.com/users/hliang/events{/privacy}",
                "received_events_url": "https://api.github.com/users/hliang/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-03-22T04:10:33Z",
            "updated_at": "2019-03-22T04:10:33Z",
            "author_association": "NONE",
            "body": "I had a similar error if I put the `setup.py` inside package folder `flaskr`.  After moving it out and place it next to `flaskr` (the same project layout as in tutorial), followed by reinstallation, the error was gone."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/476215860",
            "html_url": "https://github.com/pallets/flask/issues/2908#issuecomment-476215860",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2908",
            "id": 476215860,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NjIxNTg2MA==",
            "user": {
                "login": "brymck",
                "id": 826762,
                "node_id": "MDQ6VXNlcjgyNjc2Mg==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/826762?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/brymck",
                "html_url": "https://github.com/brymck",
                "followers_url": "https://api.github.com/users/brymck/followers",
                "following_url": "https://api.github.com/users/brymck/following{/other_user}",
                "gists_url": "https://api.github.com/users/brymck/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/brymck/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/brymck/subscriptions",
                "organizations_url": "https://api.github.com/users/brymck/orgs",
                "repos_url": "https://api.github.com/users/brymck/repos",
                "events_url": "https://api.github.com/users/brymck/events{/privacy}",
                "received_events_url": "https://api.github.com/users/brymck/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-03-25T14:15:43Z",
            "updated_at": "2019-03-25T14:15:43Z",
            "author_association": "NONE",
            "body": "I had a similar issue due to a `pytest` executable existing elsewhere on my `$PATH`.\r\n\r\n```\r\n$ which pytest\r\n/usr/local/bin/pytest\r\n$ pytest\r\nImportError while loading conftest '/Users/bryan/Sandbox/flaskr/tests/conftest.py'.\r\ntests/conftest.py:2: in <module>\r\n    from flaskr import create_app\r\nE   ModuleNotFoundError: No module named 'flaskr'\r\n```\r\n\r\n```\r\n$ which pytest\r\n/Users/bryan/venv/bin/pytest\r\n$ pytest\r\n================================ test session starts =================================\r\nplatform darwin -- Python 3.7.2, pytest-4.3.1, py-1.8.0, pluggy-0.9.0\r\nrootdir: /Users/bryan/Sandbox/flaskr, inifile: setup.cfg\r\ncollected 2 items\r\n\r\ntests/test_factory.py ..                                                       [100%]\r\n\r\n============================== 2 passed in 0.02 seconds ==============================\r\n```\r\n\r\nI believe what's happening in this case is that `flaskr` was installed in my virtual environment (i.e. `~/venv`), but that's not accessible to `/usr/local/bin/pytest`, which I suppose belonged to my Python 3 installation via Homebrew."
        }
    ]
}