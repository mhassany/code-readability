{
    "url": "https://api.github.com/repos/pallets/flask/issues/410",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/410/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/410/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/410/events",
    "html_url": "https://github.com/pallets/flask/issues/410",
    "id": 3374551,
    "node_id": "MDU6SXNzdWUzMzc0NTUx",
    "number": 410,
    "title": "Preserve request context in the face of new requests",
    "user": {
        "login": "dplepage",
        "id": 107468,
        "node_id": "MDQ6VXNlcjEwNzQ2OA==",
        "avatar_url": "https://avatars3.githubusercontent.com/u/107468?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dplepage",
        "html_url": "https://github.com/dplepage",
        "followers_url": "https://api.github.com/users/dplepage/followers",
        "following_url": "https://api.github.com/users/dplepage/following{/other_user}",
        "gists_url": "https://api.github.com/users/dplepage/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/dplepage/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/dplepage/subscriptions",
        "organizations_url": "https://api.github.com/users/dplepage/orgs",
        "repos_url": "https://api.github.com/users/dplepage/repos",
        "events_url": "https://api.github.com/users/dplepage/events{/privacy}",
        "received_events_url": "https://api.github.com/users/dplepage/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 7,
    "created_at": "2012-02-24T16:02:53Z",
    "updated_at": "2014-07-27T12:50:56Z",
    "closed_at": "2014-07-27T12:50:56Z",
    "author_association": "NONE",
    "body": "RequestContext.push pops and discards the top of the context stack if the top is preserved. Consequently, if you hit an exception in debug mode and drop into the debugger, but then make another request of the server, your debugger can no longer access the preserved context from the exception.\n\nThis is particularly a problem in Google Chrome, which follows each request with a request for \"/favicon.ico\". Any exception in debug mode will leave a preserved context on the stack, but will then immediately discard it when the favicon request arrives.\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/4159357",
            "html_url": "https://github.com/pallets/flask/issues/410#issuecomment-4159357",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/410",
            "id": 4159357,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQxNTkzNTc=",
            "user": {
                "login": "dplepage",
                "id": 107468,
                "node_id": "MDQ6VXNlcjEwNzQ2OA==",
                "avatar_url": "https://avatars3.githubusercontent.com/u/107468?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/dplepage",
                "html_url": "https://github.com/dplepage",
                "followers_url": "https://api.github.com/users/dplepage/followers",
                "following_url": "https://api.github.com/users/dplepage/following{/other_user}",
                "gists_url": "https://api.github.com/users/dplepage/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/dplepage/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dplepage/subscriptions",
                "organizations_url": "https://api.github.com/users/dplepage/orgs",
                "repos_url": "https://api.github.com/users/dplepage/repos",
                "events_url": "https://api.github.com/users/dplepage/events{/privacy}",
                "received_events_url": "https://api.github.com/users/dplepage/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-02-24T16:04:44Z",
            "updated_at": "2012-02-24T16:04:44Z",
            "author_association": "NONE",
            "body": "This was briefly discussed on IRC: http://dev.pocoo.org/irclogs/%23pocoo.2012-02-21.log\nMitsuhiko's suggested workaround for Chrome users hitting the favicon bug is \"add a wsgi middleware that intercepts /favicon.ico before the it bubbles to the app\".\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/4159519",
            "html_url": "https://github.com/pallets/flask/issues/410#issuecomment-4159519",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/410",
            "id": 4159519,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQxNTk1MTk=",
            "user": {
                "login": "rduplain",
                "id": 36428,
                "node_id": "MDQ6VXNlcjM2NDI4",
                "avatar_url": "https://avatars1.githubusercontent.com/u/36428?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/rduplain",
                "html_url": "https://github.com/rduplain",
                "followers_url": "https://api.github.com/users/rduplain/followers",
                "following_url": "https://api.github.com/users/rduplain/following{/other_user}",
                "gists_url": "https://api.github.com/users/rduplain/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/rduplain/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rduplain/subscriptions",
                "organizations_url": "https://api.github.com/users/rduplain/orgs",
                "repos_url": "https://api.github.com/users/rduplain/repos",
                "events_url": "https://api.github.com/users/rduplain/events{/privacy}",
                "received_events_url": "https://api.github.com/users/rduplain/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-02-24T16:12:26Z",
            "updated_at": "2012-02-24T16:12:26Z",
            "author_association": "CONTRIBUTOR",
            "body": "@mitsuhiko points out in IRC that the workaround is in the Werkzeug HEAD at mitsuhiko/werkzeug@00c65aa3f4b4a705d63042e325b62a0bd18a4e18.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/4159656",
            "html_url": "https://github.com/pallets/flask/issues/410#issuecomment-4159656",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/410",
            "id": 4159656,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQxNTk2NTY=",
            "user": {
                "login": "dplepage",
                "id": 107468,
                "node_id": "MDQ6VXNlcjEwNzQ2OA==",
                "avatar_url": "https://avatars3.githubusercontent.com/u/107468?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/dplepage",
                "html_url": "https://github.com/dplepage",
                "followers_url": "https://api.github.com/users/dplepage/followers",
                "following_url": "https://api.github.com/users/dplepage/following{/other_user}",
                "gists_url": "https://api.github.com/users/dplepage/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/dplepage/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dplepage/subscriptions",
                "organizations_url": "https://api.github.com/users/dplepage/orgs",
                "repos_url": "https://api.github.com/users/dplepage/repos",
                "events_url": "https://api.github.com/users/dplepage/events{/privacy}",
                "received_events_url": "https://api.github.com/users/dplepage/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-02-24T16:18:59Z",
            "updated_at": "2012-02-24T16:18:59Z",
            "author_association": "NONE",
            "body": "This solves the chrome-specific problem of favicon clobbering the context; it would still be nice if, in general, a preserved context could survive additional requests.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/4160354",
            "html_url": "https://github.com/pallets/flask/issues/410#issuecomment-4160354",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/410",
            "id": 4160354,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjAzNTQ=",
            "user": {
                "login": "rduplain",
                "id": 36428,
                "node_id": "MDQ6VXNlcjM2NDI4",
                "avatar_url": "https://avatars1.githubusercontent.com/u/36428?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/rduplain",
                "html_url": "https://github.com/rduplain",
                "followers_url": "https://api.github.com/users/rduplain/followers",
                "following_url": "https://api.github.com/users/rduplain/following{/other_user}",
                "gists_url": "https://api.github.com/users/rduplain/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/rduplain/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rduplain/subscriptions",
                "organizations_url": "https://api.github.com/users/rduplain/orgs",
                "repos_url": "https://api.github.com/users/rduplain/repos",
                "events_url": "https://api.github.com/users/rduplain/events{/privacy}",
                "received_events_url": "https://api.github.com/users/rduplain/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-02-24T16:53:59Z",
            "updated_at": "2012-02-24T16:53:59Z",
            "author_association": "CONTRIBUTOR",
            "body": "@mitsuhiko explained this in #pocoo.  Currently, the werkzeug debugger keeps all contexts alive, but in Flask, only one is kept.  On an error, the request context is preserved; the next request invalidates it.  To the question of: \"Should Flask keep multiple error contexts?\", the favicon workaround (once released) removes the primary motivation to do so.\n\nAs @mitsuhiko puts it [reformatted from IRC], \"I never had the situation where I needed to debug two separate bugs at once through the debugger. Typically if I get the debugger, I either triggered it by hand or it was something I did not expect, and in order to change the situation, I needed to reload the whole interpreter anyways.\"\n\n@dplepage, do you have a use case to support, keeping in mind that the code reloader will remove all error contexts?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/4175428",
            "html_url": "https://github.com/pallets/flask/issues/410#issuecomment-4175428",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/410",
            "id": 4175428,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQxNzU0Mjg=",
            "user": {
                "login": "rduplain",
                "id": 36428,
                "node_id": "MDQ6VXNlcjM2NDI4",
                "avatar_url": "https://avatars1.githubusercontent.com/u/36428?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/rduplain",
                "html_url": "https://github.com/rduplain",
                "followers_url": "https://api.github.com/users/rduplain/followers",
                "following_url": "https://api.github.com/users/rduplain/following{/other_user}",
                "gists_url": "https://api.github.com/users/rduplain/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/rduplain/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rduplain/subscriptions",
                "organizations_url": "https://api.github.com/users/rduplain/orgs",
                "repos_url": "https://api.github.com/users/rduplain/repos",
                "events_url": "https://api.github.com/users/rduplain/events{/privacy}",
                "received_events_url": "https://api.github.com/users/rduplain/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-02-25T19:29:25Z",
            "updated_at": "2012-02-25T19:29:25Z",
            "author_association": "CONTRIBUTOR",
            "body": "Linking #405, but this issue (#410) requests context preservation more generally.  Current status: looking for use cases to support context preservation, given werkzeug now has a fix for the favicon issue (#405).\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/4203385",
            "html_url": "https://github.com/pallets/flask/issues/410#issuecomment-4203385",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/410",
            "id": 4203385,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQyMDMzODU=",
            "user": {
                "login": "dplepage",
                "id": 107468,
                "node_id": "MDQ6VXNlcjEwNzQ2OA==",
                "avatar_url": "https://avatars3.githubusercontent.com/u/107468?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/dplepage",
                "html_url": "https://github.com/dplepage",
                "followers_url": "https://api.github.com/users/dplepage/followers",
                "following_url": "https://api.github.com/users/dplepage/following{/other_user}",
                "gists_url": "https://api.github.com/users/dplepage/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/dplepage/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dplepage/subscriptions",
                "organizations_url": "https://api.github.com/users/dplepage/orgs",
                "repos_url": "https://api.github.com/users/dplepage/repos",
                "events_url": "https://api.github.com/users/dplepage/events{/privacy}",
                "received_events_url": "https://api.github.com/users/dplepage/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-02-27T21:22:36Z",
            "updated_at": "2012-02-27T21:22:36Z",
            "author_association": "NONE",
            "body": "I have had this come up in other situations, but it's rare. The two use cases I can recall are:\n\n1) I am in the debugger on some part of the site when a coworker asks me a question about an unrelated part. I load this other part in a separate tab, but doing so erases my context in the debugging tab.\n\n2) I have multiple tabs open with different parts of the site, and while I attempt to debug something in one tab the loaded page in another makes some timed AJAX call, erasing my debugging context.\n\nA third use case, which I have not personally encountered, is that of two or more people working together on the same running Flask instance - any request by any person invalidates error contexts for anyone else who's debugging.\n\nThat said, all three of these cases are rare, and usually I don't do very much in a debug session, so I don't lose much if I have to reload it to get a new context.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/50263600",
            "html_url": "https://github.com/pallets/flask/issues/410#issuecomment-50263600",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/410",
            "id": 50263600,
            "node_id": "MDEyOklzc3VlQ29tbWVudDUwMjYzNjAw",
            "user": {
                "login": "DasIch",
                "id": 182316,
                "node_id": "MDQ6VXNlcjE4MjMxNg==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/182316?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/DasIch",
                "html_url": "https://github.com/DasIch",
                "followers_url": "https://api.github.com/users/DasIch/followers",
                "following_url": "https://api.github.com/users/DasIch/following{/other_user}",
                "gists_url": "https://api.github.com/users/DasIch/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/DasIch/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/DasIch/subscriptions",
                "organizations_url": "https://api.github.com/users/DasIch/orgs",
                "repos_url": "https://api.github.com/users/DasIch/repos",
                "events_url": "https://api.github.com/users/DasIch/events{/privacy}",
                "received_events_url": "https://api.github.com/users/DasIch/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2014-07-27T12:50:56Z",
            "updated_at": "2014-07-27T12:50:56Z",
            "author_association": "CONTRIBUTOR",
            "body": "Closing this because fixing this is not worth the effort. It requires changing the stack based design, it requires the ability to move request contexts between threads and how all this would work in combination with the application context is also not trivial to figure out.\n"
        }
    ]
}