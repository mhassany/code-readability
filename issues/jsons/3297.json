{
    "url": "https://api.github.com/repos/pallets/flask/issues/3297",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/3297/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/3297/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/3297/events",
    "html_url": "https://github.com/pallets/flask/issues/3297",
    "id": 466392759,
    "node_id": "MDU6SXNzdWU0NjYzOTI3NTk=",
    "number": 3297,
    "title": "If arguments are re-written before flask is loaded it sees the original arguments on windows python 2.7",
    "user": {
        "login": "karthiknadig",
        "id": 3840081,
        "node_id": "MDQ6VXNlcjM4NDAwODE=",
        "avatar_url": "https://avatars3.githubusercontent.com/u/3840081?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/karthiknadig",
        "html_url": "https://github.com/karthiknadig",
        "followers_url": "https://api.github.com/users/karthiknadig/followers",
        "following_url": "https://api.github.com/users/karthiknadig/following{/other_user}",
        "gists_url": "https://api.github.com/users/karthiknadig/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/karthiknadig/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/karthiknadig/subscriptions",
        "organizations_url": "https://api.github.com/users/karthiknadig/orgs",
        "repos_url": "https://api.github.com/users/karthiknadig/repos",
        "events_url": "https://api.github.com/users/karthiknadig/events{/privacy}",
        "received_events_url": "https://api.github.com/users/karthiknadig/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 135583063,
            "node_id": "MDU6TGFiZWwxMzU1ODMwNjM=",
            "url": "https://api.github.com/repos/pallets/flask/labels/bug",
            "name": "bug",
            "color": "d93f0b",
            "default": true,
            "description": null
        },
        {
            "id": 380608249,
            "node_id": "MDU6TGFiZWwzODA2MDgyNDk=",
            "url": "https://api.github.com/repos/pallets/flask/labels/cli",
            "name": "cli",
            "color": "1d76db",
            "default": false,
            "description": null
        }
    ],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": {
        "url": "https://api.github.com/repos/pallets/flask/milestones/11",
        "html_url": "https://github.com/pallets/flask/milestone/11",
        "labels_url": "https://api.github.com/repos/pallets/flask/milestones/11/labels",
        "id": 4481129,
        "node_id": "MDk6TWlsZXN0b25lNDQ4MTEyOQ==",
        "number": 11,
        "title": "1.1.2",
        "description": "",
        "creator": {
            "login": "davidism",
            "id": 1242887,
            "node_id": "MDQ6VXNlcjEyNDI4ODc=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/davidism",
            "html_url": "https://github.com/davidism",
            "followers_url": "https://api.github.com/users/davidism/followers",
            "following_url": "https://api.github.com/users/davidism/following{/other_user}",
            "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
            "organizations_url": "https://api.github.com/users/davidism/orgs",
            "repos_url": "https://api.github.com/users/davidism/repos",
            "events_url": "https://api.github.com/users/davidism/events{/privacy}",
            "received_events_url": "https://api.github.com/users/davidism/received_events",
            "type": "User",
            "site_admin": false
        },
        "open_issues": 0,
        "closed_issues": 2,
        "state": "open",
        "created_at": "2019-07-10T15:02:22Z",
        "updated_at": "2019-07-10T19:42:59Z",
        "due_on": null,
        "closed_at": null
    },
    "comments": 1,
    "created_at": "2019-07-10T05:55:01Z",
    "updated_at": "2019-07-10T19:42:59Z",
    "closed_at": "2019-07-10T19:42:59Z",
    "author_association": "NONE",
    "body": "Previously flask (v1.0.3) was passing `sys.argv` to  `cli.main`:\r\n\r\nhttps://github.com/pallets/flask/blob/1.0.3/flask/cli.py#L889-L906\r\n\r\nNow flask (v1.1.1) is not passing `argv`, to `cli.main`.\r\n\r\nhttps://github.com/pallets/flask/blob/1.1.1/src/flask/cli.py#L965-L966\r\n\r\nThis causes it to always get args via `get_os_args` via `click`. \r\n\r\nhttps://github.com/pallets/click/blob/7.0/click/core.py#L700-L704 \r\n\r\nWhich is this issue in click https://github.com/pallets/click/issues/536 \r\n\r\nThis basically breaks debugging (on windows with python 2.7), where the debugger re-writes `sys.argv` before `click` or `flask` is loaded. So, attempting to debug flask using `ptvsd` or `pydevd` results in the error message below. \r\n\r\n### Expected\r\n```\r\n>python -m ptvsd --host localhost --port 5692 -m flask run --no-debugger --no-reload --with-threads --port 5014\r\n * Serving Flask app \"app\"\r\n * Environment: development\r\n * Debug mode: on\r\n * Running on http://127.0.0.1:5014/ (Press CTRL+C to quit)\r\n```\r\n\r\n### Actual\r\n```\r\n>python -m ptvsd --host localhost --port 5692 -m flask run --no-debugger --no-reload --with-threads --port 5014\r\nUsage: python -m flask [OPTIONS] COMMAND [ARGS]...\r\nTry \"python -m flask --help\" for help.\r\n\r\nError: no such option: --host\r\n```\r\n\r\n### Environment\r\n\r\n* Python version: 2.7\r\n* Flask version: 1.1.1\r\n* Werkzeug version: N/A\r\n* Platform: Windows\r\n\r\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/510127704",
            "html_url": "https://github.com/pallets/flask/issues/3297#issuecomment-510127704",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/3297",
            "id": 510127704,
            "node_id": "MDEyOklzc3VlQ29tbWVudDUxMDEyNzcwNA==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2019-07-10T16:11:05Z",
            "updated_at": "2019-07-10T16:11:05Z",
            "author_association": "MEMBER",
            "body": "We can add `args=sys.argv[1:]` back in with a note about the Click issue so we can remove it when that's addressed."
        }
    ]
}