{
    "url": "https://api.github.com/repos/pallets/flask/issues/1632",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1632/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1632/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1632/events",
    "html_url": "https://github.com/pallets/flask/issues/1632",
    "id": 119296991,
    "node_id": "MDU6SXNzdWUxMTkyOTY5OTE=",
    "number": 1632,
    "title": "Exception when client closes stream before flask response",
    "user": {
        "login": "actioncrypto",
        "id": 6174154,
        "node_id": "MDQ6VXNlcjYxNzQxNTQ=",
        "avatar_url": "https://avatars2.githubusercontent.com/u/6174154?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/actioncrypto",
        "html_url": "https://github.com/actioncrypto",
        "followers_url": "https://api.github.com/users/actioncrypto/followers",
        "following_url": "https://api.github.com/users/actioncrypto/following{/other_user}",
        "gists_url": "https://api.github.com/users/actioncrypto/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/actioncrypto/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/actioncrypto/subscriptions",
        "organizations_url": "https://api.github.com/users/actioncrypto/orgs",
        "repos_url": "https://api.github.com/users/actioncrypto/repos",
        "events_url": "https://api.github.com/users/actioncrypto/events{/privacy}",
        "received_events_url": "https://api.github.com/users/actioncrypto/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 8,
    "created_at": "2015-11-28T14:18:35Z",
    "updated_at": "2015-11-29T16:31:52Z",
    "closed_at": "2015-11-28T14:44:04Z",
    "author_association": "NONE",
    "body": "I have been running a simple flask webserver for the purpose of a twilio app. Usually works all groovy, however every few days, twilio will tell me it could not connect, and upon checking the running server python shell, it would show nothing abnormal until I killed it, and the stack trace would spit out an exception that my flask app had crashed related to the generic twilio request.\n\nGoogling around, it would appear this is due to an underlying SocketServer not handling the exception properly and causing the problem. This post on stackoverflow speaks about the issue but offers no solution: http://stackoverflow.com/questions/17787023/python-how-to-catch-a-flask-except-like-this\n\nIt appears from the leading comment, that it's 'expected' to happen, and flask should simply handle it fine. However, in my case, it causes the server to lock up and crash. No further requests will be acknowledged. I simply have to re-start the app, and it'll proceed merrily along for a few more days.\n\nIf this is truly a bug in flask, it makes relatively easy to DDoS any flask server by the client simply hitting the web request and then stopping quickly and not acknowledging.\n\nWhy is my flask not set up to properly handle this type of thing? Is this a bug? Have I improperly configured something? Is there a try/catch I'm forgetting?\n\nusing regular pip install of flask 0.10.1 btw... The exception is pasted below:\n\n```\nException happened during processing of request from ('x.x.x.x', 48590)\nTraceback (most recent call last):\n  File \"/root/.pyenv/versions/2.7.10/lib/python2.7/SocketServer.py\", line 295, in _handle_request_noblock\nself.process_request(request, client_address)\n  File \"/root/.pyenv/versions/2.7.10/lib/python2.7/SocketServer.py\", line 321, in process_request\nself.finish_request(request, client_address)\n  File \"/root/.pyenv/versions/2.7.10/lib/python2.7/SocketServer.py\", line 334, in finish_request\nself.RequestHandlerClass(request, client_address, self)\n  File \"/root/.pyenv/versions/2.7.10/lib/python2.7/SocketServer.py\", line 655, in __init__\nself.handle()\n  File \"/root/.pyenv/versions/2.7.10/lib/python2.7/site-packages/werkzeug/serving.py\", line 203, in handle\nrv = BaseHTTPRequestHandler.handle(self)\n  File \"/root/.pyenv/versions/2.7.10/lib/python2.7/BaseHTTPServer.py\", line 340, in handle\nself.handle_one_request()\n  File \"/root/.pyenv/versions/2.7.10/lib/python2.7/site-packages/werkzeug/serving.py\", line 234, in handle_one_request\nself.raw_requestline = self.rfile.readline()\n  File \"/root/.pyenv/versions/2.7.10/lib/python2.7/socket.py\", line 451, in readline\ndata = self._sock.recv(self._rbufsize)\nKeyboardInterrupt\n```\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/160302728",
            "html_url": "https://github.com/pallets/flask/issues/1632#issuecomment-160302728",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1632",
            "id": 160302728,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDMwMjcyOA==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-11-28T14:19:31Z",
            "updated_at": "2015-11-28T14:20:07Z",
            "author_association": "MEMBER",
            "body": "The dev server you are using is not suitable for production. See http://flask.pocoo.org/docs/0.10/deploying/ for ways on how to deploy it using a proper webserver.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/160306608",
            "html_url": "https://github.com/pallets/flask/issues/1632#issuecomment-160306608",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1632",
            "id": 160306608,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDMwNjYwOA==",
            "user": {
                "login": "RonnyPfannschmidt",
                "id": 156838,
                "node_id": "MDQ6VXNlcjE1NjgzOA==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/156838?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/RonnyPfannschmidt",
                "html_url": "https://github.com/RonnyPfannschmidt",
                "followers_url": "https://api.github.com/users/RonnyPfannschmidt/followers",
                "following_url": "https://api.github.com/users/RonnyPfannschmidt/following{/other_user}",
                "gists_url": "https://api.github.com/users/RonnyPfannschmidt/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/RonnyPfannschmidt/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/RonnyPfannschmidt/subscriptions",
                "organizations_url": "https://api.github.com/users/RonnyPfannschmidt/orgs",
                "repos_url": "https://api.github.com/users/RonnyPfannschmidt/repos",
                "events_url": "https://api.github.com/users/RonnyPfannschmidt/events{/privacy}",
                "received_events_url": "https://api.github.com/users/RonnyPfannschmidt/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-11-28T14:44:04Z",
            "updated_at": "2015-11-28T14:44:04Z",
            "author_association": "CONTRIBUTOR",
            "body": "for deployment please use a production grade wsgi server - the devserver was never intended to be used on a deployed production system\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/160340401",
            "html_url": "https://github.com/pallets/flask/issues/1632#issuecomment-160340401",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1632",
            "id": 160340401,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDM0MDQwMQ==",
            "user": {
                "login": "actioncrypto",
                "id": 6174154,
                "node_id": "MDQ6VXNlcjYxNzQxNTQ=",
                "avatar_url": "https://avatars2.githubusercontent.com/u/6174154?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/actioncrypto",
                "html_url": "https://github.com/actioncrypto",
                "followers_url": "https://api.github.com/users/actioncrypto/followers",
                "following_url": "https://api.github.com/users/actioncrypto/following{/other_user}",
                "gists_url": "https://api.github.com/users/actioncrypto/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/actioncrypto/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/actioncrypto/subscriptions",
                "organizations_url": "https://api.github.com/users/actioncrypto/orgs",
                "repos_url": "https://api.github.com/users/actioncrypto/repos",
                "events_url": "https://api.github.com/users/actioncrypto/events{/privacy}",
                "received_events_url": "https://api.github.com/users/actioncrypto/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-11-28T22:15:22Z",
            "updated_at": "2015-11-28T22:15:22Z",
            "author_association": "NONE",
            "body": "Wow, pardon my initial ignorance on this! I was under the impression flask could be used \"out of the box\" in production...\n\nThanks everyone for the tips! I've wrapped my app in Tornado, so we'll see how it goes... so far, so good...\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/160343807",
            "html_url": "https://github.com/pallets/flask/issues/1632#issuecomment-160343807",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1632",
            "id": 160343807,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDM0MzgwNw==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-11-28T22:51:53Z",
            "updated_at": "2015-11-28T22:51:53Z",
            "author_association": "MEMBER",
            "body": "Tornado's own [docs](http://www.tornadoweb.org/en/stable/wsgi.html#tornado.wsgi.WSGIContainer) tell you not to run a WSGI app with it unless you have a good reason.  Consider uWSGI or Gunicorn instead.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/160397844",
            "html_url": "https://github.com/pallets/flask/issues/1632#issuecomment-160397844",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1632",
            "id": 160397844,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDM5Nzg0NA==",
            "user": {
                "login": "RonnyPfannschmidt",
                "id": 156838,
                "node_id": "MDQ6VXNlcjE1NjgzOA==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/156838?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/RonnyPfannschmidt",
                "html_url": "https://github.com/RonnyPfannschmidt",
                "followers_url": "https://api.github.com/users/RonnyPfannschmidt/followers",
                "following_url": "https://api.github.com/users/RonnyPfannschmidt/following{/other_user}",
                "gists_url": "https://api.github.com/users/RonnyPfannschmidt/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/RonnyPfannschmidt/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/RonnyPfannschmidt/subscriptions",
                "organizations_url": "https://api.github.com/users/RonnyPfannschmidt/orgs",
                "repos_url": "https://api.github.com/users/RonnyPfannschmidt/repos",
                "events_url": "https://api.github.com/users/RonnyPfannschmidt/events{/privacy}",
                "received_events_url": "https://api.github.com/users/RonnyPfannschmidt/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-11-29T10:39:14Z",
            "updated_at": "2015-11-29T10:39:14Z",
            "author_association": "CONTRIBUTOR",
            "body": "@actioncrypto flask indeed can be used out of the box, however as wsgi framework, not as appserver\n\ni think the distinction is important to keep in mind\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/160428821",
            "html_url": "https://github.com/pallets/flask/issues/1632#issuecomment-160428821",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1632",
            "id": 160428821,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDQyODgyMQ==",
            "user": {
                "login": "actioncrypto",
                "id": 6174154,
                "node_id": "MDQ6VXNlcjYxNzQxNTQ=",
                "avatar_url": "https://avatars2.githubusercontent.com/u/6174154?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/actioncrypto",
                "html_url": "https://github.com/actioncrypto",
                "followers_url": "https://api.github.com/users/actioncrypto/followers",
                "following_url": "https://api.github.com/users/actioncrypto/following{/other_user}",
                "gists_url": "https://api.github.com/users/actioncrypto/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/actioncrypto/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/actioncrypto/subscriptions",
                "organizations_url": "https://api.github.com/users/actioncrypto/orgs",
                "repos_url": "https://api.github.com/users/actioncrypto/repos",
                "events_url": "https://api.github.com/users/actioncrypto/events{/privacy}",
                "received_events_url": "https://api.github.com/users/actioncrypto/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-11-29T16:16:13Z",
            "updated_at": "2015-11-29T16:16:13Z",
            "author_association": "NONE",
            "body": "Yes, this distinction would certainly be very important to note, thank you kindly... I was led to believe flask would be sufficient for twilio server -- from one of twilio's own quickstarts: [here](https://www.twilio.com/docs/quickstart/python/sms/hello-monkey)  \n\nIs this incorrect, and should twilio be notified to change their help docs?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/160429842",
            "html_url": "https://github.com/pallets/flask/issues/1632#issuecomment-160429842",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1632",
            "id": 160429842,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDQyOTg0Mg==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-11-29T16:18:51Z",
            "updated_at": "2015-11-29T16:18:51Z",
            "author_association": "MEMBER",
            "body": "Well for a 'quickstart' like they describe it makes sense to use the dev server. But I guess it would indeed make sense for them to mention that it's not suitable for production...\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/160430566",
            "html_url": "https://github.com/pallets/flask/issues/1632#issuecomment-160430566",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1632",
            "id": 160430566,
            "node_id": "MDEyOklzc3VlQ29tbWVudDE2MDQzMDU2Ng==",
            "user": {
                "login": "wlhlm",
                "id": 1928113,
                "node_id": "MDQ6VXNlcjE5MjgxMTM=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/1928113?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/wlhlm",
                "html_url": "https://github.com/wlhlm",
                "followers_url": "https://api.github.com/users/wlhlm/followers",
                "following_url": "https://api.github.com/users/wlhlm/following{/other_user}",
                "gists_url": "https://api.github.com/users/wlhlm/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/wlhlm/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/wlhlm/subscriptions",
                "organizations_url": "https://api.github.com/users/wlhlm/orgs",
                "repos_url": "https://api.github.com/users/wlhlm/repos",
                "events_url": "https://api.github.com/users/wlhlm/events{/privacy}",
                "received_events_url": "https://api.github.com/users/wlhlm/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2015-11-29T16:31:52Z",
            "updated_at": "2015-11-29T16:31:52Z",
            "author_association": "NONE",
            "body": "@ThiefMaster This is mentioned in the unstable docs.\n"
        }
    ]
}