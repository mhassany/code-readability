{
    "url": "https://api.github.com/repos/pallets/flask/issues/1784",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1784/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1784/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1784/events",
    "html_url": "https://github.com/pallets/flask/issues/1784",
    "id": 149094611,
    "node_id": "MDU6SXNzdWUxNDkwOTQ2MTE=",
    "number": 1784,
    "title": "Not possible to set a session cookie without a domain attribute when SERVER_NAME is set",
    "user": {
        "login": "wrr",
        "id": 1032408,
        "node_id": "MDQ6VXNlcjEwMzI0MDg=",
        "avatar_url": "https://avatars1.githubusercontent.com/u/1032408?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/wrr",
        "html_url": "https://github.com/wrr",
        "followers_url": "https://api.github.com/users/wrr/followers",
        "following_url": "https://api.github.com/users/wrr/following{/other_user}",
        "gists_url": "https://api.github.com/users/wrr/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/wrr/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/wrr/subscriptions",
        "organizations_url": "https://api.github.com/users/wrr/orgs",
        "repos_url": "https://api.github.com/users/wrr/repos",
        "events_url": "https://api.github.com/users/wrr/events{/privacy}",
        "received_events_url": "https://api.github.com/users/wrr/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2016-04-18T09:21:08Z",
    "updated_at": "2017-05-28T03:58:13Z",
    "closed_at": "2017-05-28T03:58:13Z",
    "author_association": "NONE",
    "body": "If cookie has no domain attribute, it is valid only for the exact domain to which the request that sets the cookie is addressed, this is often a desirable behavior. A domain attribute makes the cookie also valid for all sub-domains of the specified domain.\n\nLooking at https://github.com/pallets/flask/blob/c9b29f4072b66be4c751af060d64ea749c6991c1/flask/sessions.py#L198 if `SERVER_NAME` is set, a cookie will always have a domain attribute (either explicitly set via `SESSION_COOKIE_DOMAIN` or inferred from the `SERVER_NAME`).\n\nWould it be possible to allow setting cookies without a domain  when `SERVER_NAME` is set?\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/215437495",
            "html_url": "https://github.com/pallets/flask/issues/1784#issuecomment-215437495",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1784",
            "id": 215437495,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxNTQzNzQ5NQ==",
            "user": {
                "login": "Fajkowsky",
                "id": 1612900,
                "node_id": "MDQ6VXNlcjE2MTI5MDA=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1612900?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Fajkowsky",
                "html_url": "https://github.com/Fajkowsky",
                "followers_url": "https://api.github.com/users/Fajkowsky/followers",
                "following_url": "https://api.github.com/users/Fajkowsky/following{/other_user}",
                "gists_url": "https://api.github.com/users/Fajkowsky/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Fajkowsky/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Fajkowsky/subscriptions",
                "organizations_url": "https://api.github.com/users/Fajkowsky/orgs",
                "repos_url": "https://api.github.com/users/Fajkowsky/repos",
                "events_url": "https://api.github.com/users/Fajkowsky/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Fajkowsky/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-28T14:15:23Z",
            "updated_at": "2016-04-28T14:15:23Z",
            "author_association": "NONE",
            "body": "But why? What would be purpose of this?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/215448412",
            "html_url": "https://github.com/pallets/flask/issues/1784#issuecomment-215448412",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1784",
            "id": 215448412,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxNTQ0ODQxMg==",
            "user": {
                "login": "wrr",
                "id": 1032408,
                "node_id": "MDQ6VXNlcjEwMzI0MDg=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1032408?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/wrr",
                "html_url": "https://github.com/wrr",
                "followers_url": "https://api.github.com/users/wrr/followers",
                "following_url": "https://api.github.com/users/wrr/following{/other_user}",
                "gists_url": "https://api.github.com/users/wrr/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/wrr/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/wrr/subscriptions",
                "organizations_url": "https://api.github.com/users/wrr/orgs",
                "repos_url": "https://api.github.com/users/wrr/repos",
                "events_url": "https://api.github.com/users/wrr/events{/privacy}",
                "received_events_url": "https://api.github.com/users/wrr/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-28T14:42:52Z",
            "updated_at": "2016-04-28T14:42:52Z",
            "author_association": "NONE",
            "body": "@Fajkowsky say `example.org` site uses `admin.example.org` subdomain for administration purposes and would like to set authentication cookies that are restricted to `admin.example.org` only.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/216513603",
            "html_url": "https://github.com/pallets/flask/issues/1784#issuecomment-216513603",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1784",
            "id": 216513603,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxNjUxMzYwMw==",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-05-03T12:32:32Z",
            "updated_at": "2016-05-03T12:32:32Z",
            "author_association": "MEMBER",
            "body": "I don't understand how a decent API would look like. Note that you can already subclass Flask (which is generally encouraged).\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/216822374",
            "html_url": "https://github.com/pallets/flask/issues/1784#issuecomment-216822374",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1784",
            "id": 216822374,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxNjgyMjM3NA==",
            "user": {
                "login": "wrr",
                "id": 1032408,
                "node_id": "MDQ6VXNlcjEwMzI0MDg=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1032408?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/wrr",
                "html_url": "https://github.com/wrr",
                "followers_url": "https://api.github.com/users/wrr/followers",
                "following_url": "https://api.github.com/users/wrr/following{/other_user}",
                "gists_url": "https://api.github.com/users/wrr/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/wrr/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/wrr/subscriptions",
                "organizations_url": "https://api.github.com/users/wrr/orgs",
                "repos_url": "https://api.github.com/users/wrr/repos",
                "events_url": "https://api.github.com/users/wrr/events{/privacy}",
                "received_events_url": "https://api.github.com/users/wrr/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-05-04T10:23:29Z",
            "updated_at": "2016-05-04T10:23:29Z",
            "author_association": "NONE",
            "body": "@untitaker ideally `SESSION_COOKIE_DOMAIN` would be the only setting that controls the `domain` attribute (the `domain` would be never set if `SESSION_COOKIE_DOMAIN` is `None`). But such change is not backward compatible. \n\nA backward compatible approach would be to introduce for example `SESSION_COOKIE_DOMAIN_FROM_SERVER_NAME` setting that defaults to `True`. With the setting set to `True`, the current behavior is preserved. With the setting set to `False`, the `domain` attribute is set based on the `SESSION_COOKIE_DOMAIN` only.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/304491204",
            "html_url": "https://github.com/pallets/flask/issues/1784#issuecomment-304491204",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1784",
            "id": 304491204,
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDQ5MTIwNA==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-05-28T03:58:13Z",
            "updated_at": "2017-05-28T03:58:13Z",
            "author_association": "MEMBER",
            "body": "You can now set `SESSION_COOKIE_DOMAIN = False` to explicitly prevent any domain being set on the cookie. #2282"
        }
    ]
}