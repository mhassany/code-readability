{
    "url": "https://api.github.com/repos/pallets/flask/issues/2534",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/2534/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/2534/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/2534/events",
    "html_url": "https://github.com/pallets/flask/issues/2534",
    "id": 277902512,
    "node_id": "MDU6SXNzdWUyNzc5MDI1MTI=",
    "number": 2534,
    "title": "export FLASK_APP=run.py doesn't recompile .pyc files (BUG)",
    "user": {
        "login": "patientplatypus",
        "id": 24575107,
        "node_id": "MDQ6VXNlcjI0NTc1MTA3",
        "avatar_url": "https://avatars0.githubusercontent.com/u/24575107?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/patientplatypus",
        "html_url": "https://github.com/patientplatypus",
        "followers_url": "https://api.github.com/users/patientplatypus/followers",
        "following_url": "https://api.github.com/users/patientplatypus/following{/other_user}",
        "gists_url": "https://api.github.com/users/patientplatypus/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/patientplatypus/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/patientplatypus/subscriptions",
        "organizations_url": "https://api.github.com/users/patientplatypus/orgs",
        "repos_url": "https://api.github.com/users/patientplatypus/repos",
        "events_url": "https://api.github.com/users/patientplatypus/events{/privacy}",
        "received_events_url": "https://api.github.com/users/patientplatypus/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2017-11-29T20:52:16Z",
    "updated_at": "2017-11-29T21:17:21Z",
    "closed_at": "2017-11-29T21:17:20Z",
    "author_association": "NONE",
    "body": "I noticed the following error while compiling something and it was irksome. Maybe it is worth looking at idk. \r\n\r\nThe issue is the following. \r\n\r\nSay I have the entrypoint to my app be main.py and I export it with `export FLASK_APP=main.py`. If I then later go back and rename the entrypoint run.py and export it, then sometimes flask will continue to use the main.pyc file which will break the application. It may be that this sometimes also occurs with other .pyc files in general, I am not sure - it irks me that previous .pyc files are not destroyed between FLASK_APP runs if shadowing is a possibility. \r\n\r\nJust thought I would point this out - it took me some debugging time and maybe it will save someone else a bit of time. \r\n\r\nThanks.",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/347993357",
            "html_url": "https://github.com/pallets/flask/issues/2534#issuecomment-347993357",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2534",
            "id": 347993357,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0Nzk5MzM1Nw==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-11-29T20:55:42Z",
            "updated_at": "2017-11-29T20:55:42Z",
            "author_association": "MEMBER",
            "body": "You're saying that if you completely stop the server, rename the file, export the var, and start the server, it uses the old file? You'll need to provide a reproducible example if that's the case, that's not how Python works."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/347993641",
            "html_url": "https://github.com/pallets/flask/issues/2534#issuecomment-347993641",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2534",
            "id": 347993641,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0Nzk5MzY0MQ==",
            "user": {
                "login": "davidism",
                "id": 1242887,
                "node_id": "MDQ6VXNlcjEyNDI4ODc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidism",
                "html_url": "https://github.com/davidism",
                "followers_url": "https://api.github.com/users/davidism/followers",
                "following_url": "https://api.github.com/users/davidism/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidism/subscriptions",
                "organizations_url": "https://api.github.com/users/davidism/orgs",
                "repos_url": "https://api.github.com/users/davidism/repos",
                "events_url": "https://api.github.com/users/davidism/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidism/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-11-29T20:56:43Z",
            "updated_at": "2017-11-29T20:56:43Z",
            "author_association": "MEMBER",
            "body": "If you just mean that renaming / exporting while the server is still running doesn't work, then that's expected, don't do that. Python doesn't reload files when they're renamed, and the reloader only knows about what started the app, not what it became later."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/347996331",
            "html_url": "https://github.com/pallets/flask/issues/2534#issuecomment-347996331",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2534",
            "id": 347996331,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0Nzk5NjMzMQ==",
            "user": {
                "login": "patientplatypus",
                "id": 24575107,
                "node_id": "MDQ6VXNlcjI0NTc1MTA3",
                "avatar_url": "https://avatars0.githubusercontent.com/u/24575107?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/patientplatypus",
                "html_url": "https://github.com/patientplatypus",
                "followers_url": "https://api.github.com/users/patientplatypus/followers",
                "following_url": "https://api.github.com/users/patientplatypus/following{/other_user}",
                "gists_url": "https://api.github.com/users/patientplatypus/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/patientplatypus/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/patientplatypus/subscriptions",
                "organizations_url": "https://api.github.com/users/patientplatypus/orgs",
                "repos_url": "https://api.github.com/users/patientplatypus/repos",
                "events_url": "https://api.github.com/users/patientplatypus/events{/privacy}",
                "received_events_url": "https://api.github.com/users/patientplatypus/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-11-29T21:06:53Z",
            "updated_at": "2017-11-29T21:06:53Z",
            "author_association": "NONE",
            "body": "Honestly, (and I know that this will sound bad), I'm not sure that I can reproduce the exact sequence of steps that led to this error. What I do know is that to get it fixed, I had to delete all of my .pyc files and re-export and re-run everything. So *something* in my .pyc files was shadowing the compile, and the above is my best guess. What is frustrating is that I wish that export flask app had an option to delete the .pyc files in the parent directory on down and recompile them to make sure potential shadowing does not occur. I am relatively new to python, please forgive my ignorance."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/347996486",
            "html_url": "https://github.com/pallets/flask/issues/2534#issuecomment-347996486",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2534",
            "id": 347996486,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0Nzk5NjQ4Ng==",
            "user": {
                "login": "patientplatypus",
                "id": 24575107,
                "node_id": "MDQ6VXNlcjI0NTc1MTA3",
                "avatar_url": "https://avatars0.githubusercontent.com/u/24575107?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/patientplatypus",
                "html_url": "https://github.com/patientplatypus",
                "followers_url": "https://api.github.com/users/patientplatypus/followers",
                "following_url": "https://api.github.com/users/patientplatypus/following{/other_user}",
                "gists_url": "https://api.github.com/users/patientplatypus/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/patientplatypus/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/patientplatypus/subscriptions",
                "organizations_url": "https://api.github.com/users/patientplatypus/orgs",
                "repos_url": "https://api.github.com/users/patientplatypus/repos",
                "events_url": "https://api.github.com/users/patientplatypus/events{/privacy}",
                "received_events_url": "https://api.github.com/users/patientplatypus/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-11-29T21:07:31Z",
            "updated_at": "2017-11-29T21:07:31Z",
            "author_association": "NONE",
            "body": "Also, I did stop the server, re-export and rerun."
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/347999039",
            "html_url": "https://github.com/pallets/flask/issues/2534#issuecomment-347999039",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/2534",
            "id": 347999039,
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0Nzk5OTAzOQ==",
            "user": {
                "login": "patientplatypus",
                "id": 24575107,
                "node_id": "MDQ6VXNlcjI0NTc1MTA3",
                "avatar_url": "https://avatars0.githubusercontent.com/u/24575107?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/patientplatypus",
                "html_url": "https://github.com/patientplatypus",
                "followers_url": "https://api.github.com/users/patientplatypus/followers",
                "following_url": "https://api.github.com/users/patientplatypus/following{/other_user}",
                "gists_url": "https://api.github.com/users/patientplatypus/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/patientplatypus/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/patientplatypus/subscriptions",
                "organizations_url": "https://api.github.com/users/patientplatypus/orgs",
                "repos_url": "https://api.github.com/users/patientplatypus/repos",
                "events_url": "https://api.github.com/users/patientplatypus/events{/privacy}",
                "received_events_url": "https://api.github.com/users/patientplatypus/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2017-11-29T21:17:20Z",
            "updated_at": "2017-11-29T21:17:20Z",
            "author_association": "NONE",
            "body": "-- I'll close the issue for now. "
        }
    ]
}