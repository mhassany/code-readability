{
    "url": "https://api.github.com/repos/pallets/flask/issues/459",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/459/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/459/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/459/events",
    "html_url": "https://github.com/pallets/flask/issues/459",
    "id": 3797485,
    "node_id": "MDU6SXNzdWUzNzk3NDg1",
    "number": 459,
    "title": "Problem with file uploading",
    "user": {
        "login": "akolesnikov93",
        "id": 1572921,
        "node_id": "MDQ6VXNlcjE1NzI5MjE=",
        "avatar_url": "https://avatars3.githubusercontent.com/u/1572921?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/akolesnikov93",
        "html_url": "https://github.com/akolesnikov93",
        "followers_url": "https://api.github.com/users/akolesnikov93/followers",
        "following_url": "https://api.github.com/users/akolesnikov93/following{/other_user}",
        "gists_url": "https://api.github.com/users/akolesnikov93/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/akolesnikov93/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/akolesnikov93/subscriptions",
        "organizations_url": "https://api.github.com/users/akolesnikov93/orgs",
        "repos_url": "https://api.github.com/users/akolesnikov93/repos",
        "events_url": "https://api.github.com/users/akolesnikov93/events{/privacy}",
        "received_events_url": "https://api.github.com/users/akolesnikov93/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2012-03-25T10:05:04Z",
    "updated_at": "2012-03-25T10:06:01Z",
    "closed_at": "2012-03-25T10:06:01Z",
    "author_association": "NONE",
    "body": "Strange error happened to 100% working code (I mean this code has been working brilliantly for a while, but now gives strange errors).\nUsing flask (0.7.2), flask-wtf, flask-uploads.\n\nMain code:\n\n@app.route('/task/new', methods=['GET', 'POST'])\ndef task():\n    form = TaskForm(request.form)\n    if request.method == 'POST' and form.validate():\n        print type(form.image) # <class 'flaskext.wtf.file.FileField'>\n        print type(form.image.file) # <type 'unicode'>\n        print type(form.image.data) # <type 'unicode'>\n        print form.image.file.filename # gives AttributeError: 'unicode' object has no attribute 'filename'\n\nSome part from forms.py:\n\nfrom flaskext.wtf import ....... FileField,  file_allowed\nfrom flaskext.uploads import UploadSet, IMAGES\n\nimages = UploadSet(\"images\", IMAGES)\n\nclass TaskForm(Form):\n    url = TextField(u'URL', [validators.Length(min=4, max=400), validators.Required()])\n    title = TextField(u'TITLE', [validators.Length(min=4, max=4000), validators.Required()])\n    description = TextAreaField(u'Desc', [validators.Length(min=4, max=4000), validators.Required()])\n    image = FileField(u'Image', [file_allowed(images, \"Images only!\")])\n\nJinja 2 template:\n\n<form action=\"{{ url_for('task', task_id=task.id) }}\" method=\"POST\" enctype=\"multipart/form-data\">\n    {{ form.hidden_tag() }}\n    {{ help.render_field(form.url) }} # using rendering form macro, no problem there\n    {{ help.render_field(form.title) }}\n        {{ help.render_field(form.description) }}\n        {{ help.render_field(form.image) }}\n        <button class=\"positive\" type=\"submit\">Save</button>\n</form>\n\n\n1) In Firefox submitting this form makes required fields (url, title, description) giving error \"This field is required. \" (Surely they are filled correctly).\n2) In Chrome it's OK, but (from the main code): \n    print type(form.image) # <class 'flaskext.wtf.file.FileField'>\n    print type(form.image.file) # <type 'unicode'>\n    print type(form.image.data) # <type 'unicode'>\n    print form.image.file.filename # gives AttributeError: 'unicode' object has no attribute 'filename'\n\nEnctype is correct (it was working well, no changes were made).\nSo what can I do with this errors? It was working great, but now crashes. If needed, hosting is ep.io\n"
}