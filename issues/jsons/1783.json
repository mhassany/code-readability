{
    "url": "https://api.github.com/repos/pallets/flask/issues/1783",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/1783/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/1783/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/1783/events",
    "html_url": "https://github.com/pallets/flask/issues/1783",
    "id": 148845550,
    "node_id": "MDU6SXNzdWUxNDg4NDU1NTA=",
    "number": 1783,
    "title": "Automatic redirect with \"/\" breaks routes with different methods",
    "user": {
        "login": "JelteF",
        "id": 1162278,
        "node_id": "MDQ6VXNlcjExNjIyNzg=",
        "avatar_url": "https://avatars2.githubusercontent.com/u/1162278?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JelteF",
        "html_url": "https://github.com/JelteF",
        "followers_url": "https://api.github.com/users/JelteF/followers",
        "following_url": "https://api.github.com/users/JelteF/following{/other_user}",
        "gists_url": "https://api.github.com/users/JelteF/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/JelteF/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/JelteF/subscriptions",
        "organizations_url": "https://api.github.com/users/JelteF/orgs",
        "repos_url": "https://api.github.com/users/JelteF/repos",
        "events_url": "https://api.github.com/users/JelteF/events{/privacy}",
        "received_events_url": "https://api.github.com/users/JelteF/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": {
        "login": "mitsuhiko",
        "id": 7396,
        "node_id": "MDQ6VXNlcjczOTY=",
        "avatar_url": "https://avatars1.githubusercontent.com/u/7396?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mitsuhiko",
        "html_url": "https://github.com/mitsuhiko",
        "followers_url": "https://api.github.com/users/mitsuhiko/followers",
        "following_url": "https://api.github.com/users/mitsuhiko/following{/other_user}",
        "gists_url": "https://api.github.com/users/mitsuhiko/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mitsuhiko/subscriptions",
        "organizations_url": "https://api.github.com/users/mitsuhiko/orgs",
        "repos_url": "https://api.github.com/users/mitsuhiko/repos",
        "events_url": "https://api.github.com/users/mitsuhiko/events{/privacy}",
        "received_events_url": "https://api.github.com/users/mitsuhiko/received_events",
        "type": "User",
        "site_admin": false
    },
    "assignees": [
        {
            "login": "mitsuhiko",
            "id": 7396,
            "node_id": "MDQ6VXNlcjczOTY=",
            "avatar_url": "https://avatars1.githubusercontent.com/u/7396?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mitsuhiko",
            "html_url": "https://github.com/mitsuhiko",
            "followers_url": "https://api.github.com/users/mitsuhiko/followers",
            "following_url": "https://api.github.com/users/mitsuhiko/following{/other_user}",
            "gists_url": "https://api.github.com/users/mitsuhiko/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mitsuhiko/subscriptions",
            "organizations_url": "https://api.github.com/users/mitsuhiko/orgs",
            "repos_url": "https://api.github.com/users/mitsuhiko/repos",
            "events_url": "https://api.github.com/users/mitsuhiko/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mitsuhiko/received_events",
            "type": "User",
            "site_admin": false
        }
    ],
    "milestone": null,
    "comments": 20,
    "created_at": "2016-04-16T11:59:16Z",
    "updated_at": "2016-05-22T10:20:31Z",
    "closed_at": "2016-05-22T10:20:31Z",
    "author_association": "NONE",
    "body": "I have found an issue that is caused by the automatic redirect of routes to the version with a \"/\" at the end. See the code below for a minimal example:\n\n``` python\nfrom flask import Flask\napp = Flask(__name__)\n\n\n@app.route(\"/a/\", methods=[\"GET\"])\ndef hello():\n    return \"Hello GET!\\n\"\n\n\n@app.route(\"/a\", methods=[\"POST\"])\ndef hello_post():\n    return \"Hello POST!\\n\"\n\nif __name__ == \"__main__\":\n    app.run()\n\n```\n\nThe POST route is unreachable as the \"/\" redirect is done without looking at the method. See the following curl commands (the `-L` flag is to follow redirects):\n\n``` bash\n$ curl localhost:5000/a/\nHello GET!\n\n$ curl localhost:5000/a\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 3.2 Final//EN\">\n<title>Redirecting...</title>\n<h1>Redirecting...</h1>\n<p>You should be redirected automatically to target URL: <a href=\"http://localhost:5000/a/\">http://localhost:5000/a/</a>.  If not click the link.\n\n$ curl localhost:5000/a -L\nHello GET!\n\n$ curl localhost:5000/a -X POST\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 3.2 Final//EN\">\n<title>Redirecting...</title>\n<h1>Redirecting...</h1>\n<p>You should be redirected automatically to target URL: <a href=\"http://localhost:5000/a/\">http://localhost:5000/a/</a>.  If not click the link.\n\n$ curl localhost:5000/a/ -X POST\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 3.2 Final//EN\">\n<title>405 Method Not Allowed</title>\n<h1>Method Not Allowed</h1>\n<p>The method is not allowed for the requested URL.</p>\n\n$ curl localhost:5000/a -X POST -L\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 3.2 Final//EN\">\n<title>405 Method Not Allowed</title>\n<h1>Method Not Allowed</h1>\n<p>The method is not allowed for the requested URL.</p>\n```\n\nEdit: My python version is Python3.4 and Werkzeug is 0.11.8 but it was also possible with the git version of Werkzeug.\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/210806324",
            "html_url": "https://github.com/pallets/flask/issues/1783#issuecomment-210806324",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1783",
            "id": 210806324,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxMDgwNjMyNA==",
            "user": {
                "login": "JelteF",
                "id": 1162278,
                "node_id": "MDQ6VXNlcjExNjIyNzg=",
                "avatar_url": "https://avatars2.githubusercontent.com/u/1162278?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/JelteF",
                "html_url": "https://github.com/JelteF",
                "followers_url": "https://api.github.com/users/JelteF/followers",
                "following_url": "https://api.github.com/users/JelteF/following{/other_user}",
                "gists_url": "https://api.github.com/users/JelteF/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/JelteF/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JelteF/subscriptions",
                "organizations_url": "https://api.github.com/users/JelteF/orgs",
                "repos_url": "https://api.github.com/users/JelteF/repos",
                "events_url": "https://api.github.com/users/JelteF/events{/privacy}",
                "received_events_url": "https://api.github.com/users/JelteF/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-16T12:38:26Z",
            "updated_at": "2016-04-16T12:38:26Z",
            "author_association": "NONE",
            "body": "Switching the order of the two routes fixes the issue btw:\n\n``` python\nfrom flask import Flask\napp = Flask(__name__)\n\n\n@app.route(\"/a\", methods=[\"POST\"])\ndef hello_post():\n    return \"Hello POST!\\n\"\n\n@app.route(\"/a/\", methods=[\"GET\"])\ndef hello():\n    return \"Hello GET!\\n\"\n\nif __name__ == \"__main__\":\n    app.run()\n\n```\n\nThat way POST does get matched:\n\n``` bash\n$ curl localhost:5000/a -L\nHello GET!\n$ curl localhost:5000/a -X POST -L\nHello POST!\n```\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/210806479",
            "html_url": "https://github.com/pallets/flask/issues/1783#issuecomment-210806479",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1783",
            "id": 210806479,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxMDgwNjQ3OQ==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-16T12:40:17Z",
            "updated_at": "2016-04-16T12:40:51Z",
            "author_association": "MEMBER",
            "body": "Mixing `/a/` and `/a` seems like a really bad idea to me. Try `app.route(.., strict_slashes=False)` to disable the automated redirect from `/a` to `/a/` if you really need it though. You can also do this globally using `app.url_map.strict_slashes = False`\n\nIf that solves it for you I'd say it's not a bug.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/210808690",
            "html_url": "https://github.com/pallets/flask/issues/1783#issuecomment-210808690",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1783",
            "id": 210808690,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxMDgwODY5MA==",
            "user": {
                "login": "JelteF",
                "id": 1162278,
                "node_id": "MDQ6VXNlcjExNjIyNzg=",
                "avatar_url": "https://avatars2.githubusercontent.com/u/1162278?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/JelteF",
                "html_url": "https://github.com/JelteF",
                "followers_url": "https://api.github.com/users/JelteF/followers",
                "following_url": "https://api.github.com/users/JelteF/following{/other_user}",
                "gists_url": "https://api.github.com/users/JelteF/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/JelteF/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JelteF/subscriptions",
                "organizations_url": "https://api.github.com/users/JelteF/orgs",
                "repos_url": "https://api.github.com/users/JelteF/repos",
                "events_url": "https://api.github.com/users/JelteF/events{/privacy}",
                "received_events_url": "https://api.github.com/users/JelteF/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-16T12:50:10Z",
            "updated_at": "2016-04-16T12:50:10Z",
            "author_association": "NONE",
            "body": "I agree that it is not very nice. But I found this bug during a refactor that had the side of importing the routes in a different order and suddenly different parts of my application were broken because there were some GET routes that redirected my PUT routes. It seems bad that routes are redirected when the resulting route will result in a 405 error, especially when the first route was in the routing table for that method.\n\nDisabling strict slashes for the GET route in the example works `strict_slashes`, but this is not really what I want since like strict slashes and have them enabled for a reason.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/210861251",
            "html_url": "https://github.com/pallets/flask/issues/1783#issuecomment-210861251",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1783",
            "id": 210861251,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxMDg2MTI1MQ==",
            "user": {
                "login": "AzureusNation",
                "id": 3342020,
                "node_id": "MDQ6VXNlcjMzNDIwMjA=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/3342020?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/AzureusNation",
                "html_url": "https://github.com/AzureusNation",
                "followers_url": "https://api.github.com/users/AzureusNation/followers",
                "following_url": "https://api.github.com/users/AzureusNation/following{/other_user}",
                "gists_url": "https://api.github.com/users/AzureusNation/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/AzureusNation/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/AzureusNation/subscriptions",
                "organizations_url": "https://api.github.com/users/AzureusNation/orgs",
                "repos_url": "https://api.github.com/users/AzureusNation/repos",
                "events_url": "https://api.github.com/users/AzureusNation/events{/privacy}",
                "received_events_url": "https://api.github.com/users/AzureusNation/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-16T17:22:15Z",
            "updated_at": "2016-04-16T17:22:39Z",
            "author_association": "NONE",
            "body": "Hello @JelteF \nReally, your method of doing this is bad practice. I'll show you a method that will solve this issue for you.\n\n``` python\nfrom flask import Flask, request\n\napp = Flask(__name__)\n\n\n@app.route(\"/hello\", methods=[\"GET\", \"POST\"])\ndef hello():\n    if request.method == \"POST\":\n        return \"Hello POST!\"\n    return \"Hello GET!\"\n\n\nif __name__ == '__main__':\n    app.run()\n```\n\nI always put both get and post in to one method. It's best practice and it keeps your code really clean and easy to read.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/210862798",
            "html_url": "https://github.com/pallets/flask/issues/1783#issuecomment-210862798",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1783",
            "id": 210862798,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxMDg2Mjc5OA==",
            "user": {
                "login": "JelteF",
                "id": 1162278,
                "node_id": "MDQ6VXNlcjExNjIyNzg=",
                "avatar_url": "https://avatars2.githubusercontent.com/u/1162278?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/JelteF",
                "html_url": "https://github.com/JelteF",
                "followers_url": "https://api.github.com/users/JelteF/followers",
                "following_url": "https://api.github.com/users/JelteF/following{/other_user}",
                "gists_url": "https://api.github.com/users/JelteF/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/JelteF/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JelteF/subscriptions",
                "organizations_url": "https://api.github.com/users/JelteF/orgs",
                "repos_url": "https://api.github.com/users/JelteF/repos",
                "events_url": "https://api.github.com/users/JelteF/events{/privacy}",
                "received_events_url": "https://api.github.com/users/JelteF/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-16T17:46:31Z",
            "updated_at": "2016-04-16T17:46:31Z",
            "author_association": "NONE",
            "body": "@AzureusNation When using REST like applications I think it is a very weird practice to do it like this. Since the GET, PUT and POST methods probably do entirely different things, but putting them in the same function. It is also shown in examples that you can simple have functions with the same route but with different methods:\nhttp://flask.pocoo.org/snippets/1/\n\nI've also used this method for more than two years now and have never had any problems with it except the one I'm showing here.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/210864826",
            "html_url": "https://github.com/pallets/flask/issues/1783#issuecomment-210864826",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1783",
            "id": 210864826,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxMDg2NDgyNg==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-16T17:48:56Z",
            "updated_at": "2016-04-16T17:48:56Z",
            "author_association": "MEMBER",
            "body": "You could use class-based views or an extension like flask-restful\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/210866207",
            "html_url": "https://github.com/pallets/flask/issues/1783#issuecomment-210866207",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1783",
            "id": 210866207,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxMDg2NjIwNw==",
            "user": {
                "login": "AzureusNation",
                "id": 3342020,
                "node_id": "MDQ6VXNlcjMzNDIwMjA=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/3342020?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/AzureusNation",
                "html_url": "https://github.com/AzureusNation",
                "followers_url": "https://api.github.com/users/AzureusNation/followers",
                "following_url": "https://api.github.com/users/AzureusNation/following{/other_user}",
                "gists_url": "https://api.github.com/users/AzureusNation/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/AzureusNation/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/AzureusNation/subscriptions",
                "organizations_url": "https://api.github.com/users/AzureusNation/orgs",
                "repos_url": "https://api.github.com/users/AzureusNation/repos",
                "events_url": "https://api.github.com/users/AzureusNation/events{/privacy}",
                "received_events_url": "https://api.github.com/users/AzureusNation/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-16T17:54:10Z",
            "updated_at": "2016-04-16T17:54:52Z",
            "author_association": "NONE",
            "body": "@JelteF Here's an idea so not all the code is in the same function. You could have your functions in a separate py file and call the functions like this.\n\n``` python\n@app.route(\"/hello\", methods=[\"GET\", \"POST\"])\ndef hello():\n    if request.method == \"POST\":\n        return doPost()\n    return doGet()\n```\n\nBut personally I don't see the need of having 3 functions when you can compress it down in to one.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/210866687",
            "html_url": "https://github.com/pallets/flask/issues/1783#issuecomment-210866687",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1783",
            "id": 210866687,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxMDg2NjY4Nw==",
            "user": {
                "login": "ThiefMaster",
                "id": 179599,
                "node_id": "MDQ6VXNlcjE3OTU5OQ==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/179599?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/ThiefMaster",
                "html_url": "https://github.com/ThiefMaster",
                "followers_url": "https://api.github.com/users/ThiefMaster/followers",
                "following_url": "https://api.github.com/users/ThiefMaster/following{/other_user}",
                "gists_url": "https://api.github.com/users/ThiefMaster/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/ThiefMaster/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ThiefMaster/subscriptions",
                "organizations_url": "https://api.github.com/users/ThiefMaster/orgs",
                "repos_url": "https://api.github.com/users/ThiefMaster/repos",
                "events_url": "https://api.github.com/users/ThiefMaster/events{/privacy}",
                "received_events_url": "https://api.github.com/users/ThiefMaster/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-16T17:56:25Z",
            "updated_at": "2016-04-16T17:56:25Z",
            "author_association": "MEMBER",
            "body": "Pretty ugly IMO (not to mention that camelCase doesn't belong into python code).\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/211108314",
            "html_url": "https://github.com/pallets/flask/issues/1783#issuecomment-211108314",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1783",
            "id": 211108314,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxMTEwODMxNA==",
            "user": {
                "login": "jeffwidman",
                "id": 483314,
                "node_id": "MDQ6VXNlcjQ4MzMxNA==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/483314?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/jeffwidman",
                "html_url": "https://github.com/jeffwidman",
                "followers_url": "https://api.github.com/users/jeffwidman/followers",
                "following_url": "https://api.github.com/users/jeffwidman/following{/other_user}",
                "gists_url": "https://api.github.com/users/jeffwidman/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/jeffwidman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jeffwidman/subscriptions",
                "organizations_url": "https://api.github.com/users/jeffwidman/orgs",
                "repos_url": "https://api.github.com/users/jeffwidman/repos",
                "events_url": "https://api.github.com/users/jeffwidman/events{/privacy}",
                "received_events_url": "https://api.github.com/users/jeffwidman/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-17T20:26:17Z",
            "updated_at": "2016-04-17T23:19:08Z",
            "author_association": "MEMBER",
            "body": "It doesn't look like there's a bug here since the behavior is configurable. Having the strict slashes redirect default to on seems fine to me--I prefer that we have a redirect one way or the other as I think it leads to cleaner URLs by default. If a user for some reason wants to mix the route styles, it's not hard to google how to turn off that redirect. \n\nArguably, the redirect could kick in _after_ the routes table is parsed, in which case the new POST would work, but if you'd previously had a route that was working due to a redirect, adding this new route would (somewhat unexpectedly) break the original route. For now, I'm closing this, if there's significant interest in changing the evaluation order so the redirect happens after the routes table, then we can re-open and re-evaluate.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/211113675",
            "html_url": "https://github.com/pallets/flask/issues/1783#issuecomment-211113675",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1783",
            "id": 211113675,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxMTExMzY3NQ==",
            "user": {
                "login": "JelteF",
                "id": 1162278,
                "node_id": "MDQ6VXNlcjExNjIyNzg=",
                "avatar_url": "https://avatars2.githubusercontent.com/u/1162278?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/JelteF",
                "html_url": "https://github.com/JelteF",
                "followers_url": "https://api.github.com/users/JelteF/followers",
                "following_url": "https://api.github.com/users/JelteF/following{/other_user}",
                "gists_url": "https://api.github.com/users/JelteF/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/JelteF/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JelteF/subscriptions",
                "organizations_url": "https://api.github.com/users/JelteF/orgs",
                "repos_url": "https://api.github.com/users/JelteF/repos",
                "events_url": "https://api.github.com/users/JelteF/events{/privacy}",
                "received_events_url": "https://api.github.com/users/JelteF/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-17T20:51:50Z",
            "updated_at": "2016-04-17T20:51:50Z",
            "author_association": "NONE",
            "body": "The redirect itself is not the problem, since that is exactly what I want. The problem is that it redirects even though the method is invalid after the redirect, especially because the exact route is valid for that method. If a GET route would be defined with and without a slash I would argue that this behaviour is not a bug. But in this case a redirect is done to a route that will definitely return an error in favour of not redirecting and having a route that matches directly.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/211117356",
            "html_url": "https://github.com/pallets/flask/issues/1783#issuecomment-211117356",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1783",
            "id": 211117356,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxMTExNzM1Ng==",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-17T21:12:26Z",
            "updated_at": "2016-04-17T21:14:02Z",
            "author_association": "MEMBER",
            "body": "FTR changing the evaluation order to anything \"complexity-based\" seems like a no-go to me since the resulting behavior would be harder to reason about. You're going to end up with edgecases like this one either way: I think the current way has fewer ones. At least you can just change the order of registration to work around it, in systems where the routes are resorted you can't.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/211567031",
            "html_url": "https://github.com/pallets/flask/issues/1783#issuecomment-211567031",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1783",
            "id": 211567031,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxMTU2NzAzMQ==",
            "user": {
                "login": "jeffwidman",
                "id": 483314,
                "node_id": "MDQ6VXNlcjQ4MzMxNA==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/483314?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/jeffwidman",
                "html_url": "https://github.com/jeffwidman",
                "followers_url": "https://api.github.com/users/jeffwidman/followers",
                "following_url": "https://api.github.com/users/jeffwidman/following{/other_user}",
                "gists_url": "https://api.github.com/users/jeffwidman/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/jeffwidman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jeffwidman/subscriptions",
                "organizations_url": "https://api.github.com/users/jeffwidman/orgs",
                "repos_url": "https://api.github.com/users/jeffwidman/repos",
                "events_url": "https://api.github.com/users/jeffwidman/events{/privacy}",
                "received_events_url": "https://api.github.com/users/jeffwidman/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-18T20:40:52Z",
            "updated_at": "2016-04-18T20:40:52Z",
            "author_association": "MEMBER",
            "body": "Having thought about this more, I agree the behavior is definitely surprising and does feel like a bug. If a route doesn't define a HTTP method, then another route that handles that method shouldn't be overridden, regardless of auto-redirects. \n\nI'm not sure how to best solve it. Probably the redirect should only kick in for the defined HTTP methods on a route. That's the behavior I would expect.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/211568183",
            "html_url": "https://github.com/pallets/flask/issues/1783#issuecomment-211568183",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1783",
            "id": 211568183,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxMTU2ODE4Mw==",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-18T20:44:23Z",
            "updated_at": "2016-04-18T20:44:31Z",
            "author_association": "MEMBER",
            "body": "Sorry, yes, that _is_ a bug. I didn't even sense this from the original post, probably was half-sleeping.\n\nWhile I think this can _maybe_ be solved in a backwards-compatible manner, I don't think it qualifies for a bugfix release, as it _might_ break applications.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/212052067",
            "html_url": "https://github.com/pallets/flask/issues/1783#issuecomment-212052067",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1783",
            "id": 212052067,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxMjA1MjA2Nw==",
            "user": {
                "login": "JelteF",
                "id": 1162278,
                "node_id": "MDQ6VXNlcjExNjIyNzg=",
                "avatar_url": "https://avatars2.githubusercontent.com/u/1162278?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/JelteF",
                "html_url": "https://github.com/JelteF",
                "followers_url": "https://api.github.com/users/JelteF/followers",
                "following_url": "https://api.github.com/users/JelteF/following{/other_user}",
                "gists_url": "https://api.github.com/users/JelteF/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/JelteF/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JelteF/subscriptions",
                "organizations_url": "https://api.github.com/users/JelteF/orgs",
                "repos_url": "https://api.github.com/users/JelteF/repos",
                "events_url": "https://api.github.com/users/JelteF/events{/privacy}",
                "received_events_url": "https://api.github.com/users/JelteF/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-19T18:16:13Z",
            "updated_at": "2016-04-19T18:16:13Z",
            "author_association": "NONE",
            "body": "Glad to hear you guys agree. After looking into to Flask internals a bit I think this is actually a Werkzeug bug instead of a Flask bug.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/212066397",
            "html_url": "https://github.com/pallets/flask/issues/1783#issuecomment-212066397",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1783",
            "id": 212066397,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxMjA2NjM5Nw==",
            "user": {
                "login": "JelteF",
                "id": 1162278,
                "node_id": "MDQ6VXNlcjExNjIyNzg=",
                "avatar_url": "https://avatars2.githubusercontent.com/u/1162278?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/JelteF",
                "html_url": "https://github.com/JelteF",
                "followers_url": "https://api.github.com/users/JelteF/followers",
                "following_url": "https://api.github.com/users/JelteF/following{/other_user}",
                "gists_url": "https://api.github.com/users/JelteF/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/JelteF/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JelteF/subscriptions",
                "organizations_url": "https://api.github.com/users/JelteF/orgs",
                "repos_url": "https://api.github.com/users/JelteF/repos",
                "events_url": "https://api.github.com/users/JelteF/events{/privacy}",
                "received_events_url": "https://api.github.com/users/JelteF/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-19T18:51:12Z",
            "updated_at": "2016-04-19T18:51:12Z",
            "author_association": "NONE",
            "body": "I've just submitted a very simple pull request in the werkzeug repo to fix this bug. https://github.com/pallets/werkzeug/pull/907\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/212077232",
            "html_url": "https://github.com/pallets/flask/issues/1783#issuecomment-212077232",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1783",
            "id": 212077232,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxMjA3NzIzMg==",
            "user": {
                "login": "jeffwidman",
                "id": 483314,
                "node_id": "MDQ6VXNlcjQ4MzMxNA==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/483314?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/jeffwidman",
                "html_url": "https://github.com/jeffwidman",
                "followers_url": "https://api.github.com/users/jeffwidman/followers",
                "following_url": "https://api.github.com/users/jeffwidman/following{/other_user}",
                "gists_url": "https://api.github.com/users/jeffwidman/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/jeffwidman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jeffwidman/subscriptions",
                "organizations_url": "https://api.github.com/users/jeffwidman/orgs",
                "repos_url": "https://api.github.com/users/jeffwidman/repos",
                "events_url": "https://api.github.com/users/jeffwidman/events{/privacy}",
                "received_events_url": "https://api.github.com/users/jeffwidman/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-19T19:23:49Z",
            "updated_at": "2016-04-19T19:23:49Z",
            "author_association": "MEMBER",
            "body": "Closing, this is now tracked over in https://github.com/pallets/werkzeug/pull/907\n\nThanks again @JelteF for working on this.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/212079300",
            "html_url": "https://github.com/pallets/flask/issues/1783#issuecomment-212079300",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1783",
            "id": 212079300,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxMjA3OTMwMA==",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-19T19:29:33Z",
            "updated_at": "2016-04-19T19:29:33Z",
            "author_association": "MEMBER",
            "body": "no please keep this issue open, PRs are different from issues.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/212116573",
            "html_url": "https://github.com/pallets/flask/issues/1783#issuecomment-212116573",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1783",
            "id": 212116573,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxMjExNjU3Mw==",
            "user": {
                "login": "jeffwidman",
                "id": 483314,
                "node_id": "MDQ6VXNlcjQ4MzMxNA==",
                "avatar_url": "https://avatars2.githubusercontent.com/u/483314?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/jeffwidman",
                "html_url": "https://github.com/jeffwidman",
                "followers_url": "https://api.github.com/users/jeffwidman/followers",
                "following_url": "https://api.github.com/users/jeffwidman/following{/other_user}",
                "gists_url": "https://api.github.com/users/jeffwidman/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/jeffwidman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jeffwidman/subscriptions",
                "organizations_url": "https://api.github.com/users/jeffwidman/orgs",
                "repos_url": "https://api.github.com/users/jeffwidman/repos",
                "events_url": "https://api.github.com/users/jeffwidman/events{/privacy}",
                "received_events_url": "https://api.github.com/users/jeffwidman/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-19T20:34:57Z",
            "updated_at": "2016-04-19T20:34:57Z",
            "author_association": "MEMBER",
            "body": "No problem, but I thought the switch to fixing this in Werkzeug means it's not an issue with Flask but with upstream? Do we keep Flask issues open if the underlying problem is in a dependancy?\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/212118542",
            "html_url": "https://github.com/pallets/flask/issues/1783#issuecomment-212118542",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1783",
            "id": 212118542,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIxMjExODU0Mg==",
            "user": {
                "login": "untitaker",
                "id": 837573,
                "node_id": "MDQ6VXNlcjgzNzU3Mw==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/837573?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/untitaker",
                "html_url": "https://github.com/untitaker",
                "followers_url": "https://api.github.com/users/untitaker/followers",
                "following_url": "https://api.github.com/users/untitaker/following{/other_user}",
                "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions",
                "organizations_url": "https://api.github.com/users/untitaker/orgs",
                "repos_url": "https://api.github.com/users/untitaker/repos",
                "events_url": "https://api.github.com/users/untitaker/events{/privacy}",
                "received_events_url": "https://api.github.com/users/untitaker/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-04-19T20:39:30Z",
            "updated_at": "2016-04-19T20:39:30Z",
            "author_association": "MEMBER",
            "body": "It would be better refiled against Werkzeug but more importantly, some issue should stay open.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/220824825",
            "html_url": "https://github.com/pallets/flask/issues/1783#issuecomment-220824825",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/1783",
            "id": 220824825,
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyMDgyNDgyNQ==",
            "user": {
                "login": "mitsuhiko",
                "id": 7396,
                "node_id": "MDQ6VXNlcjczOTY=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/7396?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mitsuhiko",
                "html_url": "https://github.com/mitsuhiko",
                "followers_url": "https://api.github.com/users/mitsuhiko/followers",
                "following_url": "https://api.github.com/users/mitsuhiko/following{/other_user}",
                "gists_url": "https://api.github.com/users/mitsuhiko/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mitsuhiko/subscriptions",
                "organizations_url": "https://api.github.com/users/mitsuhiko/orgs",
                "repos_url": "https://api.github.com/users/mitsuhiko/repos",
                "events_url": "https://api.github.com/users/mitsuhiko/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mitsuhiko/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2016-05-22T10:20:31Z",
            "updated_at": "2016-05-22T10:20:31Z",
            "author_association": "MEMBER",
            "body": "I would close this and file it again against Werkzeug. This actually is also related to this issue: https://github.com/pallets/werkzeug/issues/185\n\n(As the flipping of the order of the decorator should not have made a difference)\n"
        }
    ]
}