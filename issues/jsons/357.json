{
    "url": "https://api.github.com/repos/pallets/flask/issues/357",
    "repository_url": "https://api.github.com/repos/pallets/flask",
    "labels_url": "https://api.github.com/repos/pallets/flask/issues/357/labels{/name}",
    "comments_url": "https://api.github.com/repos/pallets/flask/issues/357/comments",
    "events_url": "https://api.github.com/repos/pallets/flask/issues/357/events",
    "html_url": "https://github.com/pallets/flask/issues/357",
    "id": 2458209,
    "node_id": "MDU6SXNzdWUyNDU4MjA5",
    "number": 357,
    "title": "flask_autoindex fails with flask 0.8.0 but works with 0.7.0",
    "user": {
        "login": "davidthewatson",
        "id": 150892,
        "node_id": "MDQ6VXNlcjE1MDg5Mg==",
        "avatar_url": "https://avatars1.githubusercontent.com/u/150892?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidthewatson",
        "html_url": "https://github.com/davidthewatson",
        "followers_url": "https://api.github.com/users/davidthewatson/followers",
        "following_url": "https://api.github.com/users/davidthewatson/following{/other_user}",
        "gists_url": "https://api.github.com/users/davidthewatson/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/davidthewatson/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/davidthewatson/subscriptions",
        "organizations_url": "https://api.github.com/users/davidthewatson/orgs",
        "repos_url": "https://api.github.com/users/davidthewatson/repos",
        "events_url": "https://api.github.com/users/davidthewatson/events{/privacy}",
        "received_events_url": "https://api.github.com/users/davidthewatson/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "closed",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2011-12-06T03:33:16Z",
    "updated_at": "2012-03-12T20:52:27Z",
    "closed_at": "2012-03-12T20:52:27Z",
    "author_association": "NONE",
    "body": "I was having trouble with flask_autoindex which I documented here:\n\nhttps://github.com/sublee/flask-autoindex/issues/1\n\nThis was installed with:\n\nvirtualenv --no-site-packages env\nsource env/bin/activate\npip install flask_autoindex\n\nHere's the traceback\n\nTraceback (most recent call last):\nFile \"/Users/davidthewatson/github/flongo/env/lib/python2.7/site-packages/flask/app.py\", line 1518, in call\nreturn self.wsgi_app(environ, start_response)\nFile \"/Users/davidthewatson/github/flongo/env/lib/python2.7/site-packages/flask/app.py\", line 1506, in wsgi_app\nresponse = self.make_response(self.handle_exception(e))\nFile \"/Users/davidthewatson/github/flongo/env/lib/python2.7/site-packages/flask/app.py\", line 1504, in wsgi_app\nresponse = self.full_dispatch_request()\nFile \"/Users/davidthewatson/github/flongo/env/lib/python2.7/site-packages/flask/app.py\", line 1264, in full_dispatch_request\nrv = self.handle_user_exception(e)\nFile \"/Users/davidthewatson/github/flongo/env/lib/python2.7/site-packages/flask/app.py\", line 1262, in full_dispatch_request\nrv = self.dispatch_request()\nFile \"/Users/davidthewatson/github/flongo/env/lib/python2.7/site-packages/flask/app.py\", line 1248, in dispatch_request\nreturn self.view_functionsrule.endpoint\nFile \"/Users/davidthewatson/github/flongo/flaskengine/views.py\", line 31, in archive\nidx = AutoIndex(app, browse_root=curdir)\nFile \"/Users/davidthewatson/github/flongo/env/lib/python2.7/site-packages/flaskext/autoindex/init.py\", line 203, in init\n*_silk_options)\nFile \"/Users/davidthewatson/github/flongo/env/lib/python2.7/site-packages/flaskext/autoindex/init.py\", line 72, in init\nself.silk = Silk(self.base, *_silk_options)\nFile \"/Users/davidthewatson/github/flongo/env/lib/python2.7/site-packages/flaskext/silk/init.py\", line 40, in init\nself.silkicon = self.base.route(rule)(self.silkicon)\nFile \"/Users/davidthewatson/github/flongo/env/lib/python2.7/site-packages/flask/app.py\", line 923, in decorator\nself.add_url_rule(rule, endpoint, f, **options)\nFile \"/Users/davidthewatson/github/flongo/env/lib/python2.7/site-packages/flask/app.py\", line 56, in wrapper_func\nraise AssertionError('A setup function was called after the '\nAssertionError: A setup function was called after the first request was handled. This usually indicates a bug in the application where a module was not imported and decorators or other functionality was called too late.\nTo fix this make sure to import all your view modules, database models and everything related at a central place before the application starts serving requests.\n\nThe relevant code is:\n\nfrom flaskext.autoindex import AutoIndex\n\n@app.route('/archive/', methods=['GET'])\ndef archive(path='./archive'):\nidx = AutoIndex(app, browse_root=curdir)\nreturn idx.render_autoindex(path)\n\nHowever, this works fine when I pip uninstall flask and pip install -I flask==0.7.0. I'm not sure where the bug is, but I thought I'd mention it in case I did something wrong or it can be resolved such that the default pip installed version will work in virtualenv.\n\nThanks.\n",
    "comments_inline": [
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/4461019",
            "html_url": "https://github.com/pallets/flask/issues/357#issuecomment-4461019",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/357",
            "id": 4461019,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NjEwMTk=",
            "user": {
                "login": "wilsaj",
                "id": 303866,
                "node_id": "MDQ6VXNlcjMwMzg2Ng==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/303866?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/wilsaj",
                "html_url": "https://github.com/wilsaj",
                "followers_url": "https://api.github.com/users/wilsaj/followers",
                "following_url": "https://api.github.com/users/wilsaj/following{/other_user}",
                "gists_url": "https://api.github.com/users/wilsaj/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/wilsaj/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/wilsaj/subscriptions",
                "organizations_url": "https://api.github.com/users/wilsaj/orgs",
                "repos_url": "https://api.github.com/users/wilsaj/repos",
                "events_url": "https://api.github.com/users/wilsaj/events{/privacy}",
                "received_events_url": "https://api.github.com/users/wilsaj/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-03-12T20:33:10Z",
            "updated_at": "2012-03-12T20:33:10Z",
            "author_association": "CONTRIBUTOR",
            "body": "The issue on flask-autoindex has had some healthy discussion and it doesn't look like this is a Flask issue so I think it can be closed here.\n"
        },
        {
            "url": "https://api.github.com/repos/pallets/flask/issues/comments/4461421",
            "html_url": "https://github.com/pallets/flask/issues/357#issuecomment-4461421",
            "issue_url": "https://api.github.com/repos/pallets/flask/issues/357",
            "id": 4461421,
            "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NjE0MjE=",
            "user": {
                "login": "davidthewatson",
                "id": 150892,
                "node_id": "MDQ6VXNlcjE1MDg5Mg==",
                "avatar_url": "https://avatars1.githubusercontent.com/u/150892?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/davidthewatson",
                "html_url": "https://github.com/davidthewatson",
                "followers_url": "https://api.github.com/users/davidthewatson/followers",
                "following_url": "https://api.github.com/users/davidthewatson/following{/other_user}",
                "gists_url": "https://api.github.com/users/davidthewatson/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/davidthewatson/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/davidthewatson/subscriptions",
                "organizations_url": "https://api.github.com/users/davidthewatson/orgs",
                "repos_url": "https://api.github.com/users/davidthewatson/repos",
                "events_url": "https://api.github.com/users/davidthewatson/events{/privacy}",
                "received_events_url": "https://api.github.com/users/davidthewatson/received_events",
                "type": "User",
                "site_admin": false
            },
            "created_at": "2012-03-12T20:52:27Z",
            "updated_at": "2012-03-12T20:52:27Z",
            "author_association": "NONE",
            "body": "Closing since I'm no longer using flask-autoindex. Thanks for the heads-up.\n"
        }
    ]
}